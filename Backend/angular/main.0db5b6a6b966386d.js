"use strict";(self.webpackChunkEcommerce=self.webpackChunkEcommerce||[]).push([[179],{2011:(st,we,P)=>{P.d(we,{Dh:()=>le,GT:()=>re,cc:()=>Ie,hO:()=>Ue,on:()=>B,pX:()=>oe,xv:()=>ce});var d=P(4650),J=P(9260),O=P(2122);st=P.hmd(st);const se=["ngOnDestroy"],oe=(De,Ee,Pe,Se={})=>new Proxy(De,{get:(ve,Ae)=>Pe.runOutsideAngular(()=>{var Fe;if(De[Ae])return!(null===(Fe=Se?.spy)||void 0===Fe)&&Fe.get&&Se.spy.get(Ae,De[Ae]),De[Ae];if(se.indexOf(Ae)>-1)return()=>{};const Re=Ee.toPromise().then(V=>{const ye=V&&V[Ae];return"function"==typeof ye?ye.bind(V):ye&&ye.then?ye.then(q=>Pe.run(()=>q)):Pe.run(()=>ye)});return new Proxy(()=>{},{get:(V,ye)=>Re[ye],apply:(V,ye,q)=>Re.then(K=>{var ie;const te=K&&K(...q);return!(null===(ie=Se?.spy)||void 0===ie)&&ie.apply&&Se.spy.apply(Ae,q,te),te})})})}),re=(De,Ee)=>{Ee.forEach(Pe=>{Object.getOwnPropertyNames(Pe.prototype||Pe).forEach(Se=>{Object.defineProperty(De.prototype,Se,Object.getOwnPropertyDescriptor(Pe.prototype||Pe,Se))})})};class fe{constructor(Ee){return Ee}}const le=new d.OlP("angularfire2.app.options"),ce=new d.OlP("angularfire2.app.name");function B(De,Ee,Pe){const ve="object"==typeof Pe&&Pe||{};ve.name=ve.name||"string"==typeof Pe&&Pe||"[DEFAULT]";const Fe=J.Z.apps.filter(Re=>Re&&Re.name===ve.name)[0]||Ee.runOutsideAngular(()=>J.Z.initializeApp(De,ve));try{JSON.stringify(De)!==JSON.stringify(Fe.options)&&j("error",`${Fe.name} Firebase App already initialized with different options${st.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new fe(Fe)}const j=(De,...Ee)=>{(0,d.X6Q)()&&typeof console<"u"&&console[De](...Ee)},W={provide:fe,useFactory:B,deps:[le,d.R0b,[new d.FiY,ce]]};let Ue=(()=>{class De{constructor(Pe){J.Z.registerVersion("angularfire",O.q4.full,"core"),J.Z.registerVersion("angularfire",O.q4.full,"app-compat"),J.Z.registerVersion("angular",d.q4F.full,Pe.toString())}static initializeApp(Pe,Se){return{ngModule:De,providers:[{provide:le,useValue:Pe},{provide:ce,useValue:Se}]}}}return De.\u0275fac=function(Pe){return new(Pe||De)(d.LFG(d.Lbi))},De.\u0275mod=d.oAB({type:De}),De.\u0275inj=d.cJS({providers:[W]}),De})();function Ie(De,Ee,Pe,Se,ve){const[,Ae,Fe]=globalThis.\u0275AngularfireInstanceCache.find(Re=>Re[0]===De)||[];if(Ae)return function $e(De,Ee){try{return De.toString()===Ee.toString()}catch{return De===Ee}}(ve,Fe)||(de("error",`${Ee} was already initialized on the ${Pe} Firebase App with different settings.${nt?" You may need to reload as Firebase is not HMR aware.":""}`),de("warn",{is:ve,was:Fe})),Ae;{const Re=Se();return globalThis.\u0275AngularfireInstanceCache.push([De,Re,ve]),Re}}const nt=!!st.hot,de=(De,...Ee)=>{(0,d.X6Q)()&&typeof console<"u"&&console[De](...Ee)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2122:(st,we,P)=>{P.d(we,{q4:()=>ca,iC:()=>da,HU:()=>_h,vb:()=>Gi,JM:()=>Ut});var d=P(4650),J=P(259),O=P(5861),se=P(9681),oe=P(2090),re=P(4859),fe=P(1877),le=P(8766);const ce="@firebase/installations",B="0.6.1",W=`w:${B}`,Ue="FIS_v2",Ee=new oe.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Pe(I){return I instanceof oe.ZR&&I.code.includes("request-failed")}function Se({projectId:I}){return`https://firebaseinstallations.googleapis.com/v1/projects/${I}/installations`}function ve(I){return{token:I.token,requestStatus:2,expiresIn:K(I.expiresIn),creationTime:Date.now()}}function Ae(I,b){return Fe.apply(this,arguments)}function Fe(){return(Fe=(0,O.Z)(function*(I,b){const F=(yield b.json()).error;return Ee.create("request-failed",{requestName:I,serverCode:F.code,serverMessage:F.message,serverStatus:F.status})})).apply(this,arguments)}function Re({apiKey:I}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I})}function V(I,{refreshToken:b}){const M=Re(I);return M.append("Authorization",function ie(I){return`${Ue} ${I}`}(b)),M}function ye(I){return q.apply(this,arguments)}function q(){return(q=(0,O.Z)(function*(I){const b=yield I();return b.status>=500&&b.status<600?I():b})).apply(this,arguments)}function K(I){return Number(I.replace("s","000"))}function te(I,b){return Le.apply(this,arguments)}function Le(){return(Le=(0,O.Z)(function*({appConfig:I,heartbeatServiceProvider:b},{fid:M}){const F=Se(I),Z=Re(I),Q=b.getImmediate({optional:!0});if(Q){const tt=yield Q.getHeartbeatsHeader();tt&&Z.append("x-firebase-client",tt)}const Ye={method:"POST",headers:Z,body:JSON.stringify({fid:M,authVersion:Ue,appId:I.appId,sdkVersion:W})},rt=yield ye(()=>fetch(F,Ye));if(rt.ok){const tt=yield rt.json();return{fid:tt.fid||M,registrationStatus:2,refreshToken:tt.refreshToken,authToken:ve(tt.authToken)}}throw yield Ae("Create Installation",rt)})).apply(this,arguments)}function Ne(I){return new Promise(b=>{setTimeout(b,I)})}const Yt=/^[cdef][\w-]{21}$/;function Mt(){try{const I=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(I),I[0]=112+I[0]%16;const M=function kt(I){return function ot(I){return btoa(String.fromCharCode(...I)).replace(/\+/g,"-").replace(/\//g,"_")}(I).substr(0,22)}(I);return Yt.test(M)?M:""}catch{return""}}function ct(I){return`${I.appName}!${I.appId}`}const Kt=new Map;function ar(I,b){const M=ct(I);fn(M,b),function Jr(I,b){const M=function Ir(){return!Pr&&"BroadcastChannel"in self&&(Pr=new BroadcastChannel("[Firebase] FID Change"),Pr.onmessage=I=>{fn(I.data.key,I.data.fid)}),Pr}();M&&M.postMessage({key:I,fid:b}),function Dr(){0===Kt.size&&Pr&&(Pr.close(),Pr=null)}()}(M,b)}function fn(I,b){const M=Kt.get(I);if(M)for(const F of M)F(b)}let Pr=null;const yi="firebase-installations-store";let Cr=null;function Fs(){return Cr||(Cr=(0,le.X3)("firebase-installations-database",1,{upgrade:(I,b)=>{0===b&&I.createObjectStore(yi)}})),Cr}function un(I,b){return kr.apply(this,arguments)}function kr(){return(kr=(0,O.Z)(function*(I,b){const M=ct(I),Z=(yield Fs()).transaction(yi,"readwrite"),Q=Z.objectStore(yi),be=yield Q.get(M);return yield Q.put(b,M),yield Z.done,(!be||be.fid!==b.fid)&&ar(I,b.fid),b})).apply(this,arguments)}function lt(I){return Zi.apply(this,arguments)}function Zi(){return(Zi=(0,O.Z)(function*(I){const b=ct(I),F=(yield Fs()).transaction(yi,"readwrite");yield F.objectStore(yi).delete(b),yield F.done})).apply(this,arguments)}function vi(I,b){return mn.apply(this,arguments)}function mn(){return(mn=(0,O.Z)(function*(I,b){const M=ct(I),Z=(yield Fs()).transaction(yi,"readwrite"),Q=Z.objectStore(yi),be=yield Q.get(M),Ye=b(be);return void 0===Ye?yield Q.delete(M):yield Q.put(Ye,M),yield Z.done,Ye&&(!be||be.fid!==Ye.fid)&&ar(I,Ye.fid),Ye})).apply(this,arguments)}function br(I){return fs.apply(this,arguments)}function fs(){return(fs=(0,O.Z)(function*(I){let b;const M=yield vi(I.appConfig,F=>{const Z=Ct(F),Q=ht(I,Z);return b=Q.registrationPromise,Q.installationEntry});return""===M.fid?{installationEntry:yield b}:{installationEntry:M,registrationPromise:b}})).apply(this,arguments)}function Ct(I){return ur(I||{fid:Mt(),registrationStatus:0})}function ht(I,b){if(0===b.registrationStatus){if(!navigator.onLine)return{installationEntry:b,registrationPromise:Promise.reject(Ee.create("app-offline"))};const M={fid:b.fid,registrationStatus:1,registrationTime:Date.now()},F=function mt(I,b){return Ki.apply(this,arguments)}(I,M);return{installationEntry:M,registrationPromise:F}}return 1===b.registrationStatus?{installationEntry:b,registrationPromise:Dn(I)}:{installationEntry:b}}function Ki(){return(Ki=(0,O.Z)(function*(I,b){try{const M=yield te(I,b);return un(I.appConfig,M)}catch(M){throw Pe(M)&&409===M.customData.serverCode?yield lt(I.appConfig):yield un(I.appConfig,{fid:b.fid,registrationStatus:0}),M}})).apply(this,arguments)}function Dn(I){return yn.apply(this,arguments)}function yn(){return(yn=(0,O.Z)(function*(I){let b=yield _i(I.appConfig);for(;1===b.registrationStatus;)yield Ne(100),b=yield _i(I.appConfig);if(0===b.registrationStatus){const{installationEntry:M,registrationPromise:F}=yield br(I);return F||M}return b})).apply(this,arguments)}function _i(I){return vi(I,b=>{if(!b)throw Ee.create("installation-not-found");return ur(b)})}function ur(I){return function jo(I){return 1===I.registrationStatus&&I.registrationTime+1e4<Date.now()}(I)?{fid:I.fid,registrationStatus:0}:I}function Xt(I,b){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,O.Z)(function*({appConfig:I,heartbeatServiceProvider:b},M){const F=zt(I,M),Z=V(I,M),Q=b.getImmediate({optional:!0});if(Q){const tt=yield Q.getHeartbeatsHeader();tt&&Z.append("x-firebase-client",tt)}const Ye={method:"POST",headers:Z,body:JSON.stringify({installation:{sdkVersion:W,appId:I.appId}})},rt=yield ye(()=>fetch(F,Ye));if(rt.ok)return ve(yield rt.json());throw yield Ae("Generate Auth Token",rt)})).apply(this,arguments)}function zt(I,{fid:b}){return`${Se(I)}/${b}/authTokens:generate`}function cr(I){return ki.apply(this,arguments)}function ki(){return(ki=(0,O.Z)(function*(I,b=!1){let M;const F=yield vi(I.appConfig,Q=>{if(!xt(Q))throw Ee.create("not-registered");const be=Q.authToken;if(!b&&U(be))return Q;if(1===be.requestStatus)return M=Be(I,b),Q;{if(!navigator.onLine)throw Ee.create("app-offline");const Ye=z(Q);return M=vt(I,Ye),Ye}});return M?yield M:F.authToken})).apply(this,arguments)}function Be(I,b){return _e.apply(this,arguments)}function _e(){return(_e=(0,O.Z)(function*(I,b){let M=yield Ke(I.appConfig);for(;1===M.authToken.requestStatus;)yield Ne(100),M=yield Ke(I.appConfig);const F=M.authToken;return 0===F.requestStatus?cr(I,b):F})).apply(this,arguments)}function Ke(I){return vi(I,b=>{if(!xt(b))throw Ee.create("not-registered");return function pe(I){return 1===I.requestStatus&&I.requestTime+1e4<Date.now()}(b.authToken)?Object.assign(Object.assign({},b),{authToken:{requestStatus:0}}):b})}function vt(I,b){return Et.apply(this,arguments)}function Et(){return(Et=(0,O.Z)(function*(I,b){try{const M=yield Xt(I,b),F=Object.assign(Object.assign({},b),{authToken:M});return yield un(I.appConfig,F),M}catch(M){if(!Pe(M)||401!==M.customData.serverCode&&404!==M.customData.serverCode){const F=Object.assign(Object.assign({},b),{authToken:{requestStatus:0}});yield un(I.appConfig,F)}else yield lt(I.appConfig);throw M}})).apply(this,arguments)}function xt(I){return void 0!==I&&2===I.registrationStatus}function U(I){return 2===I.requestStatus&&!function L(I){const b=Date.now();return b<I.creationTime||I.creationTime+I.expiresIn<b+36e5}(I)}function z(I){const b={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},I),{authToken:b})}function Je(){return(Je=(0,O.Z)(function*(I){const b=I,{installationEntry:M,registrationPromise:F}=yield br(b);return F?F.catch(console.error):cr(b).catch(console.error),M.fid})).apply(this,arguments)}function Gt(){return(Gt=(0,O.Z)(function*(I,b=!1){const M=I;return yield vn(M),(yield cr(M,b)).token})).apply(this,arguments)}function vn(I){return pt.apply(this,arguments)}function pt(){return(pt=(0,O.Z)(function*(I){const{registrationPromise:b}=yield br(I);b&&(yield b)})).apply(this,arguments)}function Na(I){return Ee.create("missing-app-config-values",{valueName:I})}const Hu="installations",_n=I=>{const b=I.getProvider("app").getImmediate(),M=function Ho(I){if(!I||!I.options)throw Na("App Configuration");if(!I.name)throw Na("App Name");const b=["projectId","apiKey","appId"];for(const M of b)if(!I.options[M])throw Na(M);return{appName:I.name,projectId:I.options.projectId,apiKey:I.options.apiKey,appId:I.options.appId}}(b);return{app:b,appConfig:M,heartbeatServiceProvider:(0,se._getProvider)(b,"heartbeat"),_delete:()=>Promise.resolve()}},dl=I=>{const b=I.getProvider("app").getImmediate(),M=(0,se._getProvider)(b,Hu).getImmediate();return{getId:()=>function ee(I){return Je.apply(this,arguments)}(M),getToken:Z=>function Rt(I){return Gt.apply(this,arguments)}(M,Z)}};(function Gu(){(0,se._registerComponent)(new re.wA(Hu,_n,"PUBLIC")),(0,se._registerComponent)(new re.wA("installations-internal",dl,"PRIVATE"))})(),(0,se.registerVersion)(ce,B),(0,se.registerVersion)(ce,B,"esm2017");const Go="@firebase/remote-config",On=new oe.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class fo{constructor(b,M,F,Z){this.client=b,this.storage=M,this.storageCache=F,this.logger=Z}isCachedDataFresh(b,M){if(!M)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const F=Date.now()-M,Z=F<=b;return this.logger.debug(`Config fetch cache check. Cache age millis: ${F}. Cache max age millis (minimumFetchIntervalMillis setting): ${b}. Is cache hit: ${Z}.`),Z}fetch(b){var M=this;return(0,O.Z)(function*(){const[F,Z]=yield Promise.all([M.storage.getLastSuccessfulFetchTimestampMillis(),M.storage.getLastSuccessfulFetchResponse()]);if(Z&&M.isCachedDataFresh(b.cacheMaxAgeMillis,F))return Z;b.eTag=Z&&Z.eTag;const Q=yield M.client.fetch(b),be=[M.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Q.status&&be.push(M.storage.setLastSuccessfulFetchResponse(Q)),yield Promise.all(be),Q})()}}function Xr(I=navigator){return I.languages&&I.languages[0]||I.language}class ps{constructor(b,M,F,Z,Q,be){this.firebaseInstallations=b,this.sdkVersion=M,this.namespace=F,this.projectId=Z,this.apiKey=Q,this.appId=be}fetch(b){var M=this;return(0,O.Z)(function*(){const[F,Z]=yield Promise.all([M.firebaseInstallations.getId(),M.firebaseInstallations.getToken()]),be=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${M.projectId}/namespaces/${M.namespace}:fetch?key=${M.apiKey}`,Ye={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":b.eTag||"*"},rt={sdk_version:M.sdkVersion,app_instance_id:F,app_instance_id_token:Z,app_id:M.appId,language_code:Xr()},tt={method:"POST",headers:Ye,body:JSON.stringify(rt)},It=fetch(be,tt),Dt=new Promise((fr,pr)=>{b.signal.addEventListener(()=>{const bs=new Error("The operation was aborted.");bs.name="AbortError",pr(bs)})});let hr;try{yield Promise.race([It,Dt]),hr=yield It}catch(fr){let pr="fetch-client-network";throw"AbortError"===fr?.name&&(pr="fetch-timeout"),On.create(pr,{originalErrorMessage:fr?.message})}let bn=hr.status;const xo=hr.headers.get("ETag")||void 0;let Ic,Cs;if(200===hr.status){let fr;try{fr=yield hr.json()}catch(pr){throw On.create("fetch-client-parse",{originalErrorMessage:pr?.message})}Ic=fr.entries,Cs=fr.state}if("INSTANCE_STATE_UNSPECIFIED"===Cs?bn=500:"NO_CHANGE"===Cs?bn=304:("NO_TEMPLATE"===Cs||"EMPTY_CONFIG"===Cs)&&(Ic={}),304!==bn&&200!==bn)throw On.create("fetch-status",{httpStatus:bn});return{status:bn,eTag:xo,config:Ic}})()}}class Mp{constructor(b,M){this.client=b,this.storage=M}fetch(b){var M=this;return(0,O.Z)(function*(){const F=(yield M.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return M.attemptFetch(b,F)})()}attemptFetch(b,{throttleEndTimeMillis:M,backoffCount:F}){var Z=this;return(0,O.Z)(function*(){yield function xn(I,b){return new Promise((M,F)=>{const Z=Math.max(b-Date.now(),0),Q=setTimeout(M,Z);I.addEventListener(()=>{clearTimeout(Q),F(On.create("fetch-throttle",{throttleEndTimeMillis:b}))})})}(b.signal,M);try{const Q=yield Z.client.fetch(b);return yield Z.storage.deleteThrottleMetadata(),Q}catch(Q){if(!function sn(I){if(!(I instanceof oe.ZR&&I.customData))return!1;const b=Number(I.customData.httpStatus);return 429===b||500===b||503===b||504===b}(Q))throw Q;const be={throttleEndTimeMillis:Date.now()+(0,oe.$s)(F),backoffCount:F+1};return yield Z.storage.setThrottleMetadata(be),Z.attemptFetch(b,be)}})()}}class po{constructor(b,M,F,Z,Q){this.app=b,this._client=M,this._storageCache=F,this._storage=Z,this._logger=Q,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Us(I,b){const M=I.target.error||void 0;return On.create(b,{originalErrorMessage:M&&M?.message})}const Tr="app_namespace_store";class Ei{constructor(b,M,F,Z=function Lr(){return new Promise((I,b)=>{try{const M=indexedDB.open("firebase_remote_config",1);M.onerror=F=>{b(Us(F,"storage-open"))},M.onsuccess=F=>{I(F.target.result)},M.onupgradeneeded=F=>{0===F.oldVersion&&F.target.result.createObjectStore(Tr,{keyPath:"compositeKey"})}}catch(M){b(On.create("storage-open",{originalErrorMessage:M?.message}))}})}()){this.appId=b,this.appName=M,this.namespace=F,this.openDbPromise=Z}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(b){return this.set("last_fetch_status",b)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(b){return this.set("last_successful_fetch_timestamp_millis",b)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(b){return this.set("last_successful_fetch_response",b)}getActiveConfig(){return this.get("active_config")}setActiveConfig(b){return this.set("active_config",b)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(b){return this.set("active_config_etag",b)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(b){return this.set("throttle_metadata",b)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(b){var M=this;return(0,O.Z)(function*(){const F=yield M.openDbPromise;return new Promise((Z,Q)=>{const Ye=F.transaction([Tr],"readonly").objectStore(Tr),rt=M.createCompositeKey(b);try{const tt=Ye.get(rt);tt.onerror=It=>{Q(Us(It,"storage-get"))},tt.onsuccess=It=>{const Dt=It.target.result;Z(Dt?Dt.value:void 0)}}catch(tt){Q(On.create("storage-get",{originalErrorMessage:tt?.message}))}})})()}set(b,M){var F=this;return(0,O.Z)(function*(){const Z=yield F.openDbPromise;return new Promise((Q,be)=>{const rt=Z.transaction([Tr],"readwrite").objectStore(Tr),tt=F.createCompositeKey(b);try{const It=rt.put({compositeKey:tt,value:M});It.onerror=Dt=>{be(Us(Dt,"storage-set"))},It.onsuccess=()=>{Q()}}catch(It){be(On.create("storage-set",{originalErrorMessage:It?.message}))}})})()}delete(b){var M=this;return(0,O.Z)(function*(){const F=yield M.openDbPromise;return new Promise((Z,Q)=>{const Ye=F.transaction([Tr],"readwrite").objectStore(Tr),rt=M.createCompositeKey(b);try{const tt=Ye.delete(rt);tt.onerror=It=>{Q(Us(It,"storage-delete"))},tt.onsuccess=()=>{Z()}}catch(tt){Q(On.create("storage-delete",{originalErrorMessage:tt?.message}))}})})()}createCompositeKey(b){return[this.appId,this.appName,this.namespace,b].join()}}class zo{constructor(b){this.storage=b}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var b=this;return(0,O.Z)(function*(){const M=b.storage.getLastFetchStatus(),F=b.storage.getLastSuccessfulFetchTimestampMillis(),Z=b.storage.getActiveConfig(),Q=yield M;Q&&(b.lastFetchStatus=Q);const be=yield F;be&&(b.lastSuccessfulFetchTimestampMillis=be);const Ye=yield Z;Ye&&(b.activeConfig=Ye)})()}setLastFetchStatus(b){return this.lastFetchStatus=b,this.storage.setLastFetchStatus(b)}setLastSuccessfulFetchTimestampMillis(b){return this.lastSuccessfulFetchTimestampMillis=b,this.storage.setLastSuccessfulFetchTimestampMillis(b)}setActiveConfig(b){return this.activeConfig=b,this.storage.setActiveConfig(b)}}function Wo(){return sh.apply(this,arguments)}function sh(){return(sh=(0,O.Z)(function*(){if(!(0,oe.hl)())return!1;try{return yield(0,oe.eu)()}catch{return!1}})).apply(this,arguments)}!function Ii(){(0,se._registerComponent)(new re.wA("remote-config",function I(b,{instanceIdentifier:M}){const F=b.getProvider("app").getImmediate(),Z=b.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw On.create("registration-window");if(!(0,oe.hl)())throw On.create("indexed-db-unavailable");const{projectId:Q,apiKey:be,appId:Ye}=F.options;if(!Q)throw On.create("registration-project-id");if(!be)throw On.create("registration-api-key");if(!Ye)throw On.create("registration-app-id");const rt=new Ei(Ye,F.name,M=M||"firebase"),tt=new zo(rt),It=new fe.Yd(Go);It.logLevel=fe.in.ERROR;const Dt=new ps(Z,se.SDK_VERSION,M,Q,be,Ye),hr=new Mp(Dt,rt),bn=new fo(hr,rt,tt,It),xo=new po(F,bn,tt,rt,It);return function rn(I){const b=(0,oe.m9)(I);b._initializePromise||(b._initializePromise=b._storageCache.loadFromStorage().then(()=>{b._isInitializationComplete=!0}))}(xo),xo},"PUBLIC").setMultipleInstances(!0)),(0,se.registerVersion)(Go,"0.4.1"),(0,se.registerVersion)(Go,"0.4.1","esm2017")}();const zu="/firebase-messaging-sw.js",Qi="/firebase-cloud-messaging-push-scope",Bs="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",pl="google.c.a.c_id",oh="google.c.a.c_l",Wu="google.c.a.ts",gl="google.c.a.e";var ka=(()=>{return(I=ka||(ka={})).PUSH_RECEIVED="push-received",I.NOTIFICATION_CLICKED="notification-clicked",ka;var I})();function Ur(I){const b=new Uint8Array(I);return btoa(String.fromCharCode(...b)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function ml(I){const M=(I+"=".repeat((4-I.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),F=atob(M),Z=new Uint8Array(F.length);for(let Q=0;Q<F.length;++Q)Z[Q]=F.charCodeAt(Q);return Z}const Zu="fcm_token_details_db",Sr="fcm_token_object_Store";function vl(I){return Ku.apply(this,arguments)}function Ku(){return Ku=(0,O.Z)(function*(I){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Q=>Q.name).includes(Zu))return null;let b=null;return(yield(0,le.X3)(Zu,5,{upgrade:(F=(0,O.Z)(function*(Z,Q,be,Ye){var rt;if(Q<2||!Z.objectStoreNames.contains(Sr))return;const tt=Ye.objectStore(Sr),It=yield tt.index("fcmSenderId").get(I);if(yield tt.clear(),It)if(2===Q){const Dt=It;if(!Dt.auth||!Dt.p256dh||!Dt.endpoint)return;b={token:Dt.fcmToken,createTime:null!==(rt=Dt.createTime)&&void 0!==rt?rt:Date.now(),subscriptionOptions:{auth:Dt.auth,p256dh:Dt.p256dh,endpoint:Dt.endpoint,swScope:Dt.swScope,vapidKey:"string"==typeof Dt.vapidKey?Dt.vapidKey:Ur(Dt.vapidKey)}}}else if(3===Q){const Dt=It;b={token:Dt.fcmToken,createTime:Dt.createTime,subscriptionOptions:{auth:Ur(Dt.auth),p256dh:Ur(Dt.p256dh),endpoint:Dt.endpoint,swScope:Dt.swScope,vapidKey:Ur(Dt.vapidKey)}}}else if(4===Q){const Dt=It;b={token:Dt.fcmToken,createTime:Dt.createTime,subscriptionOptions:{auth:Ur(Dt.auth),p256dh:Ur(Dt.p256dh),endpoint:Dt.endpoint,swScope:Dt.swScope,vapidKey:Ur(Dt.vapidKey)}}}}),function(Q,be,Ye,rt){return F.apply(this,arguments)})})).close(),yield(0,le.Lj)(Zu),yield(0,le.Lj)("fcm_vapid_details_db"),yield(0,le.Lj)("undefined"),ah(b)?b:null;var F}),Ku.apply(this,arguments)}function ah(I){if(!I||!I.subscriptionOptions)return!1;const{subscriptionOptions:b}=I;return"number"==typeof I.createTime&&I.createTime>0&&"string"==typeof I.token&&I.token.length>0&&"string"==typeof b.auth&&b.auth.length>0&&"string"==typeof b.p256dh&&b.p256dh.length>0&&"string"==typeof b.endpoint&&b.endpoint.length>0&&"string"==typeof b.swScope&&b.swScope.length>0&&"string"==typeof b.vapidKey&&b.vapidKey.length>0}const gs="firebase-messaging-store";let Ko=null;function $s(){return Ko||(Ko=(0,le.X3)("firebase-messaging-database",1,{upgrade:(I,b)=>{0===b&&I.createObjectStore(gs)}})),Ko}function Fa(I){return La.apply(this,arguments)}function La(){return(La=(0,O.Z)(function*(I){const b=Ua(I),F=yield(yield $s()).transaction(gs).objectStore(gs).get(b);if(F)return F;{const Z=yield vl(I.appConfig.senderId);if(Z)return yield ms(I,Z),Z}})).apply(this,arguments)}function ms(I,b){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,O.Z)(function*(I,b){const M=Ua(I),Z=(yield $s()).transaction(gs,"readwrite");return yield Z.objectStore(gs).put(b,M),yield Z.done,b})).apply(this,arguments)}function Va(I){return go.apply(this,arguments)}function go(){return(go=(0,O.Z)(function*(I){const b=Ua(I),F=(yield $s()).transaction(gs,"readwrite");yield F.objectStore(gs).delete(b),yield F.done})).apply(this,arguments)}function Ua({appConfig:I}){return I.appId}const Cn=new oe.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Qo(I,b){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,O.Z)(function*(I,b){const M=yield ys(I),F=Jo(b),Z={method:"POST",headers:M,body:JSON.stringify(F)};let Q;try{Q=yield(yield fetch(yo(I.appConfig),Z)).json()}catch(be){throw Cn.create("token-subscribe-failed",{errorInfo:be?.toString()})}if(Q.error)throw Cn.create("token-subscribe-failed",{errorInfo:Q.error.message});if(!Q.token)throw Cn.create("token-subscribe-no-token");return Q.token})).apply(this,arguments)}function mo(I,b){return Hs.apply(this,arguments)}function Hs(){return(Hs=(0,O.Z)(function*(I,b){const M=yield ys(I),F=Jo(b.subscriptionOptions),Z={method:"PATCH",headers:M,body:JSON.stringify(F)};let Q;try{Q=yield(yield fetch(`${yo(I.appConfig)}/${b.token}`,Z)).json()}catch(be){throw Cn.create("token-update-failed",{errorInfo:be?.toString()})}if(Q.error)throw Cn.create("token-update-failed",{errorInfo:Q.error.message});if(!Q.token)throw Cn.create("token-update-no-token");return Q.token})).apply(this,arguments)}function Jn(I,b){return wl.apply(this,arguments)}function wl(){return(wl=(0,O.Z)(function*(I,b){const F={method:"DELETE",headers:yield ys(I)};try{const Q=yield(yield fetch(`${yo(I.appConfig)}/${b}`,F)).json();if(Q.error)throw Cn.create("token-unsubscribe-failed",{errorInfo:Q.error.message})}catch(Z){throw Cn.create("token-unsubscribe-failed",{errorInfo:Z?.toString()})}})).apply(this,arguments)}function yo({projectId:I}){return`https://fcmregistrations.googleapis.com/v1/projects/${I}/registrations`}function ys(I){return qn.apply(this,arguments)}function qn(){return(qn=(0,O.Z)(function*({appConfig:I,installations:b}){const M=yield b.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I.apiKey,"x-goog-firebase-installations-auth":`FIS ${M}`})})).apply(this,arguments)}function Jo({p256dh:I,auth:b,endpoint:M,vapidKey:F}){const Z={web:{endpoint:M,auth:b,p256dh:I}};return F!==Bs&&(Z.web.applicationPubKey=F),Z}const Xo=6048e5;function Ba(I){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,O.Z)(function*(I){const b=yield Qu(I.swRegistration,I.vapidKey),M={vapidKey:I.vapidKey,swScope:I.swRegistration.scope,endpoint:b.endpoint,auth:Ur(b.getKey("auth")),p256dh:Ur(b.getKey("p256dh"))},F=yield Fa(I.firebaseDependencies);if(F){if(Ha(F.subscriptionOptions,M))return Date.now()>=F.createTime+Xo?bt(I,{token:F.token,createTime:Date.now(),subscriptionOptions:M}):F.token;try{yield Jn(I.firebaseDependencies,F.token)}catch(Z){console.warn(Z)}return Yu(I.firebaseDependencies,M)}return Yu(I.firebaseDependencies,M)})).apply(this,arguments)}function ea(I){return ta.apply(this,arguments)}function ta(){return(ta=(0,O.Z)(function*(I){const b=yield Fa(I.firebaseDependencies);b&&(yield Jn(I.firebaseDependencies,b.token),yield Va(I.firebaseDependencies));const M=yield I.swRegistration.pushManager.getSubscription();return!M||M.unsubscribe()})).apply(this,arguments)}function bt(I,b){return ja.apply(this,arguments)}function ja(){return(ja=(0,O.Z)(function*(I,b){try{const M=yield mo(I.firebaseDependencies,b),F=Object.assign(Object.assign({},b),{token:M,createTime:Date.now()});return yield ms(I.firebaseDependencies,F),M}catch(M){throw yield ea(I),M}})).apply(this,arguments)}function Yu(I,b){return $a.apply(this,arguments)}function $a(){return($a=(0,O.Z)(function*(I,b){const F={token:yield Qo(I,b),createTime:Date.now(),subscriptionOptions:b};return yield ms(I,F),F.token})).apply(this,arguments)}function Qu(I,b){return El.apply(this,arguments)}function El(){return(El=(0,O.Z)(function*(I,b){return(yield I.pushManager.getSubscription())||I.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:ml(b)})})).apply(this,arguments)}function Ha(I,b){return b.vapidKey===I.vapidKey&&b.endpoint===I.endpoint&&b.auth===I.auth&&b.p256dh===I.p256dh}function Nn(I){const b={from:I.from,collapseKey:I.collapse_key,messageId:I.fcmMessageId};return function Il(I,b){if(!b.notification)return;I.notification={};const M=b.notification.title;M&&(I.notification.title=M);const F=b.notification.body;F&&(I.notification.body=F);const Z=b.notification.image;Z&&(I.notification.image=Z);const Q=b.notification.icon;Q&&(I.notification.icon=Q)}(b,I),function Ce(I,b){!b.data||(I.data=b.data)}(b,I),function Zt(I,b){var M,F,Z,Q,be;if(!(b.fcmOptions||null!==(M=b.notification)&&void 0!==M&&M.click_action))return;I.fcmOptions={};const Ye=null!==(Z=null===(F=b.fcmOptions)||void 0===F?void 0:F.link)&&void 0!==Z?Z:null===(Q=b.notification)||void 0===Q?void 0:Q.click_action;Ye&&(I.fcmOptions.link=Ye);const rt=null===(be=b.fcmOptions)||void 0===be?void 0:be.analytics_label;rt&&(I.fcmOptions.analyticsLabel=rt)}(b,I),b}function Ju(I){return"object"==typeof I&&!!I&&pl in I}function Dl(I,b){const M=[];for(let F=0;F<I.length;F++)M.push(I.charAt(F)),F<b.length&&M.push(b.charAt(F));return M.join("")}function vo(I){return Cn.create("missing-app-config-values",{valueName:I})}Dl("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Dl("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Ga{constructor(b,M,F){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Z=function Xn(I){if(!I||!I.options)throw vo("App Configuration Object");if(!I.name)throw vo("App Name");const b=["projectId","apiKey","appId","messagingSenderId"],{options:M}=I;for(const F of b)if(!M[F])throw vo(F);return{appName:I.name,projectId:M.projectId,apiKey:M.apiKey,appId:M.appId,senderId:M.messagingSenderId}}(b);this.firebaseDependencies={app:b,appConfig:Z,installations:M,analyticsProvider:F}}_delete(){return Promise.resolve()}}function ti(I){return qa.apply(this,arguments)}function qa(){return(qa=(0,O.Z)(function*(I){try{I.swRegistration=yield navigator.serviceWorker.register(zu,{scope:Qi}),I.swRegistration.update().catch(()=>{})}catch(b){throw Cn.create("failed-service-worker-registration",{browserErrorMessage:b?.message})}})).apply(this,arguments)}function _o(I,b){return Xu.apply(this,arguments)}function Xu(){return(Xu=(0,O.Z)(function*(I,b){if(!b&&!I.swRegistration&&(yield ti(I)),b||!I.swRegistration){if(!(b instanceof ServiceWorkerRegistration))throw Cn.create("invalid-sw-registration");I.swRegistration=b}})).apply(this,arguments)}function Cl(I,b){return wo.apply(this,arguments)}function wo(){return(wo=(0,O.Z)(function*(I,b){b?I.vapidKey=b:I.vapidKey||(I.vapidKey=Bs)})).apply(this,arguments)}function Bi(){return(Bi=(0,O.Z)(function*(I,b){if(!navigator)throw Cn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Cn.create("permission-blocked");return yield Cl(I,b?.vapidKey),yield _o(I,b?.serviceWorkerRegistration),Ba(I)})).apply(this,arguments)}function ec(I,b,M){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,O.Z)(function*(I,b,M){const F=ni(b);(yield I.firebaseDependencies.analyticsProvider.get()).logEvent(F,{message_id:M[pl],message_name:M[oh],message_time:M[Wu],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function ni(I){switch(I){case ka.NOTIFICATION_CLICKED:return"notification_open";case ka.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function tc(){return(tc=(0,O.Z)(function*(I,b){const M=b.data;if(!M.isFirebaseMessaging)return;I.onMessageHandler&&M.messageType===ka.PUSH_RECEIVED&&("function"==typeof I.onMessageHandler?I.onMessageHandler(Nn(M)):I.onMessageHandler.next(Nn(M)));const F=M.data;Ju(F)&&"1"===F[gl]&&(yield ec(I,M.messageType,F))})).apply(this,arguments)}const nc="@firebase/messaging",bl=I=>{const b=new Ga(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),I.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",M=>function xp(I,b){return tc.apply(this,arguments)}(b,M)),b},Gs=I=>{const b=I.getProvider("messaging").getImmediate();return{getToken:F=>function wn(I,b){return Bi.apply(this,arguments)}(b,F)}};function rc(){return Sl.apply(this,arguments)}function Sl(){return(Sl=(0,O.Z)(function*(){try{yield(0,oe.eu)()}catch{return!1}return typeof window<"u"&&(0,oe.hl)()&&(0,oe.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Tl(){(0,se._registerComponent)(new re.wA("messaging",bl,"PUBLIC")),(0,se._registerComponent)(new re.wA("messaging-internal",Gs,"PRIVATE")),(0,se.registerVersion)(nc,"0.12.1"),(0,se.registerVersion)(nc,"0.12.1","esm2017")}();const ic="analytics",Br="firebase_id",Eo="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",sc="https://www.googletagmanager.com/gtag/js",er=new fe.Yd("@firebase/analytics");function lh(I){return Promise.all(I.map(b=>b.catch(M=>M)))}function Op(I,b){const M=document.createElement("script");M.src=`${sc}?l=${I}&id=${b}`,M.async=!0,document.head.appendChild(M)}function vs(I,b,M,F,Z,Q){return ri.apply(this,arguments)}function ri(){return(ri=(0,O.Z)(function*(I,b,M,F,Z,Q){const be=F[Z];try{if(be)yield b[be];else{const rt=(yield lh(M)).find(tt=>tt.measurementId===Z);rt&&(yield b[rt.appId])}}catch(Ye){er.error(Ye)}I("config",Z,Q)})).apply(this,arguments)}function Za(I,b,M,F,Z){return Di.apply(this,arguments)}function Di(){return(Di=(0,O.Z)(function*(I,b,M,F,Z){try{let Q=[];if(Z&&Z.send_to){let be=Z.send_to;Array.isArray(be)||(be=[be]);const Ye=yield lh(M);for(const rt of be){const tt=Ye.find(Dt=>Dt.measurementId===rt),It=tt&&b[tt.appId];if(!It){Q=[];break}Q.push(It)}}0===Q.length&&(Q=Object.values(b)),yield Promise.all(Q),I("event",F,Z||{})}catch(Q){er.error(Q)}})).apply(this,arguments)}function Io(I){const b=window.document.getElementsByTagName("script");for(const M of Object.values(b))if(M.src&&M.src.includes(sc)&&M.src.includes(I))return M;return null}const ii=new oe.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),uc=new class ji{constructor(b={},M=1e3){this.throttleMetadata=b,this.intervalMillis=M}getThrottleMetadata(b){return this.throttleMetadata[b]}setThrottleMetadata(b,M){this.throttleMetadata[b]=M}deleteThrottleMetadata(b){delete this.throttleMetadata[b]}};function Ml(I){return new Headers({Accept:"application/json","x-goog-api-key":I})}function _s(I){return cc.apply(this,arguments)}function cc(){return(cc=(0,O.Z)(function*(I){var b;const{appId:M,apiKey:F}=I,Z={method:"GET",headers:Ml(F)},Q=Eo.replace("{app-id}",M),be=yield fetch(Q,Z);if(200!==be.status&&304!==be.status){let Ye="";try{const rt=yield be.json();null!==(b=rt.error)&&void 0!==b&&b.message&&(Ye=rt.error.message)}catch{}throw ii.create("config-fetch-failed",{httpStatus:be.status,responseMessage:Ye})}return be.json()})).apply(this,arguments)}function pn(I){return Do.apply(this,arguments)}function Do(){return(Do=(0,O.Z)(function*(I,b=uc,M){const{appId:F,apiKey:Z,measurementId:Q}=I.options;if(!F)throw ii.create("no-app-id");if(!Z){if(Q)return{measurementId:Q,appId:F};throw ii.create("no-api-key")}const be=b.getThrottleMetadata(F)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ye=new Ya;return setTimeout((0,O.Z)(function*(){Ye.abort()}),void 0!==M?M:6e4),Co({appId:F,apiKey:Z,measurementId:Q},be,Ye,b)})).apply(this,arguments)}function Co(I,b,M){return ws.apply(this,arguments)}function ws(){return(ws=(0,O.Z)(function*(I,{throttleEndTimeMillis:b,backoffCount:M},F,Z=uc){var Q;const{appId:be,measurementId:Ye}=I;try{yield Ka(F,b)}catch(rt){if(Ye)return er.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ye} provided in the "measurementId" field in the local Firebase config. [${rt?.message}]`),{appId:be,measurementId:Ye};throw rt}try{const rt=yield _s(I);return Z.deleteThrottleMetadata(be),rt}catch(rt){const tt=rt;if(!xl(tt)){if(Z.deleteThrottleMetadata(be),Ye)return er.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ye} provided in the "measurementId" field in the local Firebase config. [${tt?.message}]`),{appId:be,measurementId:Ye};throw rt}const It=503===Number(null===(Q=tt?.customData)||void 0===Q?void 0:Q.httpStatus)?(0,oe.$s)(M,Z.intervalMillis,30):(0,oe.$s)(M,Z.intervalMillis),Dt={throttleEndTimeMillis:Date.now()+It,backoffCount:M+1};return Z.setThrottleMetadata(be,Dt),er.debug(`Calling attemptFetch again in ${It} millis`),Co(I,Dt,F,Z)}})).apply(this,arguments)}function Ka(I,b){return new Promise((M,F)=>{const Z=Math.max(b-Date.now(),0),Q=setTimeout(M,Z);I.addEventListener(()=>{clearTimeout(Q),F(ii.create("fetch-throttle",{throttleEndTimeMillis:b}))})})}function xl(I){if(!(I instanceof oe.ZR&&I.customData))return!1;const b=Number(I.customData.httpStatus);return 429===b||500===b||503===b||504===b}class Ya{constructor(){this.listeners=[]}addEventListener(b){this.listeners.push(b)}abort(){this.listeners.forEach(b=>b())}}let Qa,zs;function Xi(){return(Xi=(0,O.Z)(function*(I,b,M,F,Z){if(Z&&Z.global)I("event",M,F);else{const Q=yield b;I("event",M,Object.assign(Object.assign({},F),{send_to:Q}))}})).apply(this,arguments)}function oa(I){zs=I}function tu(I){Qa=I}function dc(){return Rl.apply(this,arguments)}function Rl(){return(Rl=(0,O.Z)(function*(){if(!(0,oe.hl)())return er.warn(ii.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,oe.eu)()}catch(I){return er.warn(ii.create("indexeddb-unavailable",{errorInfo:I?.toString()}).message),!1}return!0})).apply(this,arguments)}function hc(){return(hc=(0,O.Z)(function*(I,b,M,F,Z,Q,be){var Ye;const rt=pn(I);rt.then(bn=>{M[bn.measurementId]=bn.appId,I.options.measurementId&&bn.measurementId!==I.options.measurementId&&er.warn(`The measurement ID in the local Firebase config (${I.options.measurementId}) does not match the measurement ID fetched from the server (${bn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(bn=>er.error(bn)),b.push(rt);const tt=dc().then(bn=>{if(bn)return F.getId()}),[It,Dt]=yield Promise.all([rt,tt]);Io(Q)||Op(Q,It.measurementId),zs&&(Z("consent","default",zs),oa(void 0)),Z("js",new Date);const hr=null!==(Ye=be?.config)&&void 0!==Ye?Ye:{};return hr.origin="firebase",hr.update=!0,null!=Dt&&(hr[Br]=Dt),Z("config",It.measurementId,hr),Qa&&(Z("set",Qa),tu(void 0)),It.measurementId})).apply(this,arguments)}class hh{constructor(b){this.app=b}_delete(){return delete Ci[this.app.options.appId],Promise.resolve()}}let Ci={},fc=[];const aa={};let nu,$i,bi="dataLayer",si=!1;function mc(I,b,M){!function gc(){const I=[];if((0,oe.ru)()&&I.push("This is a browser extension environment."),(0,oe.zI)()||I.push("Cookies are not available."),I.length>0){const b=I.map((F,Z)=>`(${Z+1}) ${F}`).join(" "),M=ii.create("invalid-analytics-context",{errorInfo:b});er.warn(M.message)}}();const F=I.options.appId;if(!F)throw ii.create("no-app-id");if(!I.options.apiKey){if(!I.options.measurementId)throw ii.create("no-api-key");er.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${I.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Ci[F])throw ii.create("already-exists",{id:F});if(!si){!function dh(I){let b=[];Array.isArray(window[I])?b=window[I]:window[I]=b}(bi);const{wrappedGtag:Q,gtagCore:be}=function Al(I,b,M,F,Z){let Q=function(...be){window[F].push(arguments)};return window[Z]&&"function"==typeof window[Z]&&(Q=window[Z]),window[Z]=function oc(I,b,M,F){function Q(){return(Q=(0,O.Z)(function*(be,Ye,rt){try{"event"===be?yield Za(I,b,M,Ye,rt):"config"===be?yield vs(I,b,M,F,Ye,rt):"consent"===be?I("consent","update",rt):I("set",Ye)}catch(tt){er.error(tt)}})).apply(this,arguments)}return function Z(be,Ye,rt){return Q.apply(this,arguments)}}(Q,I,b,M),{gtagCore:Q,wrappedGtag:window[Z]}}(Ci,fc,aa,bi,"gtag");$i=Q,nu=be,si=!0}return Ci[F]=function es(I,b,M,F,Z,Q,be){return hc.apply(this,arguments)}(I,fc,aa,b,nu,bi,M),new hh(I)}function Ol(){return Is.apply(this,arguments)}function Is(){return(Is=(0,O.Z)(function*(){if((0,oe.ru)()||!(0,oe.zI)()||!(0,oe.hl)())return!1;try{return yield(0,oe.eu)()}catch{return!1}})).apply(this,arguments)}const on="@firebase/analytics";!function kl(){(0,se._registerComponent)(new re.wA(ic,(b,{options:M})=>mc(b.getProvider("app").getImmediate(),b.getProvider("installations-internal").getImmediate(),M),"PUBLIC")),(0,se._registerComponent)(new re.wA("analytics-internal",function I(b){try{const M=b.getProvider(ic).getImmediate();return{logEvent:(F,Z,Q)=>function mh(I,b,M,F){I=(0,oe.m9)(I),function bo(I,b,M,F,Z){return Xi.apply(this,arguments)}($i,Ci[I.app.options.appId],b,M,F).catch(Z=>er.error(Z))}(M,F,Z,Q)}}catch(M){throw ii.create("interop-component-reg-failed",{reason:M})}},"PRIVATE")),(0,se.registerVersion)(on,"0.9.1"),(0,se.registerVersion)(on,"0.9.1","esm2017")}();var vc=P(4408),yh=P(7565);const Ll=new class Fl extends yh.v{}(class Cy extends vc.o{constructor(b,M){super(b,M),this.scheduler=b,this.work=M}schedule(b,M=0){return M>0?super.schedule(b,M):(this.delay=M,this.state=b,this.scheduler.flush(this),this)}execute(b,M){return M>0||this.closed?super.execute(b,M):this._execute(b,M)}requestAsyncId(b,M,F=0){return null!=F&&F>0||null==F&&this.delay>0?super.requestAsyncId(b,M,F):(b.flush(this),0)}});var vh=P(4986),wc=P(8505),dn=P(9468),iu=P(5363);const ca=new d.GfV("7.5.0"),Vl="__angularfire_symbol__analyticsIsSupportedValue",jr="__angularfire_symbol__analyticsIsSupported",Hi="__angularfire_symbol__remoteConfigIsSupportedValue",su="__angularfire_symbol__remoteConfigIsSupported",la="__angularfire_symbol__messagingIsSupportedValue",Ao="__angularfire_symbol__messagingIsSupported";function Ut(I,b,M){if(b){if(1===b.length)return b[0];const Q=b.filter(be=>be.app===M);if(1===Q.length)return Q[0]}return M.container.getProvider(I).getImmediate({optional:!0})}globalThis[jr]||(globalThis[jr]=Ol().then(I=>globalThis[Vl]=I).catch(()=>globalThis[Vl]=!1)),globalThis[Ao]||(globalThis[Ao]=rc().then(I=>globalThis[la]=I).catch(()=>globalThis[la]=!1)),globalThis[su]||(globalThis[su]=Wo().then(I=>globalThis[Hi]=I).catch(()=>globalThis[Hi]=!1));const Gi=(I,b)=>{const M=b?[b]:(0,J.C6)(),F=[];return M.forEach(Z=>{Z.container.getProvider(I).instances.forEach(be=>{F.includes(be)||F.push(be)})}),F};function We(){}class oi{constructor(b,M=Ll){this.zone=b,this.delegate=M}now(){return this.delegate.now()}schedule(b,M,F){const Z=this.zone;return this.delegate.schedule(function(be){Z.runGuarded(()=>{b.apply(this,[be])})},M,F)}}class ai{constructor(b){this.zone=b,this.task=null}call(b,M){const F=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",We,{},We,We)),M.pipe((0,wc.b)({next:F,complete:F,error:F})).subscribe(b).add(F)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let _h=(()=>{class I{constructor(M){this.ngZone=M,this.outsideAngular=M.runOutsideAngular(()=>new oi(Zone.current)),this.insideAngular=M.run(()=>new oi(Zone.current,vh.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return I.\u0275fac=function(M){return new(M||I)(d.LFG(d.R0b))},I.\u0275prov=d.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function ui(){const I=globalThis.\u0275AngularFireScheduler;if(!I)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return I}function da(I){return ui(),function Mo(I){return function(M){return(M=M.lift(new ai(I.ngZone))).pipe((0,dn.R)(I.outsideAngular),(0,iu.Q)(I.insideAngular))}}(ui())(I)}},2090:(st,we,P)=>{P.d(we,{$s:()=>Ke,BH:()=>ve,G6:()=>ot,L:()=>le,LL:()=>Kt,Pz:()=>Se,Sg:()=>Ae,UG:()=>V,US:()=>re,ZB:()=>j,ZR:()=>ct,aH:()=>Pe,b$:()=>K,eu:()=>an,hl:()=>Yt,jU:()=>ye,m9:()=>xt,ne:()=>fs,pd:()=>mn,r3:()=>hs,ru:()=>q,tV:()=>ce,uI:()=>Re,vZ:()=>un,w1:()=>te,xO:()=>Zi,xb:()=>Cr,z$:()=>Fe,zI:()=>Mt,zd:()=>vi});const se=function(U){const L=[];let z=0;for(let pe=0;pe<U.length;pe++){let ee=U.charCodeAt(pe);ee<128?L[z++]=ee:ee<2048?(L[z++]=ee>>6|192,L[z++]=63&ee|128):55296==(64512&ee)&&pe+1<U.length&&56320==(64512&U.charCodeAt(pe+1))?(ee=65536+((1023&ee)<<10)+(1023&U.charCodeAt(++pe)),L[z++]=ee>>18|240,L[z++]=ee>>12&63|128,L[z++]=ee>>6&63|128,L[z++]=63&ee|128):(L[z++]=ee>>12|224,L[z++]=ee>>6&63|128,L[z++]=63&ee|128)}return L},re={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(U,L){if(!Array.isArray(U))throw Error("encodeByteArray takes an array as a parameter");this.init_();const z=L?this.byteToCharMapWebSafe_:this.byteToCharMap_,pe=[];for(let ee=0;ee<U.length;ee+=3){const Je=U[ee],Rt=ee+1<U.length,Gt=Rt?U[ee+1]:0,vn=ee+2<U.length,pt=vn?U[ee+2]:0;let Ln=(15&Gt)<<2|pt>>6,co=63&pt;vn||(co=64,Rt||(Ln=64)),pe.push(z[Je>>2],z[(3&Je)<<4|Gt>>4],z[Ln],z[co])}return pe.join("")},encodeString(U,L){return this.HAS_NATIVE_SUPPORT&&!L?btoa(U):this.encodeByteArray(se(U),L)},decodeString(U,L){return this.HAS_NATIVE_SUPPORT&&!L?atob(U):function(U){const L=[];let z=0,pe=0;for(;z<U.length;){const ee=U[z++];if(ee<128)L[pe++]=String.fromCharCode(ee);else if(ee>191&&ee<224){const Je=U[z++];L[pe++]=String.fromCharCode((31&ee)<<6|63&Je)}else if(ee>239&&ee<365){const vn=((7&ee)<<18|(63&U[z++])<<12|(63&U[z++])<<6|63&U[z++])-65536;L[pe++]=String.fromCharCode(55296+(vn>>10)),L[pe++]=String.fromCharCode(56320+(1023&vn))}else{const Je=U[z++],Rt=U[z++];L[pe++]=String.fromCharCode((15&ee)<<12|(63&Je)<<6|63&Rt)}}return L.join("")}(this.decodeStringToByteArray(U,L))},decodeStringToByteArray(U,L){this.init_();const z=L?this.charToByteMapWebSafe_:this.charToByteMap_,pe=[];for(let ee=0;ee<U.length;){const Je=z[U.charAt(ee++)],Gt=ee<U.length?z[U.charAt(ee)]:0;++ee;const pt=ee<U.length?z[U.charAt(ee)]:64;++ee;const Vt=ee<U.length?z[U.charAt(ee)]:64;if(++ee,null==Je||null==Gt||null==pt||null==Vt)throw Error();pe.push(Je<<2|Gt>>4),64!==pt&&(pe.push(Gt<<4&240|pt>>2),64!==Vt&&pe.push(pt<<6&192|Vt))}return pe},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let U=0;U<this.ENCODED_VALS.length;U++)this.byteToCharMap_[U]=this.ENCODED_VALS.charAt(U),this.charToByteMap_[this.byteToCharMap_[U]]=U,this.byteToCharMapWebSafe_[U]=this.ENCODED_VALS_WEBSAFE.charAt(U),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[U]]=U,U>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(U)]=U,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(U)]=U)}}},le=function(U){return function(U){const L=se(U);return re.encodeByteArray(L,!0)}(U).replace(/\./g,"")},ce=function(U){try{return re.decodeString(U,!0)}catch(L){console.error("base64Decode failed: ",L)}return null};function j(U,L){if(!(L instanceof Object))return L;switch(L.constructor){case Date:return new Date(L.getTime());case Object:void 0===U&&(U={});break;case Array:U=[];break;default:return L}for(const z in L)!L.hasOwnProperty(z)||!W(z)||(U[z]=j(U[z],L[z]));return U}function W(U){return"__proto__"!==U}const de=()=>{try{return function Ue(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const U=process.env.__FIREBASE_DEFAULTS__;return U?JSON.parse(U):void 0})()||(()=>{if(typeof document>"u")return;let U;try{U=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const L=U&&ce(U[1]);return L&&JSON.parse(L)})()}catch(U){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${U}`)}},Pe=()=>{var U;return null===(U=de())||void 0===U?void 0:U.config},Se=U=>{var L;return null===(L=de())||void 0===L?void 0:L[`_${U}`]};class ve{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((L,z)=>{this.resolve=L,this.reject=z})}wrapCallback(L){return(z,pe)=>{z?this.reject(z):this.resolve(pe),"function"==typeof L&&(this.promise.catch(()=>{}),1===L.length?L(z):L(z,pe))}}}function Ae(U,L){if(U.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const pe=L||"demo-project",ee=U.iat||0,Je=U.sub||U.user_id;if(!Je)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Rt=Object.assign({iss:`https://securetoken.google.com/${pe}`,aud:pe,iat:ee,exp:ee+3600,auth_time:ee,sub:Je,user_id:Je,firebase:{sign_in_provider:"custom",identities:{}}},U);return[le(JSON.stringify({alg:"none",type:"JWT"})),le(JSON.stringify(Rt)),""].join(".")}function Fe(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Re(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Fe())}function V(){var U;const L=null===(U=de())||void 0===U?void 0:U.forceEnvironment;if("node"===L)return!0;if("browser"===L)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function ye(){return"object"==typeof self&&self.self===self}function q(){const U="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof U&&void 0!==U.id}function K(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function te(){const U=Fe();return U.indexOf("MSIE ")>=0||U.indexOf("Trident/")>=0}function ot(){return!V()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Yt(){try{return"object"==typeof indexedDB}catch{return!1}}function an(){return new Promise((U,L)=>{try{let z=!0;const pe="validate-browser-context-for-indexeddb-analytics-module",ee=self.indexedDB.open(pe);ee.onsuccess=()=>{ee.result.close(),z||self.indexedDB.deleteDatabase(pe),U(!0)},ee.onupgradeneeded=()=>{z=!1},ee.onerror=()=>{var Je;L((null===(Je=ee.error)||void 0===Je?void 0:Je.message)||"")}}catch(z){L(z)}})}function Mt(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class ct extends Error{constructor(L,z,pe){super(z),this.code=L,this.customData=pe,this.name="FirebaseError",Object.setPrototypeOf(this,ct.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Kt.prototype.create)}}class Kt{constructor(L,z,pe){this.service=L,this.serviceName=z,this.errors=pe}create(L,...z){const pe=z[0]||{},ee=`${this.service}/${L}`,Je=this.errors[L],Rt=Je?function ar(U,L){return U.replace(Er,(z,pe)=>{const ee=L[pe];return null!=ee?String(ee):`<${pe}?>`})}(Je,pe):"Error";return new ct(ee,`${this.serviceName}: ${Rt} (${ee}).`,pe)}}const Er=/\{\$([^}]+)}/g;function hs(U,L){return Object.prototype.hasOwnProperty.call(U,L)}function Cr(U){for(const L in U)if(Object.prototype.hasOwnProperty.call(U,L))return!1;return!0}function un(U,L){if(U===L)return!0;const z=Object.keys(U),pe=Object.keys(L);for(const ee of z){if(!pe.includes(ee))return!1;const Je=U[ee],Rt=L[ee];if(kr(Je)&&kr(Rt)){if(!un(Je,Rt))return!1}else if(Je!==Rt)return!1}for(const ee of pe)if(!z.includes(ee))return!1;return!0}function kr(U){return null!==U&&"object"==typeof U}function Zi(U){const L=[];for(const[z,pe]of Object.entries(U))Array.isArray(pe)?pe.forEach(ee=>{L.push(encodeURIComponent(z)+"="+encodeURIComponent(ee))}):L.push(encodeURIComponent(z)+"="+encodeURIComponent(pe));return L.length?"&"+L.join("&"):""}function vi(U){const L={};return U.replace(/^\?/,"").split("&").forEach(pe=>{if(pe){const[ee,Je]=pe.split("=");L[decodeURIComponent(ee)]=decodeURIComponent(Je)}}),L}function mn(U){const L=U.indexOf("?");if(!L)return"";const z=U.indexOf("#",L);return U.substring(L,z>0?z:void 0)}function fs(U,L){const z=new Ct(U,L);return z.subscribe.bind(z)}class Ct{constructor(L,z){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=z,this.task.then(()=>{L(this)}).catch(pe=>{this.error(pe)})}next(L){this.forEachObserver(z=>{z.next(L)})}error(L){this.forEachObserver(z=>{z.error(L)}),this.close(L)}complete(){this.forEachObserver(L=>{L.complete()}),this.close()}subscribe(L,z,pe){let ee;if(void 0===L&&void 0===z&&void 0===pe)throw new Error("Missing Observer.");ee=function mt(U,L){if("object"!=typeof U||null===U)return!1;for(const z of L)if(z in U&&"function"==typeof U[z])return!0;return!1}(L,["next","error","complete"])?L:{next:L,error:z,complete:pe},void 0===ee.next&&(ee.next=Ki),void 0===ee.error&&(ee.error=Ki),void 0===ee.complete&&(ee.complete=Ki);const Je=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ee.error(this.finalError):ee.complete()}catch{}}),this.observers.push(ee),Je}unsubscribeOne(L){void 0===this.observers||void 0===this.observers[L]||(delete this.observers[L],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(L){if(!this.finalized)for(let z=0;z<this.observers.length;z++)this.sendOne(z,L)}sendOne(L,z){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[L])try{z(this.observers[L])}catch(pe){typeof console<"u"&&console.error&&console.error(pe)}})}close(L){this.finalized||(this.finalized=!0,void 0!==L&&(this.finalError=L),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ki(){}function Ke(U,L=1e3,z=2){const pe=L*Math.pow(z,U),ee=Math.round(.5*pe*(Math.random()-.5)*2);return Math.min(144e5,pe+ee)}function xt(U){return U&&U._delegate?U._delegate:U}},6821:(st,we,P)=>{var d=P(4650);let J=null;function O(){return J}class oe{}const re=new d.OlP("DocumentToken");let fe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return function le(){return(0,d.LFG)(B)}()},providedIn:"platform"}),n})();const ce=new d.OlP("Location Initialized");let B=(()=>{class n extends fe{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,s){j()?this._history.pushState(t,r,s):this.location.hash=s}replaceState(t,r,s){j()?this._history.replaceState(t,r,s):this.location.hash=s}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(re))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function W(){return new B((0,d.LFG)(re))}()},providedIn:"platform"}),n})();function j(){return!!window.history.pushState}function Ue(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Ie(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function $e(n){return n&&"?"!==n[0]?"?"+n:n}let nt=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(De)},providedIn:"root"}),n})();const de=new d.OlP("appBaseHref");let De=(()=>{class n extends nt{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,d.f3M)(re).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Ue(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+$e(this._platformLocation.search),s=this._platformLocation.hash;return s&&t?`${r}${s}`:r}pushState(t,r,s,u){const l=this.prepareExternalUrl(s+$e(u));this._platformLocation.pushState(t,r,l)}replaceState(t,r,s,u){const l=this.prepareExternalUrl(s+$e(u));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(fe),d.LFG(de,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ee=(()=>{class n extends nt{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Ue(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,s,u){let l=this.prepareExternalUrl(s+$e(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,s,u){let l=this.prepareExternalUrl(s+$e(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(fe),d.LFG(de,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Pe=(()=>{class n{constructor(t){this._subject=new d.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function Fe(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(Ie(Ae(r))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+$e(r))}normalize(t){return n.stripTrailingSlash(function ve(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._basePath,Ae(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",s=null){this._locationStrategy.pushState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+$e(r)),s)}replaceState(t,r="",s=null){this._locationStrategy.replaceState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+$e(r)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(s=>s(t,r))}subscribe(t,r,s){return this._subject.subscribe({next:t,error:r,complete:s})}}return n.normalizeQueryParams=$e,n.joinWithSlash=Ue,n.stripTrailingSlash=Ie,n.\u0275fac=function(t){return new(t||n)(d.LFG(nt))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function Se(){return new Pe((0,d.LFG)(nt))}()},providedIn:"root"}),n})();function Ae(n){return n.replace(/\/index.html$/,"")}function Yn(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[s,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(s.trim()===e)return decodeURIComponent(u)}return null}class Fr{constructor(e,t,r,s){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=s}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let wi=(()=>{class n{constructor(t,r,s){this._viewContainer=t,this._template=r,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((s,u,l)=>{if(null==s.previousIndex)r.createEmbeddedView(this._template,new Fr(s.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===u?void 0:u);else if(null!==u){const m=r.get(u);r.move(m,l),Mn(m,s)}});for(let s=0,u=r.length;s<u;s++){const m=r.get(s).context;m.index=s,m.count=u,m.ngForOf=this._ngForOf}t.forEachIdentityChange(s=>{Mn(r.get(s.currentIndex),s)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc),d.Y36(d.ZZ4))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function Mn(n,e){n.context.$implicit=e.item}let rn=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new lo,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Ls("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Ls("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class lo{constructor(){this.$implicit=null,this.ngIf=null}}function Ls(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,d.AaK)(e)}'.`)}let Ur=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();function Ku(n){return"server"===n}let gs=(()=>{class n{}return n.\u0275prov=(0,d.Yz7)({token:n,providedIn:"root",factory:()=>new Ko((0,d.LFG)(re),window)}),n})();class Ko{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Fa(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let s=r.currentNode;for(;s;){const u=s.shadowRoot;if(u){const l=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(l)return l}s=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,s=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],s-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=$s(this.window.history)||$s(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function $s(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class ms{}class dh extends oe{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class vs extends dh{static makeCurrent(){!function se(n){J||(J=n)}(new vs)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Za(){return ri=ri||document.querySelector("base"),ri?ri.getAttribute("href"):null}();return null==t?null:function oc(n){Di=Di||document.createElement("a"),Di.setAttribute("href",n);const e=Di.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){ri=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Yn(document.cookie,e)}}let Di,ri=null;const Al=new d.OlP("TRANSITION_ID"),ia=[{provide:d.ip1,useFactory:function Io(n,e,t){return()=>{t.get(d.CZH).donePromise.then(()=>{const r=O(),s=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<s.length;u++)r.remove(s[u])})}},deps:[Al,re,d.zs3],multi:!0}];let ac=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const sa=new d.OlP("EventManagerPlugins");let ji=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(s=>s.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,s){return this._findPluginFor(r).addEventListener(t,r,s)}addGlobalEventListener(t,r,s){return this._findPluginFor(r).addGlobalEventListener(t,r,s)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const s=this._plugins;for(let u=0;u<s.length;u++){const l=s[u];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(sa),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class uc{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const s=O().getGlobalEventTarget(this._doc,e);if(!s)throw new Error(`Unsupported event target ${s} for event ${t}`);return this.addEventListener(s,t,r)}}let Ml=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(s=>{this._stylesSet.has(s)||(this._stylesSet.add(s),r.add(s))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),_s=(()=>{class n extends Ml{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,s){t.forEach(u=>{const l=this._doc.createElement("style");l.textContent=u,s.push(r.appendChild(l))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(cc),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,s)=>{this._addStylesToHost(t,s,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(cc))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(re))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function cc(n){O().remove(n)}const pn={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Do=/%COMP%/g;function bo(n,e){return e.flat(100).map(t=>t.replace(Do,n))}function Xi(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Es=(()=>{class n{constructor(t,r,s){this.eventManager=t,this.sharedStylesHost=r,this.appId=s,this.rendererByCompId=new Map,this.defaultRenderer=new qs(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case d.ifc.Emulated:{let s=this.rendererByCompId.get(r.id);return s||(s=new lc(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,s)),s.applyToHost(t),s}case 1:case d.ifc.ShadowDom:return new To(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const s=bo(r.id,r.styles);this.sharedStylesHost.addStyles(s),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ji),d.LFG(_s),d.LFG(d.AFp))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class qs{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(pn[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(Mr(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Mr(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,s){if(s){t=s+":"+t;const u=pn[s];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const s=pn[r];s?e.removeAttributeNS(s,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,s){s&(d.JOm.DashCase|d.JOm.Important)?e.style.setProperty(t,r,s&d.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&d.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Xi(r)):this.eventManager.addEventListener(e,t,Xi(r))}}function Mr(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class lc extends qs{constructor(e,t,r,s){super(e),this.component=r;const u=bo(s+"-"+r.id,r.styles);t.addStyles(u),this.contentAttr=function Ya(n){return"_ngcontent-%COMP%".replace(Do,n)}(s+"-"+r.id),this.hostAttr=function Qa(n){return"_nghost-%COMP%".replace(Do,n)}(s+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class To extends qs{constructor(e,t,r,s){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=bo(s.id,s.styles);for(let l=0;l<u.length;l++){const m=document.createElement("style");m.textContent=u[l],this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let zs=(()=>{class n extends uc{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,s){return t.addEventListener(r,s,!1),()=>this.removeEventListener(t,r,s)}removeEventListener(t,r,s){return t.removeEventListener(r,s)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(re))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const oa=["alt","control","meta","shift"],tu={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},dc={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Rl=(()=>{class n extends uc{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,s){const u=n.parseEventName(r),l=n.eventCallback(u.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,u.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),s=r.shift();if(0===r.length||"keydown"!==s&&"keyup"!==s)return null;const u=n._normalizeKey(r.pop());let l="",m=r.indexOf("code");if(m>-1&&(r.splice(m,1),l="code."),oa.forEach(C=>{const A=r.indexOf(C);A>-1&&(r.splice(A,1),l+=C+".")}),l+=u,0!=r.length||0===u.length)return null;const w={};return w.domEventName=s,w.fullKey=l,w}static matchEventFullKeyCode(t,r){let s=tu[t.key]||t.key,u="";return r.indexOf("code.")>-1&&(s=t.code,u="code."),!(null==s||!s)&&(s=s.toLowerCase()," "===s?s="space":"."===s&&(s="dot"),oa.forEach(l=>{l!==s&&(0,dc[l])(t)&&(u+=l+".")}),u+=s,u===r)}static eventCallback(t,r,s){return u=>{n.matchEventFullKeyCode(u,t)&&s.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(re))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const $i=(0,d.eFA)(d._c5,"browser",[{provide:d.Lbi,useValue:"browser"},{provide:d.g9A,useValue:function aa(){vs.makeCurrent()},multi:!0},{provide:re,useFactory:function pc(){return(0,d.RDi)(document),document},deps:[]}]),si=new d.OlP(""),fh=[{provide:d.rWj,useClass:class ii{addToWindow(e){d.dqk.getAngularTestability=(r,s=!0)=>{const u=e.findTestabilityInTree(r,s);if(null==u)throw new Error("Could not find testability for element.");return u},d.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),d.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),d.dqk.frameworkStabilizers||(d.dqk.frameworkStabilizers=[]),d.dqk.frameworkStabilizers.push(r=>{const s=d.dqk.getAllAngularTestabilities();let u=s.length,l=!1;const m=function(w){l=l||w,u--,0==u&&r(l)};s.forEach(function(w){w.whenStable(m)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:d.lri,useClass:d.dDg,deps:[d.R0b,d.eoX,d.rWj]},{provide:d.dDg,useClass:d.dDg,deps:[d.R0b,d.eoX,d.rWj]}],gc=[{provide:d.zSh,useValue:"root"},{provide:d.qLn,useFactory:function bi(){return new d.qLn},deps:[]},{provide:sa,useClass:zs,multi:!0,deps:[re,d.R0b,d.Lbi]},{provide:sa,useClass:Rl,multi:!0,deps:[re]},{provide:Es,useClass:Es,deps:[ji,_s,d.AFp]},{provide:d.FYo,useExisting:Es},{provide:Ml,useExisting:_s},{provide:_s,useClass:_s,deps:[re]},{provide:ji,useClass:ji,deps:[sa,d.R0b]},{provide:ms,useClass:ac,deps:[]},[]];let mc=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:d.AFp,useValue:t.appId},{provide:Al,useExisting:d.AFp},ia]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(si,12))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[...gc,...fh],imports:[Ur,d.hGG]}),n})(),So=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(re))},n.\u0275prov=d.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Is(){return new So((0,d.LFG)(re))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var Ut=P(8996),Gi=P(7669);function We(...n){const e=(0,Gi.yG)(n);return(0,Ut.D)(n,e)}var oi=P(7579);class ai extends oi.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const ui=(0,P(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var ci=P(9751);const{isArray:ns}=Array,{getPrototypeOf:Pp,prototype:Bl,keys:da}=Object;function Mo(n){if(1===n.length){const e=n[0];if(ns(e))return{args:e,keys:null};if(function Ec(n){return n&&"object"==typeof n&&Pp(n)===Bl}(e)){const t=da(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var Ds=P(4671),I=P(4004);const{isArray:b}=Array;function F(n){return(0,I.U)(e=>function M(n,e){return b(e)?n(...e):n(e)}(n,e))}function Z(n,e){return n.reduce((t,r,s)=>(t[r]=e[s],t),{})}var Q=P(5403),be=P(9672);function Ye(...n){const e=(0,Gi.yG)(n),t=(0,Gi.jO)(n),{args:r,keys:s}=Mo(n);if(0===r.length)return(0,Ut.D)([],e);const u=new ci.y(function rt(n,e,t=Ds.y){return r=>{tt(e,()=>{const{length:s}=n,u=new Array(s);let l=s,m=s;for(let w=0;w<s;w++)tt(e,()=>{const C=(0,Ut.D)(n[w],e);let A=!1;C.subscribe((0,Q.x)(r,N=>{u[w]=N,A||(A=!0,m--),m||r.next(t(u.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,s?l=>Z(s,l):Ds.y));return t?u.pipe(F(t)):u}function tt(n,e,t){n?(0,be.f)(t,n,e):e()}var It=P(8189);function hr(...n){return function Dt(){return(0,It.J)(1)}()((0,Ut.D)(n,(0,Gi.yG)(n)))}var bn=P(8421);function xo(n){return new ci.y(e=>{(0,bn.Xf)(n()).subscribe(e)})}var Ic=P(9635),Cs=P(576);function fr(n,e){const t=(0,Cs.m)(n)?n:()=>n,r=s=>s.error(t());return new ci.y(e?s=>e.schedule(r,0,s):r)}var pr=P(515),bs=P(727),xr=P(4482);function wh(){return(0,xr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Q.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const s=n._connection,u=t;t=null,s&&(!u||s===u)&&s.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Eh extends ci.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,xr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new bs.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Q.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=bs.w0.EMPTY)}return e}refCount(){return wh()(this)}}function zn(n,e){return(0,xr.e)((t,r)=>{let s=null,u=0,l=!1;const m=()=>l&&!s&&r.complete();t.subscribe((0,Q.x)(r,w=>{s?.unsubscribe();let C=0;const A=u++;(0,bn.Xf)(n(w,A)).subscribe(s=(0,Q.x)(r,N=>r.next(e?e(w,N,A,C++):N),()=>{s=null,m()}))},()=>{l=!0,m()}))})}function au(n){return n<=0?()=>pr.E:(0,xr.e)((e,t)=>{let r=0;e.subscribe((0,Q.x)(t,s=>{++r<=n&&(t.next(s),n<=r&&t.complete())}))})}function Ih(...n){const e=(0,Gi.yG)(n);return(0,xr.e)((t,r)=>{(e?hr(n,t,e):hr(n,t)).subscribe(r)})}function Ti(n,e){return(0,xr.e)((t,r)=>{let s=0;t.subscribe((0,Q.x)(r,u=>n.call(e,u,s++)&&r.next(u)))})}var $r=P(5577);function Ws(n){return(0,xr.e)((e,t)=>{let r=!1;e.subscribe((0,Q.x)(t,s=>{r=!0,t.next(s)},()=>{r||t.next(n),t.complete()}))})}function by(n=ew){return(0,xr.e)((e,t)=>{let r=!1;e.subscribe((0,Q.x)(t,s=>{r=!0,t.next(s)},()=>r?t.complete():t.error(n())))})}function ew(){return new ui}function rs(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ti((s,u)=>n(s,u,r)):Ds.y,au(1),t?Ws(e):by(()=>new ui))}function ha(n,e){return(0,Cs.m)(e)?(0,$r.z)(n,e,1):(0,$r.z)(n,1)}var Hr=P(8505);function fa(n){return(0,xr.e)((e,t)=>{let u,r=null,s=!1;r=e.subscribe((0,Q.x)(t,void 0,void 0,l=>{u=(0,bn.Xf)(n(l,fa(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):s=!0})),s&&(r.unsubscribe(),r=null,u.subscribe(t))})}function tw(n,e,t,r,s){return(u,l)=>{let m=t,w=e,C=0;u.subscribe((0,Q.x)(l,A=>{const N=C++;w=m?n(w,A,N):(m=!0,A),r&&l.next(w)},s&&(()=>{m&&l.next(w),l.complete()})))}}function jl(n,e){return(0,xr.e)(tw(n,e,arguments.length>=2,!0))}function Dc(n){return n<=0?()=>pr.E:(0,xr.e)((e,t)=>{let r=[];e.subscribe((0,Q.x)(t,s=>{r.push(s),n<r.length&&r.shift()},()=>{for(const s of r)t.next(s);t.complete()},void 0,()=>{r=null}))})}function Dh(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ti((s,u)=>n(s,u,r)):Ds.y,Dc(1),t?Ws(e):by(()=>new ui))}function $l(n){return(0,xr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const $t="primary",Gr=Symbol("RouteTitle");class Ty{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function uu(n){return new Ty(n)}function Sy(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const s={};for(let u=0;u<r.length;u++){const l=r[u],m=n[u];if(l.startsWith(":"))s[l.substring(1)]=m;else if(l!==m.path)return null}return{consumed:n.slice(0,r.length),posParams:s}}function li(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let s;for(let u=0;u<t.length;u++)if(s=t[u],!Lp(n[s],e[s]))return!1;return!0}function Lp(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((s,u)=>r[u]===s)}return n===e}function Hl(n){return Array.prototype.concat.apply([],n)}function Vp(n){return n.length>0?n[n.length-1]:null}function gr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Ts(n){return(0,d.CqO)(n)?n:(0,d.QGY)(n)?(0,Ut.D)(Promise.resolve(n)):We(n)}const mr=!1,Gl={exact:function cu(n,e,t){if(!Zs(n.segments,e.segments)||!Cc(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!cu(n.children[r],e.children[r],t))return!1;return!0},subset:bh},ql={exact:function Rr(n,e){return li(n,e)},subset:function Bp(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Lp(n[t],e[t]))},ignored:()=>!0};function zl(n,e,t){return Gl[t.paths](n.root,e.root,t.matrixParams)&&ql[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function bh(n,e,t){return Th(n,e,e.segments,t)}function Th(n,e,t,r){if(n.segments.length>t.length){const s=n.segments.slice(0,t.length);return!(!Zs(s,t)||e.hasChildren()||!Cc(s,t,r))}if(n.segments.length===t.length){if(!Zs(n.segments,t)||!Cc(n.segments,t,r))return!1;for(const s in e.children)if(!n.children[s]||!bh(n.children[s],e.children[s],r))return!1;return!0}{const s=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(Zs(n.segments,s)&&Cc(n.segments,s,r)&&n.children[$t])&&Th(n.children[$t],e,u,r)}}function Cc(n,e,t){return e.every((r,s)=>ql[t](n[s].parameters,r.parameters))}class lu{constructor(e=new At([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=uu(this.queryParams)),this._queryParamMap}toString(){return My.serialize(this)}}class At{constructor(e,t){this.segments=e,this.children=t,this.parent=null,gr(t,(r,s)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ss(this)}}class bc{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=uu(this.parameters)),this._parameterMap}toString(){return Ah(this)}}function Zs(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let Ks=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return new Tc},providedIn:"root"}),n})();class Tc{parse(e){const t=new Mc(e);return new lu(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Sc(e.root,!0)}`,r=function Ac(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(s=>`${Ro(t)}=${Ro(s)}`).join("&"):`${Ro(t)}=${Ro(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Sh(n){return encodeURI(n)}(e.fragment)}`:""}`}}const My=new Tc;function Ss(n){return n.segments.map(e=>Ah(e)).join("/")}function Sc(n,e){if(!n.hasChildren())return Ss(n);if(e){const t=n.children[$t]?Sc(n.children[$t],!1):"",r=[];return gr(n.children,(s,u)=>{u!==$t&&r.push(`${u}:${Sc(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Ay(n,e){let t=[];return gr(n.children,(r,s)=>{s===$t&&(t=t.concat(e(r,s)))}),gr(n.children,(r,s)=>{s!==$t&&(t=t.concat(e(r,s)))}),t}(n,(r,s)=>s===$t?[Sc(n.children[$t],!1)]:[`${s}:${Sc(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[$t]?`${Ss(n)}/${t[0]}`:`${Ss(n)}/(${t.join("//")})`}}function $p(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ro(n){return $p(n).replace(/%3B/gi,";")}function Wl(n){return $p(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ys(n){return decodeURIComponent(n)}function Zl(n){return Ys(n.replace(/\+/g,"%20"))}function Ah(n){return`${Wl(n.path)}${function Hp(n){return Object.keys(n).map(e=>`;${Wl(e)}=${Wl(n[e])}`).join("")}(n.parameters)}`}const xy=/^[^\/()?;=#]+/;function Kl(n){const e=n.match(xy);return e?e[0]:""}const Mh=/^[^=?&#]+/,Ry=/^[^&#]+/;class Mc{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new At([],{}):new At([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[$t]=new At(e,t)),r}parseSegment(){const e=Kl(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new d.vHH(4009,mr);return this.capture(e),new bc(Ys(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Kl(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const s=Kl(this.remaining);s&&(r=s,this.capture(r))}e[Ys(t)]=Ys(r)}parseQueryParam(e){const t=function xh(n){const e=n.match(Mh);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function Ny(n){const e=n.match(Ry);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const s=Zl(t),u=Zl(r);if(e.hasOwnProperty(s)){let l=e[s];Array.isArray(l)||(l=[l],e[s]=l),l.push(u)}else e[s]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Kl(this.remaining),s=this.remaining[r.length];if("/"!==s&&")"!==s&&";"!==s)throw new d.vHH(4010,mr);let u;r.indexOf(":")>-1?(u=r.slice(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=$t);const l=this.parseChildren();t[u]=1===Object.keys(l).length?l[$t]:new At([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new d.vHH(4011,mr)}}function xc(n){return n.segments.length>0?new At([],{[$t]:n}):n}function Rc(n){const e={};for(const r of Object.keys(n.children)){const u=Rc(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function Rh(n){if(1===n.numberOfChildren&&n.children[$t]){const e=n.children[$t];return new At(n.segments.concat(e.segments),e.children)}return n}(new At(n.segments,e))}function No(n){return n instanceof lu}function du(n,e,t,r,s){if(0===t.length)return Nc(e.root,e.root,e.root,r,s);const u=function Oh(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new qp(!0,0,n);let e=0,t=!1;const r=n.reduce((s,u,l)=>{if("object"==typeof u&&null!=u){if(u.outlets){const m={};return gr(u.outlets,(w,C)=>{m[C]="string"==typeof w?w.split("/"):w}),[...s,{outlets:m}]}if(u.segmentPath)return[...s,u.segmentPath]}return"string"!=typeof u?[...s,u]:0===l?(u.split("/").forEach((m,w)=>{0==w&&"."===m||(0==w&&""===m?t=!0:".."===m?e++:""!=m&&s.push(m))}),s):[...s,u]},[]);return new qp(t,e,r)}(t);return u.toRoot()?Nc(e.root,e.root,new At([],{}),r,s):function l(w){const C=function Pc(n,e,t,r){if(n.isAbsolute)return new Oo(e.root,!0,0);if(-1===r)return new Oo(t,t===e.root,0);return function Ql(n,e,t){let r=n,s=e,u=t;for(;u>s;){if(u-=s,r=r.parent,!r)throw new d.vHH(4005,!1);s=r.segments.length}return new Oo(r,!1,s-u)}(t,r+(hu(n.commands[0])?0:1),n.numberOfDoubleDots)}(u,e,n.snapshot?._urlSegment,w),A=C.processChildren?pu(C.segmentGroup,C.index,u.commands):Po(C.segmentGroup,C.index,u.commands);return Nc(e.root,C.segmentGroup,A,r,s)}(n.snapshot?._lastPathIndex)}function hu(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function fu(n){return"object"==typeof n&&null!=n&&n.outlets}function Nc(n,e,t,r,s){let l,u={};r&&gr(r,(w,C)=>{u[C]=Array.isArray(w)?w.map(A=>`${A}`):`${w}`}),l=n===e?t:Oc(n,e,t);const m=xc(Rc(l));return new lu(m,u,s)}function Oc(n,e,t){const r={};return gr(n.children,(s,u)=>{r[u]=s===e?t:Oc(s,e,t)}),new At(n.segments,r)}class qp{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&hu(r[0]))throw new d.vHH(4003,!1);const s=r.find(fu);if(s&&s!==Vp(r))throw new d.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Oo{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Po(n,e,t){if(n||(n=new At([],{})),0===n.segments.length&&n.hasChildren())return pu(n,e,t);const r=function qr(n,e,t){let r=0,s=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;s<n.segments.length;){if(r>=t.length)return u;const l=n.segments[s],m=t[r];if(fu(m))break;const w=`${m}`,C=r<t.length-1?t[r+1]:null;if(s>0&&void 0===w)break;if(w&&C&&"object"==typeof C&&void 0===C.outlets){if(!ed(w,C,l))return u;r+=2}else{if(!ed(w,{},l))return u;r++}s++}return{match:!0,pathIndex:s,commandIndex:r}}(n,e,t),s=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new At(n.segments.slice(0,r.pathIndex),{});return u.children[$t]=new At(n.segments.slice(r.pathIndex),n.children),pu(u,0,s)}return r.match&&0===s.length?new At(n.segments,{}):r.match&&!n.hasChildren()?Qs(n,e,t):r.match?pu(n,0,s):Qs(n,e,t)}function pu(n,e,t){if(0===t.length)return new At(n.segments,{});{const r=function Jl(n){return fu(n[0])?n[0].outlets:{[$t]:n}}(t),s={};return gr(r,(u,l)=>{"string"==typeof u&&(u=[u]),null!==u&&(s[l]=Po(n.children[l],e,u))}),gr(n.children,(u,l)=>{void 0===r[l]&&(s[l]=u)}),new At(n.segments,s)}}function Qs(n,e,t){const r=n.segments.slice(0,e);let s=0;for(;s<t.length;){const u=t[s];if(fu(u)){const w=Xl(u.outlets);return new At(r,w)}if(0===s&&hu(t[0])){r.push(new bc(n.segments[e].path,gu(t[0]))),s++;continue}const l=fu(u)?u.outlets[$t]:`${u}`,m=s<t.length-1?t[s+1]:null;l&&m&&hu(m)?(r.push(new bc(l,gu(m))),s+=2):(r.push(new bc(l,{})),s++)}return new At(r,{})}function Xl(n){const e={};return gr(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Qs(new At([],{}),0,t))}),e}function gu(n){const e={};return gr(n,(t,r)=>e[r]=`${t}`),e}function ed(n,e,t){return n==t.path&&li(e,t.parameters)}class qi{constructor(e,t){this.id=e,this.url=t}}class Ph extends qi{constructor(e,t,r="imperative",s=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=s}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ko extends qi{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class td extends qi{constructor(e,t,r,s){super(e,t),this.reason=r,this.code=s,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class As extends qi{constructor(e,t,r,s){super(e,t),this.error=r,this.target=s,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class kh extends qi{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class nd extends qi{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Fh extends qi{constructor(e,t,r,s,u){super(e,t),this.urlAfterRedirects=r,this.state=s,this.shouldActivate=u,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class ga extends qi{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class zp extends qi{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class di{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Wp{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Lh{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Vh{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Js{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class mu{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class yu{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let id=(()=>{class n{createUrlTree(t,r,s,u,l,m){return du(t||r.root,s,u,l,m)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Zp=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(e){return id.\u0275fac(e)},providedIn:"root"}),n})();class Kp{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Uh(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Uh(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=y(e,this._root);return t.length<2?[]:t[t.length-2].children.map(s=>s.value).filter(s=>s!==e)}pathFromRoot(e){return y(e,this._root).map(t=>t.value)}}function Uh(n,e){if(n===e.value)return e;for(const t of e.children){const r=Uh(n,t);if(r)return r}return null}function y(n,e){if(n===e.value)return[e];for(const t of e.children){const r=y(n,t);if(r.length)return r.unshift(e),r}return[]}class f{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function g(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class _ extends Kp{constructor(e,t){super(e),this.snapshot=t,at(this,e)}toString(){return this.snapshot.toString()}}function S(n,e){const t=function R(n,e){const l=new Ze([],{},{},"",{},$t,e,null,n.root,-1,{});return new yt("",new f(l,[]))}(n,e),r=new ai([new bc("",{})]),s=new ai({}),u=new ai({}),l=new ai({}),m=new ai(""),w=new H(r,s,l,m,u,$t,e,t.root);return w.snapshot=t.root,new _(new f(w,[]),t)}class H{constructor(e,t,r,s,u,l,m,w){this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=u,this.outlet=l,this.component=m,this.title=this.data?.pipe((0,I.U)(C=>C[Gr]))??We(void 0),this._futureSnapshot=w}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,I.U)(e=>uu(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,I.U)(e=>uu(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function he(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const s=t[r],u=t[r-1];if(s.routeConfig&&""===s.routeConfig.path)r--;else{if(u.component)break;r--}}return function je(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Ze{constructor(e,t,r,s,u,l,m,w,C,A,N){this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=u,this.outlet=l,this.component=m,this.routeConfig=w,this._urlSegment=C,this._lastPathIndex=A,this._resolve=N}get title(){return this.data?.[Gr]}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=uu(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=uu(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class yt extends Kp{constructor(e,t){super(t),this.url=e,at(this,t)}toString(){return Un(this._root)}}function at(n,e){e.value._routerState=n,e.children.forEach(t=>at(n,t))}function Un(n){const e=n.children.length>0?` { ${n.children.map(Un).join(", ")} } `:"";return`${n.value}${e}`}function Si(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,li(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),li(e.params,t.params)||n.params.next(t.params),function Fp(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!li(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),li(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function vu(n,e){const t=li(n.params,e.params)&&function jp(n,e){return Zs(n,e)&&n.every((t,r)=>li(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||vu(n.parent,e.parent))}function Xs(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const s=function Ms(n,e,t){return e.children.map(r=>{for(const s of t.children)if(n.shouldReuseRoute(r.value,s.value.snapshot))return Xs(n,r,s);return Xs(n,r)})}(n,e,t);return new f(r,s)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const l=u.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(m=>Xs(n,m)),l}}const r=function _u(n){return new H(new ai(n.url),new ai(n.params),new ai(n.queryParams),new ai(n.fragment),new ai(n.data),n.outlet,n.component,n)}(e.value),s=e.children.map(u=>Xs(n,u));return new f(r,s)}}const wu="ngNavigationCancelingError";function sd(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=No(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,s=od(!1,0,e);return s.url=t,s.navigationBehaviorOptions=r,s}function od(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[wu]=!0,r.cancellationCode=e,t&&(r.url=t),r}function Bh(n){return Qp(n)&&No(n.url)}function Qp(n){return n&&n[wu]}class nw{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new eo,this.attachRef=null}}let eo=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const s=this.getOrCreateContext(t);s.outlet=r,this.contexts.set(t,s)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new nw,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Eu=!1;let rw=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=$t,this.activateEvents=new d.vpe,this.deactivateEvents=new d.vpe,this.attachEvents=new d.vpe,this.detachEvents=new d.vpe,this.parentContexts=(0,d.f3M)(eo),this.location=(0,d.f3M)(d.s_b),this.changeDetector=(0,d.f3M)(d.sBO),this.environmentInjector=(0,d.f3M)(d.lqb)}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:s}=t.name;if(r)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new d.vHH(4012,Eu);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new d.vHH(4012,Eu);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new d.vHH(4012,Eu);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new d.vHH(4013,Eu);this._activatedRoute=t;const s=this.location,l=t.snapshot.component,m=this.parentContexts.getOrCreateContext(this.name).children,w=new fM(t,m,s.injector);if(r&&function iw(n){return!!n.resolveComponentFactory}(r)){const C=r.resolveComponentFactory(l);this.activated=s.createComponent(C,s.length,w)}else this.activated=s.createComponent(l,{index:s.length,injector:w,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[d.TTD]}),n})();class fM{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===H?this.route:e===eo?this.childContexts:this.parent.get(e,t)}}let Fy=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[d.jDz],decls:1,vars:0,template:function(t,r){1&t&&d._UZ(0,"router-outlet")},dependencies:[rw],encapsulation:2}),n})();function sw(n,e){return n.providers&&!n._injector&&(n._injector=(0,d.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function By(n){const e=n.children&&n.children.map(By),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==$t&&(t.component=Fy),t}function xs(n){return n.outlet||$t}function Jp(n,e){const t=n.filter(r=>xs(r)===e);return t.push(...n.filter(r=>xs(r)!==e)),t}function ad(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class $D{constructor(e,t,r,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=s}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Si(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const s=g(t);e.children.forEach(u=>{const l=u.value.outlet;this.deactivateRoutes(u,s[l],r),delete s[l]}),gr(s,(u,l)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const s=e.value,u=t?t.value:null;if(s===u)if(s.component){const l=r.getContext(s.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,u=g(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],s);if(r&&r.outlet){const l=r.outlet.detach(),m=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:m})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,u=g(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],s);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const s=g(t);e.children.forEach(u=>{this.activateRoutes(u,s[u.value.outlet],r),this.forwardEvent(new mu(u.value.snapshot))}),e.children.length&&this.forwardEvent(new Vh(e.value.snapshot))}activateRoutes(e,t,r){const s=e.value,u=t?t.value:null;if(Si(s),s===u)if(s.component){const l=r.getOrCreateContext(s.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(s.component){const l=r.getOrCreateContext(s.outlet);if(this.routeReuseStrategy.shouldAttach(s.snapshot)){const m=this.routeReuseStrategy.retrieve(s.snapshot);this.routeReuseStrategy.store(s.snapshot,null),l.children.onOutletReAttached(m.contexts),l.attachRef=m.componentRef,l.route=m.route.value,l.outlet&&l.outlet.attach(m.componentRef,m.route.value),Si(m.route.value),this.activateChildRoutes(e,null,l.children)}else{const m=ad(s.snapshot),w=m?.get(d._Vd)??null;l.attachRef=null,l.route=s,l.resolver=w,l.injector=m,l.outlet&&l.outlet.activateWith(s,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class ow{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Xp{constructor(e,t){this.component=e,this.route=t}}function aw(n,e,t){const r=n._root;return ma(r,e?e._root:null,t,[r.value])}function jh(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,d.Z0I)(n)?e.get(n):n:r}function ma(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const u=g(e);return n.children.forEach(l=>{(function jy(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,l=e?e.value:null,m=t?t.getContext(n.value.outlet):null;if(l&&u.routeConfig===l.routeConfig){const w=function uw(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Zs(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Zs(n.url,e.url)||!li(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!vu(n,e)||!li(n.queryParams,e.queryParams);default:return!vu(n,e)}}(l,u,u.routeConfig.runGuardsAndResolvers);w?s.canActivateChecks.push(new ow(r)):(u.data=l.data,u._resolvedData=l._resolvedData),ma(n,e,u.component?m?m.children:null:t,r,s),w&&m&&m.outlet&&m.outlet.isActivated&&s.canDeactivateChecks.push(new Xp(m.outlet.component,l))}else l&&ud(e,m,s),s.canActivateChecks.push(new ow(r)),ma(n,null,u.component?m?m.children:null:t,r,s)})(l,u[l.value.outlet],t,r.concat([l.value]),s),delete u[l.value.outlet]}),gr(u,(l,m)=>ud(l,t.getContext(m),s)),s}function ud(n,e,t){const r=g(n),s=n.value;gr(r,(u,l)=>{ud(u,s.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new Xp(s.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,s))}function cd(n){return"function"==typeof n}function $h(n){return n instanceof ui||"EmptyError"===n?.name}const Hh=Symbol("INITIAL_VALUE");function kc(){return zn(n=>Ye(n.map(e=>e.pipe(au(1),Ih(Hh)))).pipe((0,I.U)(e=>{for(const t of e)if(!0!==t){if(t===Hh)return Hh;if(!1===t||t instanceof lu)return t}return!0}),Ti(e=>e!==Hh),au(1)))}function ng(n){return(0,Ic.z)((0,Hr.b)(e=>{if(No(e))throw sd(0,e)}),(0,I.U)(e=>!0===e))}const qy={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function zy(n,e,t,r,s){const u=Iu(n,e,t);return u.matched?function ZD(n,e,t,r){const s=e.canMatch;return s&&0!==s.length?We(s.map(l=>{const m=jh(l,n);return Ts(function yM(n){return n&&cd(n.canMatch)}(m)?m.canMatch(e,t):n.runInContext(()=>m(e,t)))})).pipe(kc(),ng()):We(!0)}(r=sw(e,r),e,t).pipe((0,I.U)(l=>!0===l?u:{...qy})):We(u)}function Iu(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...qy}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const s=(e.matcher||Sy)(t,n,e);if(!s)return{...qy};const u={};gr(s.posParams,(m,w)=>{u[w]=m.path});const l=s.consumed.length>0?{...u,...s.consumed[s.consumed.length-1].parameters}:u;return{matched:!0,consumedSegments:s.consumed,remainingSegments:t.slice(s.consumed.length),parameters:l,positionalParamSegments:s.posParams??{}}}function rg(n,e,t,r){if(t.length>0&&function Wy(n,e,t){return t.some(r=>Gh(n,e,r)&&xs(r)!==$t)}(n,t,r)){const u=new At(e,function YD(n,e,t,r){const s={};s[$t]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&xs(u)!==$t){const l=new At([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,s[xs(u)]=l}return s}(n,e,r,new At(t,n.children)));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:[]}}if(0===t.length&&function QD(n,e,t){return t.some(r=>Gh(n,e,r))}(n,t,r)){const u=new At(n.segments,function KD(n,e,t,r,s){const u={};for(const l of r)if(Gh(n,t,l)&&!s[xs(l)]){const m=new At([],{});m._sourceSegment=n,m._segmentIndexShift=e.length,u[xs(l)]=m}return{...s,...u}}(n,e,t,r,n.children));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}const s=new At(n.segments,n.children);return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}function Gh(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function fw(n,e,t,r){return!!(xs(n)===r||r!==$t&&Gh(e,t,n))&&("**"===n.path||Iu(e,n,t).matched)}function Zy(n,e,t){return 0===e.length&&!n.children[t]}const Ky=!1;class ig{constructor(e){this.segmentGroup=e||null}}class ld{constructor(e){this.urlTree=e}}function qh(n){return fr(new ig(n))}function Vc(n){return fr(new ld(n))}class XD{constructor(e,t,r,s,u){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=s,this.config=u,this.allowRedirects=!0}apply(){const e=rg(this.urlTree.root,[],[],this.config).segmentGroup,t=new At(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,$t).pipe((0,I.U)(u=>this.createUrlTree(Rc(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(fa(u=>{if(u instanceof ld)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof ig?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,$t).pipe((0,I.U)(s=>this.createUrlTree(Rc(s),e.queryParams,e.fragment))).pipe(fa(s=>{throw s instanceof ig?this.noMatchError(s):s}))}noMatchError(e){return new d.vHH(4002,Ky)}createUrlTree(e,t,r){const s=xc(e);return new lu(s,t,r)}expandSegmentGroup(e,t,r,s){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,I.U)(u=>new At([],u))):this.expandSegment(e,r,t,r.segments,s,!0)}expandChildren(e,t,r){const s=[];for(const u of Object.keys(r.children))"primary"===u?s.unshift(u):s.push(u);return(0,Ut.D)(s).pipe(ha(u=>{const l=r.children[u],m=Jp(t,u);return this.expandSegmentGroup(e,m,l,u).pipe((0,I.U)(w=>({segment:w,outlet:u})))}),jl((u,l)=>(u[l.outlet]=l.segment,u),{}),Dh())}expandSegment(e,t,r,s,u,l){return(0,Ut.D)(r).pipe(ha(m=>this.expandSegmentAgainstRoute(e,t,r,m,s,u,l).pipe(fa(C=>{if(C instanceof ig)return We(null);throw C}))),rs(m=>!!m),fa((m,w)=>{if($h(m))return Zy(t,s,u)?We(new At([],{})):qh(t);throw m}))}expandSegmentAgainstRoute(e,t,r,s,u,l,m){return fw(s,t,u,l)?void 0===s.redirectTo?this.matchSegmentAgainstRoute(e,t,s,u,l):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,s,u,l):qh(t):qh(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,s,u,l){return"**"===s.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,s,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,s,u,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,s){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Vc(u):this.lineralizeSegments(r,u).pipe((0,$r.z)(l=>{const m=new At(l,{});return this.expandSegment(e,m,t,l,s,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,s,u,l){const{matched:m,consumedSegments:w,remainingSegments:C,positionalParamSegments:A}=Iu(t,s,u);if(!m)return qh(t);const N=this.applyRedirectCommands(w,s.redirectTo,A);return s.redirectTo.startsWith("/")?Vc(N):this.lineralizeSegments(s,N).pipe((0,$r.z)($=>this.expandSegment(e,t,r,$.concat(C),l,!1)))}matchSegmentAgainstRoute(e,t,r,s,u){return"**"===r.path?(e=sw(r,e),r.loadChildren?(r._loadedRoutes?We({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,I.U)(m=>(r._loadedRoutes=m.routes,r._loadedInjector=m.injector,new At(s,{})))):We(new At(s,{}))):zy(t,r,s,e).pipe(zn(({matched:l,consumedSegments:m,remainingSegments:w})=>l?this.getChildConfig(e=r._injector??e,r,s).pipe((0,$r.z)(A=>{const N=A.injector??e,$=A.routes,{segmentGroup:Y,slicedSegments:ne}=rg(t,m,w,$),xe=new At(Y.segments,Y.children);if(0===ne.length&&xe.hasChildren())return this.expandChildren(N,$,xe).pipe((0,I.U)(Ot=>new At(m,Ot)));if(0===$.length&&0===ne.length)return We(new At(m,{}));const Ve=xs(r)===u;return this.expandSegment(N,xe,$,ne,Ve?$t:u,!0).pipe((0,I.U)(jt=>new At(m.concat(jt.segments),jt.children)))})):qh(t)))}getChildConfig(e,t,r){return t.children?We({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?We({routes:t._loadedRoutes,injector:t._loadedInjector}):function hw(n,e,t,r){const s=e.canLoad;return void 0===s||0===s.length?We(!0):We(s.map(l=>{const m=jh(l,n);return Ts(function GD(n){return n&&cd(n.canLoad)}(m)?m.canLoad(e,t):n.runInContext(()=>m(e,t)))})).pipe(kc(),ng())}(e,t,r).pipe((0,$r.z)(s=>s?this.configLoader.loadChildren(e,t).pipe((0,Hr.b)(u=>{t._loadedRoutes=u.routes,t._loadedInjector=u.injector})):function JD(n){return fr(od(Ky,3))}())):We({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],s=t.root;for(;;){if(r=r.concat(s.segments),0===s.numberOfChildren)return We(r);if(s.numberOfChildren>1||!s.children[$t])return fr(new d.vHH(4e3,Ky));s=s.children[$t]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,s){const u=this.createSegmentGroup(e,t.root,r,s);return new lu(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return gr(e,(s,u)=>{if("string"==typeof s&&s.startsWith(":")){const m=s.substring(1);r[u]=t[m]}else r[u]=s}),r}createSegmentGroup(e,t,r,s){const u=this.createSegments(e,t.segments,r,s);let l={};return gr(t.children,(m,w)=>{l[w]=this.createSegmentGroup(e,m,r,s)}),new At(u,l)}createSegments(e,t,r,s){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,s):this.findOrReturn(u,r))}findPosParam(e,t,r){const s=r[t.path.substring(1)];if(!s)throw new d.vHH(4001,Ky);return s}findOrReturn(e,t){let r=0;for(const s of t){if(s.path===e.path)return t.splice(r),s;r++}return e}}class mw{}class Qy{constructor(e,t,r,s,u,l,m){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=s,this.url=u,this.paramsInheritanceStrategy=l,this.urlSerializer=m}recognize(){const e=rg(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,$t).pipe((0,I.U)(t=>{if(null===t)return null;const r=new Ze([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},$t,this.rootComponentType,null,this.urlTree.root,-1,{}),s=new f(r,t),u=new yt(this.url,s);return this.inheritParamsAndData(u._root),u}))}inheritParamsAndData(e){const t=e.value,r=he(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(s=>this.inheritParamsAndData(s))}processSegmentGroup(e,t,r,s){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,s)}processChildren(e,t,r){return(0,Ut.D)(Object.keys(r.children)).pipe(ha(s=>{const u=r.children[s],l=Jp(t,s);return this.processSegmentGroup(e,l,u,s)}),jl((s,u)=>s&&u?(s.push(...u),s):null),function Ch(n,e=!1){return(0,xr.e)((t,r)=>{let s=0;t.subscribe((0,Q.x)(r,u=>{const l=n(u,s++);(l||e)&&r.next(u),!l&&r.complete()}))})}(s=>null!==s),Ws(null),Dh(),(0,I.U)(s=>{if(null===s)return null;const u=vw(s);return function tC(n){n.sort((e,t)=>e.value.outlet===$t?-1:t.value.outlet===$t?1:e.value.outlet.localeCompare(t.value.outlet))}(u),u}))}processSegment(e,t,r,s,u){return(0,Ut.D)(t).pipe(ha(l=>this.processSegmentAgainstRoute(l._injector??e,l,r,s,u)),rs(l=>!!l),fa(l=>{if($h(l))return Zy(r,s,u)?We([]):We(null);throw l}))}processSegmentAgainstRoute(e,t,r,s,u){if(t.redirectTo||!fw(t,r,s,u))return We(null);let l;if("**"===t.path){const m=s.length>0?Vp(s).parameters:{},w=ww(r)+s.length;l=We({snapshot:new Ze(s,m,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Ew(t),xs(t),t.component??t._loadedComponent??null,t,_w(r),w,Iw(t)),consumedSegments:[],remainingSegments:[]})}else l=zy(r,t,s,e).pipe((0,I.U)(({matched:m,consumedSegments:w,remainingSegments:C,parameters:A})=>{if(!m)return null;const N=ww(r)+w.length;return{snapshot:new Ze(w,A,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Ew(t),xs(t),t.component??t._loadedComponent??null,t,_w(r),N,Iw(t)),consumedSegments:w,remainingSegments:C}}));return l.pipe(zn(m=>{if(null===m)return We(null);const{snapshot:w,consumedSegments:C,remainingSegments:A}=m;e=t._injector??e;const N=t._loadedInjector??e,$=function Jy(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:Y,slicedSegments:ne}=rg(r,C,A,$.filter(Ve=>void 0===Ve.redirectTo));if(0===ne.length&&Y.hasChildren())return this.processChildren(N,$,Y).pipe((0,I.U)(Ve=>null===Ve?null:[new f(w,Ve)]));if(0===$.length&&0===ne.length)return We([new f(w,[])]);const xe=xs(t)===u;return this.processSegment(N,$,Y,ne,xe?$t:u).pipe((0,I.U)(Ve=>null===Ve?null:[new f(w,Ve)]))}))}}function Wh(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function vw(n){const e=[],t=new Set;for(const r of n){if(!Wh(r)){e.push(r);continue}const s=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==s?(s.children.push(...r.children),t.add(s)):e.push(r)}for(const r of t){const s=vw(r.children);e.push(new f(r.value,s))}return e.filter(r=>!t.has(r))}function _w(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function ww(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function Ew(n){return n.data||{}}function Iw(n){return n.resolve||{}}function Xy(n){return"string"==typeof n.title||null===n.title}function Dw(n){return zn(e=>{const t=n(e);return t?(0,Ut.D)(t).pipe((0,I.U)(()=>e)):We(e)})}const hd=new d.OlP("ROUTES");let sg=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return We(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Ts(t.loadComponent()).pipe((0,I.U)(bw),(0,Hr.b)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=u}),$l(()=>{this.componentLoaders.delete(t)})),s=new Eh(r,()=>new oi.x).pipe(wh());return this.componentLoaders.set(t,s),s}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return We({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const u=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,I.U)(m=>{this.onLoadEndListener&&this.onLoadEndListener(r);let w,C,A=!1;Array.isArray(m)?C=m:(w=m.create(t).injector,C=Hl(w.get(hd,[],d.XFs.Self|d.XFs.Optional)));return{routes:C.map(By),injector:w}}),$l(()=>{this.childrenLoaders.delete(r)})),l=new Eh(u,()=>new oi.x).pipe(wh());return this.childrenLoaders.set(r,l),l}loadModuleFactoryOrRoutes(t){return Ts(t()).pipe((0,I.U)(bw),(0,$r.z)(s=>s instanceof d.YKP||Array.isArray(s)?We(s):(0,Ut.D)(this.compiler.compileModuleAsync(s))))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.zs3),d.LFG(d.Sil))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function bw(n){return function sC(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let tv=(()=>{class n{constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new oi.x,this.configLoader=(0,d.f3M)(sg),this.environmentInjector=(0,d.f3M)(d.lqb),this.urlSerializer=(0,d.f3M)(Ks),this.rootContexts=(0,d.f3M)(eo),this.navigationId=0,this.configLoader.onLoadEndListener=s=>this.events.next(new Wp(s)),this.configLoader.onLoadStartListener=s=>this.events.next(new di(s))}get hasRequestedNavigation(){return 0!==this.navigationId}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t){return this.transitions=new ai({id:0,targetPageId:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Ti(r=>0!==r.id),(0,I.U)(r=>({...r,extractedUrl:t.urlHandlingStrategy.extract(r.rawUrl)})),zn(r=>{let s=!1,u=!1;return We(r).pipe((0,Hr.b)(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),zn(l=>{const m=t.browserUrlTree.toString(),w=!t.navigated||l.extractedUrl.toString()!==m||m!==t.currentUrlTree.toString();if(("reload"===t.onSameUrlNavigation||w)&&t.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return nv(l.source)&&(t.browserUrlTree=l.extractedUrl),We(l).pipe(zn(A=>{const N=this.transitions?.getValue();return this.events.next(new Ph(A.id,this.urlSerializer.serialize(A.extractedUrl),A.source,A.restoredState)),N!==this.transitions?.getValue()?pr.E:Promise.resolve(A)}),function eC(n,e,t,r){return zn(s=>function pw(n,e,t,r,s){return new XD(n,e,t,r,s).apply()}(n,e,t,s.extractedUrl,r).pipe((0,I.U)(u=>({...s,urlAfterRedirects:u}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,t.config),(0,Hr.b)(A=>{this.currentNavigation={...this.currentNavigation,finalUrl:A.urlAfterRedirects},r.urlAfterRedirects=A.urlAfterRedirects}),function dd(n,e,t,r,s){return(0,$r.z)(u=>function Yy(n,e,t,r,s,u,l="emptyOnly"){return new Qy(n,e,t,r,s,l,u).recognize().pipe(zn(m=>null===m?function yw(n){return new ci.y(e=>e.error(n))}(new mw):We(m)))}(n,e,t,u.urlAfterRedirects,r.serialize(u.urlAfterRedirects),r,s).pipe((0,I.U)(l=>({...u,targetSnapshot:l}))))}(this.environmentInjector,t.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),(0,Hr.b)(A=>{if(r.targetSnapshot=A.targetSnapshot,"eager"===t.urlUpdateStrategy){if(!A.extras.skipLocationChange){const $=t.urlHandlingStrategy.merge(A.urlAfterRedirects,A.rawUrl);t.setBrowserUrl($,A)}t.browserUrlTree=A.urlAfterRedirects}const N=new kh(A.id,this.urlSerializer.serialize(A.extractedUrl),this.urlSerializer.serialize(A.urlAfterRedirects),A.targetSnapshot);this.events.next(N)}));if(w&&t.rawUrlTree&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:N,extractedUrl:$,source:Y,restoredState:ne,extras:xe}=l,Ve=new Ph(N,this.urlSerializer.serialize($),Y,ne);this.events.next(Ve);const ft=S($,t.rootComponentType).snapshot;return We(r={...l,targetSnapshot:ft,urlAfterRedirects:$,extras:{...xe,skipLocationChange:!1,replaceUrl:!1}})}return t.rawUrlTree=l.rawUrl,l.resolve(null),pr.E}),(0,Hr.b)(l=>{const m=new nd(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(m)}),(0,I.U)(l=>r={...l,guards:aw(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),function Fc(n,e){return(0,$r.z)(t=>{const{targetSnapshot:r,currentSnapshot:s,guards:{canActivateChecks:u,canDeactivateChecks:l}}=t;return 0===l.length&&0===u.length?We({...t,guardsResult:!0}):function zD(n,e,t,r){return(0,Ut.D)(n).pipe((0,$r.z)(s=>function Lc(n,e,t,r,s){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?We(u.map(m=>{const w=ad(e)??s,C=jh(m,w);return Ts(function $y(n){return n&&cd(n.canDeactivate)}(C)?C.canDeactivate(n,e,t,r):w.runInContext(()=>C(n,e,t,r))).pipe(rs())})).pipe(kc()):We(!0)}(s.component,s.route,t,e,r)),rs(s=>!0!==s,!0))}(l,r,s,n).pipe((0,$r.z)(m=>m&&function HD(n){return"boolean"==typeof n}(m)?function Hy(n,e,t,r){return(0,Ut.D)(e).pipe(ha(s=>hr(function WD(n,e){return null!==n&&e&&e(new Lh(n)),We(!0)}(s.route.parent,r),function eg(n,e){return null!==n&&e&&e(new Js(n)),We(!0)}(s.route,r),function tg(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(l=>function mM(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>xo(()=>We(l.guards.map(w=>{const C=ad(l.node)??t,A=jh(w,C);return Ts(function lw(n){return n&&cd(n.canActivateChild)}(A)?A.canActivateChild(r,n):C.runInContext(()=>A(r,n))).pipe(rs())})).pipe(kc())));return We(u).pipe(kc())}(n,s.path,t),function Gy(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return We(!0);const s=r.map(u=>xo(()=>{const l=ad(e)??t,m=jh(u,l);return Ts(function cw(n){return n&&cd(n.canActivate)}(m)?m.canActivate(e,n):l.runInContext(()=>m(e,n))).pipe(rs())}));return We(s).pipe(kc())}(n,s.route,t))),rs(s=>!0!==s,!0))}(r,u,n,e):We(m)),(0,I.U)(m=>({...t,guardsResult:m})))})}(this.environmentInjector,l=>this.events.next(l)),(0,Hr.b)(l=>{if(r.guardsResult=l.guardsResult,No(l.guardsResult))throw sd(0,l.guardsResult);const m=new Fh(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(m)}),Ti(l=>!!l.guardsResult||(t.restoreHistory(l),this.cancelNavigationTransition(l,"",3,t),!1)),Dw(l=>{if(l.guards.canActivateChecks.length)return We(l).pipe((0,Hr.b)(m=>{const w=new ga(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(w)}),zn(m=>{let w=!1;return We(m).pipe(function ya(n,e){return(0,$r.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:s}}=t;if(!s.length)return We(t);let u=0;return(0,Ut.D)(s).pipe(ha(l=>function rC(n,e,t,r){const s=n.routeConfig,u=n._resolve;return void 0!==s?.title&&!Xy(s)&&(u[Gr]=s.title),function iC(n,e,t,r){const s=function _M(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===s.length)return We({});const u={};return(0,Ut.D)(s).pipe((0,$r.z)(l=>function wM(n,e,t,r){const s=ad(e)??r,u=jh(n,s);return Ts(u.resolve?u.resolve(e,t):s.runInContext(()=>u(e,t)))}(n[l],e,t,r).pipe(rs(),(0,Hr.b)(m=>{u[l]=m}))),Dc(1),function kp(n){return(0,I.U)(()=>n)}(u),fa(l=>$h(l)?pr.E:fr(l)))}(u,n,e,r).pipe((0,I.U)(l=>(n._resolvedData=l,n.data=he(n,t).resolve,s&&Xy(s)&&(n.data[Gr]=s.title),null)))}(l.route,r,n,e)),(0,Hr.b)(()=>u++),Dc(1),(0,$r.z)(l=>u===s.length?We(t):pr.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),(0,Hr.b)({next:()=>w=!0,complete:()=>{w||(t.restoreHistory(m),this.cancelNavigationTransition(m,"",2,t))}}))}),(0,Hr.b)(m=>{const w=new zp(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(w)}))}),Dw(l=>{const m=w=>{const C=[];w.routeConfig?.loadComponent&&!w.routeConfig._loadedComponent&&C.push(this.configLoader.loadComponent(w.routeConfig).pipe((0,Hr.b)(A=>{w.component=A}),(0,I.U)(()=>{})));for(const A of w.children)C.push(...m(A));return C};return Ye(m(l.targetSnapshot.root)).pipe(Ws(),au(1))}),Dw(()=>t.afterPreactivation()),(0,I.U)(l=>{const m=function Yp(n,e,t){const r=Xs(n,e._root,t?t._root:void 0);return new _(r,e)}(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return r={...l,targetRouterState:m}}),(0,Hr.b)(l=>{t.currentUrlTree=l.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(l.urlAfterRedirects,l.rawUrl),t.routerState=l.targetRouterState,"deferred"===t.urlUpdateStrategy&&(l.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,l),t.browserUrlTree=l.urlAfterRedirects)}),((n,e,t)=>(0,I.U)(r=>(new $D(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l)),(0,Hr.b)({next:l=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new ko(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{s=!0}}),$l(()=>{s||u||this.cancelNavigationTransition(r,"",1,t),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),fa(l=>{if(u=!0,Qp(l)){Bh(l)||(t.navigated=!0,t.restoreHistory(r,!0));const m=new td(r.id,this.urlSerializer.serialize(r.extractedUrl),l.message,l.cancellationCode);if(this.events.next(m),Bh(l)){const w=t.urlHandlingStrategy.merge(l.url,t.rawUrlTree),C={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||nv(r.source)};t.scheduleNavigation(w,"imperative",null,C,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{t.restoreHistory(r,!0);const m=new As(r.id,this.urlSerializer.serialize(r.extractedUrl),l,r.targetSnapshot??void 0);this.events.next(m);try{r.resolve(t.errorHandler(l))}catch(w){r.reject(w)}}return pr.E}))}))}cancelNavigationTransition(t,r,s,u){const l=new td(t.id,this.urlSerializer.serialize(t.extractedUrl),r,s);this.events.next(l),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function nv(n){return"imperative"!==n}let Tw=(()=>{class n{buildTitle(t){let r,s=t.root;for(;void 0!==s;)r=this.getResolvedTitleForRoute(s)??r,s=s.children.find(u=>u.outlet===$t);return r}getResolvedTitleForRoute(t){return t.data[Gr]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(oC)},providedIn:"root"}),n})(),oC=(()=>{class n extends Tw{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(So))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),aC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(Sw)},providedIn:"root"}),n})();class uC{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let Sw=(()=>{class n extends uC{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const og=new d.OlP("",{providedIn:"root",factory:()=>({})});let lC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(Ft)},providedIn:"root"}),n})(),Ft=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Aw(n){throw n}function Mw(n,e,t){return e.parse("/")}const dC={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},hC={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Ai=(()=>{class n{constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,d.f3M)(d.c2e),this.isNgZoneEnabled=!1,this.options=(0,d.f3M)(og,{optional:!0})||{},this.errorHandler=this.options.errorHandler||Aw,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Mw,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>We(void 0),this.urlHandlingStrategy=(0,d.f3M)(lC),this.routeReuseStrategy=(0,d.f3M)(aC),this.urlCreationStrategy=(0,d.f3M)(Zp),this.titleStrategy=(0,d.f3M)(Tw),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Hl((0,d.f3M)(hd,{optional:!0})??[]),this.navigationTransitions=(0,d.f3M)(tv),this.urlSerializer=(0,d.f3M)(Ks),this.location=(0,d.f3M)(Pe),this.rootComponentType=null,this.isNgZoneEnabled=(0,d.f3M)(d.R0b)instanceof d.R0b&&d.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new lu,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=S(this.currentUrlTree,this.rootComponentType),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const s={replaceUrl:!0},u=t.state?.navigationId?t.state:null;if(t.state){const m={...t.state};delete m.navigationId,delete m.\u0275routerPageId,0!==Object.keys(m).length&&(s.state=m)}const l=this.parseUrl(t.url);this.scheduleNavigation(l,r,u,s)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(t){this.config=t.map(By),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:s,queryParams:u,fragment:l,queryParamsHandling:m,preserveFragment:w}=r,C=w?this.currentUrlTree.fragment:l;let A=null;switch(m){case"merge":A={...this.currentUrlTree.queryParams,...u};break;case"preserve":A=this.currentUrlTree.queryParams;break;default:A=u||null}return null!==A&&(A=this.removeEmptyProps(A)),this.urlCreationStrategy.createUrlTree(s,this.routerState,this.currentUrlTree,t,A,C??null)}navigateByUrl(t,r={skipLocationChange:!1}){const s=No(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function fC(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new d.vHH(4008,!1)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(s){r=this.malformedUriErrorHandler(s,this.urlSerializer,t)}return r}isActive(t,r){let s;if(s=!0===r?{...dC}:!1===r?{...hC}:r,No(t))return zl(this.currentUrlTree,t,s);const u=this.parseUrl(t);return zl(this.currentUrlTree,u,s)}removeEmptyProps(t){return Object.keys(t).reduce((r,s)=>{const u=t[s];return null!=u&&(r[s]=u),r},{})}scheduleNavigation(t,r,s,u,l){if(this.disposed)return Promise.resolve(!1);let m,w,C,A;return l?(m=l.resolve,w=l.reject,C=l.promise):C=new Promise((N,$)=>{m=N,w=$}),"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(s=this.location.getState()),A=s&&s.\u0275routerPageId?s.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):A=0,this.navigationTransitions.handleNavigationRequest({targetPageId:A,source:r,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:u,resolve:m,reject:w,promise:C,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),C.catch(N=>Promise.reject(N))}setBrowserUrl(t,r){const s=this.urlSerializer.serialize(t),u={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(s)||r.extras.replaceUrl?this.location.replaceState(s,"",u):this.location.go(s,"",u)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.getCurrentNavigation()?.finalUrl||0===s?this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(s)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Uc=(()=>{class n{constructor(t,r,s,u,l,m){this.router=t,this.route=r,this.tabIndexAttribute=s,this.renderer=u,this.el=l,this.locationStrategy=m,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new oi.x;const w=l.nativeElement.tagName;this.isAnchorElement="A"===w||"AREA"===w,this.isAnchorElement?this.subscription=t.events.subscribe(C=>{C instanceof ko&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,d.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,d.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,d.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,s,u,l){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||s||u||l||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:(0,d.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const s=this.renderer,u=this.el.nativeElement;null!==r?s.setAttribute(u,t,r):s.removeAttribute(u,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Ai),d.Y36(H),d.$8M("tabindex"),d.Y36(d.Qsj),d.Y36(d.SBq),d.Y36(nt))},n.\u0275dir=d.lG2({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(t,r){1&t&&d.NdJ("click",function(u){return r.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&t&&d.uIk("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[d.TTD]}),n})();class mC{}let Bc=(()=>{class n{constructor(t,r,s,u,l){this.router=t,this.injector=s,this.preloadingStrategy=u,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(Ti(t=>t instanceof ko),ha(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const s=[];for(const u of r){u.providers&&!u._injector&&(u._injector=(0,d.MMx)(u.providers,t,`Route: ${u.path}`));const l=u._injector??t,m=u._loadedInjector??l;u.loadChildren&&!u._loadedRoutes&&void 0===u.canLoad||u.loadComponent&&!u._loadedComponent?s.push(this.preloadConfig(l,u)):(u.children||u._loadedRoutes)&&s.push(this.processRoutes(m,u.children??u._loadedRoutes))}return(0,Ut.D)(s).pipe((0,It.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let s;s=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):We(null);const u=s.pipe((0,$r.z)(l=>null===l?We(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,Ut.D)([u,l]).pipe((0,It.J)())}return u})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Ai),d.LFG(d.Sil),d.LFG(d.lqb),d.LFG(mC),d.LFG(sg))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const iv=new d.OlP("");let ag=(()=>{class n{constructor(t,r,s,u,l={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=s,this.zone=u,this.options=l,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},l.scrollPositionRestoration=l.scrollPositionRestoration||"disabled",l.anchorScrolling=l.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Ph?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof ko&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof yu&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new yu(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){d.$Z()},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function Zh(n,e){return{\u0275kind:n,\u0275providers:e}}function Rw(){const n=(0,d.f3M)(d.zs3);return e=>{const t=n.get(d.z2F);if(e!==t.components[0])return;const r=n.get(Ai),s=n.get(jc);1===n.get(sv)&&r.initialNavigation(),n.get(ov,null,d.XFs.Optional)?.setUpPreloading(),n.get(iv,null,d.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),s.closed||(s.next(),s.unsubscribe())}}const jc=new d.OlP("",{factory:()=>new oi.x}),sv=new d.OlP("",{providedIn:"root",factory:()=>1});const ov=new d.OlP("");function DC(n){return Zh(0,[{provide:ov,useExisting:Bc},{provide:mC,useExisting:n}])}const Ow=new d.OlP("ROUTER_FORROOT_GUARD"),Pw=[Pe,{provide:Ks,useClass:Tc},Ai,eo,{provide:H,useFactory:function _C(n){return n.routerState.root},deps:[Ai]},sg,[]];function CC(){return new d.PXZ("Router",Ai)}let kw=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[Pw,[],{provide:hd,multi:!0,useValue:t},{provide:Ow,useFactory:uv,deps:[[Ai,new d.FiY,new d.tp0]]},{provide:og,useValue:r||{}},r?.useHash?{provide:nt,useClass:Ee}:{provide:nt,useClass:De},{provide:iv,useFactory:()=>{const n=(0,d.f3M)(gs),e=(0,d.f3M)(d.R0b),t=(0,d.f3M)(og),r=(0,d.f3M)(tv),s=(0,d.f3M)(Ks);return t.scrollOffset&&n.setOffset(t.scrollOffset),new ag(s,r,n,e,t)}},r?.preloadingStrategy?DC(r.preloadingStrategy).\u0275providers:[],{provide:d.PXZ,multi:!0,useFactory:CC},r?.initialNavigation?bC(r):[],[{provide:TC,useFactory:Rw},{provide:d.tb,multi:!0,useExisting:TC}]]}}static forChild(t){return{ngModule:n,providers:[{provide:hd,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Ow,8))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[Fy]}),n})();function uv(n){return"guarded"}function bC(n){return["disabled"===n.initialNavigation?Zh(3,[{provide:d.ip1,multi:!0,useFactory:()=>{const e=(0,d.f3M)(Ai);return()=>{e.setUpLocationChangeListener()}}},{provide:sv,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Zh(2,[{provide:sv,useValue:0},{provide:d.ip1,multi:!0,deps:[d.zs3],useFactory:e=>{const t=e.get(ce,Promise.resolve());return()=>t.then(()=>new Promise(s=>{const u=e.get(Ai),l=e.get(jc);(function r(s){e.get(Ai).events.pipe(Ti(l=>l instanceof ko||l instanceof td||l instanceof As),(0,I.U)(l=>l instanceof ko||l instanceof td&&(0===l.code||1===l.code)&&null),Ti(l=>null!==l),au(1)).subscribe(()=>{s()})})(()=>{s(!0)}),u.afterPreactivation=()=>(s(!0),l.closed?We(void 0):l),u.initialNavigation()}))}}]).\u0275providers:[]]}const TC=new d.OlP("");var AC=P(6451),Yh=P(5363),MC=P(6063);class xC extends oi.x{constructor(e=1/0,t=1/0,r=MC.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:s,_timestampProvider:u,_windowTime:l}=this;t||(r.push(e),!s&&r.push(u.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:s}=this,u=s.slice();for(let l=0;l<u.length&&!e.closed;l+=r?1:2)e.next(u[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:s}=this,u=(s?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!s){const l=t.now();let m=0;for(let w=1;w<r.length&&r[w]<=l;w+=2)m=w;m&&r.splice(0,m+1)}}}var cg=P(3099);function $c(n,e,t){let r,s=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:s=!1,scheduler:t}=n):r=n??1/0,(0,cg.B)({connector:()=>new xC(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:s})}function lg(n,e){return(0,Cs.m)(e)?zn(()=>n,e):zn(()=>n)}var Hc=P(9468),nr=P(2122),zi=P(2011);P(259);var ge=P(5861),Cu=P(9681),dg=P(4859),en=P(2090),bu=P(1877);const hg=new Map,Bw={activated:!1,tokenObservers:[]},kC={initialized:!1,enabled:!1};function yr(n){return hg.get(n)||Object.assign({},Bw)}function fg(){return kC}class BC{constructor(e,t,r,s,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=s,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=s,s>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ge.Z)(function*(){t.stop();try{t.pending=new en.BH,yield function jw(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new en.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Mi=new en.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function mg(n){if(!yr(n).activated)throw Mi.create("use-before-activation",{appName:n.name})}function gd(n,e){return Jh.apply(this,arguments)}function Jh(){return(Jh=(0,ge.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){const N=yield s.getHeartbeatsHeader();N&&(r["X-Firebase-Client"]=N)}const u={method:"POST",body:JSON.stringify(e),headers:r};let l,m;try{l=yield fetch(n,u)}catch(N){throw Mi.create("fetch-network-error",{originalErrorMessage:N?.message})}if(200!==l.status)throw Mi.create("fetch-status-error",{httpStatus:l.status});try{m=yield l.json()}catch(N){throw Mi.create("fetch-parse-error",{originalErrorMessage:N?.message})}const w=m.ttl.match(/^([\d.]+)(s)$/);if(!w||!w[2]||isNaN(Number(w[1])))throw Mi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${m.ttl}`});const C=1e3*Number(w[1]),A=Date.now();return{token:m.token,expireTimeMillis:A+C,issuedAtTimeMillis:A}})).apply(this,arguments)}function fv(n,e){const{projectId:t,appId:r,apiKey:s}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${s}`,body:{debug_token:e}}}const md="firebase-app-check-store";let Xh=null;function _g(){return Xh||(Xh=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var s;e(Mi.create("storage-open",{originalErrorMessage:null===(s=r.target.error)||void 0===s?void 0:s.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(md,{keyPath:"compositeKey"})}}catch(t){e(Mi.create("storage-open",{originalErrorMessage:t?.message}))}}),Xh)}function Ig(){return(Ig=(0,ge.Z)(function*(n,e){const r=(yield _g()).transaction(md,"readwrite"),u=r.objectStore(md).put({compositeKey:n,value:e});return new Promise((l,m)=>{u.onsuccess=w=>{l()},r.onerror=w=>{var C;m(Mi.create("storage-set",{originalErrorMessage:null===(C=w.target.error)||void 0===C?void 0:C.message}))}})})).apply(this,arguments)}const _a=new bu.Yd("@firebase/app-check");function yv(n,e){return(0,en.hl)()?function wg(n,e){return function Hw(n,e){return Ig.apply(this,arguments)}(function Gw(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{_a.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function zw(){return fg().enabled}function Ww(){return _v.apply(this,arguments)}function _v(){return(_v=(0,ge.Z)(function*(){const n=fg();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Zw={error:"UNKNOWN_ERROR"};function wv(n){return en.US.encodeString(JSON.stringify(n),!1)}function Dg(n){return tf.apply(this,arguments)}function tf(){return(tf=(0,ge.Z)(function*(n,e=!1){const t=n.app;mg(t);const r=yr(t);let u,s=r.token;if(s&&!yd(s)&&(r.token=void 0,s=void 0),!s){const w=yield r.cachedTokenPromise;w&&(yd(w)?s=w:yield yv(t,void 0))}if(!e&&s&&yd(s))return{token:s.token};let m,l=!1;if(zw()){r.exchangeTokenPromise||(r.exchangeTokenPromise=gd(fv(t,yield Ww()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const w=yield r.exchangeTokenPromise;return yield yv(t,w),r.token=w,{token:w.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),s=yield yr(t).exchangeTokenPromise}catch(w){"appCheck/throttled"===w.code?_a.warn(w.message):_a.error(w),u=w}return s?u?m=yd(s)?{token:s.token,internalError:u}:Qw(u):(m={token:s.token},r.token=s,yield yv(t,s)):m=Qw(u),l&&Yw(t,m),m})).apply(this,arguments)}function Iv(n,e){const t=yr(n),r=t.tokenObservers.filter(s=>s.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function Kw(n){const{app:e}=n,t=yr(e);let r=t.tokenRefresher;r||(r=function qC(n){const{app:e}=n;return new BC((0,ge.Z)(function*(){let r;if(r=yr(e).token?yield Dg(n,!0):yield Dg(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=yr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Yw(n,e){const t=yr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function yd(n){return n.expireTimeMillis-Date.now()>0}function Qw(n){return{token:wv(Zw),error:n}}class Jw{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=yr(this.app);for(const t of e)Iv(this.app,t.next);return Promise.resolve()}}const zc="app-check-internal";!function nE(){(0,Cu._registerComponent)(new dg.wA("app-check",n=>function Xw(n,e){return new Jw(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(zc).initialize()})),(0,Cu._registerComponent)(new dg.wA(zc,n=>function zC(n){return{getToken:e=>Dg(n,e),addTokenListener:e=>function Ev(n,e,t,r){const{app:s}=n,u=yr(s);if(u.tokenObservers=[...u.tokenObservers,{next:t,error:r,type:e}],u.token&&yd(u.token)){const m=u.token;Promise.resolve().then(()=>{t({token:m.token}),Kw(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>Kw(n))}(n,"INTERNAL",e),removeTokenListener:e=>Iv(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Cu.registerVersion)("@firebase/app-check","0.6.1")}();class Mg{constructor(){return(0,nr.vb)("app-check")}}typeof window<"u"&&window;var Rg=P(9260);const Ng=new d.OlP("angularfire2.auth.use-emulator"),Og=new d.OlP("angularfire2.auth.settings"),Sv=new d.OlP("angularfire2.auth.tenant-id"),Av=new d.OlP("angularfire2.auth.langugage-code"),Pg=new d.OlP("angularfire2.auth.use-device-language"),Mv=new d.OlP("angularfire.auth.persistence"),xv=(n,e,t,r,s,u,l,m)=>(0,zi.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const w=e.runOutsideAngular(()=>n.auth());if(t&&w.useEmulator(...t),r&&(w.tenantId=r),w.languageCode=s,u&&w.useDeviceLanguage(),l)for(const[C,A]of Object.entries(l))w.settings[C]=A;return m&&w.setPersistence(m),w},[t,r,s,u,l,m]);let wd=(()=>{class n{constructor(t,r,s,u,l,m,w,C,A,N,$,Y){const ne=new oi.x,xe=We(void 0).pipe((0,Yh.Q)(l.outsideAngular),zn(()=>u.runOutsideAngular(()=>Promise.resolve().then(P.bind(P,750)))),(0,I.U)(()=>(0,zi.on)(t,u,r)),(0,I.U)(Ve=>xv(Ve,u,m,C,A,N,w,$)),$c({bufferSize:1,refCount:!1}));if(Ku(s))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=We(null);else{xe.pipe(rs()).subscribe();const ft=xe.pipe(zn(Pt=>Pt.getRedirectResult().then(Lt=>Lt,()=>null)),nr.iC,$c({bufferSize:1,refCount:!1})),jt=xe.pipe(zn(Pt=>new ci.y(Lt=>({unsubscribe:u.runOutsideAngular(()=>Pt.onAuthStateChanged(qt=>Lt.next(qt),qt=>Lt.error(qt),()=>Lt.complete()))})))),Ot=xe.pipe(zn(Pt=>new ci.y(Lt=>({unsubscribe:u.runOutsideAngular(()=>Pt.onIdTokenChanged(qt=>Lt.next(qt),qt=>Lt.error(qt),()=>Lt.complete()))}))));this.authState=ft.pipe(lg(jt),(0,Hc.R)(l.outsideAngular),(0,Yh.Q)(l.insideAngular)),this.user=ft.pipe(lg(Ot),(0,Hc.R)(l.outsideAngular),(0,Yh.Q)(l.insideAngular)),this.idToken=this.user.pipe(zn(Pt=>Pt?(0,Ut.D)(Pt.getIdToken()):We(null))),this.idTokenResult=this.user.pipe(zn(Pt=>Pt?(0,Ut.D)(Pt.getIdTokenResult()):We(null))),this.credential=(0,AC.T)(ft,ne,this.authState.pipe(Ti(Pt=>!Pt))).pipe((0,I.U)(Pt=>Pt?.user?Pt:null),(0,Hc.R)(l.outsideAngular),(0,Yh.Q)(l.insideAngular))}return(0,zi.pX)(this,xe,u,{spy:{apply:(Ve,ft,jt)=>{(Ve.startsWith("signIn")||Ve.startsWith("createUser"))&&jt.then(Ot=>ne.next(Ot))}}})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(zi.Dh),d.LFG(zi.xv,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(nr.HU),d.LFG(Ng,8),d.LFG(Og,8),d.LFG(Sv,8),d.LFG(Av,8),d.LFG(Pg,8),d.LFG(Mv,8),d.LFG(Mg,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),aE=(()=>{class n{constructor(){Rg.Z.registerVersion("angularfire",nr.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[wd]}),n})();class Au{constructor(e){this.afAuth=e,this.user=e.user}signUp(e,t){return this.afAuth.createUserWithEmailAndPassword(e,t)}login(e,t){return this.afAuth.signInWithEmailAndPassword(e,t)}logout(){return this.afAuth.signOut()}}Au.\u0275fac=function(e){return new(e||Au)(d.LFG(wd))},Au.\u0275prov=d.Yz7({token:Au,factory:Au.\u0275fac,providedIn:"root"});let Rv=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(d.SBq))},n.\u0275dir=d.lG2({type:n}),n})(),Mu=(()=>{class n extends Rv{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,features:[d.qOj]}),n})();const to=new d.OlP("NgValueAccessor"),tb={provide:to,useExisting:(0,d.Gpc)(()=>wa),multi:!0},kg=new d.OlP("CompositionEventMode");let wa=(()=>{class n extends Rv{constructor(t,r,s){super(t,r),this._compositionMode=s,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Nv(){const n=O()?O().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(d.SBq),d.Y36(kg,8))},n.\u0275dir=d.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&d.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[d._Bn([tb]),d.qOj]}),n})();function Ea(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}const zr=new d.OlP("NgValidators"),Ia=new d.OlP("NgAsyncValidators"),dE=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;function hE(n){return Ea(n.value)?{required:!0}:null}function Fg(n){return Ea(n.value)||dE.test(n.value)?null:{email:!0}}function Ed(n){return null}function rb(n){return null!=n}function ib(n){return(0,d.QGY)(n)?(0,Ut.D)(n):n}function gE(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function mE(n,e){return e.map(t=>t(n))}function vE(n){return n.map(e=>function yE(n){return!n.validate}(e)?e:t=>e.validate(t))}function Vg(n){return null!=n?function rr(n){if(!n)return null;const e=n.filter(rb);return 0==e.length?null:function(t){return gE(mE(t,e))}}(vE(n)):null}function Pv(n){return null!=n?function _E(n){if(!n)return null;const e=n.filter(rb);return 0==e.length?null:function(t){return function uE(...n){const e=(0,Gi.jO)(n),{args:t,keys:r}=Mo(n),s=new ci.y(u=>{const{length:l}=t;if(!l)return void u.complete();const m=new Array(l);let w=l,C=l;for(let A=0;A<l;A++){let N=!1;(0,bn.Xf)(t[A]).subscribe((0,Q.x)(u,$=>{N||(N=!0,C--),m[A]=$},()=>w--,void 0,()=>{(!w||!N)&&(C||u.next(r?Z(r,m):m),u.complete())}))}});return e?s.pipe(F(e)):s}(mE(t,e).map(ib)).pipe((0,I.U)(gE))}}(vE(n)):null}function kv(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Ug(n){return n?Array.isArray(n)?n:[n]:[]}function Ca(n,e){return Array.isArray(n)?n.includes(e):n===e}function EE(n,e){const t=Ug(e);return Ug(n).forEach(s=>{Ca(t,s)||t.push(s)}),t}function IE(n,e){return Ug(e).filter(t=>!Ca(n,t))}class Lv{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Vg(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Pv(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class xi extends Lv{get formDirective(){return null}get path(){return null}}class ba extends Lv{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class sb{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Ri=(()=>{class n extends sb{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(ba,2))},n.\u0275dir=d.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&d.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[d.qOj]}),n})(),Bg=(()=>{class n extends sb{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(xi,10))},n.\u0275dir=d.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&d.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[d.qOj]}),n})();const hf="VALID",ff="INVALID",Wc="PENDING",Zc="DISABLED";function Dd(n){return(pf(n)?n.validators:n)||null}function $g(n,e){return(pf(e)?e.asyncValidators:n)||null}function pf(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class $v{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===hf}get invalid(){return this.status===ff}get pending(){return this.status==Wc}get disabled(){return this.status===Zc}get enabled(){return this.status!==Zc}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(EE(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(EE(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(IE(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(IE(e,this._rawAsyncValidators))}hasValidator(e){return Ca(this._rawValidators,e)}hasAsyncValidator(e){return Ca(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Wc,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Zc,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=hf,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===hf||this.status===Wc)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Zc:hf}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Wc,this._hasOwnPendingAsyncValidator=!0;const t=ib(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,s)=>r&&r._find(s),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new d.vpe,this.statusChanges=new d.vpe}_calculateStatus(){return this._allControlsDisabled()?Zc:this.errors?ff:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Wc)?Wc:this._anyControlsHaveStatus(ff)?ff:hf}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){pf(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function AE(n){return Array.isArray(n)?Vg(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function ME(n){return Array.isArray(n)?Pv(n):n||null}(this._rawAsyncValidators)}}class Hg extends $v{constructor(e,t,r){super(Dd(t),$g(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function jv(n,e,t){n._forEachChild((r,s)=>{if(void 0===t[s])throw new d.vHH(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function Bv(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new d.vHH(1e3,"");if(!r[t])throw new d.vHH(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const s=this.controls[r];s&&s.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,s)=>{r.reset(e[s],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,s)=>((r.enabled||this.disabled)&&(t[s]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((s,u)=>{r=t(r,s,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const gf=new d.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>Hv}),Hv="always";function mf(n,e,t=Hv){Gv(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function hb(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&xE(n,e)})}(n,e),function pb(n,e){const t=(r,s)=>{e.valueAccessor.writeValue(r),s&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function fb(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&xE(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function db(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function zg(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Gv(n,e){const t=function wE(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(kv(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function Fv(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(kv(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const s=()=>n.updateValueAndValidity();zg(e._rawValidators,s),zg(e._rawAsyncValidators,s)}function xE(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const vb={provide:xi,useExisting:(0,d.Gpc)(()=>ro)},yf=(()=>Promise.resolve())();let ro=(()=>{class n extends xi{constructor(t,r,s){super(),this.callSetDisabledState=s,this.submitted=!1,this._directives=new Set,this.ngSubmit=new d.vpe,this.form=new Hg({},Vg(t),Pv(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){yf.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),mf(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){yf.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){yf.then(()=>{const r=this._findContainer(t.path),s=new Hg({});(function RE(n,e){Gv(n,e)})(s,t),r.registerControl(t.name,s),s.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){yf.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){yf.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function qv(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(zr,10),d.Y36(Ia,10),d.Y36(gf,8))},n.\u0275dir=d.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&d.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[d._Bn([vb]),d.qOj]}),n})();function _b(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function Qg(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const wb=class extends $v{constructor(e=null,t,r){super(Dd(t),$g(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),pf(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=Qg(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){_b(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){_b(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){Qg(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},Jg={provide:ba,useExisting:(0,d.Gpc)(()=>hn)},vf=(()=>Promise.resolve())();let hn=(()=>{class n extends ba{constructor(t,r,s,u,l,m){super(),this._changeDetectorRef=l,this.callSetDisabledState=m,this.control=new wb,this._registered=!1,this.update=new d.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(s),this.valueAccessor=function Yg(n,e){if(!e)return null;let t,r,s;return Array.isArray(e),e.forEach(u=>{u.constructor===wa?t=u:function PE(n){return Object.getPrototypeOf(n.constructor)===Mu}(u)?r=u:s=u}),s||r||t||null}(0,u)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function Kg(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){mf(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){vf.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,s=0!==r&&(0,d.D6c)(r);vf.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function Gg(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(xi,9),d.Y36(zr,10),d.Y36(Ia,10),d.Y36(to,10),d.Y36(d.sBO,8),d.Y36(gf,8))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[d._Bn([Jg]),d.qOj,d.TTD]}),n})(),zv=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const VE={provide:to,useExisting:(0,d.Gpc)(()=>_f),multi:!0};let _f=(()=>{class n extends Mu{writeValue(t){this.setProperty("value",t??"")}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,r){1&t&&d.NdJ("input",function(u){return r.onChange(u.target.value)})("blur",function(){return r.onTouched()})},features:[d._Bn([VE]),d.qOj]}),n})(),Wv=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();const Sb={provide:to,useExisting:(0,d.Gpc)(()=>nm),multi:!0};function qE(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let nm=(()=>{class n extends Mu{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const s=qE(this._getOptionId(t),t);this.setProperty("value",s)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){const r=function Ab(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r):t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,r){1&t&&d.NdJ("change",function(u){return r.onChange(u.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[d._Bn([Sb]),d.qOj]}),n})(),Yv=(()=>{class n{constructor(t,r,s){this._element=t,this._renderer=r,this._select=s,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(qE(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(d.Qsj),d.Y36(nm,9))},n.\u0275dir=d.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const zE={provide:to,useExisting:(0,d.Gpc)(()=>Qv),multi:!0};function WE(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let Qv=(()=>{class n extends Mu{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let r;if(this.value=t,Array.isArray(t)){const s=t.map(u=>this._getOptionId(u));r=(u,l)=>{u._setSelected(s.indexOf(l.toString())>-1)}}else r=(s,u)=>{s._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{const s=[],u=r.selectedOptions;if(void 0!==u){const l=u;for(let m=0;m<l.length;m++){const C=this._getOptionValue(l[m].value);s.push(C)}}else{const l=r.options;for(let m=0;m<l.length;m++){const w=l[m];if(w.selected){const C=this._getOptionValue(w.value);s.push(C)}}}this.value=s,t(s)}}_registerOption(t){const r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){const r=function ZE(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,r){1&t&&d.NdJ("change",function(u){return r.onChange(u.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[d._Bn([zE]),d.qOj]}),n})(),Mb=(()=>{class n{constructor(t,r,s){this._element=t,this._renderer=r,this._select=s,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(WE(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(WE(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(d.Qsj),d.Y36(Qv,9))},n.\u0275dir=d.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();let Sd=(()=>{class n{constructor(){this._validator=Ed}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):Ed,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,features:[d.TTD]}),n})();const Ob={provide:zr,useExisting:(0,d.Gpc)(()=>Ad),multi:!0};let Ad=(()=>{class n extends Sd{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=d.D6c,this.createValidator=t=>hE}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&d.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[d._Bn([Ob]),d.qOj]}),n})();const kb={provide:zr,useExisting:(0,d.Gpc)(()=>rm),multi:!0};let rm=(()=>{class n extends Sd{constructor(){super(...arguments),this.inputName="email",this.normalizeInput=d.D6c,this.createValidator=t=>Fg}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,selectors:[["","email","","formControlName",""],["","email","","formControl",""],["","email","","ngModel",""]],inputs:{email:"email"},features:[d._Bn([kb]),d.qOj]}),n})();const Fb={provide:zr,useExisting:(0,d.Gpc)(()=>im),multi:!0};let im=(()=>{class n extends Sd{constructor(){super(...arguments),this.inputName="minlength",this.normalizeInput=t=>function xb(n){return"number"==typeof n?n:parseInt(n,10)}(t),this.createValidator=t=>function xu(n){return e=>Ea(e.value)||!function Ov(n){return null!=n&&"number"==typeof n.length}(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(t,r){2&t&&d.uIk("minlength",r._enabled?r.minlength:null)},inputs:{minlength:"minlength"},features:[d._Bn([Fb]),d.qOj]}),n})(),Bb=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[Wv]}),n})(),om=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:gf,useValue:t.callSetDisabledState??Hv}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[Bb]}),n})();function Hb(n,e){1&n&&(d.TgZ(0,"a",15),d._uU(1,"Panier"),d.qZA())}function Xv(n,e){1&n&&(d.TgZ(0,"a",16),d._uU(1,"SignUp"),d.qZA())}function Gb(n,e){1&n&&(d.TgZ(0,"a",17),d._uU(1,"SignIn"),d.qZA())}function XE(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"button",18),d.NdJ("click",function(){d.CHM(t);const s=d.oxw();return d.KtG(s.logout())}),d._uU(1,"Logout"),d.qZA()}}class Df{constructor(e){this.authService=e,this.isUser=!1}ngOnInit(){this.authService.user.subscribe(e=>{this.isUser=!!e})}onSearchChange(){}logout(){this.authService.logout()}}Df.\u0275fac=function(e){return new(e||Df)(d.Y36(Au))},Df.\u0275cmp=d.Xpm({type:Df,selectors:[["app-header"]],decls:18,vars:5,consts:[["id","myNavbar",1,"navbar","navbar-expand-lg","navbar-dark","sticky-top"],[1,"container-fluid"],[1,"navbar-brand"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarNav","aria-controls","navbarNav","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarNav",1,"collapse","navbar-collapse"],[1,"navbar-nav"],["routerLink","/products",1,"nav-link"],["class","nav-link","routerLink","/cart",4,"ngIf"],["class","nav-link","routerLink","/SignUp",4,"ngIf"],["class","nav-link","routerLink","/SignIn",4,"ngIf"],[1,"d-flex"],["type","search","placeholder","Search","aria-label","Search",1,"form-control","me-2",3,"ngModel","ngModelChange","input"],["type","submit",1,"btn","btn-outline-success"],["class","btn btn-danger",3,"click",4,"ngIf"],["routerLink","/cart",1,"nav-link"],["routerLink","/SignUp",1,"nav-link"],["routerLink","/SignIn",1,"nav-link"],[1,"btn","btn-danger",3,"click"]],template:function(e,t){1&e&&(d.TgZ(0,"nav",0)(1,"div",1),d._UZ(2,"a",2),d.TgZ(3,"button",3),d._UZ(4,"span",4),d.qZA(),d.TgZ(5,"div",5)(6,"div",6)(7,"a",7),d._uU(8,"Products"),d.qZA(),d.YNc(9,Hb,2,0,"a",8),d.YNc(10,Xv,2,0,"a",9),d.YNc(11,Gb,2,0,"a",10),d.TgZ(12,"form",11)(13,"input",12),d.NdJ("ngModelChange",function(s){return t.searchTerm=s})("input",function(){return t.onSearchChange()}),d.qZA(),d.TgZ(14,"button",13),d._uU(15,"Search"),d.qZA()(),d.TgZ(16,"li"),d.YNc(17,XE,2,0,"button",14),d.qZA()()()()()),2&e&&(d.xp6(9),d.Q6J("ngIf",t.isUser),d.xp6(1),d.Q6J("ngIf",!t.isUser),d.xp6(1),d.Q6J("ngIf",!t.isUser),d.xp6(2),d.Q6J("ngModel",t.searchTerm),d.xp6(4),d.Q6J("ngIf",t.isUser))},dependencies:[rn,Uc,zv,wa,Ri,Bg,hn,ro],styles:["nav[_ngcontent-%COMP%]{font-family:Lato,sans-serif}.navbar[_ngcontent-%COMP%]{background-color:#273043;letter-spacing:2px;text-transform:uppercase;font-weight:700;border-bottom:1px solid white}.navbar-nav[_ngcontent-%COMP%]{margin:0 auto;text-align:center}.nav-link[_ngcontent-%COMP%]{color:#fff!important}.nav-link.active[_ngcontent-%COMP%], .nav-link[_ngcontent-%COMP%]:hover{background-color:#fff;color:#817673!important}"]});class Cf{}Cf.\u0275fac=function(e){return new(e||Cf)},Cf.\u0275cmp=d.Xpm({type:Cf,selectors:[["app-footer"]],decls:6,vars:0,consts:[[1,"text-center"],["routerLink","/products"],[1,""],[1,"bi-shield-check"]],template:function(e,t){1&e&&(d.TgZ(0,"footer",0)(1,"a",1),d._UZ(2,"span",2),d.qZA(),d.TgZ(3,"h5"),d._uU(4,"\xa9 CHAOUI MZABI YOUNES "),d._UZ(5,"span",3),d.qZA()())},dependencies:[Uc],styles:["footer[_ngcontent-%COMP%]{bottom:0;width:100%;background-color:#333;padding:20px 0 40px}footer[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#817673;font-size:25px}footer[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{color:#fff;font-weight:400}"]});class bf{constructor(){this.title="Ecommerce"}}bf.\u0275fac=function(e){return new(e||bf)},bf.\u0275cmp=d.Xpm({type:bf,selectors:[["app-root"]],decls:4,vars:0,consts:[[1,"container"]],template:function(e,t){1&e&&(d._UZ(0,"app-header"),d.TgZ(1,"div",0),d._UZ(2,"router-outlet"),d.qZA(),d._UZ(3,"app-footer"))},dependencies:[rw,Df,Cf]});class am{}class e_{}class Ta{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const s=t.slice(0,r),u=s.toLowerCase(),l=t.slice(r+1).trim();this.maybeSetNormalizedName(s,u),this.headers.has(u)?this.headers.get(u).push(l):this.headers.set(u,[l])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const s=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(s,r),this.maybeSetNormalizedName(t,s))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Ta?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Ta;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Ta?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const s=("a"===e.op?this.headers.get(t):void 0)||[];s.push(...r),this.headers.set(t,s);break;case"d":const u=e.value;if(u){let l=this.headers.get(t);if(!l)return;l=l.filter(m=>-1===u.indexOf(m)),0===l.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,l)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class qb{encodeKey(e){return nI(e)}encodeValue(e){return nI(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const tI=/%(\d[a-f0-9])/gi,zb={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function nI(n){return encodeURIComponent(n).replace(tI,(e,t)=>zb[t]??e)}function Tf(n){return`${n}`}class Ru{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new qb,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function eI(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(s=>{const u=s.indexOf("="),[l,m]=-1==u?[e.decodeKey(s),""]:[e.decodeKey(s.slice(0,u)),e.decodeValue(s.slice(u+1))],w=t.get(l)||[];w.push(m),t.set(l,w)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],s=Array.isArray(r)?r.map(Tf):[Tf(r)];this.map.set(t,s)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const s=e[r];Array.isArray(s)?s.forEach(u=>{t.push({param:r,value:u,op:"a"})}):t.push({param:r,value:s,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Ru({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(Tf(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const s=r.indexOf(Tf(e.value));-1!==s&&r.splice(s,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class Wb{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function um(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function n_(n){return typeof Blob<"u"&&n instanceof Blob}function cm(n){return typeof FormData<"u"&&n instanceof FormData}class Sf{constructor(e,t,r,s){let u;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function t_(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||s?(this.body=void 0!==r?r:null,u=s):u=r,u&&(this.reportProgress=!!u.reportProgress,this.withCredentials=!!u.withCredentials,u.responseType&&(this.responseType=u.responseType),u.headers&&(this.headers=u.headers),u.context&&(this.context=u.context),u.params&&(this.params=u.params)),this.headers||(this.headers=new Ta),this.context||(this.context=new Wb),this.params){const l=this.params.toString();if(0===l.length)this.urlWithParams=t;else{const m=t.indexOf("?");this.urlWithParams=t+(-1===m?"?":m<t.length-1?"&":"")+l}}else this.params=new Ru,this.urlWithParams=t}serializeBody(){return null===this.body?null:um(this.body)||n_(this.body)||cm(this.body)||function Zb(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Ru?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||cm(this.body)?null:n_(this.body)?this.body.type||null:um(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Ru?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,s=e.responseType||this.responseType,u=void 0!==e.body?e.body:this.body,l=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,m=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let w=e.headers||this.headers,C=e.params||this.params;const A=e.context??this.context;return void 0!==e.setHeaders&&(w=Object.keys(e.setHeaders).reduce((N,$)=>N.set($,e.setHeaders[$]),w)),e.setParams&&(C=Object.keys(e.setParams).reduce((N,$)=>N.set($,e.setParams[$]),C)),new Sf(t,r,u,{params:C,headers:w,context:A,reportProgress:m,responseType:s,withCredentials:l})}}var Bn=(()=>((Bn=Bn||{})[Bn.Sent=0]="Sent",Bn[Bn.UploadProgress=1]="UploadProgress",Bn[Bn.ResponseHeader=2]="ResponseHeader",Bn[Bn.DownloadProgress=3]="DownloadProgress",Bn[Bn.Response=4]="Response",Bn[Bn.User=5]="User",Bn))();class r_{constructor(e,t=200,r="OK"){this.headers=e.headers||new Ta,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class lm extends r_{constructor(e={}){super(e),this.type=Bn.ResponseHeader}clone(e={}){return new lm({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Sa extends r_{constructor(e={}){super(e),this.type=Bn.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Sa({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class i_ extends r_{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function s_(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let Kb=(()=>{class n{constructor(t){this.handler=t}request(t,r,s={}){let u;if(t instanceof Sf)u=t;else{let w,C;w=s.headers instanceof Ta?s.headers:new Ta(s.headers),s.params&&(C=s.params instanceof Ru?s.params:new Ru({fromObject:s.params})),u=new Sf(t,r,void 0!==s.body?s.body:null,{headers:w,context:s.context,params:C,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials})}const l=We(u).pipe(ha(w=>this.handler.handle(w)));if(t instanceof Sf||"events"===s.observe)return l;const m=l.pipe(Ti(w=>w instanceof Sa));switch(s.observe||"body"){case"body":switch(u.responseType){case"arraybuffer":return m.pipe((0,I.U)(w=>{if(null!==w.body&&!(w.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return w.body}));case"blob":return m.pipe((0,I.U)(w=>{if(null!==w.body&&!(w.body instanceof Blob))throw new Error("Response is not a Blob.");return w.body}));case"text":return m.pipe((0,I.U)(w=>{if(null!==w.body&&"string"!=typeof w.body)throw new Error("Response is not a string.");return w.body}));default:return m.pipe((0,I.U)(w=>w.body))}case"response":return m;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new Ru).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,s={}){return this.request("PATCH",t,s_(s,r))}post(t,r,s={}){return this.request("POST",t,s_(s,r))}put(t,r,s={}){return this.request("PUT",t,s_(s,r))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(am))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function o_(n,e){return e(n)}function a_(n,e){return(t,r)=>e.intercept(t,{handle:s=>n(s,r)})}const u_=new d.OlP("HTTP_INTERCEPTORS"),Af=new d.OlP("HTTP_INTERCEPTOR_FNS");function rI(){let n=null;return(e,t)=>(null===n&&(n=((0,d.f3M)(u_,{optional:!0})??[]).reduceRight(a_,o_)),n(e,t))}let dm=(()=>{class n extends am{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=Array.from(new Set(this.injector.get(Af)));this.chain=r.reduceRight((s,u)=>function Yb(n,e,t){return(r,s)=>t.runInContext(()=>e(r,u=>n(u,s)))}(s,u,this.injector),o_)}return this.chain(t,r=>this.backend.handle(r))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(e_),d.LFG(d.lqb))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const iT=/^\)\]\}',?\n/;let oT=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new ci.y(r=>{const s=this.xhrFactory.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((Y,ne)=>s.setRequestHeader(Y,ne.join(","))),t.headers.has("Accept")||s.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const Y=t.detectContentTypeHeader();null!==Y&&s.setRequestHeader("Content-Type",Y)}if(t.responseType){const Y=t.responseType.toLowerCase();s.responseType="json"!==Y?Y:"text"}const u=t.serializeBody();let l=null;const m=()=>{if(null!==l)return l;const Y=s.statusText||"OK",ne=new Ta(s.getAllResponseHeaders()),xe=function sT(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(s)||t.url;return l=new lm({headers:ne,status:s.status,statusText:Y,url:xe}),l},w=()=>{let{headers:Y,status:ne,statusText:xe,url:Ve}=m(),ft=null;204!==ne&&(ft=typeof s.response>"u"?s.responseText:s.response),0===ne&&(ne=ft?200:0);let jt=ne>=200&&ne<300;if("json"===t.responseType&&"string"==typeof ft){const Ot=ft;ft=ft.replace(iT,"");try{ft=""!==ft?JSON.parse(ft):null}catch(Pt){ft=Ot,jt&&(jt=!1,ft={error:Pt,text:ft})}}jt?(r.next(new Sa({body:ft,headers:Y,status:ne,statusText:xe,url:Ve||void 0})),r.complete()):r.error(new i_({error:ft,headers:Y,status:ne,statusText:xe,url:Ve||void 0}))},C=Y=>{const{url:ne}=m(),xe=new i_({error:Y,status:s.status||0,statusText:s.statusText||"Unknown Error",url:ne||void 0});r.error(xe)};let A=!1;const N=Y=>{A||(r.next(m()),A=!0);let ne={type:Bn.DownloadProgress,loaded:Y.loaded};Y.lengthComputable&&(ne.total=Y.total),"text"===t.responseType&&!!s.responseText&&(ne.partialText=s.responseText),r.next(ne)},$=Y=>{let ne={type:Bn.UploadProgress,loaded:Y.loaded};Y.lengthComputable&&(ne.total=Y.total),r.next(ne)};return s.addEventListener("load",w),s.addEventListener("error",C),s.addEventListener("timeout",C),s.addEventListener("abort",C),t.reportProgress&&(s.addEventListener("progress",N),null!==u&&s.upload&&s.upload.addEventListener("progress",$)),s.send(u),r.next({type:Bn.Sent}),()=>{s.removeEventListener("error",C),s.removeEventListener("abort",C),s.removeEventListener("load",w),s.removeEventListener("timeout",C),t.reportProgress&&(s.removeEventListener("progress",N),null!==u&&s.upload&&s.upload.removeEventListener("progress",$)),s.readyState!==s.DONE&&s.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ms))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const l_=new d.OlP("XSRF_ENABLED"),iI="XSRF-TOKEN",sI=new d.OlP("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>iI}),oI="X-XSRF-TOKEN",aI=new d.OlP("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>oI});class uI{}let aT=(()=>{class n{constructor(t,r,s){this.doc=t,this.platform=r,this.cookieName=s,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Yn(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(re),d.LFG(d.Lbi),d.LFG(sI))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function uT(n,e){const t=n.url.toLowerCase();if(!(0,d.f3M)(l_)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const r=(0,d.f3M)(uI).getToken(),s=(0,d.f3M)(aI);return null!=r&&!n.headers.has(s)&&(n=n.clone({headers:n.headers.set(s,r)})),e(n)}var Wn=(()=>((Wn=Wn||{})[Wn.Interceptors=0]="Interceptors",Wn[Wn.LegacyInterceptors=1]="LegacyInterceptors",Wn[Wn.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",Wn[Wn.NoXsrfProtection=3]="NoXsrfProtection",Wn[Wn.JsonpSupport=4]="JsonpSupport",Wn[Wn.RequestsMadeViaParent=5]="RequestsMadeViaParent",Wn))();function xd(n,e){return{\u0275kind:n,\u0275providers:e}}function cT(...n){const e=[Kb,oT,dm,{provide:am,useExisting:dm},{provide:e_,useExisting:oT},{provide:Af,useValue:uT,multi:!0},{provide:l_,useValue:!0},{provide:uI,useClass:aT}];for(const t of n)e.push(...t.\u0275providers);return(0,d.MR2)(e)}const d_=new d.OlP("LEGACY_INTERCEPTOR_FN");function lI({cookieName:n,headerName:e}){const t=[];return void 0!==n&&t.push({provide:sI,useValue:n}),void 0!==e&&t.push({provide:aI,useValue:e}),xd(Wn.CustomXsrfConfiguration,t)}let ux=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[cT(xd(Wn.LegacyInterceptors,[{provide:d_,useFactory:rI},{provide:Af,useExisting:d_,multi:!0}]),lI({cookieName:iI,headerName:oI}))]}),n})();class Kc{}Kc.\u0275fac=function(e){return new(e||Kc)},Kc.\u0275mod=d.oAB({type:Kc}),Kc.\u0275inj=d.cJS({imports:[Ur,ux,om,om]});class Yc{constructor(e){this.http=e}getAllProducts(){return this.http.get("https://fakestoreapi.com/products")}getAllCategories(){return this.http.get("https://fakestoreapi.com/products/categories")}getProductsByCategory(e){return this.http.get("https://fakestoreapi.com/products/category/"+e)}getProductById(e){return this.http.get("https://fakestoreapi.com/products/"+e)}}Yc.\u0275fac=function(e){return new(e||Yc)(d.LFG(Kb))},Yc.\u0275prov=d.Yz7({token:Yc,factory:Yc.\u0275fac,providedIn:"root"});class Mf{}function xf(n,e){if(1&n&&(d.TgZ(0,"option",4),d._uU(1),d.qZA()),2&n){const t=e.$implicit;d.s9C("value",t),d.xp6(1),d.hij(" ",t," ")}}Mf.\u0275fac=function(e){return new(e||Mf)},Mf.\u0275cmp=d.Xpm({type:Mf,selectors:[["app-spinner"]],decls:6,vars:0,consts:[[1,"lds-ring"]],template:function(e,t){1&e&&(d.TgZ(0,"div")(1,"div",0),d._UZ(2,"div")(3,"div")(4,"div")(5,"div"),d.qZA()())},styles:[".lds-ring[_ngcontent-%COMP%]{display:inline-block;position:relative;width:80px;height:80px}.lds-ring[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{box-sizing:border-box;display:block;position:absolute;width:64px;height:64px;margin:8px;border:8px solid #ce3030;border-radius:50%;animation:_ngcontent-%COMP%_lds-ring 1.2s cubic-bezier(.5,0,.5,1) infinite;border-color:#ce3030 transparent transparent transparent}.lds-ring[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(1){animation-delay:-.45s}.lds-ring[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(2){animation-delay:-.3s}.lds-ring[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(3){animation-delay:-.15s}@keyframes _ngcontent-%COMP%_lds-ring{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]});class Rf{constructor(){this.title="",this.data=[],this.selectedValue=new d.vpe}ngOnInit(){}detectChanges(e){this.selectedValue.emit(e)}}function h_(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"button",7),d.NdJ("click",function(){d.CHM(t);const s=d.oxw();return d.KtG(s.addButton=!0)}),d._uU(1," Add to Cart"),d.qZA()}}function Vo(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",8)(1,"input",9),d.NdJ("ngModelChange",function(s){d.CHM(t);const u=d.oxw();return d.KtG(u.amount=s)}),d.qZA(),d.TgZ(2,"button",10),d.NdJ("click",function(){d.CHM(t);const s=d.oxw();return s.add(),d.KtG(s.addButton=!1)}),d._uU(3," Add"),d.qZA()()}if(2&n){const t=d.oxw();d.xp6(1),d.Q6J("ngModel",t.amount)}}Rf.\u0275fac=function(e){return new(e||Rf)},Rf.\u0275cmp=d.Xpm({type:Rf,selectors:[["app-select"]],inputs:{title:"title",data:"data"},outputs:{selectedValue:"selectedValue"},decls:6,vars:2,consts:[[1,"my-1"],[1,"form-control",3,"change"],["value","all","selected",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&(d.TgZ(0,"label",0),d._uU(1),d.qZA(),d.TgZ(2,"select",1),d.NdJ("change",function(s){return t.detectChanges(s)}),d.TgZ(3,"option",2),d._uU(4," all "),d.qZA(),d.YNc(5,xf,2,2,"option",3),d.qZA()),2&e&&(d.xp6(1),d.Oqu(t.title),d.xp6(4),d.Q6J("ngForOf",t.data))},dependencies:[wi,Yv,Mb]});class Nf{constructor(){this.item=new d.vpe,this.addButton=!1,this.amount=0}ngOnInit(){}add(){this.item.emit({item:this.data,quantity:this.amount})}}function f_(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",7)(1,"app-product",8),d.NdJ("item",function(s){d.CHM(t);const u=d.oxw(2);return d.KtG(u.addToCart(s))}),d.qZA()()}if(2&n){const t=e.$implicit;d.xp6(1),d.Q6J("data",t)}}function Of(n,e){if(1&n&&(d.TgZ(0,"div",5),d.YNc(1,f_,2,1,"div",6),d.qZA()),2&n){const t=d.oxw();d.xp6(1),d.Q6J("ngForOf",t.products)}}function hT(n,e){1&n&&(d.TgZ(0,"div",9),d._UZ(1,"app-spinner"),d.qZA())}Nf.\u0275fac=function(e){return new(e||Nf)},Nf.\u0275cmp=d.Xpm({type:Nf,selectors:[["app-product"]],inputs:{data:"data"},outputs:{item:"item"},decls:13,vars:7,consts:[[1,"item"],[3,"routerLink"],["alt","",3,"src"],[1,"body"],[1,"px-3","mb-2","d-flex","justify-content-between","align-items-center"],["class","btn btn-success",3,"click",4,"ngIf"],["class","d-flex w-50",4,"ngIf"],[1,"btn","btn-success",3,"click"],[1,"d-flex","w-50"],["type","number",1,"form-control",3,"ngModel","ngModelChange"],[1,"btn","btn-danger",3,"click"]],template:function(e,t){1&e&&(d.TgZ(0,"div",0)(1,"div",1),d._UZ(2,"img",2),d.TgZ(3,"div",3)(4,"h4"),d._uU(5),d.qZA(),d.TgZ(6,"p"),d._uU(7),d.qZA()()(),d.TgZ(8,"div",4),d.YNc(9,h_,2,0,"button",5),d.YNc(10,Vo,4,1,"div",6),d.TgZ(11,"span"),d._uU(12),d.qZA()()()),2&e&&(d.xp6(1),d.MGl("routerLink","/details/",t.data.id,""),d.xp6(1),d.s9C("src",t.data.image,d.LSH),d.xp6(3),d.Oqu(t.data.title),d.xp6(2),d.Oqu(t.data.description),d.xp6(2),d.Q6J("ngIf",!t.addButton),d.xp6(1),d.Q6J("ngIf",t.addButton),d.xp6(2),d.Oqu(t.data.price))},dependencies:[rn,wa,_f,Ri,hn,Uc],styles:[".item[_ngcontent-%COMP%]{width:100%;text-decoration:none;color:#333;margin:15px;display:inline-block;border-radius:10px;box-shadow:0 2px 5px #ca25104d;transition:all .3s ease-in-out}img[_ngcontent-%COMP%]{width:100%;height:200px;border-radius:10px}.body[_ngcontent-%COMP%]{padding-top:0}p[_ngcontent-%COMP%]{margin:15px 0;height:100px;overflow:hidden;font-size:16px;padding:5px 15px}h4[_ngcontent-%COMP%]{height:75px;overflow:hidden;padding:5px 15px;font-size:18px;background-color:#eee;font-weight:600;margin-top:10px}.item[_ngcontent-%COMP%]:hover{transform:scale(1.07)}span[_ngcontent-%COMP%]{background-color:#9ac4f6;padding:3px 7px;border-radius:10px}"]});class Pf{constructor(e){this.service=e,this.products=[],this.categories=[],this.cartProducts=[],this.loading=!1}ngOnInit(){this.getProducts(),this.getCategories()}getProducts(){this.loading=!0,this.service.getAllProducts().subscribe(e=>{this.products=e,this.loading=!1},e=>{alert(e)})}getCategories(){this.loading=!0,this.service.getAllCategories().subscribe(e=>{this.categories=e,this.loading=!1},e=>{alert(e)})}filterCategory(e){let t=e.target.value;"all"==t?this.getProducts():this.getProductsCategory(t)}getProductsCategory(e){this.loading=!0,this.service.getProductsByCategory(e).subscribe(t=>{this.products=t,this.loading=!1})}addToCart(e){"cart"in localStorage?(this.cartProducts=JSON.parse(localStorage.getItem("cart")),this.cartProducts.find(r=>r.item.id==e.item.id)?alert("Product kayn d\xe9ja"):(this.cartProducts.push(e),localStorage.setItem("cart",JSON.stringify(this.cartProducts)))):(this.cartProducts.push(e),localStorage.setItem("cart",JSON.stringify(this.cartProducts)))}}function fT(n,e){if(1&n&&(d.TgZ(0,"div",2)(1,"div",3),d._UZ(2,"img",4),d.qZA(),d.TgZ(3,"div",5)(4,"div",6)(5,"ul",7)(6,"li")(7,"strong"),d._uU(8,"Id du produit : "),d.qZA(),d._uU(9),d.qZA(),d.TgZ(10,"li")(11,"strong"),d._uU(12,"Title : "),d.qZA(),d._uU(13),d.qZA(),d.TgZ(14,"li")(15,"strong"),d._uU(16,"Category : "),d.qZA(),d._uU(17),d.qZA(),d.TgZ(18,"li")(19,"strong"),d._uU(20,"Description : "),d.qZA(),d._uU(21),d.qZA(),d.TgZ(22,"li")(23,"strong"),d._uU(24,"Rate : "),d.qZA(),d._uU(25),d.qZA(),d.TgZ(26,"li")(27,"strong"),d._uU(28,"Count : "),d.qZA(),d._uU(29),d.qZA(),d.TgZ(30,"li")(31,"strong"),d._uU(32,"Price : "),d.qZA(),d._uU(33),d.qZA()()()()()),2&n){const t=d.oxw();d.xp6(2),d.s9C("src",t.data.image,d.LSH),d.xp6(7),d.Oqu(t.data.id),d.xp6(4),d.Oqu(t.data.title),d.xp6(4),d.Oqu(t.data.category),d.xp6(4),d.Oqu(t.data.description),d.xp6(4),d.Oqu(t.data.rating.rate),d.xp6(4),d.Oqu(t.data.rating.count),d.xp6(4),d.Oqu(t.data.price)}}Pf.\u0275fac=function(e){return new(e||Pf)(d.Y36(Yc))},Pf.\u0275cmp=d.Xpm({type:Pf,selectors:[["app-all-products"]],decls:5,vars:4,consts:[[1,"box","mt-5"],[1,"my-2","w-25"],[3,"data","title","selectedValue"],["class","row",4,"ngIf"],["class","text-center w-100",4,"ngIf"],[1,"row"],["class","col-md-3 col-sm-12",4,"ngFor","ngForOf"],[1,"col-md-3","col-sm-12"],[3,"data","item"],[1,"text-center","w-100"]],template:function(e,t){1&e&&(d.TgZ(0,"div",0)(1,"div",1)(2,"app-select",2),d.NdJ("selectedValue",function(s){return t.filterCategory(s)}),d.qZA()(),d.YNc(3,Of,2,1,"div",3),d.YNc(4,hT,2,0,"div",4),d.qZA()),2&e&&(d.xp6(2),d.Q6J("data",t.categories)("title","Categories"),d.xp6(1),d.Q6J("ngIf",!t.loading),d.xp6(1),d.Q6J("ngIf",t.loading))},dependencies:[wi,rn,Mf,Rf,Nf]});class Nu{constructor(e,t){this.route=e,this.service=t,this.loading=!1,this.data={},this.id=this.route.snapshot.paramMap.get("id")}ngOnInit(){this.getProduct()}getProduct(){this.loading=!0,this.service.getProductById(this.id).subscribe(e=>{this.loading=!1,this.data=e})}}function fm(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"tr")(1,"td"),d._UZ(2,"img",3),d.qZA(),d.TgZ(3,"td"),d._uU(4),d.qZA(),d.TgZ(5,"td"),d._uU(6),d.qZA(),d.TgZ(7,"td")(8,"button",4),d.NdJ("click",function(){const u=d.CHM(t).index,l=d.oxw();return d.KtG(l.addAmount(u))}),d._uU(9,"+"),d.qZA(),d.TgZ(10,"input",5),d.NdJ("change",function(){d.CHM(t);const s=d.oxw();return d.KtG(s.detectChanges())})("ngModelChange",function(s){const l=d.CHM(t).$implicit;return d.KtG(l.quantity=s)}),d.qZA(),d.TgZ(11,"button",4),d.NdJ("click",function(){const u=d.CHM(t).index,l=d.oxw();return d.KtG(l.minsAmount(u))}),d._uU(12,"-"),d.qZA()(),d.TgZ(13,"td"),d._uU(14),d.qZA(),d.TgZ(15,"td")(16,"button",2),d.NdJ("click",function(){const u=d.CHM(t).index,l=d.oxw();return d.KtG(l.deleteProduct(u))}),d._uU(17,"Supprimer"),d.qZA()()()}if(2&n){const t=e.$implicit;d.xp6(2),d.s9C("src",t.item.image,d.LSH),d.xp6(2),d.Oqu(t.item.title),d.xp6(2),d.Oqu(t.item.price),d.xp6(4),d.Q6J("ngModel",t.quantity),d.xp6(4),d.Oqu(t.item.price*t.quantity)}}Nu.\u0275fac=function(e){return new(e||Nu)(d.Y36(H),d.Y36(Yc))},Nu.\u0275cmp=d.Xpm({type:Nu,selectors:[["app-products-details"]],decls:2,vars:1,consts:[[1,"box"],["class","row",4,"ngIf"],[1,"row"],[1,"col-md-5","col-sm-12"],["alt","sas",3,"src"],[1,"col-td-7","col-sm-12"],[1,"info"],[1,"list-unstylecr"]],template:function(e,t){1&e&&(d.TgZ(0,"div",0),d.YNc(1,fT,34,8,"div",1),d.qZA()),2&e&&(d.xp6(1),d.Q6J("ngIf",!t.loading))},dependencies:[rn],styles:[".box[_ngcontent-%COMP%]{width:90%;margin:100px auto;height:500px}li[_ngcontent-%COMP%]{font-size:22px;margin:20px 0}img[_ngcontent-%COMP%]{width:100%;max-height:500px;min-height:500px}"]});class kf{constructor(){this.cardProducts=[]}ngOnInit(){this.getCardProducts()}getCardProducts(){"cart"in localStorage&&(this.cardProducts=JSON.parse(localStorage.getItem("cart"))),this.getTotalPrice()}getTotalPrice(){this.total=0;for(let e in this.cardProducts)this.total+=this.cardProducts[e].item.price*this.cardProducts[e].quantity}addAmount(e){this.cardProducts[e].quantity++,this.getTotalPrice(),localStorage.setItem("cart",JSON.stringify(this.cardProducts))}minsAmount(e){this.cardProducts[e].quantity--,this.getTotalPrice(),localStorage.setItem("cart",JSON.stringify(this.cardProducts))}detectChanges(){this.getTotalPrice(),localStorage.setItem("cart",JSON.stringify(this.cardProducts))}deleteProduct(e){this.cardProducts.splice(e,1),this.getTotalPrice(),localStorage.setItem("cart",JSON.stringify(this.cardProducts))}clearCard(){this.cardProducts.splice(0,this.cardProducts.length),this.getTotalPrice(),localStorage.setItem("cart",JSON.stringify(this.cardProducts))}}kf.\u0275fac=function(e){return new(e||kf)},kf.\u0275cmp=d.Xpm({type:kf,selectors:[["app-card"]],decls:26,vars:2,consts:[["id","shopping-cart"],[4,"ngFor","ngForOf"],[3,"click"],["alt","Product 1",3,"src"],[1,"btn","btn-dark",3,"click"],["type","number","value","1",3,"ngModel","change","ngModelChange"]],template:function(e,t){1&e&&(d.TgZ(0,"div",0)(1,"h2"),d._uU(2,"Mon panier"),d.qZA(),d.TgZ(3,"table")(4,"thead")(5,"tr")(6,"th"),d._uU(7,"Image"),d.qZA(),d.TgZ(8,"th"),d._uU(9,"Nom"),d.qZA(),d.TgZ(10,"th"),d._uU(11,"Prix unitaire"),d.qZA(),d.TgZ(12,"th"),d._uU(13,"Quantit\xe9"),d.qZA(),d.TgZ(14,"th"),d._uU(15,"Prix"),d.qZA(),d.TgZ(16,"th"),d._uU(17,"Actions"),d.qZA()()(),d.TgZ(18,"tbody"),d.YNc(19,fm,18,5,"tr",1),d.qZA()(),d.TgZ(20,"p"),d._uU(21),d.qZA(),d.TgZ(22,"button"),d._uU(23,"Payer"),d.qZA(),d.TgZ(24,"button",2),d.NdJ("click",function(){return t.clearCard()}),d._uU(25,"ClearCard"),d.qZA()()),2&e&&(d.xp6(19),d.Q6J("ngForOf",t.cardProducts),d.xp6(2),d.hij("Total: ",t.total,""))},dependencies:[wi,wa,_f,Ri,hn],styles:["#shopping-cart[_ngcontent-%COMP%]{width:500px;margin:0 auto;text-align:center}#shopping-cart[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#333}#shopping-cart[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}#shopping-cart[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], #shopping-cart[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:1px solid #ddd;padding:8px}#shopping-cart[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(even){background-color:#f2f2f2}#shopping-cart[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#ddd}#shopping-cart[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#817673;color:#fff}#shopping-cart[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]{width:50px}#shopping-cart[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#3f4f3f;border:none;color:#fff;padding:8px 16px;text-align:center;text-decoration:none;display:inline-block;font-size:16px;margin:4px 2px;cursor:pointer}img[_ngcontent-%COMP%]{width:100px;height:100px;border-radius:50%}"]});var pT=P(4986);function pm(){return(0,xr.e)((n,e)=>{let t,r=!1;n.subscribe((0,Q.x)(e,s=>{const u=t;t=s,r&&e.next([u,s]),r=!0}))})}function p_(n,e){return n===e}P(750);var it,g_=P(3942),m_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Uo={},Ff=Ff||{},Nt=m_||self;function gm(){}function mm(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Lf(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Vf="closure_uid_"+(1e9*Math.random()>>>0),fI=0;function mT(n,e,t){return n.call.apply(n.bind,arguments)}function pI(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),n.apply(e,s)}}return function(){return n.apply(e,arguments)}}function Wr(n,e,t){return(Wr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?mT:pI).apply(null,arguments)}function ym(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Nr(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,s,u){for(var l=Array(arguments.length-2),m=2;m<arguments.length;m++)l[m-2]=arguments[m];return e.prototype[s].apply(r,l)}}function Aa(){this.s=this.s,this.o=this.o}Aa.prototype.s=!1,Aa.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function hI(n){Object.prototype.hasOwnProperty.call(n,Vf)&&n[Vf]||(n[Vf]=++fI)}(this)},Aa.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const y_=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function v_(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function fi(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(mm(r)){const s=n.length||0,u=r.length||0;n.length=s+u;for(let l=0;l<u;l++)n[s+l]=r[l]}else n.push(r)}}function Zn(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Zn.prototype.h=function(){this.defaultPrevented=!0};var vT=function(){if(!Nt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Nt.addEventListener("test",gm,e),Nt.removeEventListener("test",gm,e)}catch{}return n}();function vm(n){return/^[\s\xa0]*$/.test(n)}var _T=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function gI(n,e){return n<e?-1:n>e?1:0}function Uf(){var n=Nt.navigator;return n&&(n=n.userAgent)?n:""}function io(n){return-1!=Uf().indexOf(n)}function Qc(n){return Qc[" "](n),n}Qc[" "]=gm;var Bf,n,__=io("Opera"),Rd=io("Trident")||io("MSIE"),w_=io("Edge"),E_=w_||Rd,mI=io("Gecko")&&!(-1!=Uf().toLowerCase().indexOf("webkit")&&!io("Edge"))&&!(io("Trident")||io("MSIE"))&&!io("Edge"),ET=-1!=Uf().toLowerCase().indexOf("webkit")&&!io("Edge");function _m(){var n=Nt.document;return n?n.documentMode:void 0}e:{var wm="",Nd=(n=Uf(),mI?/rv:([^\);]+)(\)|;)/.exec(n):w_?/Edge\/([\d\.]+)/.exec(n):Rd?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):ET?/WebKit\/(\S+)/.exec(n):__?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Nd&&(wm=Nd?Nd[1]:""),Rd){var jf=_m();if(null!=jf&&jf>parseFloat(wm)){Bf=String(jf);break e}}Bf=wm}var dx={};var Od=Nt.document&&Rd&&(_m()||parseInt(Bf,10))||void 0;function $f(n,e){if(Zn.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(mI){e:{try{Qc(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:vI[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&$f.X.h.call(this)}}Nr($f,Zn);var vI={2:"touch",3:"pen",4:"mouse"};$f.prototype.h=function(){$f.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Jc="closure_listenable_"+(1e6*Math.random()|0),hx=0;function IT(n,e,t,r,s){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=s,this.key=++hx,this.ba=this.ea=!1}function C_(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function b_(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function _I(n){const e={};for(const t in n)e[t]=n[t];return e}const wI="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T_(n,e){let t,r;for(let s=1;s<arguments.length;s++){for(t in r=arguments[s],r)n[t]=r[t];for(let u=0;u<wI.length;u++)t=wI[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Hf(n){this.src=n,this.g={},this.h=0}function S_(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],s=y_(r,e);(u=0<=s)&&Array.prototype.splice.call(r,s,1),u&&(C_(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Em(n,e,t,r){for(var s=0;s<n.length;++s){var u=n[s];if(!u.ba&&u.listener==e&&u.capture==!!t&&u.ha==r)return s}return-1}Hf.prototype.add=function(n,e,t,r,s){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var l=Em(n,e,r,s);return-1<l?(e=n[l],t||(e.ea=!1)):((e=new IT(e,this.src,u,!!r,s)).ea=t,n.push(e)),e};var Im="closure_lm_"+(1e6*Math.random()|0),A_={};function EI(n,e,t,r,s){if(r&&r.once)return x_(n,e,t,r,s);if(Array.isArray(e)){for(var u=0;u<e.length;u++)EI(n,e[u],t,r,s);return null}return t=Cm(t),n&&n[Jc]?n.N(e,t,Lf(r)?!!r.capture:!!r,s):M_(n,e,t,!1,r,s)}function M_(n,e,t,r,s,u){if(!e)throw Error("Invalid event type");var l=Lf(s)?!!s.capture:!!s,m=O_(n);if(m||(n[Im]=m=new Hf(n)),(t=m.add(e,t,r,l,u)).proxy)return t;if(r=function DT(){const e=CT;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)vT||(s=l),void 0===s&&(s=!1),n.addEventListener(e.toString(),r,s);else if(n.attachEvent)n.attachEvent(N_(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function x_(n,e,t,r,s){if(Array.isArray(e)){for(var u=0;u<e.length;u++)x_(n,e[u],t,r,s);return null}return t=Cm(t),n&&n[Jc]?n.O(e,t,Lf(r)?!!r.capture:!!r,s):M_(n,e,t,!0,r,s)}function R_(n,e,t,r,s){if(Array.isArray(e))for(var u=0;u<e.length;u++)R_(n,e[u],t,r,s);else r=Lf(r)?!!r.capture:!!r,t=Cm(t),n&&n[Jc]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Em(u=n.g[e],t,r,s))&&(C_(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=O_(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Em(e,t,r,s)),(t=-1<n?e[n]:null)&&Dm(t))}function Dm(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[Jc])S_(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(N_(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=O_(e))?(S_(t,n),0==t.h&&(t.src=null,e[Im]=null)):C_(n)}}}function N_(n){return n in A_?A_[n]:A_[n]="on"+n}function CT(n,e){if(n.ba)n=!0;else{e=new $f(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&Dm(n),n=t.call(r,e)}return n}function O_(n){return(n=n[Im])instanceof Hf?n:null}var II="__closure_events_fn_"+(1e9*Math.random()>>>0);function Cm(n){return"function"==typeof n?n:(n[II]||(n[II]=function(e){return n.handleEvent(e)}),n[II])}function Zr(){Aa.call(this),this.i=new Hf(this),this.P=this,this.I=null}function pi(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Zn(e,n);else if(e instanceof Zn)e.target=e.target||n;else{var s=e;T_(e=new Zn(r,n),s)}if(s=!0,t)for(var u=t.length-1;0<=u;u--){var l=e.g=t[u];s=P_(l,r,!0,e)&&s}if(s=P_(l=e.g=n,r,!0,e)&&s,s=P_(l,r,!1,e)&&s,t)for(u=0;u<t.length;u++)s=P_(l=e.g=t[u],r,!1,e)&&s}function P_(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var s=!0,u=0;u<e.length;++u){var l=e[u];if(l&&!l.ba&&l.capture==t){var m=l.listener,w=l.ha||l.src;l.ea&&S_(n.i,l),s=!1!==m.call(w,r)&&s}}return s&&!r.defaultPrevented}Nr(Zr,Aa),Zr.prototype[Jc]=!0,Zr.prototype.removeEventListener=function(n,e,t,r){R_(this,n,e,t,r)},Zr.prototype.M=function(){if(Zr.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)C_(t[r]);delete n.g[e],n.h--}}this.I=null},Zr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Zr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var DI=Nt.JSON.stringify;function fx(){var n=k_;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Tm,bT=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new gx,n=>n.reset());class gx{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function bm(n){Nt.setTimeout(()=>{throw n},0)}function TT(n,e){Tm||function Sm(){var n=Nt.Promise.resolve(void 0);Tm=function(){n.then(mx)}}(),Am||(Tm(),Am=!0),k_.add(n,e)}var Am=!1,k_=new class px{constructor(){this.h=this.g=null}add(e,t){const r=bT.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function mx(){for(var n;n=fx();){try{n.h.call(n.g)}catch(t){bm(t)}var e=bT;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Am=!1}function Pd(n,e){Zr.call(this),this.h=n||1,this.g=e||Nt,this.j=Wr(this.lb,this),this.l=Date.now()}function Mm(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function F_(n,e,t){if("function"==typeof n)t&&(n=Wr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Wr(n.handleEvent,n)}return 2147483647<Number(e)?-1:Nt.setTimeout(n,e||0)}function L_(n){n.g=F_(()=>{n.g=null,n.i&&(n.i=!1,L_(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Nr(Pd,Zr),(it=Pd.prototype).ca=!1,it.R=null,it.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),pi(this,"tick"),this.ca&&(Mm(this),this.start()))}},it.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},it.M=function(){Pd.X.M.call(this),Mm(this),delete this.g};class yx extends Aa{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:L_(this)}M(){super.M(),this.g&&(Nt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function xm(n){Aa.call(this),this.h=n,this.g={}}Nr(xm,Aa);var CI=[];function bI(n,e,t,r){Array.isArray(t)||(t&&(CI[0]=t.toString()),t=CI);for(var s=0;s<t.length;s++){var u=EI(e,t[s],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function Gf(n){b_(n.g,function(e,t){this.g.hasOwnProperty(t)&&Dm(e)},n),n.g={}}function Rm(){this.g=!0}function qf(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function AT(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var u=s[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var l=1;l<s.length;l++)s[l]=""}}}return DI(t)}catch{return e}}(n,t)+(r?" "+r:"")})}xm.prototype.M=function(){xm.X.M.call(this),Gf(this)},xm.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Rm.prototype.Aa=function(){this.g=!1},Rm.prototype.info=function(){};var Xc={},MT=null;function Nm(){return MT=MT||new Zr}function V_(n){Zn.call(this,Xc.Pa,n)}function kd(n){const e=Nm();pi(e,new V_(e))}function xT(n,e){Zn.call(this,Xc.STAT_EVENT,n),this.stat=e}function Tn(n){const e=Nm();pi(e,new xT(e,n))}function TI(n,e){Zn.call(this,Xc.Qa,n),this.size=e}function el(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Nt.setTimeout(function(){n()},e)}Xc.Pa="serverreachability",Nr(V_,Zn),Xc.STAT_EVENT="statevent",Nr(xT,Zn),Xc.Qa="timingevent",Nr(TI,Zn);var Om={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},RT={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Wi(){}function Pm(){}Wi.prototype.h=null;var km,zf={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function U_(){Zn.call(this,"d")}function Wf(){Zn.call(this,"c")}function Zf(){}function Kf(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new xm(this),this.O=AI,this.T=new Pd(n=E_?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new B_}function B_(){this.i=null,this.g="",this.h=!1}Nr(U_,Zn),Nr(Wf,Zn),Nr(Zf,Wi),Zf.prototype.g=function(){return new XMLHttpRequest},Zf.prototype.i=function(){return{}},km=new Zf;var AI=45e3,j_={},Yf={};function $_(n,e,t){n.K=1,n.v=Xf(Pu(e)),n.s=t,n.P=!0,Fm(n,null)}function Fm(n,e){n.F=Date.now(),as(n),n.A=Pu(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),OI(t.i,"t",r),n.C=0,t=n.l.H,n.h=new B_,n.g=o(n.l,t?e:null,!n.s),0<n.N&&(n.L=new yx(Wr(n.La,n,n.g),n.N)),bI(n.S,n.g,"readystatechange",n.ib),e=n.H?_I(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),kd(),function vx(n,e,t,r,s,u){n.info(function(){if(n.g)if(u)for(var l="",m=u.split("&"),w=0;w<m.length;w++){var C=m[w].split("=");if(1<C.length){var A=C[0];C=C[1];var N=A.split("_");l=2<=N.length&&"type"==N[1]?l+(A+"=")+C+"&":l+(A+"=redacted&")}}else l=null;else l=u;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.U,n.s)}function Ma(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function H_(n,e,t){let s,r=!0;for(;!n.I&&n.C<t.length;){if(s=G_(n,t),s==Yf){4==e&&(n.o=4,Tn(14),r=!1),qf(n.j,n.m,null,"[Incomplete Response]");break}if(s==j_){n.o=4,Tn(15),qf(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}qf(n.j,n.m,s,null),z_(n,s)}Ma(n)&&s!=Yf&&s!=j_&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Tn(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),a0(e),e.K=!0,Tn(11))):(qf(n.j,n.m,t,"[Invalid Chunked Response]"),tl(n),Qf(n))}function G_(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Yf:(t=Number(e.substring(t,r)),isNaN(t)?j_:(r+=1)+t>e.length?Yf:(e=e.substr(r,t),n.C=r+t,e))}function as(n){n.V=Date.now()+n.O,MI(n,n.O)}function MI(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=el(Wr(n.gb,n),e)}function q_(n){n.B&&(Nt.clearTimeout(n.B),n.B=null)}function Qf(n){0==n.l.G||n.I||ZT(n.l,n)}function tl(n){q_(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Mm(n.T),Gf(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function z_(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Y_(t.h,n)))if(!n.J&&Y_(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;u0(t),o0(t)}HI(t),Tn(18)}}else t.Ba=s[1],0<t.Ba-t.T&&37500>s[2]&&t.L&&0==t.A&&!t.v&&(t.v=el(Wr(t.cb,t),6e3));if(1>=tp(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else Ud(t,11)}else if((n.J||t.g==n)&&u0(t),!vm(e))for(s=t.Fa.g.parse(e),e=0;e<s.length;e++){let C=s[e];if(t.T=C[0],C=C[1],2==t.G)if("c"==C[0]){t.I=C[1],t.ka=C[2];const A=C[3];null!=A&&(t.ma=A,t.j.info("VER="+t.ma));const N=C[4];null!=N&&(t.Ca=N,t.j.info("SVER="+t.Ca));const $=C[5];null!=$&&"number"==typeof $&&0<$&&(t.J=r=1.5*$,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const Y=n.g;if(Y){const ne=Y.g?Y.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ne){var u=r.h;u.g||-1==ne.indexOf("spdy")&&-1==ne.indexOf("quic")&&-1==ne.indexOf("h2")||(u.j=u.l,u.g=new Set,u.h&&(Q_(u,u.h),u.h=null))}if(r.D){const xe=Y.g?Y.g.getResponseHeader("X-HTTP-Session-Id"):null;xe&&(r.za=xe,Sn(r.F,r.D,xe))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var l=n;if((r=t).sa=i(r,r.H?r.ka:null,r.V),l.J){J_(r.h,l);var m=l,w=r.J;w&&m.setTimeout(w),m.B&&(q_(m),as(m)),r.g=l}else zT(r);0<t.i.length&&Hm(t)}else"stop"!=C[0]&&"close"!=C[0]||Ud(t,7);else 3==t.G&&("stop"==C[0]||"close"==C[0]?"stop"==C[0]?Ud(t,7):jI(t):"noop"!=C[0]&&t.l&&t.l.wa(C),t.A=0)}kd()}catch{}}function OT(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(mm(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function xI(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(mm(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function NT(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(mm(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),s=r.length,u=0;u<s;u++)e.call(void 0,r[u],t&&t[u],n)}(it=Kf.prototype).setTimeout=function(n){this.O=n},it.ib=function(n){n=n.target;const e=this.L;e&&3==so(n)?e.l():this.La(n)},it.La=function(n){try{if(n==this.g)e:{const A=so(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>A)&&(3!=A||E_||this.g&&(this.h.h||this.g.fa()||$T(this.g)))){this.I||4!=A||7==e||kd(),q_(this);var t=this.g.aa();this.Y=t;t:if(Ma(this)){var r=$T(this.g);n="";var s=r.length,u=4==so(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){tl(this),Qf(this);var l="";break t}this.h.i=new Nt.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==s-1});r.splice(0,s),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.fa();if(this.i=200==t,function _x(n,e,t,r,s,u,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+"\n"+t+"\n"+u+" "+l})}(this.j,this.u,this.A,this.m,this.U,A,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var m,w=this.g;if((m=w.g?w.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!vm(m)){var C=m;break t}}C=null}if(!(t=C)){this.i=!1,this.o=3,Tn(12),tl(this),Qf(this);break e}qf(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,z_(this,t)}this.P?(H_(this,A,l),E_&&this.i&&3==A&&(bI(this.S,this.T,"tick",this.hb),this.T.start())):(qf(this.j,this.m,l,null),z_(this,l)),4==A&&tl(this),this.i&&!this.I&&(4==A?ZT(this.l,this):(this.i=!1,as(this)))}else 400==t&&0<l.indexOf("Unknown SID")?(this.o=3,Tn(12)):(this.o=0,Tn(13)),tl(this),Qf(this)}}}catch{}},it.hb=function(){if(this.g){var n=so(this.g),e=this.g.fa();this.C<e.length&&(q_(this),H_(this,n,e),this.i&&4!=n&&as(this))}},it.cancel=function(){this.I=!0,tl(this)},it.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function ST(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(kd(),Tn(17)),tl(this),this.o=2,Qf(this)):MI(this,this.V-n)};var W_=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ou(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Ou){this.h=void 0!==e?e:n.h,Fd(this,n.j),this.s=n.s,this.g=n.g,Jf(this,n.m),this.l=n.l,e=n.i;var t=new Vm;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),Z_(this,t),this.o=n.o}else n&&(t=String(n).match(W_))?(this.h=!!e,Fd(this,t[1]||"",!0),this.s=Ld(t[2]||""),this.g=Ld(t[3]||"",!0),Jf(this,t[4]),this.l=Ld(t[5]||"",!0),Z_(this,t[6]||"",!0),this.o=Ld(t[7]||"")):(this.h=!!e,this.i=new Vm(null,this.h))}function Pu(n){return new Ou(n)}function Fd(n,e,t){n.j=t?Ld(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Jf(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Z_(n,e,t){e instanceof Vm?(n.i=e,function Ix(n,e){e&&!n.j&&(xa(n),n.i=null,n.g.forEach(function(t,r){var s=r.toLowerCase();r!=s&&(RI(this,r),OI(this,s,t))},n)),n.j=e}(n.i,n.h)):(t||(e=ku(e,wx)),n.i=new Vm(e,n.h))}function Sn(n,e,t){n.i.set(e,t)}function Xf(n){return Sn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Ld(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function ku(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Lm),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Lm(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Ou.prototype.toString=function(){var n=[],e=this.j;e&&n.push(ku(e,K_,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(ku(e,K_,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(ku(t,"/"==t.charAt(0)?FT:kT,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",ku(t,Ex)),n.join("")};var K_=/[#\/\?@]/g,kT=/[#\?:]/g,FT=/[#\?]/g,wx=/[#\?@]/g,Ex=/#/g;function Vm(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function xa(n){n.g||(n.g=new Map,n.h=0,n.i&&function PT(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),s=null;if(0<=r){var u=n[t].substring(0,r);s=n[t].substring(r+1)}else u=n[t];e(u,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function RI(n,e){xa(n),e=ep(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function NI(n,e){return xa(n),e=ep(n,e),n.g.has(e)}function OI(n,e,t){RI(n,e),0<t.length&&(n.i=null,n.g.set(ep(n,e),v_(t)),n.h+=t.length)}function ep(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function LT(n){this.l=n||Cx,n=Nt.PerformanceNavigationTiming?0<(n=Nt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Nt.g&&Nt.g.Ga&&Nt.g.Ga()&&Nt.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(it=Vm.prototype).add=function(n,e){xa(this),this.i=null,n=ep(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},it.forEach=function(n,e){xa(this),this.g.forEach(function(t,r){t.forEach(function(s){n.call(e,s,r,this)},this)},this)},it.oa=function(){xa(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const s=n[r];for(let u=0;u<s.length;u++)t.push(e[r])}return t},it.W=function(n){xa(this);let e=[];if("string"==typeof n)NI(this,n)&&(e=e.concat(this.g.get(ep(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},it.set=function(n,e){return xa(this),this.i=null,NI(this,n=ep(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},it.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},it.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const u=encodeURIComponent(String(r)),l=this.W(r);for(r=0;r<l.length;r++){var s=u;""!==l[r]&&(s+="="+encodeURIComponent(String(l[r]))),n.push(s)}}return this.i=n.join("&")};var Cx=10;function PI(n){return!!n.h||!!n.g&&n.g.size>=n.j}function tp(n){return n.h?1:n.g?n.g.size:0}function Y_(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Q_(n,e){n.g?n.g.add(e):n.h=e}function J_(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Fu(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return v_(n.i)}function Um(){}function X_(){this.g=new Um}function e0(n,e,t){const r=t||"";try{OT(n,function(s,u){let l=s;Lf(s)&&(l=DI(s)),e.push(r+u+"="+encodeURIComponent(l))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function Vd(n,e,t,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch{}}function nl(n){this.l=n.ac||null,this.j=n.jb||!1}function rl(n,e){Zr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=kI,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}LT.prototype.cancel=function(){if(this.i=Fu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Um.prototype.stringify=function(n){return Nt.JSON.stringify(n,void 0)},Um.prototype.parse=function(n){return Nt.JSON.parse(n,void 0)},Nr(nl,Wi),nl.prototype.g=function(){return new rl(this.l,this.j)},nl.prototype.i=function(n){return function(){return n}}({}),Nr(rl,Zr);var kI=0;function UT(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function Bm(n){n.readyState=4,n.l=null,n.j=null,n.A=null,jm(n)}function jm(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(it=rl.prototype).open=function(n,e){if(this.readyState!=kI)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,jm(this)},it.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Nt).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},it.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Bm(this)),this.readyState=kI},it.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,jm(this)),this.g&&(this.readyState=3,jm(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof Nt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;UT(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},it.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Bm(this):jm(this),3==this.readyState&&UT(this)}},it.Va=function(n){this.g&&(this.response=this.responseText=n,Bm(this))},it.Ua=function(n){this.g&&(this.response=n,Bm(this))},it.ga=function(){this.g&&Bm(this)},it.setRequestHeader=function(n,e){this.v.append(n,e)},it.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},it.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(rl.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var FI=Nt.JSON.parse;function jn(n){Zr.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=LI,this.K=this.L=!1}Nr(jn,Zr);var LI="",BT=/^https?$/i,jT=["POST","PUT"];function t0(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,n0(n),$m(n)}function n0(n){n.D||(n.D=!0,pi(n,"complete"),pi(n,"error"))}function UI(n){if(n.h&&typeof Ff<"u"&&(!n.C[1]||4!=so(n)||2!=n.aa()))if(n.v&&4==so(n))F_(n.Ha,0,n);else if(pi(n,"readystatechange"),4==so(n)){n.h=!1;try{const m=n.aa();e:switch(m){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===m){var s=String(n.H).match(W_)[1]||null;if(!s&&Nt.self&&Nt.self.location){var u=Nt.self.location.protocol;s=u.substr(0,u.length-1)}r=!BT.test(s?s.toLowerCase():"")}t=r}if(t)pi(n,"complete"),pi(n,"success");else{n.m=6;try{var l=2<so(n)?n.g.statusText:""}catch{l=""}n.j=l+" ["+n.aa()+"]",n0(n)}}finally{$m(n)}}}function $m(n,e){if(n.g){r0(n);const t=n.g,r=n.C[0]?gm:null;n.g=null,n.C=null,e||pi(n,"ready");try{t.onreadystatechange=r}catch{}}}function r0(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Nt.clearTimeout(n.A),n.A=null)}function so(n){return n.g?n.g.readyState:0}function $T(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case LI:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function s0(n){let e="";return b_(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function np(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=s0(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Sn(n,e,t))}function rp(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function BI(n){this.Ca=0,this.i=[],this.j=new Rm,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=rp("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=rp("baseRetryDelayMs",5e3,n),this.bb=rp("retryDelaySeedMs",1e4,n),this.$a=rp("forwardChannelMaxRetries",2,n),this.ta=rp("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new LT(n&&n.concurrentRequestLimit),this.Fa=new X_,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function jI(n){if($I(n),3==n.G){var e=n.U++,t=Pu(n.F);Sn(t,"SID",n.I),Sn(t,"RID",e),Sn(t,"TYPE","terminate"),Gm(n,t),(e=new Kf(n,n.j,e,void 0)).K=2,e.v=Xf(Pu(t)),t=!1,Nt.navigator&&Nt.navigator.sendBeacon&&(t=Nt.navigator.sendBeacon(e.v.toString(),"")),!t&&Nt.Image&&((new Image).src=e.v,t=!0),t||(e.g=o(e.l,null),e.g.da(e.v)),e.F=Date.now(),as(e)}YT(n)}function o0(n){n.g&&(a0(n),n.g.cancel(),n.g=null)}function $I(n){o0(n),n.u&&(Nt.clearTimeout(n.u),n.u=null),u0(n),n.h.cancel(),n.m&&("number"==typeof n.m&&Nt.clearTimeout(n.m),n.m=null)}function Hm(n){PI(n.h)||n.m||(n.m=!0,TT(n.Ja,n),n.C=0)}function GT(n,e){var t;t=e?e.m:n.U++;const r=Pu(n.F);Sn(r,"SID",n.I),Sn(r,"RID",t),Sn(r,"AID",n.T),Gm(n,r),n.o&&n.s&&np(r,n.o,n.s),t=new Kf(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=qT(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),Q_(n.h,t),$_(t,r,e)}function Gm(n,e){n.ia&&b_(n.ia,function(t,r){Sn(e,r,t)}),n.l&&OT({},function(t,r){Sn(e,r,t)})}function qT(n,e,t){t=Math.min(n.i.length,t);var r=n.l?Wr(n.l.Ra,n.l,n):null;e:{var s=n.i;let u=-1;for(;;){const l=["count="+t];-1==u?0<t?(u=s[0].h,l.push("ofs="+u)):u=0:l.push("ofs="+u);let m=!0;for(let w=0;w<t;w++){let C=s[w].h;const A=s[w].g;if(C-=u,0>C)u=Math.max(0,s[w].h-100),m=!1;else try{e0(A,l,"req"+C+"_")}catch{r&&r(A)}}if(m){r=l.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function zT(n){n.g||n.u||(n.Z=1,TT(n.Ia,n),n.A=0)}function HI(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=el(Wr(n.Ia,n),KT(n,n.A)),n.A++,0))}function a0(n){null!=n.B&&(Nt.clearTimeout(n.B),n.B=null)}function WT(n){n.g=new Kf(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=Pu(n.sa);Sn(e,"RID","rpc"),Sn(e,"SID",n.I),Sn(e,"CI",n.L?"0":"1"),Sn(e,"AID",n.T),Sn(e,"TYPE","xmlhttp"),Gm(n,e),n.o&&n.s&&np(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=Xf(Pu(e)),t.s=null,t.P=!0,Fm(t,n)}function u0(n){null!=n.v&&(Nt.clearTimeout(n.v),n.v=null)}function ZT(n,e){var t=null;if(n.g==e){u0(n),a0(n),n.g=null;var r=2}else{if(!Y_(n.h,e))return;t=e.D,J_(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var s=n.C;pi(r=Nm(),new TI(r,t)),Hm(n)}else zT(n);else if(3==(s=e.o)||0==s&&0<n.pa||!(1==r&&function HT(n,e){return!(tp(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=el(Wr(n.Ja,n,e),KT(n,n.C)),n.C++,0)))}(n,e)||2==r&&HI(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),s){case 1:Ud(n,5);break;case 4:Ud(n,10);break;case 3:Ud(n,6);break;default:Ud(n,2)}}function KT(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function Ud(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=Wr(n.kb,n);t||(t=new Ou("//www.google.com/images/cleardot.gif"),Nt.location&&"http"==Nt.location.protocol||Fd(t,"https"),Xf(t)),function VT(n,e){const t=new Rm;if(Nt.Image){const r=new Image;r.onload=ym(Vd,t,r,"TestLoadImage: loaded",!0,e),r.onerror=ym(Vd,t,r,"TestLoadImage: error",!1,e),r.onabort=ym(Vd,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=ym(Vd,t,r,"TestLoadImage: timeout",!1,e),Nt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Tn(2);n.G=0,n.l&&n.l.va(e),YT(n),$I(n)}function YT(n){if(n.G=0,n.la=[],n.l){const e=Fu(n.h);(0!=e.length||0!=n.i.length)&&(fi(n.la,e),fi(n.la,n.i),n.h.i.length=0,v_(n.i),n.i.length=0),n.l.ua()}}function i(n,e,t){var r=t instanceof Ou?Pu(t):new Ou(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),Jf(r,r.m);else{var s=Nt.location;r=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var u=new Ou(null,void 0);r&&Fd(u,r),e&&(u.g=e),s&&Jf(u,s),t&&(u.l=t),r=u}return e=n.za,(t=n.D)&&e&&Sn(r,t,e),Sn(r,"VER",n.ma),Gm(n,r),r}function o(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new jn(t&&n.Da&&!n.ra?new nl({jb:!0}):n.ra)).Ka(n.H),e}function a(){}function c(){if(Rd&&!(10<=Number(Od)))throw Error("Environmental error: no available transport.")}function h(n,e){Zr.call(this),this.g=new BI(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!vm(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!vm(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new E(this)}function p(n){U_.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function v(){Wf.call(this),this.status=1}function E(n){this.g=n}(it=jn.prototype).Ka=function(n){this.L=n},it.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():km.g(),this.C=function SI(n){return n.h||(n.h=n.i())}(this.u?this.u:km),this.g.onreadystatechange=Wr(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void t0(this,u)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)t.set(s,r[s]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const u of r.keys())t.set(u,r.get(u))}r=Array.from(t.keys()).find(u=>"content-type"==u.toLowerCase()),s=Nt.FormData&&n instanceof Nt.FormData,!(0<=y_(jT,e))||r||s||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[u,l]of t)this.g.setRequestHeader(u,l);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{r0(this),0<this.B&&((this.K=function VI(n){return Rd&&function yI(){return function wT(n){var e=dx;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=_T(String(Bf)).split("."),t=_T("9").split("."),r=Math.max(e.length,t.length);for(let l=0;0==n&&l<r;l++){var s=e[l]||"",u=t[l]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==s[0].length&&0==u[0].length)break;n=gI(0==s[1].length?0:parseInt(s[1],10),0==u[1].length?0:parseInt(u[1],10))||gI(0==s[2].length,0==u[2].length)||gI(s[2],u[2]),s=s[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Wr(this.qa,this)):this.A=F_(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){t0(this,u)}},it.qa=function(){typeof Ff<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,pi(this,"timeout"),this.abort(8))},it.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,pi(this,"complete"),pi(this,"abort"),$m(this))},it.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),$m(this,!0)),jn.X.M.call(this)},it.Ha=function(){this.s||(this.F||this.v||this.l?UI(this):this.fb())},it.fb=function(){UI(this)},it.aa=function(){try{return 2<so(this)?this.g.status:-1}catch{return-1}},it.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},it.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),FI(e)}},it.Ea=function(){return this.m},it.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(it=BI.prototype).ma=8,it.G=1,it.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const s=new Kf(this,this.j,n,void 0);let u=this.s;if(this.S&&(u?(u=_I(u),T_(u,this.S)):u=this.S),null!==this.o||this.N||(s.H=u,u=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=qT(this,s,e),Sn(t=Pu(this.F),"RID",n),Sn(t,"CVER",22),this.D&&Sn(t,"X-HTTP-Session-Id",this.D),Gm(this,t),u&&(this.N?e="headers="+encodeURIComponent(String(s0(u)))+"&"+e:this.o&&np(t,this.o,u)),Q_(this.h,s),this.Ya&&Sn(t,"TYPE","init"),this.O?(Sn(t,"$req",e),Sn(t,"SID","null"),s.Z=!0,$_(s,t,null)):$_(s,t,e),this.G=2}}else 3==this.G&&(n?GT(this,n):0==this.i.length||PI(this.h)||GT(this))},it.Ia=function(){if(this.u=null,WT(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=el(Wr(this.eb,this),n)}},it.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Tn(10),o0(this),WT(this))},it.cb=function(){null!=this.v&&(this.v=null,o0(this),HI(this),Tn(19))},it.kb=function(n){n?(this.j.info("Successfully pinged google.com"),Tn(2)):(this.j.info("Failed to ping google.com"),Tn(1))},(it=a.prototype).xa=function(){},it.wa=function(){},it.va=function(){},it.ua=function(){},it.Ra=function(){},c.prototype.g=function(n,e){return new h(n,e)},Nr(h,Zr),h.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;Tn(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=i(n,null,n.V),Hm(n)},h.prototype.close=function(){jI(this.g)},h.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=DI(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&Hm(e)},h.prototype.M=function(){this.g.l=null,delete this.j,jI(this.g),delete this.g,h.X.M.call(this)},Nr(p,U_),Nr(v,Wf),Nr(E,a),E.prototype.xa=function(){pi(this.g,"a")},E.prototype.wa=function(n){pi(this.g,new p(n))},E.prototype.va=function(n){pi(this.g,new v)},E.prototype.ua=function(){pi(this.g,"b")},c.prototype.createWebChannel=c.prototype.g,h.prototype.send=h.prototype.u,h.prototype.open=h.prototype.m,h.prototype.close=h.prototype.close,Om.NO_ERROR=0,Om.TIMEOUT=8,Om.HTTP_ERROR=6,RT.COMPLETE="complete",Pm.EventType=zf,zf.OPEN="a",zf.CLOSE="b",zf.ERROR="c",zf.MESSAGE="d",Zr.prototype.listen=Zr.prototype.N,jn.prototype.listenOnce=jn.prototype.O,jn.prototype.getLastError=jn.prototype.Oa,jn.prototype.getLastErrorCode=jn.prototype.Ea,jn.prototype.getStatus=jn.prototype.aa,jn.prototype.getResponseJson=jn.prototype.Sa,jn.prototype.getResponseText=jn.prototype.fa,jn.prototype.send=jn.prototype.da,jn.prototype.setWithCredentials=jn.prototype.Ka;var D=Uo.createWebChannelTransport=function(){return new c},T=Uo.getStatEventTarget=function(){return Nm()},x=Uo.ErrorCode=Om,k=Uo.EventType=RT,G=Uo.Event=Xc,X=Uo.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},me=Uo.FetchXmlHttpFactory=nl,ke=Uo.WebChannel=Pm,He=Uo.XhrIo=jn;const Xe="@firebase/firestore";class Qe{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Qe.UNAUTHENTICATED=new Qe(null),Qe.GOOGLE_CREDENTIALS=new Qe("google-credentials-uid"),Qe.FIRST_PARTY=new Qe("first-party-uid"),Qe.MOCK_USER=new Qe("mock-user");let Te="9.16.0";const _t=new bu.Yd("@firebase/firestore");function En(){return _t.logLevel}function Oe(n,...e){if(_t.logLevel<=bu.in.DEBUG){const t=e.map(QT);_t.debug(`Firestore (${Te}): ${n}`,...t)}}function vr(n,...e){if(_t.logLevel<=bu.in.ERROR){const t=e.map(QT);_t.error(`Firestore (${Te}): ${n}`,...t)}}function ip(n,...e){if(_t.logLevel<=bu.in.WARN){const t=e.map(QT);_t.warn(`Firestore (${Te}): ${n}`,...t)}}function QT(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function et(n="Unexpected state"){const e=`FIRESTORE (${Te}) INTERNAL ASSERTION FAILED: `+n;throw vr(e),new Error(e)}function ut(n,e){n||et()}function qe(n,e){return n}const ue={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Me extends en.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Kr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class bx{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class sP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Qe.UNAUTHENTICATED))}shutdown(){}}class oP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class aP{constructor(e){this.t=e,this.currentUser=Qe.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let s=this.i;const u=C=>this.i!==s?(s=this.i,t(C)):Promise.resolve();let l=new Kr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Kr,e.enqueueRetryable(()=>u(this.currentUser))};const m=()=>{const C=l;e.enqueueRetryable((0,ge.Z)(function*(){yield C.promise,yield u(r.currentUser)}))},w=C=>{Oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=C,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(C=>w(C)),setTimeout(()=>{if(!this.auth){const C=this.t.getImmediate({optional:!0});C?w(C):(Oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Kr)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ut("string"==typeof r.accessToken),new bx(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return ut(null===e||"string"==typeof e),new Qe(e)}}class uP{constructor(e,t,r,s){this.h=e,this.l=t,this.m=r,this.g=s,this.type="FirstParty",this.user=Qe.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(ut(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class cP{constructor(e,t,r,s){this.h=e,this.l=t,this.m=r,this.g=s}getToken(){return Promise.resolve(new uP(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Qe.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Tx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class lP{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=u=>{null!=u.error&&Oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const l=u.token!==this.A;return this.A=u.token,Oe("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const s=u=>{Oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.T.onInit(u=>s(u)),setTimeout(()=>{if(!this.appCheck){const u=this.T.getImmediate({optional:!0});u?s(u):Oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ut("string"==typeof t.token),this.A=t.token,new Tx(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function dP(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class Sx{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=dP(40);for(let u=0;u<s.length;++u)r.length<20&&s[u]<t&&(r+=e.charAt(s[u]%e.length))}return r}}function Bt(n,e){return n<e?-1:n>e?1:0}function qm(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}function Ax(n){return n+"\0"}class $n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Me(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Me(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Me(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Me(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return $n.fromMillis(Date.now())}static fromDate(e){return $n.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new $n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Bt(this.nanoseconds,e.nanoseconds):Bt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class gt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new gt(e)}static min(){return new gt(new $n(0,0))}static max(){return new gt(new $n(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class c0{constructor(e,t,r){void 0===t?t=0:t>e.length&&et(),void 0===r?r=e.length-t:r>e.length-t&&et(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===c0.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof c0?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const u=e.get(s),l=t.get(s);if(u<l)return-1;if(u>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class tn extends c0{construct(e,t,r){return new tn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Me(ue.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new tn(t)}static emptyPath(){return new tn([])}}const hP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ir extends c0{construct(e,t,r){return new ir(e,t,r)}static isValidIdentifier(e){return hP.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ir.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ir(["__name__"])}static fromServerFormat(e){const t=[];let r="",s=0;const u=()=>{if(0===r.length)throw new Me(ue.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;s<e.length;){const m=e[s];if("\\"===m){if(s+1===e.length)throw new Me(ue.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const w=e[s+1];if("\\"!==w&&"."!==w&&"`"!==w)throw new Me(ue.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=w,s+=2}else"`"===m?(l=!l,s++):"."!==m||l?(r+=m,s++):(u(),s++)}if(u(),l)throw new Me(ue.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ir(t)}static emptyPath(){return new ir([])}}class Ge{constructor(e){this.path=e}static fromPath(e){return new Ge(tn.fromString(e))}static fromName(e){return new Ge(tn.fromString(e).popFirst(5))}static empty(){return new Ge(tn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===tn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return tn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ge(new tn(e.slice()))}}class GI{constructor(e,t,r,s){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=s}}function JT(n){return n.fields.find(e=>2===e.kind)}function sp(n){return n.fields.filter(e=>2!==e.kind)}GI.UNKNOWN_ID=-1;class qI{constructor(e,t){this.fieldPath=e,this.kind=t}}class l0{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new l0(0,oo.min())}}function Mx(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=gt.fromTimestamp(1e9===r?new $n(t+1,0):new $n(t,r));return new oo(s,Ge.empty(),e)}function xx(n){return new oo(n.readTime,n.key,-1)}class oo{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new oo(gt.min(),Ge.empty(),-1)}static max(){return new oo(gt.max(),Ge.empty(),-1)}}function XT(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ge.comparator(n.documentKey,e.documentKey),0!==t?t:Bt(n.largestBatchId,e.largestBatchId))}const Rx="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Nx{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Bd(n){return eS.apply(this,arguments)}function eS(){return eS=(0,ge.Z)(function*(n){if(n.code!==ue.FAILED_PRECONDITION||n.message!==Rx)throw n;Oe("LocalStore","Unexpectedly lost primary lease")}),eS.apply(this,arguments)}class ae{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&et(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ae((r,s)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,s)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ae?t:ae.resolve(t)}catch(t){return ae.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ae.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ae.reject(t)}static resolve(e){return new ae((t,r)=>{t(e)})}static reject(e){return new ae((t,r)=>{r(e)})}static waitFor(e){return new ae((t,r)=>{let s=0,u=0,l=!1;e.forEach(m=>{++s,m.next(()=>{++u,l&&u===s&&t()},w=>r(w))}),l=!0,u===s&&t()})}static or(e){let t=ae.resolve(!1);for(const r of e)t=t.next(s=>s?ae.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,u)=>{r.push(t.call(this,s,u))}),this.waitFor(r)}static mapArray(e,t){return new ae((r,s)=>{const u=e.length,l=new Array(u);let m=0;for(let w=0;w<u;w++){const C=w;t(e[C]).next(A=>{l[C]=A,++m,m===u&&r(l)},A=>s(A))}})}static doWhile(e,t){return new ae((r,s)=>{const u=()=>{!0===e()?t().next(()=>{u()},s):r()};u()})}}class zI{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new Kr,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new d0(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const s=tS(r.target.error);this.P.reject(new d0(e,s))}}static open(e,t,r,s){try{return new zI(t,e.transaction(s,r))}catch(u){throw new d0(t,u)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(Oe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new mP(t)}}class Ra{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===Ra.D((0,en.z$)())&&vr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Oe("SimpleDb","Removing database:",e),op(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,en.hl)())return!1;if(Ra.N())return!0;const e=(0,en.z$)(),t=Ra.D(e),r=0<t&&t<10,s=Ra.k(e),u=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,ge.Z)(function*(){return t.db||(Oe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,s)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=l=>{r(l.target.result)},u.onblocked=()=>{s(new d0(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=l=>{const m=l.target.error;s("VersionError"===m.name?new Me(ue.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new Me(ue.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new d0(e,m))},u.onupgradeneeded=l=>{Oe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.S.$(l.target.result,u.transaction,l.oldVersion,t.version).next(()=>{Oe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,s){var u=this;return(0,ge.Z)(function*(){const l="readonly"===t;let m=0;for(;;){++m;try{u.db=yield u.F(e);const w=zI.open(u.db,e,l?"readonly":"readwrite",r),C=s(w).next(A=>(w.V(),A)).catch(A=>(w.abort(A),ae.reject(A))).toPromise();return C.catch(()=>{}),yield w.v,C}catch(w){const C=w,A="FirebaseError"!==C.name&&m<3;if(Oe("SimpleDb","Transaction failed with error:",C.message,"Retrying:",A),u.close(),!A)return Promise.reject(C)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class gP{constructor(e){this.q=e,this.U=!1,this.K=null}get isDone(){return this.U}get G(){return this.K}set cursor(e){this.q=e}done(){this.U=!0}j(e){this.K=e}delete(){return op(this.q.delete())}}class d0 extends Me{constructor(e,t){super(ue.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function jd(n){return"IndexedDbTransactionError"===n.name}class mP{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Oe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Oe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),op(r)}add(e){return Oe("SimpleDb","ADD",this.store.name,e,e),op(this.store.add(e))}get(e){return op(this.store.get(e)).next(t=>(void 0===t&&(t=null),Oe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Oe("SimpleDb","DELETE",this.store.name,e),op(this.store.delete(e))}count(){return Oe("SimpleDb","COUNT",this.store.name),op(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const s=this.cursor(r),u=[];return this.H(s,(l,m)=>{u.push(m)}).next(()=>u)}{const s=this.store.getAll(r.range);return new ae((u,l)=>{s.onerror=m=>{l(m.target.error)},s.onsuccess=m=>{u(m.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ae((s,u)=>{r.onerror=l=>{u(l.target.error)},r.onsuccess=l=>{s(l.target.result)}})}Y(e,t){Oe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const s=this.cursor(r);return this.H(s,(u,l,m)=>m.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const s=this.cursor(r);return this.H(s,t)}tt(e){const t=this.cursor({});return new ae((r,s)=>{t.onerror=u=>{const l=tS(u.target.error);s(l)},t.onsuccess=u=>{const l=u.target.result;l?e(l.primaryKey,l.value).next(m=>{m?l.continue():r()}):r()}})}H(e,t){const r=[];return new ae((s,u)=>{e.onerror=l=>{u(l.target.error)},e.onsuccess=l=>{const m=l.target.result;if(!m)return void s();const w=new gP(m),C=t(m.primaryKey,m.value,w);if(C instanceof ae){const A=C.catch(N=>(w.done(),ae.reject(N)));r.push(A)}w.isDone?s():null===w.G?m.continue():m.continue(w.G)}}).next(()=>ae.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function op(n){return new ae((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const s=tS(r.target.error);t(s)}})}let Ox=!1;function tS(n){const e=Ra.D((0,en.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Me("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Ox||(Ox=!0,setTimeout(()=>{throw r},0)),r}}return n}class yP{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;Oe("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ge.Z)(function*(){t.task=null;try{Oe("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){jd(r)?Oe("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Bd(r)}yield t.nt(6e4)}))}}class vP{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,ge.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let s=t,u=!0;return ae.doWhile(()=>!0===u&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return Oe("IndexBackiller",`Processing collection: ${l}`),this.rt(e,l,s).next(m=>{s-=m,r.add(l)});u=!1})).next(()=>t-s)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(s=>this.localStore.localDocuments.getNextDocuments(e,t,s,r).next(u=>{const l=u.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.ot(s,u)).next(m=>(Oe("IndexBackiller",`Updating offset: ${m}`),this.localStore.indexManager.updateCollectionGroup(e,t,m))).next(()=>l.size)}))}ot(e,t){let r=e;return t.changes.forEach((s,u)=>{const l=xx(u);XT(l,r)>0&&(r=l)}),new oo(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let ao=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=s=>this.ut(s),this.ct=s=>r.writeSequenceNumber(s))}ut(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ct&&this.ct(t),t}}return n.at=-1,n})();class _P{constructor(e,t,r,s,u,l,m,w){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=u,this.forceLongPolling=l,this.autoDetectLongPolling=m,this.useFetchStreams=w}}class $d{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new $d("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof $d&&e.projectId===this.projectId&&e.database===this.database}}function Px(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ap(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function kx(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function h0(n){return null==n}function f0(n){return 0===n&&1/n==-1/0}function Fx(n){return"number"==typeof n&&Number.isInteger(n)&&!f0(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Yr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Yr(t)}static fromUint8Array(e){const t=function(r){let s="";for(let u=0;u<r.length;++u)s+=String.fromCharCode(r[u]);return s}(e);return new Yr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Bt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Yr.EMPTY_BYTE_STRING=new Yr("");const EP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Hd(n){if(ut(!!n),"string"==typeof n){let e=0;const t=EP.exec(n);if(ut(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:sr(n.seconds),nanos:sr(n.nanos)}}function sr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function up(n){return"string"==typeof n?Yr.fromBase64String(n):Yr.fromUint8Array(n)}function nS(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Lx(n){const e=n.mapValue.fields.__previous_value__;return nS(e)?Lx(e):e}function p0(n){const e=Hd(n.mapValue.fields.__local_write_time__.timestampValue);return new $n(e.seconds,e.nanos)}const Gd={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},WI={nullValue:"NULL_VALUE"};function cp(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?nS(n)?4:jx(n)?9007199254740991:10:et()}function Lu(n,e){if(n===e)return!0;const t=cp(n);if(t!==cp(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return p0(n).isEqual(p0(e));case 3:return function(r,s){if("string"==typeof r.timestampValue&&"string"==typeof s.timestampValue&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const u=Hd(r.timestampValue),l=Hd(s.timestampValue);return u.seconds===l.seconds&&u.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,up(n.bytesValue).isEqual(up(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,s){return sr(r.geoPointValue.latitude)===sr(s.geoPointValue.latitude)&&sr(r.geoPointValue.longitude)===sr(s.geoPointValue.longitude)}(n,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return sr(r.integerValue)===sr(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const u=sr(r.doubleValue),l=sr(s.doubleValue);return u===l?f0(u)===f0(l):isNaN(u)&&isNaN(l)}return!1}(n,e);case 9:return qm(n.arrayValue.values||[],e.arrayValue.values||[],Lu);case 10:return function(r,s){const u=r.mapValue.fields||{},l=s.mapValue.fields||{};if(Px(u)!==Px(l))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(void 0===l[m]||!Lu(u[m],l[m])))return!1;return!0}(n,e);default:return et()}var s}function g0(n,e){return void 0!==(n.values||[]).find(t=>Lu(t,e))}function qd(n,e){if(n===e)return 0;const t=cp(n),r=cp(e);if(t!==r)return Bt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Bt(n.booleanValue,e.booleanValue);case 2:return function(s,u){const l=sr(s.integerValue||s.doubleValue),m=sr(u.integerValue||u.doubleValue);return l<m?-1:l>m?1:l===m?0:isNaN(l)?isNaN(m)?0:-1:1}(n,e);case 3:return Vx(n.timestampValue,e.timestampValue);case 4:return Vx(p0(n),p0(e));case 5:return Bt(n.stringValue,e.stringValue);case 6:return function(s,u){const l=up(s),m=up(u);return l.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(s,u){const l=s.split("/"),m=u.split("/");for(let w=0;w<l.length&&w<m.length;w++){const C=Bt(l[w],m[w]);if(0!==C)return C}return Bt(l.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,u){const l=Bt(sr(s.latitude),sr(u.latitude));return 0!==l?l:Bt(sr(s.longitude),sr(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,u){const l=s.values||[],m=u.values||[];for(let w=0;w<l.length&&w<m.length;++w){const C=qd(l[w],m[w]);if(C)return C}return Bt(l.length,m.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,u){if(s===Gd.mapValue&&u===Gd.mapValue)return 0;if(s===Gd.mapValue)return 1;if(u===Gd.mapValue)return-1;const l=s.fields||{},m=Object.keys(l),w=u.fields||{},C=Object.keys(w);m.sort(),C.sort();for(let A=0;A<m.length&&A<C.length;++A){const N=Bt(m[A],C[A]);if(0!==N)return N;const $=qd(l[m[A]],w[C[A]]);if(0!==$)return $}return Bt(m.length,C.length)}(n.mapValue,e.mapValue);default:throw et()}}function Vx(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Bt(n,e);const t=Hd(n),r=Hd(e),s=Bt(t.seconds,r.seconds);return 0!==s?s:Bt(t.nanos,r.nanos)}function zm(n){return rS(n)}function rS(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const s=Hd(r);return`time(${s.seconds},${s.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?up(n.bytesValue).toBase64():"referenceValue"in n?Ge.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let s="[",u=!0;for(const l of r.values||[])u?u=!1:s+=",",s+=rS(l);return s+"]"}(n.arrayValue):"mapValue"in n?function(r){const s=Object.keys(r.fields||{}).sort();let u="{",l=!0;for(const m of s)l?l=!1:u+=",",u+=`${m}:${rS(r.fields[m])}`;return u+"}"}(n.mapValue):et();var e}function lp(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function iS(n){return!!n&&"integerValue"in n}function m0(n){return!!n&&"arrayValue"in n}function Ux(n){return!!n&&"nullValue"in n}function Bx(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function ZI(n){return!!n&&"mapValue"in n}function y0(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return ap(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=y0(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=y0(n.arrayValue.values[t]);return e}return Object.assign({},n)}function jx(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function IP(n){return"nullValue"in n?WI:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?lp($d.empty(),Ge.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:et()}function DP(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?lp($d.empty(),Ge.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Gd:et()}function $x(n,e){const t=qd(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function Hx(n,e){const t=qd(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class zd{constructor(e,t){this.position=e,this.inclusive=t}}function Gx(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const u=e[s],l=n.position[s];if(r=u.field.isKeyField()?Ge.comparator(Ge.fromName(l.referenceValue),t.key):qd(l,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function qx(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Lu(n.position[t],e.position[t]))return!1;return!0}class zx{}class Qt extends zx{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new CP(e,t,r):"array-contains"===t?new SP(e,r):"in"===t?new Jx(e,r):"not-in"===t?new AP(e,r):"array-contains-any"===t?new MP(e,r):new Qt(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new bP(e,r):new TP(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(qd(t,this.value)):null!==t&&cp(this.value)===cp(t)&&this.matchesComparison(qd(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return et()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class gn extends zx{constructor(e,t){super(),this.filters=e,this.op=t,this.ht=null}static create(e,t){return new gn(e,t)}matches(e){return Wm(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ht||(this.ht=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(t=>t.isInequality());return null!==e?e.field:null}lt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Wm(n){return"and"===n.op}function sS(n){return"or"===n.op}function oS(n){return Wx(n)&&Wm(n)}function Wx(n){for(const e of n.filters)if(e instanceof gn)return!1;return!0}function aS(n){if(n instanceof Qt)return n.field.canonicalString()+n.op.toString()+zm(n.value);if(oS(n))return n.filters.map(e=>aS(e)).join(",");{const e=n.filters.map(t=>aS(t)).join(",");return`${n.op}(${e})`}}function Zx(n,e){return n instanceof Qt?(t=n,(r=e)instanceof Qt&&t.op===r.op&&t.field.isEqual(r.field)&&Lu(t.value,r.value)):n instanceof gn?function(t,r){return r instanceof gn&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((s,u,l)=>s&&Zx(u,r.filters[l]),!0)}(n,e):void et();var t,r}function Kx(n,e){const t=n.filters.concat(e);return gn.create(t,n.op)}function Yx(n){return n instanceof Qt?`${(e=n).field.canonicalString()} ${e.op} ${zm(e.value)}`:n instanceof gn?function(e){return e.op.toString()+" {"+e.getFilters().map(Yx).join(" ,")+"}"}(n):"Filter";var e}class CP extends Qt{constructor(e,t,r){super(e,t,r),this.key=Ge.fromName(r.referenceValue)}matches(e){const t=Ge.comparator(e.key,this.key);return this.matchesComparison(t)}}class bP extends Qt{constructor(e,t){super(e,"in",t),this.keys=Qx(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class TP extends Qt{constructor(e,t){super(e,"not-in",t),this.keys=Qx(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Qx(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ge.fromName(r.referenceValue))}class SP extends Qt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return m0(t)&&g0(t.arrayValue,this.value)}}class Jx extends Qt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&g0(this.value.arrayValue,t)}}class AP extends Qt{constructor(e,t){super(e,"not-in",t)}matches(e){if(g0(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!g0(this.value.arrayValue,t)}}class MP extends Qt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!m0(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>g0(this.value.arrayValue,r))}}class Zm{constructor(e,t="asc"){this.field=e,this.dir=t}}function xP(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class or{constructor(e,t){this.comparator=e,this.root=t||Ni.EMPTY}insert(e,t){return new or(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ni.BLACK,null,null))}remove(e){return new or(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ni.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(0===s)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new KI(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new KI(this.root,e,this.comparator,!1)}getReverseIterator(){return new KI(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new KI(this.root,e,this.comparator,!0)}}class KI{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&s&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ni{constructor(e,t,r,s,u){this.key=e,this.value=t,this.color=r??Ni.RED,this.left=s??Ni.EMPTY,this.right=u??Ni.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,u){return new Ni(e??this.key,t??this.value,r??this.color,s??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const u=r(e,s.key);return s=u<0?s.copy(null,null,null,s.left.insert(e,t,r),null):0===u?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Ni.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),0===t(e,s.key)){if(s.right.isEmpty())return Ni.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ni.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ni.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw et();const e=this.left.check();if(e!==this.right.check())throw et();return e+(this.isRed()?0:1)}}Ni.EMPTY=null,Ni.RED=!0,Ni.BLACK=!1,Ni.EMPTY=new class{constructor(){this.size=0}get key(){throw et()}get value(){throw et()}get color(){throw et()}get left(){throw et()}get right(){throw et()}copy(n,e,t,r,s){return this}insert(n,e,t){return new Ni(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class In{constructor(e){this.comparator=e,this.data=new or(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Xx(this.data.getIterator())}getIteratorFrom(e){return new Xx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof In)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(s,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new In(this.comparator);return t.data=e,t}}class Xx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Km(n){return n.hasNext()?n.getNext():void 0}class Os{constructor(e){this.fields=e,e.sort(ir.comparator)}static empty(){return new Os([])}unionWith(e){let t=new In(ir.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Os(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return qm(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Oi{constructor(e){this.value=e}static empty(){return new Oi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!ZI(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=y0(t)}setAll(e){let t=ir.emptyPath(),r={},s=[];e.forEach((l,m)=>{if(!t.isImmediateParentOf(m)){const w=this.getFieldsMap(t);this.applyChanges(w,r,s),r={},s=[],t=m.popLast()}l?r[m.lastSegment()]=y0(l):s.push(m.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,s)}delete(e){const t=this.field(e.popLast());ZI(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Lu(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];ZI(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){ap(t,(s,u)=>e[s]=u);for(const s of r)delete e[s]}clone(){return new Oi(y0(this.value))}}function eR(n){const e=[];return ap(n.fields,(t,r)=>{const s=new ir([t]);if(ZI(r)){const u=eR(r.mapValue).fields;if(0===u.length)e.push(s);else for(const l of u)e.push(s.child(l))}else e.push(s)}),new Os(e)}class Pn{constructor(e,t,r,s,u,l,m){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=u,this.data=l,this.documentState=m}static newInvalidDocument(e){return new Pn(e,0,gt.min(),gt.min(),gt.min(),Oi.empty(),0)}static newFoundDocument(e,t,r,s){return new Pn(e,1,t,gt.min(),r,s,0)}static newNoDocument(e,t){return new Pn(e,2,t,gt.min(),gt.min(),Oi.empty(),0)}static newUnknownDocument(e,t){return new Pn(e,3,t,gt.min(),gt.min(),Oi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(gt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Oi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Oi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=gt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Pn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Pn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class RP{constructor(e,t=null,r=[],s=[],u=null,l=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=u,this.startAt=l,this.endAt=m,this.ft=null}}function uS(n,e=null,t=[],r=[],s=null,u=null,l=null){return new RP(n,e,t,r,s,u,l)}function dp(n){const e=qe(n);if(null===e.ft){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>aS(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),h0(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>zm(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>zm(r)).join(",")),e.ft=t}return e.ft}function v0(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!xP(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Zx(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!qx(n.startAt,e.startAt)&&qx(n.endAt,e.endAt)}function YI(n){return Ge.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function QI(n,e){return n.filters.filter(t=>t instanceof Qt&&t.field.isEqual(e))}function tR(n,e,t){let r=WI,s=!0;for(const u of QI(n,e)){let l=WI,m=!0;switch(u.op){case"<":case"<=":l=IP(u.value);break;case"==":case"in":case">=":l=u.value;break;case">":l=u.value,m=!1;break;case"!=":case"not-in":l=WI}$x({value:r,inclusive:s},{value:l,inclusive:m})<0&&(r=l,s=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];$x({value:r,inclusive:s},{value:l,inclusive:t.inclusive})<0&&(r=l,s=t.inclusive);break}return{value:r,inclusive:s}}function nR(n,e,t){let r=Gd,s=!0;for(const u of QI(n,e)){let l=Gd,m=!0;switch(u.op){case">=":case">":l=DP(u.value),m=!1;break;case"==":case"in":case"<=":l=u.value;break;case"<":l=u.value,m=!1;break;case"!=":case"not-in":l=Gd}Hx({value:r,inclusive:s},{value:l,inclusive:m})>0&&(r=l,s=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];Hx({value:r,inclusive:s},{value:l,inclusive:t.inclusive})>0&&(r=l,s=t.inclusive);break}return{value:r,inclusive:s}}class il{constructor(e,t=null,r=[],s=[],u=null,l="F",m=null,w=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=u,this.limitType=l,this.startAt=m,this.endAt=w,this.dt=null,this._t=null}}function rR(n,e,t,r,s,u,l,m){return new il(n,e,t,r,s,u,l,m)}function Ym(n){return new il(n)}function iR(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function cS(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function JI(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function lS(n){return null!==n.collectionGroup}function hp(n){const e=qe(n);if(null===e.dt){e.dt=[];const t=JI(e),r=cS(e);if(null!==t&&null===r)t.isKeyField()||e.dt.push(new Zm(t)),e.dt.push(new Zm(ir.keyField(),"asc"));else{let s=!1;for(const u of e.explicitOrderBy)e.dt.push(u),u.field.isKeyField()&&(s=!0);if(!s){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new Zm(ir.keyField(),u))}}}return e.dt}function us(n){const e=qe(n);if(!e._t)if("F"===e.limitType)e._t=uS(e.path,e.collectionGroup,hp(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of hp(e))t.push(new Zm(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new zd(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new zd(e.startAt.position,e.startAt.inclusive):null;e._t=uS(e.path,e.collectionGroup,t,e.filters,e.limit,r,s)}return e._t}function dS(n,e){e.getFirstInequalityField(),JI(n);const t=n.filters.concat([e]);return new il(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function XI(n,e,t){return new il(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function _0(n,e){return v0(us(n),us(e))&&n.limitType===e.limitType}function sR(n){return`${dp(us(n))}|lt:${n.limitType}`}function hS(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>Yx(r)).join(", ")}]`),h0(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(s=r).field.canonicalString()} (${s.dir})`;var s}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>zm(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>zm(r)).join(",")),`Target(${t})`}(us(n))}; limitType=${n.limitType})`}function fS(n,e){return e.isFoundDocument()&&function(t,r){const s=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(s):Ge.isDocumentKey(t.path)?t.path.isEqual(s):t.path.isImmediateParentOf(s)}(n,e)&&function(t,r){for(const s of hp(t))if(!s.field.isKeyField()&&null===r.data.field(s.field))return!1;return!0}(n,e)&&function(t,r){for(const s of t.filters)if(!s.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(s,u,l){const m=Gx(s,u,l);return s.inclusive?m<=0:m<0}(t.startAt,hp(t),r)||t.endAt&&!function(s,u,l){const m=Gx(s,u,l);return s.inclusive?m>=0:m>0}(t.endAt,hp(t),r)));var t,r}function oR(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function aR(n){return(e,t)=>{let r=!1;for(const s of hp(n)){const u=NP(s,e,t);if(0!==u)return u;r=r||s.field.isKeyField()}return 0}}function NP(n,e,t){const r=n.field.isKeyField()?Ge.comparator(e.key,t.key):function(s,u,l){const m=u.data.field(s),w=l.data.field(s);return null!==m&&null!==w?qd(m,w):et()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return et()}}function uR(n,e){if(n.wt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:f0(e)?"-0":e}}function cR(n){return{integerValue:""+n}}function lR(n,e){return Fx(e)?cR(e):uR(n,e)}class eD{constructor(){this._=void 0}}function OP(n,e,t){return n instanceof Qm?function(r,s){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&(u.fields.__previous_value__=s),{mapValue:u}}(t,e):n instanceof fp?hR(n,e):n instanceof pp?fR(n,e):function(r,s){const u=dR(r,s),l=pR(u)+pR(r.gt);return iS(u)&&iS(r.gt)?cR(l):uR(r.yt,l)}(n,e)}function PP(n,e,t){return n instanceof fp?hR(n,e):n instanceof pp?fR(n,e):t}function dR(n,e){return n instanceof Jm?iS(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Qm extends eD{}class fp extends eD{constructor(e){super(),this.elements=e}}function hR(n,e){const t=gR(e);for(const r of n.elements)t.some(s=>Lu(s,r))||t.push(r);return{arrayValue:{values:t}}}class pp extends eD{constructor(e){super(),this.elements=e}}function fR(n,e){let t=gR(e);for(const r of n.elements)t=t.filter(s=>!Lu(s,r));return{arrayValue:{values:t}}}class Jm extends eD{constructor(e,t){super(),this.yt=e,this.gt=t}}function pR(n){return sr(n.integerValue||n.doubleValue)}function gR(n){return m0(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class w0{constructor(e,t){this.field=e,this.transform=t}}class FP{constructor(e,t){this.version=e,this.transformResults=t}}class Hn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Hn}static exists(e){return new Hn(void 0,e)}static updateTime(e){return new Hn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function tD(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class nD{}function mR(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new ey(n.key,Hn.none()):new Xm(n.key,n.data,Hn.none());{const t=n.data,r=Oi.empty();let s=new In(ir.comparator);for(let u of e.fields)if(!s.has(u)){let l=t.field(u);null===l&&u.length>1&&(u=u.popLast(),l=t.field(u)),null===l?r.delete(u):r.set(u,l),s=s.add(u)}return new sl(n.key,r,new Os(s.toArray()),Hn.none())}}function LP(n,e,t){n instanceof Xm?function(r,s,u){const l=r.value.clone(),m=_R(r.fieldTransforms,s,u.transformResults);l.setAll(m),s.convertToFoundDocument(u.version,l).setHasCommittedMutations()}(n,e,t):n instanceof sl?function(r,s,u){if(!tD(r.precondition,s))return void s.convertToUnknownDocument(u.version);const l=_R(r.fieldTransforms,s,u.transformResults),m=s.data;m.setAll(vR(r)),m.setAll(l),s.convertToFoundDocument(u.version,m).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function E0(n,e,t,r){return n instanceof Xm?function(s,u,l,m){if(!tD(s.precondition,u))return l;const w=s.value.clone(),C=wR(s.fieldTransforms,m,u);return w.setAll(C),u.convertToFoundDocument(u.version,w).setHasLocalMutations(),null}(n,e,t,r):n instanceof sl?function(s,u,l,m){if(!tD(s.precondition,u))return l;const w=wR(s.fieldTransforms,m,u),C=u.data;return C.setAll(vR(s)),C.setAll(w),u.convertToFoundDocument(u.version,C).setHasLocalMutations(),null===l?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(A=>A.field))}(n,e,t,r):(l=t,tD(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):l);var u,l}function VP(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),u=dR(r.transform,s||null);null!=u&&(null===t&&(t=Oi.empty()),t.set(r.field,u))}return t||null}function yR(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&qm(t,r,(s,u)=>function kP(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof fp&&r instanceof fp||t instanceof pp&&r instanceof pp?qm(t.elements,r.elements,Lu):t instanceof Jm&&r instanceof Jm?Lu(t.gt,r.gt):t instanceof Qm&&r instanceof Qm);var t,r}(s,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Xm extends nD{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class sl extends nD{constructor(e,t,r,s,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function vR(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function _R(n,e,t){const r=new Map;ut(n.length===t.length);for(let s=0;s<t.length;s++){const u=n[s],l=u.transform,m=e.data.field(u.field);r.set(u.field,PP(l,m,t[s]))}return r}function wR(n,e,t){const r=new Map;for(const s of n){const u=s.transform,l=t.data.field(s.field);r.set(s.field,OP(u,l,e))}return r}class ey extends nD{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class pS extends nD{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class UP{constructor(e){this.count=e}}var Or,nn;function ER(n){switch(n){default:return et();case ue.CANCELLED:case ue.UNKNOWN:case ue.DEADLINE_EXCEEDED:case ue.RESOURCE_EXHAUSTED:case ue.INTERNAL:case ue.UNAVAILABLE:case ue.UNAUTHENTICATED:return!1;case ue.INVALID_ARGUMENT:case ue.NOT_FOUND:case ue.ALREADY_EXISTS:case ue.PERMISSION_DENIED:case ue.FAILED_PRECONDITION:case ue.ABORTED:case ue.OUT_OF_RANGE:case ue.UNIMPLEMENTED:case ue.DATA_LOSS:return!0}}function IR(n){if(void 0===n)return vr("GRPC error has no .code"),ue.UNKNOWN;switch(n){case Or.OK:return ue.OK;case Or.CANCELLED:return ue.CANCELLED;case Or.UNKNOWN:return ue.UNKNOWN;case Or.DEADLINE_EXCEEDED:return ue.DEADLINE_EXCEEDED;case Or.RESOURCE_EXHAUSTED:return ue.RESOURCE_EXHAUSTED;case Or.INTERNAL:return ue.INTERNAL;case Or.UNAVAILABLE:return ue.UNAVAILABLE;case Or.UNAUTHENTICATED:return ue.UNAUTHENTICATED;case Or.INVALID_ARGUMENT:return ue.INVALID_ARGUMENT;case Or.NOT_FOUND:return ue.NOT_FOUND;case Or.ALREADY_EXISTS:return ue.ALREADY_EXISTS;case Or.PERMISSION_DENIED:return ue.PERMISSION_DENIED;case Or.FAILED_PRECONDITION:return ue.FAILED_PRECONDITION;case Or.ABORTED:return ue.ABORTED;case Or.OUT_OF_RANGE:return ue.OUT_OF_RANGE;case Or.UNIMPLEMENTED:return ue.UNIMPLEMENTED;case Or.DATA_LOSS:return ue.DATA_LOSS;default:return et()}}(nn=Or||(Or={}))[nn.OK=0]="OK",nn[nn.CANCELLED=1]="CANCELLED",nn[nn.UNKNOWN=2]="UNKNOWN",nn[nn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nn[nn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nn[nn.NOT_FOUND=5]="NOT_FOUND",nn[nn.ALREADY_EXISTS=6]="ALREADY_EXISTS",nn[nn.PERMISSION_DENIED=7]="PERMISSION_DENIED",nn[nn.UNAUTHENTICATED=16]="UNAUTHENTICATED",nn[nn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nn[nn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nn[nn.ABORTED=10]="ABORTED",nn[nn.OUT_OF_RANGE=11]="OUT_OF_RANGE",nn[nn.UNIMPLEMENTED=12]="UNIMPLEMENTED",nn[nn.INTERNAL=13]="INTERNAL",nn[nn.UNAVAILABLE=14]="UNAVAILABLE",nn[nn.DATA_LOSS=15]="DATA_LOSS";class Wd{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[s,u]of r)if(this.equalsFn(s,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(void 0===s)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<s.length;u++)if(this.equalsFn(s[u][0],e))return void(s[u]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return 1===r.length?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ap(this.inner,(t,r)=>{for(const[s,u]of r)e(s,u)})}isEmpty(){return kx(this.inner)}size(){return this.innerSize}}const BP=new or(Ge.comparator);function Ps(){return BP}const DR=new or(Ge.comparator);function I0(...n){let e=DR;for(const t of n)e=e.insert(t.key,t);return e}function CR(n){let e=DR;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Vu(){return D0()}function bR(){return D0()}function D0(){return new Wd(n=>n.toString(),(n,e)=>n.isEqual(e))}const jP=new or(Ge.comparator),$P=new In(Ge.comparator);function Ht(...n){let e=$P;for(const t of n)e=e.add(t);return e}const HP=new In(Bt);function rD(){return HP}class C0{constructor(e,t,r,s,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,b0.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new C0(gt.min(),s,rD(),Ps(),Ht())}}class b0{constructor(e,t,r,s,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new b0(r,t,Ht(),Ht(),Ht())}}class iD{constructor(e,t,r,s){this.It=e,this.removedTargetIds=t,this.key=r,this.Tt=s}}class TR{constructor(e,t){this.targetId=e,this.Et=t}}class SR{constructor(e,t,r=Yr.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class AR{constructor(){this.At=0,this.Rt=xR(),this.bt=Yr.EMPTY_BYTE_STRING,this.Pt=!1,this.vt=!0}get current(){return this.Pt}get resumeToken(){return this.bt}get Vt(){return 0!==this.At}get St(){return this.vt}Dt(e){e.approximateByteSize()>0&&(this.vt=!0,this.bt=e)}Ct(){let e=Ht(),t=Ht(),r=Ht();return this.Rt.forEach((s,u)=>{switch(u){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:et()}}),new b0(this.bt,this.Pt,e,t,r)}xt(){this.vt=!1,this.Rt=xR()}Nt(e,t){this.vt=!0,this.Rt=this.Rt.insert(e,t)}kt(e){this.vt=!0,this.Rt=this.Rt.remove(e)}Ot(){this.At+=1}Mt(){this.At-=1}Ft(){this.vt=!0,this.Pt=!0}}class GP{constructor(e){this.$t=e,this.Bt=new Map,this.Lt=Ps(),this.qt=MR(),this.Ut=new In(Bt)}Kt(e){for(const t of e.It)e.Tt&&e.Tt.isFoundDocument()?this.Gt(t,e.Tt):this.Qt(t,e.key,e.Tt);for(const t of e.removedTargetIds)this.Qt(t,e.key,e.Tt)}jt(e){this.forEachTarget(e,t=>{const r=this.Wt(t);switch(e.state){case 0:this.zt(t)&&r.Dt(e.resumeToken);break;case 1:r.Mt(),r.Vt||r.xt(),r.Dt(e.resumeToken);break;case 2:r.Mt(),r.Vt||this.removeTarget(t);break;case 3:this.zt(t)&&(r.Ft(),r.Dt(e.resumeToken));break;case 4:this.zt(t)&&(this.Ht(t),r.Dt(e.resumeToken));break;default:et()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach((r,s)=>{this.zt(s)&&t(s)})}Jt(e){const t=e.targetId,r=e.Et.count,s=this.Yt(t);if(s){const u=s.target;if(YI(u))if(0===r){const l=new Ge(u.path);this.Qt(t,l,Pn.newNoDocument(l,gt.min()))}else ut(1===r);else this.Xt(t)!==r&&(this.Ht(t),this.Ut=this.Ut.add(t))}}Zt(e){const t=new Map;this.Bt.forEach((u,l)=>{const m=this.Yt(l);if(m){if(u.current&&YI(m.target)){const w=new Ge(m.target.path);null!==this.Lt.get(w)||this.te(l,w)||this.Qt(l,w,Pn.newNoDocument(w,e))}u.St&&(t.set(l,u.Ct()),u.xt())}});let r=Ht();this.qt.forEach((u,l)=>{let m=!0;l.forEachWhile(w=>{const C=this.Yt(w);return!C||2===C.purpose||(m=!1,!1)}),m&&(r=r.add(u))}),this.Lt.forEach((u,l)=>l.setReadTime(e));const s=new C0(e,t,this.Ut,this.Lt,r);return this.Lt=Ps(),this.qt=MR(),this.Ut=new In(Bt),s}Gt(e,t){if(!this.zt(e))return;const r=this.te(e,t.key)?2:0;this.Wt(e).Nt(t.key,r),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}Qt(e,t,r){if(!this.zt(e))return;const s=this.Wt(e);this.te(e,t)?s.Nt(t,1):s.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),r&&(this.Lt=this.Lt.insert(t,r))}removeTarget(e){this.Bt.delete(e)}Xt(e){const t=this.Wt(e).Ct();return this.$t.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.Wt(e).Ot()}Wt(e){let t=this.Bt.get(e);return t||(t=new AR,this.Bt.set(e,t)),t}ee(e){let t=this.qt.get(e);return t||(t=new In(Bt),this.qt=this.qt.insert(e,t)),t}zt(e){const t=null!==this.Yt(e);return t||Oe("WatchChangeAggregator","Detected inactive target",e),t}Yt(e){const t=this.Bt.get(e);return t&&t.Vt?null:this.$t.ne(e)}Ht(e){this.Bt.set(e,new AR),this.$t.getRemoteKeysForTarget(e).forEach(t=>{this.Qt(e,t,null)})}te(e,t){return this.$t.getRemoteKeysForTarget(e).has(t)}}function MR(){return new or(Ge.comparator)}function xR(){return new or(Ge.comparator)}const qP={asc:"ASCENDING",desc:"DESCENDING"},zP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},WP={and:"AND",or:"OR"};class ZP{constructor(e,t){this.databaseId=e,this.wt=t}}function ty(n,e){return n.wt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function RR(n,e){return n.wt?e.toBase64():e.toUint8Array()}function KP(n,e){return ty(n,e.toTimestamp())}function _r(n){return ut(!!n),gt.fromTimestamp(function(e){const t=Hd(e);return new $n(t.seconds,t.nanos)}(n))}function gS(n,e){return(t=n,new tn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function NR(n){const e=tn.fromString(n);return ut(jR(e)),e}function T0(n,e){return gS(n.databaseId,e.path)}function Uu(n,e){const t=NR(e);if(t.get(1)!==n.databaseId.projectId)throw new Me(ue.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Me(ue.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ge(PR(t))}function mS(n,e){return gS(n.databaseId,e)}function OR(n){const e=NR(n);return 4===e.length?tn.emptyPath():PR(e)}function S0(n){return new tn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function PR(n){return ut(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function kR(n,e,t){return{name:T0(n,e),fields:t.value.mapValue.fields}}function FR(n,e,t){const r=Uu(n,e.name),s=_r(e.updateTime),u=e.createTime?_r(e.createTime):gt.min(),l=new Oi({mapValue:{fields:e.fields}}),m=Pn.newFoundDocument(r,s,u,l);return t&&m.setHasCommittedMutations(),t?m.setHasCommittedMutations():m}function A0(n,e){let t;if(e instanceof Xm)t={update:kR(n,e.key,e.value)};else if(e instanceof ey)t={delete:T0(n,e.key)};else if(e instanceof sl)t={update:kR(n,e.key,e.data),updateMask:r1(e.fieldMask)};else{if(!(e instanceof pS))return et();t={verify:T0(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,u){const l=u.transform;if(l instanceof Qm)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof fp)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof pp)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Jm)return{fieldPath:u.field.canonicalString(),increment:l.gt};throw et()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:KP(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:et()),t;var s}function yS(n,e){const t=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?Hn.updateTime(_r(s.updateTime)):void 0!==s.exists?Hn.exists(s.exists):Hn.none():Hn.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(u,l){let m=null;"setToServerValue"in l?(ut("REQUEST_TIME"===l.setToServerValue),m=new Qm):"appendMissingElements"in l?m=new fp(l.appendMissingElements.values||[]):"removeAllFromArray"in l?m=new pp(l.removeAllFromArray.values||[]):"increment"in l?m=new Jm(u,l.increment):et();const w=ir.fromServerFormat(l.fieldPath);return new w0(w,m)}(n,s)):[];var s;if(e.update){const s=Uu(n,e.update.name),u=new Oi({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new Os((e.updateMask.fieldPaths||[]).map(C=>ir.fromServerFormat(C)));return new sl(s,u,l,t,r)}return new Xm(s,u,t,r)}if(e.delete){const s=Uu(n,e.delete);return new ey(s,t)}if(e.verify){const s=Uu(n,e.verify);return new pS(s,t)}return et()}function LR(n,e){return{documents:[mS(n,e.path)]}}function vS(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=mS(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=mS(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(w){if(0!==w.length)return BR(gn.create(w,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const u=function(w){if(0!==w.length)return w.map(C=>{return{field:ny((A=C).field),direction:e1(A.dir)};var A})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const l=(C=e.limit,n.wt||h0(C)?C:{value:C});var C,m,w;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(m=e.startAt).inclusive,values:m.position}),e.endAt&&(t.structuredQuery.endAt={before:!(w=e.endAt).inclusive,values:w.position}),t}function VR(n){let e=OR(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){ut(1===r);const A=t.from[0];A.allDescendants?s=A.collectionId:e=e.child(A.collectionId)}let u=[];t.where&&(u=function(A){const N=UR(A);return N instanceof gn&&oS(N)?N.getFilters():[N]}(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(A=>{return new Zm(ry((N=A).field),function($){switch($){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction));var N}));let m=null;t.limit&&(m=function(A){let N;return N="object"==typeof A?A.value:A,h0(N)?null:N}(t.limit));let w=null;var A;t.startAt&&(w=new zd((A=t.startAt).values||[],!!A.before));let C=null;return t.endAt&&(C=function(A){return new zd(A.values||[],!A.before)}(t.endAt)),rR(e,s,l,u,m,"F",w,C)}function UR(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=ry(e.unaryFilter.field);return Qt.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=ry(e.unaryFilter.field);return Qt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=ry(e.unaryFilter.field);return Qt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=ry(e.unaryFilter.field);return Qt.create(u,"!=",{nullValue:"NULL_VALUE"});default:return et()}}(n):void 0!==n.fieldFilter?Qt.create(ry((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return et()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return gn.create(e.compositeFilter.filters.map(t=>UR(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return et()}}(e.compositeFilter.op))}(n):et();var e}function e1(n){return qP[n]}function t1(n){return zP[n]}function n1(n){return WP[n]}function ny(n){return{fieldPath:n.canonicalString()}}function ry(n){return ir.fromServerFormat(n.fieldPath)}function BR(n){return n instanceof Qt?function(e){if("=="===e.op){if(Bx(e.value))return{unaryFilter:{field:ny(e.field),op:"IS_NAN"}};if(Ux(e.value))return{unaryFilter:{field:ny(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Bx(e.value))return{unaryFilter:{field:ny(e.field),op:"IS_NOT_NAN"}};if(Ux(e.value))return{unaryFilter:{field:ny(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ny(e.field),op:t1(e.op),value:e.value}}}(n):n instanceof gn?function(e){const t=e.getFilters().map(r=>BR(r));return 1===t.length?t[0]:{compositeFilter:{op:n1(e.op),filters:t}}}(n):et()}function r1(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function jR(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function cs(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=$R(e)),e=i1(n.get(t),e);return $R(e)}function i1(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const u=n.charAt(s);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function $R(n){return n+"\x01\x01"}function Bu(n){const e=n.length;if(ut(e>=2),2===e)return ut("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),tn.emptyPath();const t=e-2,r=[];let s="";for(let u=0;u<e;){const l=n.indexOf("\x01",u);switch((l<0||l>t)&&et(),n.charAt(l+1)){case"\x01":const m=n.substring(u,l);let w;0===s.length?w=m:(s+=m,w=s,s=""),r.push(w);break;case"\x10":s+=n.substring(u,l),s+="\0";break;case"\x11":s+=n.substring(u,l+1);break;default:et()}u=l+2}return new tn(r)}const HR=["userId","batchId"];function sD(n,e){return[n,cs(e)]}function GR(n,e,t){return[n,cs(e),t]}const s1={},o1=["prefixPath","collectionGroup","readTime","documentId"],a1=["prefixPath","collectionGroup","documentId"],u1=["collectionGroup","readTime","prefixPath","documentId"],c1=["canonicalId","targetId"],l1=["targetId","path"],d1=["path","targetId"],h1=["collectionId","parent"],f1=["indexId","uid"],p1=["uid","sequenceNumber"],g1=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],m1=["indexId","uid","orderedDocumentKey"],y1=["userId","collectionPath","documentId"],v1=["userId","collectionPath","largestBatchId"],_1=["userId","collectionGroup","largestBatchId"],qR=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],w1=[...qR,"documentOverlays"],zR=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],WR=zR,E1=[...WR,"indexConfiguration","indexState","indexEntries"];class _S extends Nx{constructor(e,t){super(),this.se=e,this.currentSequenceNumber=t}}function gi(n,e){const t=qe(n);return Ra.M(t.se,e)}class wS{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const u=this.mutations[s];u.key.isEqual(e.key)&&LP(u,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=E0(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=E0(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=bR();return this.mutations.forEach(s=>{const u=e.get(s.key),l=u.overlayedDocument;let m=this.applyToLocalView(l,u.mutatedFields);m=t.has(s.key)?null:m;const w=mR(l,m);null!==w&&r.set(s.key,w),l.isValidDocument()||l.convertToNoDocument(gt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ht())}isEqual(e){return this.batchId===e.batchId&&qm(this.mutations,e.mutations,(t,r)=>yR(t,r))&&qm(this.baseMutations,e.baseMutations,(t,r)=>yR(t,r))}}class ES{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){ut(e.mutations.length===r.length);let s=jP;const u=e.mutations;for(let l=0;l<u.length;l++)s=s.insert(u[l].key,r[l].version);return new ES(e,t,r,s)}}class IS{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Zd{constructor(e,t,r,s,u=gt.min(),l=gt.min(),m=Yr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=m}withSequenceNumber(e){return new Zd(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Zd(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Zd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class ZR{constructor(e){this.ie=e}}function KR(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:oD(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:T0(s=n.ie,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:ty(s,u.version.toTimestamp()),createTime:ty(s,u.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:gp(e.version)};else{if(!e.isUnknownDocument())return et();r.unknownDocument={path:t.path.toArray(),version:gp(e.version)}}var s,u;return r}function oD(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function gp(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function mp(n){const e=new $n(n.seconds,n.nanoseconds);return gt.fromTimestamp(e)}function yp(n,e){const t=(e.baseMutations||[]).map(u=>yS(n.ie,u));for(let u=0;u<e.mutations.length-1;++u){const l=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(l.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>yS(n.ie,u)),s=$n.fromMillis(e.localWriteTimeMs);return new wS(e.batchId,s,t,r)}function M0(n){const e=mp(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?mp(n.lastLimboFreeSnapshotVersion):gt.min();let r;var s;return void 0!==n.query.documents?(ut(1===(s=n.query).documents.length),r=us(Ym(OR(s.documents[0])))):r=us(VR(n.query)),new Zd(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Yr.fromBase64String(n.resumeToken))}function YR(n,e){const t=gp(e.snapshotVersion),r=gp(e.lastLimboFreeSnapshotVersion);let s;s=YI(e.target)?LR(n.ie,e.target):vS(n.ie,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:dp(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function DS(n){const e=VR({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?XI(e,e.limit,"L"):e}function CS(n,e){return new IS(e.largestBatchId,yS(n.ie,e.overlayMutation))}function QR(n,e){const t=e.path.lastSegment();return[n,cs(e.path.popLast()),t]}function JR(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:gp(r.readTime),documentKey:cs(r.documentKey.path),largestBatchId:r.largestBatchId}}class D1{getBundleMetadata(e,t){return XR(e).get(t).next(r=>{if(r)return{id:(s=r).bundleId,createTime:mp(s.createTime),version:s.version};var s})}saveBundleMetadata(e,t){return XR(e).put({bundleId:(r=t).id,createTime:gp(_r(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return eN(e).get(t).next(r=>{if(r)return{name:(s=r).name,query:DS(s.bundledQuery),readTime:mp(s.readTime)};var s})}saveNamedQuery(e,t){return eN(e).put({name:(r=t).name,readTime:gp(_r(r.readTime)),bundledQuery:r.bundledQuery});var r}}function XR(n){return gi(n,"bundles")}function eN(n){return gi(n,"namedQueries")}class aD{constructor(e,t){this.yt=e,this.userId=t}static re(e,t){return new aD(e,t.uid||"")}getOverlay(e,t){return x0(e).get(QR(this.userId,t)).next(r=>r?CS(this.yt,r):null)}getOverlays(e,t){const r=Vu();return ae.forEach(t,s=>this.getOverlay(e,s).next(u=>{null!==u&&r.set(s,u)})).next(()=>r)}saveOverlays(e,t,r){const s=[];return r.forEach((u,l)=>{const m=new IS(t,l);s.push(this.oe(e,m))}),ae.waitFor(s)}removeOverlaysForBatchId(e,t,r){const s=new Set;t.forEach(l=>s.add(cs(l.getCollectionPath())));const u=[];return s.forEach(l=>{const m=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);u.push(x0(e).Y("collectionPathOverlayIndex",m))}),ae.waitFor(u)}getOverlaysForCollection(e,t,r){const s=Vu(),u=cs(t),l=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return x0(e).W("collectionPathOverlayIndex",l).next(m=>{for(const w of m){const C=CS(this.yt,w);s.set(C.getKey(),C)}return s})}getOverlaysForCollectionGroup(e,t,r,s){const u=Vu();let l;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return x0(e).Z({index:"collectionGroupOverlayIndex",range:m},(w,C,A)=>{const N=CS(this.yt,C);u.size()<s||N.largestBatchId===l?(u.set(N.getKey(),N),l=N.largestBatchId):A.done()}).next(()=>u)}oe(e,t){return x0(e).put(function(r,s,u){const[l,m,w]=QR(s,u.mutation.key);return{userId:s,collectionPath:m,documentId:w,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:A0(r.ie,u.mutation)}}(this.yt,this.userId,t))}}function x0(n){return gi(n,"documentOverlays")}class vp{constructor(){}ue(e,t){this.ce(e,t),t.ae()}ce(e,t){if("nullValue"in e)this.he(t,5);else if("booleanValue"in e)this.he(t,10),t.le(e.booleanValue?1:0);else if("integerValue"in e)this.he(t,15),t.le(sr(e.integerValue));else if("doubleValue"in e){const r=sr(e.doubleValue);isNaN(r)?this.he(t,13):(this.he(t,15),f0(r)?t.le(0):t.le(r))}else if("timestampValue"in e){const r=e.timestampValue;this.he(t,20),"string"==typeof r?t.fe(r):(t.fe(`${r.seconds||""}`),t.le(r.nanos||0))}else if("stringValue"in e)this.de(e.stringValue,t),this._e(t);else if("bytesValue"in e)this.he(t,30),t.we(up(e.bytesValue)),this._e(t);else if("referenceValue"in e)this.me(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.he(t,45),t.le(r.latitude||0),t.le(r.longitude||0)}else"mapValue"in e?jx(e)?this.he(t,Number.MAX_SAFE_INTEGER):(this.ge(e.mapValue,t),this._e(t)):"arrayValue"in e?(this.ye(e.arrayValue,t),this._e(t)):et()}de(e,t){this.he(t,25),this.pe(e,t)}pe(e,t){t.fe(e)}ge(e,t){const r=e.fields||{};this.he(t,55);for(const s of Object.keys(r))this.de(s,t),this.ce(r[s],t)}ye(e,t){const r=e.values||[];this.he(t,50);for(const s of r)this.ce(s,t)}me(e,t){this.he(t,37),Ge.fromName(e).path.forEach(r=>{this.he(t,60),this.pe(r,t)})}he(e,t){e.le(t)}_e(e){e.le(2)}}function C1(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function tN(n){const e=64-function(t){let r=0;for(let s=0;s<8;++s){const u=C1(255&t[s]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}vp.Ie=new vp;class b1{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Te(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ee(r.value),r=t.next();this.Ae()}Re(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.be(r.value),r=t.next();this.Pe()}ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ee(r);else if(r<2048)this.Ee(960|r>>>6),this.Ee(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ee(480|r>>>12),this.Ee(128|63&r>>>6),this.Ee(128|63&r);else{const s=t.codePointAt(0);this.Ee(240|s>>>18),this.Ee(128|63&s>>>12),this.Ee(128|63&s>>>6),this.Ee(128|63&s)}}this.Ae()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.be(r);else if(r<2048)this.be(960|r>>>6),this.be(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.be(480|r>>>12),this.be(128|63&r>>>6),this.be(128|63&r);else{const s=t.codePointAt(0);this.be(240|s>>>18),this.be(128|63&s>>>12),this.be(128|63&s>>>6),this.be(128|63&s)}}this.Pe()}Se(e){const t=this.De(e),r=tN(t);this.Ce(1+r),this.buffer[this.position++]=255&r;for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=255&t[s]}xe(e){const t=this.De(e),r=tN(t);this.Ce(1+r),this.buffer[this.position++]=~(255&r);for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}Ne(){this.ke(255),this.ke(255)}Oe(){this.Me(255),this.Me(255)}reset(){this.position=0}seed(e){this.Ce(e.length),this.buffer.set(e,this.position),this.position+=e.length}Fe(){return this.buffer.slice(0,this.position)}De(e){const t=function(s){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,s,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let s=1;s<t.length;++s)t[s]^=r?255:0;return t}Ee(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(t)}be(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(e)}Ae(){this.ke(0),this.ke(1)}Pe(){this.Me(0),this.Me(1)}ke(e){this.Ce(1),this.buffer[this.position++]=e}Me(e){this.Ce(1),this.buffer[this.position++]=~e}Ce(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class T1{constructor(e){this.$e=e}we(e){this.$e.Te(e)}fe(e){this.$e.ve(e)}le(e){this.$e.Se(e)}ae(){this.$e.Ne()}}class S1{constructor(e){this.$e=e}we(e){this.$e.Re(e)}fe(e){this.$e.Ve(e)}le(e){this.$e.xe(e)}ae(){this.$e.Oe()}}class R0{constructor(){this.$e=new b1,this.Be=new T1(this.$e),this.Le=new S1(this.$e)}seed(e){this.$e.seed(e)}qe(e){return 0===e?this.Be:this.Le}Fe(){return this.$e.Fe()}reset(){this.$e.reset()}}class _p{constructor(e,t,r,s){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=s}Ue(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new _p(this.indexId,this.documentKey,this.arrayValue,r)}}function Kd(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=nN(n.arrayValue,e.arrayValue),0!==t?t:(t=nN(n.directionalValue,e.directionalValue),0!==t?t:Ge.comparator(n.documentKey,e.documentKey)))}function nN(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class A1{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ke=e.orderBy,this.Ge=[];for(const t of e.filters){const r=t;r.isInequality()?this.Qe=r:this.Ge.push(r)}}je(e){ut(e.collectionGroup===this.collectionId);const t=JT(e);if(void 0!==t&&!this.We(t))return!1;const r=sp(e);let s=0,u=0;for(;s<r.length&&this.We(r[s]);++s);if(s===r.length)return!0;if(void 0!==this.Qe){const l=r[s];if(!this.ze(this.Qe,l)||!this.He(this.Ke[u++],l))return!1;++s}for(;s<r.length;++s){const l=r[s];if(u>=this.Ke.length||!this.He(this.Ke[u++],l))return!1}return!0}We(e){for(const t of this.Ge)if(this.ze(t,e))return!0;return!1}ze(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}He(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function rN(n){var e,t;if(ut(n instanceof Qt||n instanceof gn),n instanceof Qt){if(n instanceof Jx){const s=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(u=>Qt.create(n.field,"==",u)))||[];return gn.create(s,"or")}return n}const r=n.filters.map(s=>rN(s));return gn.create(r,n.op)}function M1(n){if(0===n.getFilters().length)return[];const e=SS(rN(n));return ut(iN(e)),bS(e)||TS(e)?[e]:e.getFilters()}function bS(n){return n instanceof Qt}function TS(n){return n instanceof gn&&oS(n)}function iN(n){return bS(n)||TS(n)||function(e){if(e instanceof gn&&sS(e)){for(const t of e.getFilters())if(!bS(t)&&!TS(t))return!1;return!0}return!1}(n)}function SS(n){if(ut(n instanceof Qt||n instanceof gn),n instanceof Qt)return n;if(1===n.filters.length)return SS(n.filters[0]);const e=n.filters.map(r=>SS(r));let t=gn.create(e,n.op);return t=uD(t),iN(t)?t:(ut(t instanceof gn),ut(Wm(t)),ut(t.filters.length>1),t.filters.reduce((r,s)=>AS(r,s)))}function AS(n,e){let t;return ut(n instanceof Qt||n instanceof gn),ut(e instanceof Qt||e instanceof gn),t=n instanceof Qt?e instanceof Qt?gn.create([n,e],"and"):sN(n,e):e instanceof Qt?sN(e,n):function(r,s){if(ut(r.filters.length>0&&s.filters.length>0),Wm(r)&&Wm(s))return Kx(r,s.getFilters());const u=sS(r)?r:s,l=sS(r)?s:r,m=u.filters.map(w=>AS(w,l));return gn.create(m,"or")}(n,e),uD(t)}function sN(n,e){if(Wm(e))return Kx(e,n.getFilters());{const t=e.filters.map(r=>AS(n,r));return gn.create(t,"or")}}function uD(n){if(ut(n instanceof Qt||n instanceof gn),n instanceof Qt)return n;const e=n.getFilters();if(1===e.length)return uD(e[0]);if(Wx(n))return n;const t=e.map(s=>uD(s)),r=[];return t.forEach(s=>{s instanceof Qt?r.push(s):s instanceof gn&&(s.op===n.op?r.push(...s.filters):r.push(s))}),1===r.length?r[0]:gn.create(r,n.op)}class x1{constructor(){this.Je=new MS}addToCollectionParentIndex(e,t){return this.Je.add(t),ae.resolve()}getCollectionParents(e,t){return ae.resolve(this.Je.getEntries(t))}addFieldIndex(e,t){return ae.resolve()}deleteFieldIndex(e,t){return ae.resolve()}getDocumentsMatchingTarget(e,t){return ae.resolve(null)}getIndexType(e,t){return ae.resolve(0)}getFieldIndexes(e,t){return ae.resolve([])}getNextCollectionGroupToUpdate(e){return ae.resolve(null)}getMinOffset(e,t){return ae.resolve(oo.min())}getMinOffsetFromCollectionGroup(e,t){return ae.resolve(oo.min())}updateCollectionGroup(e,t,r){return ae.resolve()}updateIndexEntries(e,t){return ae.resolve()}}class MS{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new In(tn.comparator),u=!s.has(r);return this.index[t]=s.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new In(tn.comparator)).toArray()}}const cD=new Uint8Array(0);class R1{constructor(e,t){this.user=e,this.databaseId=t,this.Ye=new MS,this.Xe=new Wd(r=>dp(r),(r,s)=>v0(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ye.has(t)){const r=t.lastSegment(),s=t.popLast();e.addOnCommittedListener(()=>{this.Ye.add(t)});const u={collectionId:r,parent:cs(s)};return oN(e).put(u)}return ae.resolve()}getCollectionParents(e,t){const r=[],s=IDBKeyRange.bound([t,""],[Ax(t),""],!1,!0);return oN(e).W(s).next(u=>{for(const l of u){if(l.collectionId!==t)break;r.push(Bu(l.parent))}return r})}addFieldIndex(e,t){const r=lD(e),s={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(m=>[m.fieldPath.canonicalString(),m.kind])};var l;delete s.indexId;const u=r.add(s);if(t.indexState){const l=O0(e);return u.next(m=>{l.put(JR(m,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=lD(e),s=O0(e),u=N0(e);return r.delete(t.indexId).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=N0(e);let s=!0;const u=new Map;return ae.forEach(this.Ze(t),l=>this.tn(e,l).next(m=>{s&&(s=!!m),u.set(l,m)})).next(()=>{if(s){let l=Ht();const m=[];return ae.forEach(u,(w,C)=>{var A;Oe("IndexedDbIndexManager",`Using index ${A=w,`id=${A.indexId}|cg=${A.collectionGroup}|f=${A.fields.map(Ot=>`${Ot.fieldPath}:${Ot.kind}`).join(",")}`} to execute ${dp(t)}`);const N=function(Ot,Pt){const Lt=JT(Pt);if(void 0===Lt)return null;for(const qt of QI(Ot,Lt.fieldPath))switch(qt.op){case"array-contains-any":return qt.value.arrayValue.values||[];case"array-contains":return[qt.value]}return null}(C,w),$=function(Ot,Pt){const Lt=new Map;for(const qt of sp(Pt))for(const Qr of QI(Ot,qt.fieldPath))switch(Qr.op){case"==":case"in":Lt.set(qt.fieldPath.canonicalString(),Qr.value);break;case"not-in":case"!=":return Lt.set(qt.fieldPath.canonicalString(),Qr.value),Array.from(Lt.values())}return null}(C,w),Y=function(Ot,Pt){const Lt=[];let qt=!0;for(const Qr of sp(Pt)){const Q0=0===Qr.kind?tR(Ot,Qr.fieldPath,Ot.startAt):nR(Ot,Qr.fieldPath,Ot.startAt);Lt.push(Q0.value),qt&&(qt=Q0.inclusive)}return new zd(Lt,qt)}(C,w),ne=function(Ot,Pt){const Lt=[];let qt=!0;for(const Qr of sp(Pt)){const Q0=0===Qr.kind?nR(Ot,Qr.fieldPath,Ot.endAt):tR(Ot,Qr.fieldPath,Ot.endAt);Lt.push(Q0.value),qt&&(qt=Q0.inclusive)}return new zd(Lt,qt)}(C,w),xe=this.en(w,C,Y),Ve=this.en(w,C,ne),ft=this.nn(w,C,$),jt=this.sn(w.indexId,N,xe,Y.inclusive,Ve,ne.inclusive,ft);return ae.forEach(jt,Ot=>r.J(Ot,t.limit).next(Pt=>{Pt.forEach(Lt=>{const qt=Ge.fromSegments(Lt.documentKey);l.has(qt)||(l=l.add(qt),m.push(qt))})}))}).next(()=>m)}return ae.resolve(null)})}Ze(e){let t=this.Xe.get(e);return t||(t=0===e.filters.length?[e]:M1(gn.create(e.filters,"and")).map(r=>uS(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Xe.set(e,t),t)}sn(e,t,r,s,u,l,m){const w=(null!=t?t.length:1)*Math.max(r.length,u.length),C=w/(null!=t?t.length:1),A=[];for(let N=0;N<w;++N){const $=t?this.rn(t[N/C]):cD,Y=this.on(e,$,r[N%C],s),ne=this.un(e,$,u[N%C],l),xe=m.map(Ve=>this.on(e,$,Ve,!0));A.push(...this.createRange(Y,ne,xe))}return A}on(e,t,r,s){const u=new _p(e,Ge.empty(),t,r);return s?u:u.Ue()}un(e,t,r,s){const u=new _p(e,Ge.empty(),t,r);return s?u.Ue():u}tn(e,t){const r=new A1(t),s=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next(u=>{let l=null;for(const m of u)r.je(m)&&(!l||m.fields.length>l.fields.length)&&(l=m);return l})}getIndexType(e,t){let r=2;const s=this.Ze(t);return ae.forEach(s,u=>this.tn(e,u).next(l=>{l?0!==r&&l.fields.length<function(m){let w=new In(ir.comparator),C=!1;for(const A of m.filters)for(const N of A.getFlattenedFilters())N.field.isKeyField()||("array-contains"===N.op||"array-contains-any"===N.op?C=!0:w=w.add(N.field));for(const A of m.orderBy)A.field.isKeyField()||(w=w.add(A.field));return w.size+(C?1:0)}(u)&&(r=1):r=0})).next(()=>null!==t.limit&&s.length>1&&2===r?1:r)}cn(e,t){const r=new R0;for(const s of sp(e)){const u=t.data.field(s.fieldPath);if(null==u)return null;const l=r.qe(s.kind);vp.Ie.ue(u,l)}return r.Fe()}rn(e){const t=new R0;return vp.Ie.ue(e,t.qe(0)),t.Fe()}an(e,t){const r=new R0;return vp.Ie.ue(lp(this.databaseId,t),r.qe(function(s){const u=sp(s);return 0===u.length?0:u[u.length-1].kind}(e))),r.Fe()}nn(e,t,r){if(null===r)return[];let s=[];s.push(new R0);let u=0;for(const l of sp(e)){const m=r[u++];for(const w of s)if(this.hn(t,l.fieldPath)&&m0(m))s=this.ln(s,l,m);else{const C=w.qe(l.kind);vp.Ie.ue(m,C)}}return this.fn(s)}en(e,t,r){return this.nn(e,t,r.position)}fn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Fe();return t}ln(e,t,r){const s=[...e],u=[];for(const l of r.arrayValue.values||[])for(const m of s){const w=new R0;w.seed(m.Fe()),vp.Ie.ue(l,w.qe(t.kind)),u.push(w)}return u}hn(e,t){return!!e.filters.find(r=>r instanceof Qt&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=lD(e),s=O0(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(u=>{const l=[];return ae.forEach(u,m=>s.get([m.indexId,this.uid]).next(w=>{l.push(function(C,A){const N=A?new l0(A.sequenceNumber,new oo(mp(A.readTime),new Ge(Bu(A.documentKey)),A.largestBatchId)):l0.empty(),$=C.fields.map(([Y,ne])=>new qI(ir.fromServerFormat(Y),ne));return new GI(C.indexId,C.collectionGroup,$,N)}(m,w))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,s)=>{const u=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return 0!==u?u:Bt(r.collectionGroup,s.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const s=lD(e),u=O0(e);return this.dn(e).next(l=>s.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(m=>ae.forEach(m,w=>u.put(JR(w.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return ae.forEach(t,(s,u)=>{const l=r.get(s.collectionGroup);return(l?ae.resolve(l):this.getFieldIndexes(e,s.collectionGroup)).next(m=>(r.set(s.collectionGroup,m),ae.forEach(m,w=>this._n(e,s,w).next(C=>{const A=this.wn(u,w);return C.isEqual(A)?ae.resolve():this.mn(e,u,w,C,A)}))))})}gn(e,t,r,s){return N0(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.an(r,t.key),documentKey:t.key.path.toArray()})}yn(e,t,r,s){return N0(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.an(r,t.key),t.key.path.toArray()])}_n(e,t,r){const s=N0(e);let u=new In(Kd);return s.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.an(r,t)])},(l,m)=>{u=u.add(new _p(r.indexId,t,m.arrayValue,m.directionalValue))}).next(()=>u)}wn(e,t){let r=new In(Kd);const s=this.cn(t,e);if(null==s)return r;const u=JT(t);if(null!=u){const l=e.data.field(u.fieldPath);if(m0(l))for(const m of l.arrayValue.values||[])r=r.add(new _p(t.indexId,e.key,this.rn(m),s))}else r=r.add(new _p(t.indexId,e.key,cD,s));return r}mn(e,t,r,s,u){Oe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(m,w,C,A,N){const $=m.getIterator(),Y=w.getIterator();let ne=Km($),xe=Km(Y);for(;ne||xe;){let Ve=!1,ft=!1;if(ne&&xe){const jt=C(ne,xe);jt<0?ft=!0:jt>0&&(Ve=!0)}else null!=ne?ft=!0:Ve=!0;Ve?(A(xe),xe=Km(Y)):ft?(N(ne),ne=Km($)):(ne=Km($),xe=Km(Y))}}(s,u,Kd,m=>{l.push(this.gn(e,t,r,m))},m=>{l.push(this.yn(e,t,r,m))}),ae.waitFor(l)}dn(e){let t=1;return O0(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,u)=>{u.done(),t=s.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,m)=>Kd(l,m)).filter((l,m,w)=>!m||0!==Kd(l,w[m-1]));const s=[];s.push(e);for(const l of r){const m=Kd(l,e),w=Kd(l,t);if(0===m)s[0]=e.Ue();else if(m>0&&w<0)s.push(l),s.push(l.Ue());else if(w>0)break}s.push(t);const u=[];for(let l=0;l<s.length;l+=2){if(this.pn(s[l],s[l+1]))return[];u.push(IDBKeyRange.bound([s[l].indexId,this.uid,s[l].arrayValue,s[l].directionalValue,cD,[]],[s[l+1].indexId,this.uid,s[l+1].arrayValue,s[l+1].directionalValue,cD,[]]))}return u}pn(e,t){return Kd(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(aN)}getMinOffset(e,t){return ae.mapArray(this.Ze(t),r=>this.tn(e,r).next(s=>s||et())).next(aN)}}function oN(n){return gi(n,"collectionParents")}function N0(n){return gi(n,"indexEntries")}function lD(n){return gi(n,"indexConfiguration")}function O0(n){return gi(n,"indexState")}function aN(n){ut(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const s=n[r].indexState.offset;XT(s,e)<0&&(e=s),t<s.largestBatchId&&(t=s.largestBatchId)}return new oo(e.readTime,e.documentKey,t)}const uN={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ks{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new ks(e,ks.DEFAULT_COLLECTION_PERCENTILE,ks.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function cN(n,e,t){const r=n.store("mutations"),s=n.store("documentMutations"),u=[],l=IDBKeyRange.only(t.batchId);let m=0;const w=r.Z({range:l},(A,N,$)=>(m++,$.delete()));u.push(w.next(()=>{ut(1===m)}));const C=[];for(const A of t.mutations){const N=GR(e,A.key.path,t.batchId);u.push(s.delete(N)),C.push(A.key)}return ae.waitFor(u).next(()=>C)}function dD(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw et();e=n.noDocument}return JSON.stringify(e).length}ks.DEFAULT_COLLECTION_PERCENTILE=10,ks.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ks.DEFAULT=new ks(41943040,ks.DEFAULT_COLLECTION_PERCENTILE,ks.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ks.DISABLED=new ks(-1,0,0);class hD{constructor(e,t,r,s){this.userId=e,this.yt=t,this.indexManager=r,this.referenceDelegate=s,this.In={}}static re(e,t,r,s){ut(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new hD(u,t,r,s)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Yd(e).Z({index:"userMutationsIndex",range:r},(s,u,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,s){const u=iy(e),l=Yd(e);return l.add({}).next(m=>{ut("number"==typeof m);const w=new wS(m,t,r,s),C=function($,Y,ne){const xe=ne.baseMutations.map(ft=>A0($.ie,ft)),Ve=ne.mutations.map(ft=>A0($.ie,ft));return{userId:Y,batchId:ne.batchId,localWriteTimeMs:ne.localWriteTime.toMillis(),baseMutations:xe,mutations:Ve}}(this.yt,this.userId,w),A=[];let N=new In(($,Y)=>Bt($.canonicalString(),Y.canonicalString()));for(const $ of s){const Y=GR(this.userId,$.key.path,m);N=N.add($.key.path.popLast()),A.push(l.put(C)),A.push(u.put(Y,s1))}return N.forEach($=>{A.push(this.indexManager.addToCollectionParentIndex(e,$))}),e.addOnCommittedListener(()=>{this.In[m]=w.keys()}),ae.waitFor(A).next(()=>w)})}lookupMutationBatch(e,t){return Yd(e).get(t).next(r=>r?(ut(r.userId===this.userId),yp(this.yt,r)):null)}Tn(e,t){return this.In[t]?ae.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const s=r.keys();return this.In[t]=s,s}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return Yd(e).Z({index:"userMutationsIndex",range:s},(l,m,w)=>{m.userId===this.userId&&(ut(m.batchId>=r),u=yp(this.yt,m)),w.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Yd(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(s,u,l)=>{r=u.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Yd(e).W("userMutationsIndex",t).next(r=>r.map(s=>yp(this.yt,s)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=sD(this.userId,t.path),s=IDBKeyRange.lowerBound(r),u=[];return iy(e).Z({range:s},(l,m,w)=>{const[C,A,N]=l,$=Bu(A);if(C===this.userId&&t.path.isEqual($))return Yd(e).get(N).next(Y=>{if(!Y)throw et();ut(Y.userId===this.userId),u.push(yp(this.yt,Y))});w.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new In(Bt);const s=[];return t.forEach(u=>{const l=sD(this.userId,u.path),m=IDBKeyRange.lowerBound(l),w=iy(e).Z({range:m},(C,A,N)=>{const[$,Y,ne]=C,xe=Bu(Y);$===this.userId&&u.path.isEqual(xe)?r=r.add(ne):N.done()});s.push(w)}),ae.waitFor(s).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1,u=sD(this.userId,r),l=IDBKeyRange.lowerBound(u);let m=new In(Bt);return iy(e).Z({range:l},(w,C,A)=>{const[N,$,Y]=w,ne=Bu($);N===this.userId&&r.isPrefixOf(ne)?ne.length===s&&(m=m.add(Y)):A.done()}).next(()=>this.En(e,m))}En(e,t){const r=[],s=[];return t.forEach(u=>{s.push(Yd(e).get(u).next(l=>{if(null===l)throw et();ut(l.userId===this.userId),r.push(yp(this.yt,l))}))}),ae.waitFor(s).next(()=>r)}removeMutationBatch(e,t){return cN(e.se,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),ae.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ae.resolve();const r=IDBKeyRange.lowerBound([this.userId]),s=[];return iy(e).Z({range:r},(u,l,m)=>{if(u[0]===this.userId){const w=Bu(u[1]);s.push(w)}else m.done()}).next(()=>{ut(0===s.length)})})}containsKey(e,t){return lN(e,this.userId,t)}Rn(e){return dN(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function lN(n,e,t){const r=sD(e,t.path),s=r[1],u=IDBKeyRange.lowerBound(r);let l=!1;return iy(n).Z({range:u,X:!0},(m,w,C)=>{const[A,N,$]=m;A===e&&N===s&&(l=!0),C.done()}).next(()=>l)}function Yd(n){return gi(n,"mutations")}function iy(n){return gi(n,"documentMutations")}function dN(n){return gi(n,"mutationQueues")}class wp{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new wp(0)}static vn(){return new wp(-1)}}class N1{constructor(e,t){this.referenceDelegate=e,this.yt=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new wp(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>gt.fromTimestamp(new $n(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(s=>(s.highestListenSequenceNumber=t,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.Sn(e,s)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>sy(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(ut(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let s=0;const u=[];return sy(e).Z((l,m)=>{const w=M0(m);w.sequenceNumber<=t&&null===r.get(w.targetId)&&(s++,u.push(this.removeTargetData(e,w)))}).next(()=>ae.waitFor(u)).next(()=>s)}forEachTarget(e,t){return sy(e).Z((r,s)=>{const u=M0(s);t(u)})}Vn(e){return hN(e).get("targetGlobalKey").next(t=>(ut(null!==t),t))}Sn(e,t){return hN(e).put("targetGlobalKey",t)}Dn(e,t){return sy(e).put(YR(this.yt,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=dp(t),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return sy(e).Z({range:s,index:"queryTargetsIndex"},(l,m,w)=>{const C=M0(m);v0(t,C.target)&&(u=C,w.done())}).next(()=>u)}addMatchingKeys(e,t,r){const s=[],u=Qd(e);return t.forEach(l=>{const m=cs(l.path);s.push(u.put({targetId:r,path:m})),s.push(this.referenceDelegate.addReference(e,r,l))}),ae.waitFor(s)}removeMatchingKeys(e,t,r){const s=Qd(e);return ae.forEach(t,u=>{const l=cs(u.path);return ae.waitFor([s.delete([r,l]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=Qd(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),s=Qd(e);let u=Ht();return s.Z({range:r,X:!0},(l,m,w)=>{const C=Bu(l[1]),A=new Ge(C);u=u.add(A)}).next(()=>u)}containsKey(e,t){const r=cs(t.path),s=IDBKeyRange.bound([r],[Ax(r)],!1,!0);let u=0;return Qd(e).Z({index:"documentTargetsIndex",X:!0,range:s},([l,m],w,C)=>{0!==l&&(u++,C.done())}).next(()=>u>0)}ne(e,t){return sy(e).get(t).next(r=>r?M0(r):null)}}function sy(n){return gi(n,"targets")}function hN(n){return gi(n,"targetGlobal")}function Qd(n){return gi(n,"targetDocuments")}function fN([n,e],[t,r]){const s=Bt(n,t);return 0===s?Bt(e,r):s}class O1{constructor(e){this.xn=e,this.buffer=new In(fN),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();fN(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class P1{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;Oe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ge.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){jd(r)?Oe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Bd(r)}yield t.Fn(3e5)}))}}class k1{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ae.resolve(ao.at);const r=new O1(t);return this.$n.forEachTarget(e,s=>r.On(s.sequenceNumber)).next(()=>this.$n.Ln(e,s=>r.On(s))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Oe("LruGarbageCollector","Garbage collection skipped; disabled"),ae.resolve(uN)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),uN):this.qn(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}qn(e,t){let r,s,u,l,m,w,C;const A=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(N=>(N>this.params.maximumSequenceNumbersToCollect?(Oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${N}`),s=this.params.maximumSequenceNumbersToCollect):s=N,l=Date.now(),this.nthSequenceNumber(e,s))).next(N=>(r=N,m=Date.now(),this.removeTargets(e,r,t))).next(N=>(u=N,w=Date.now(),this.removeOrphanedDocuments(e,r))).next(N=>(C=Date.now(),En()<=bu.in.DEBUG&&Oe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-A}ms\n\tDetermined least recently used ${s} in `+(m-l)+`ms\n\tRemoved ${u} targets in `+(w-m)+`ms\n\tRemoved ${N} documents in `+(C-w)+`ms\nTotal Duration: ${C-A}ms`),ae.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:u,documentsRemoved:N})))}}class F1{constructor(e,t){this.db=e,this.garbageCollector=new k1(this,t)}Bn(e){const t=this.Un(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}Un(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,s)=>t(s))}addReference(e,t,r){return fD(e,r)}removeReference(e,t,r){return fD(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return fD(e,t)}Gn(e,t){return function(r,s){let u=!1;return dN(r).tt(l=>lN(r,l,s).next(m=>(m&&(u=!0),ae.resolve(!m)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let u=0;return this.Kn(e,(l,m)=>{if(m<=t){const w=this.Gn(e,l).next(C=>{if(!C)return u++,r.getEntry(e,l).next(()=>(r.removeEntry(l,gt.min()),Qd(e).delete([0,cs(l.path)])))});s.push(w)}}).next(()=>ae.waitFor(s)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return fD(e,t)}Kn(e,t){const r=Qd(e);let s,u=ao.at;return r.Z({index:"documentTargetsIndex"},([l,m],{path:w,sequenceNumber:C})=>{0===l?(u!==ao.at&&t(new Ge(Bu(s)),u),u=C,s=w):u=ao.at}).next(()=>{u!==ao.at&&t(new Ge(Bu(s)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function fD(n,e){return Qd(n).put((r=n.currentSequenceNumber,{targetId:0,path:cs(e.path),sequenceNumber:r}));var r}class pN{constructor(){this.changes=new Wd(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Pn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ae.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class L1{constructor(e){this.yt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Ep(e).put(r)}removeEntry(e,t,r){return Ep(e).delete(function(s,u){const l=s.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],oD(u),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=Pn.newInvalidDocument(t);return Ep(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(P0(t))},(s,u)=>{r=this.jn(t,u)}).next(()=>r)}Wn(e,t){let r={size:0,document:Pn.newInvalidDocument(t)};return Ep(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(P0(t))},(s,u)=>{r={document:this.jn(t,u),size:dD(u)}}).next(()=>r)}getEntries(e,t){let r=Ps();return this.zn(e,t,(s,u)=>{const l=this.jn(s,u);r=r.insert(s,l)}).next(()=>r)}Hn(e,t){let r=Ps(),s=new or(Ge.comparator);return this.zn(e,t,(u,l)=>{const m=this.jn(u,l);r=r.insert(u,m),s=s.insert(u,dD(l))}).next(()=>({documents:r,Jn:s}))}zn(e,t,r){if(t.isEmpty())return ae.resolve();let s=new In(vN);t.forEach(w=>s=s.add(w));const u=IDBKeyRange.bound(P0(s.first()),P0(s.last())),l=s.getIterator();let m=l.getNext();return Ep(e).Z({index:"documentKeyIndex",range:u},(w,C,A)=>{const N=Ge.fromSegments([...C.prefixPath,C.collectionGroup,C.documentId]);for(;m&&vN(m,N)<0;)r(m,null),m=l.getNext();m&&m.isEqual(N)&&(r(m,C),m=l.hasNext()?l.getNext():null),m?A.j(P0(m)):A.done()}).next(()=>{for(;m;)r(m,null),m=l.hasNext()?l.getNext():null})}getAllFromCollection(e,t,r){const s=[t.popLast().toArray(),t.lastSegment(),oD(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ep(e).W(IDBKeyRange.bound(s,u,!0)).next(l=>{let m=Ps();for(const w of l){const C=this.jn(Ge.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);m=m.insert(C.key,C)}return m})}getAllFromCollectionGroup(e,t,r,s){let u=Ps();const l=yN(t,r),m=yN(t,oo.max());return Ep(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,m,!0)},(w,C,A)=>{const N=this.jn(Ge.fromSegments(C.prefixPath.concat(C.collectionGroup,C.documentId)),C);u=u.insert(N.key,N),u.size===s&&A.done()}).next(()=>u)}newChangeBuffer(e){return new V1(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return mN(e).get("remoteDocumentGlobalKey").next(t=>(ut(!!t),t))}Qn(e,t){return mN(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function I1(n,e){let t;if(e.document)t=FR(n.ie,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ge.fromSegments(e.noDocument.path),s=mp(e.noDocument.readTime);t=Pn.newNoDocument(r,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return et();{const r=Ge.fromSegments(e.unknownDocument.path),s=mp(e.unknownDocument.version);t=Pn.newUnknownDocument(r,s)}}return e.readTime&&t.setReadTime(function(r){const s=new $n(r[0],r[1]);return gt.fromTimestamp(s)}(e.readTime)),t}(this.yt,t);if(!r.isNoDocument()||!r.version.isEqual(gt.min()))return r}return Pn.newInvalidDocument(e)}}function gN(n){return new L1(n)}class V1 extends pN{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new Wd(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const t=[];let r=0,s=new In((u,l)=>Bt(u.canonicalString(),l.canonicalString()));return this.changes.forEach((u,l)=>{const m=this.Xn.get(u);if(t.push(this.Yn.removeEntry(e,u,m.readTime)),l.isValidDocument()){const w=KR(this.Yn.yt,l);s=s.add(u.path.popLast());const C=dD(w);r+=C-m.size,t.push(this.Yn.addEntry(e,u,w))}else if(r-=m.size,this.trackRemovals){const w=KR(this.Yn.yt,l.convertToNoDocument(gt.min()));t.push(this.Yn.addEntry(e,u,w))}}),s.forEach(u=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Yn.updateMetadata(e,r)),ae.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:s})=>(s.forEach((u,l)=>{this.Xn.set(u,{size:l,readTime:r.get(u).readTime})}),r))}}function mN(n){return gi(n,"remoteDocumentGlobal")}function Ep(n){return gi(n,"remoteDocumentsV14")}function P0(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function yN(n,e){const t=e.documentKey.path.toArray();return[n,oD(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function vN(n,e){const t=n.path.toArray(),r=e.path.toArray();let s=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(s=Bt(t[u],r[u]),s)return s;return s=Bt(t.length,r.length),s||(s=Bt(t[t.length-2],r[r.length-2]),s||Bt(t[t.length-1],r[r.length-1]))}class U1{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class _N{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(null!==r&&E0(r.mutation,s,Os.empty(),$n.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Ht()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Ht()){const s=Vu();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,r).next(u=>{let l=I0();return u.forEach((m,w)=>{l=l.insert(m,w.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=Vu();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Ht()))}populateOverlays(e,t,r){const s=[];return r.forEach(u=>{t.has(u)||s.push(u)}),this.documentOverlayCache.getOverlays(e,s).next(u=>{u.forEach((l,m)=>{t.set(l,m)})})}computeViews(e,t,r,s){let u=Ps();const l=D0(),m=D0();return t.forEach((w,C)=>{const A=r.get(C.key);s.has(C.key)&&(void 0===A||A.mutation instanceof sl)?u=u.insert(C.key,C):void 0!==A?(l.set(C.key,A.mutation.getFieldMask()),E0(A.mutation,C,A.mutation.getFieldMask(),$n.now())):l.set(C.key,Os.empty())}),this.recalculateAndSaveOverlays(e,u).next(w=>(w.forEach((C,A)=>l.set(C,A)),t.forEach((C,A)=>{var N;return m.set(C,new U1(A,null!==(N=l.get(C))&&void 0!==N?N:null))}),m))}recalculateAndSaveOverlays(e,t){const r=D0();let s=new or((l,m)=>l-m),u=Ht();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const m of l)m.keys().forEach(w=>{const C=t.get(w);if(null===C)return;let A=r.get(w)||Os.empty();A=m.applyToLocalView(C,A),r.set(w,A);const N=(s.get(m.batchId)||Ht()).add(w);s=s.insert(m.batchId,N)})}).next(()=>{const l=[],m=s.getReverseIterator();for(;m.hasNext();){const w=m.getNext(),C=w.key,A=w.value,N=bR();A.forEach($=>{if(!u.has($)){const Y=mR(t.get($),r.get($));null!==Y&&N.set($,Y),u=u.add($)}}),l.push(this.documentOverlayCache.saveOverlays(e,C,N))}return ae.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Ge.isDocumentKey((s=t).path)&&null===s.collectionGroup&&0===s.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):lS(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var s}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next(u=>{const l=s-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-u.size):ae.resolve(Vu());let m=-1,w=u;return l.next(C=>ae.forEach(C,(A,N)=>(m<N.largestBatchId&&(m=N.largestBatchId),u.get(A)?ae.resolve():this.remoteDocumentCache.getEntry(e,A).next($=>{w=w.insert(A,$)}))).next(()=>this.populateOverlays(e,C,u)).next(()=>this.computeViews(e,w,C,Ht())).next(A=>({batchId:m,changes:CR(A)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ge(t)).next(r=>{let s=I0();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const s=t.collectionGroup;let u=I0();return this.indexManager.getCollectionParents(e,s).next(l=>ae.forEach(l,m=>{const w=(C=t,A=m.child(s),new il(A,null,C.explicitOrderBy.slice(),C.filters.slice(),C.limit,C.limitType,C.startAt,C.endAt));var C,A;return this.getDocumentsMatchingCollectionQuery(e,w,r).next(C=>{C.forEach((A,N)=>{u=u.insert(A,N)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let s;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(u=>(s=u,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(u=>{u.forEach((m,w)=>{const C=w.getKey();null===s.get(C)&&(s=s.insert(C,Pn.newInvalidDocument(C)))});let l=I0();return s.forEach((m,w)=>{const C=u.get(m);void 0!==C&&E0(C.mutation,w,Os.empty(),$n.now()),fS(t,w)&&(l=l.insert(m,w))}),l})}}class B1{constructor(e){this.yt=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return ae.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:_r(r.createTime)}),ae.resolve()}getNamedQuery(e,t){return ae.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:DS(r.bundledQuery),readTime:_r(r.readTime)}),ae.resolve();var r}}class j1{constructor(){this.overlays=new or(Ge.comparator),this.es=new Map}getOverlay(e,t){return ae.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Vu();return ae.forEach(t,s=>this.getOverlay(e,s).next(u=>{null!==u&&r.set(s,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((s,u)=>{this.oe(e,t,u)}),ae.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.es.get(r);return void 0!==s&&(s.forEach(u=>this.overlays=this.overlays.remove(u)),this.es.delete(r)),ae.resolve()}getOverlaysForCollection(e,t,r){const s=Vu(),u=t.length+1,l=new Ge(t.child("")),m=this.overlays.getIteratorFrom(l);for(;m.hasNext();){const w=m.getNext().value,C=w.getKey();if(!t.isPrefixOf(C.path))break;C.path.length===u&&w.largestBatchId>r&&s.set(w.getKey(),w)}return ae.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let u=new or((C,A)=>C-A);const l=this.overlays.getIterator();for(;l.hasNext();){const C=l.getNext().value;if(C.getKey().getCollectionGroup()===t&&C.largestBatchId>r){let A=u.get(C.largestBatchId);null===A&&(A=Vu(),u=u.insert(C.largestBatchId,A)),A.set(C.getKey(),C)}}const m=Vu(),w=u.getIterator();for(;w.hasNext()&&(w.getNext().value.forEach((C,A)=>m.set(C,A)),!(m.size()>=s)););return ae.resolve(m)}oe(e,t,r){const s=this.overlays.get(r.key);if(null!==s){const l=this.es.get(s.largestBatchId).delete(r.key);this.es.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new IS(t,r));let u=this.es.get(t);void 0===u&&(u=Ht(),this.es.set(t,u)),this.es.set(t,u.add(r.key))}}class xS{constructor(){this.ns=new In(mi.ss),this.rs=new In(mi.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new mi(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new mi(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new Ge(new tn([])),r=new mi(t,e),s=new mi(t,e+1),u=[];return this.rs.forEachInRange([r,s],l=>{this.cs(l),u.push(l.key)}),u}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new Ge(new tn([])),r=new mi(t,e),s=new mi(t,e+1);let u=Ht();return this.rs.forEachInRange([r,s],l=>{u=u.add(l.key)}),u}containsKey(e){const t=new mi(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class mi{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return Ge.comparator(e.key,t.key)||Bt(e._s,t._s)}static os(e,t){return Bt(e._s,t._s)||Ge.comparator(e.key,t.key)}}class $1{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new In(mi.ss)}checkEmpty(e){return ae.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,s){const u=this.ws;this.ws++;const l=new wS(u,t,r,s);this.mutationQueue.push(l);for(const m of s)this.gs=this.gs.add(new mi(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return ae.resolve(l)}lookupMutationBatch(e,t){return ae.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const s=this.ps(t+1),u=s<0?0:s;return ae.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ae.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return ae.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new mi(t,0),s=new mi(t,Number.POSITIVE_INFINITY),u=[];return this.gs.forEachInRange([r,s],l=>{const m=this.ys(l._s);u.push(m)}),ae.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new In(Bt);return t.forEach(s=>{const u=new mi(s,0),l=new mi(s,Number.POSITIVE_INFINITY);this.gs.forEachInRange([u,l],m=>{r=r.add(m._s)})}),ae.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let u=r;Ge.isDocumentKey(u)||(u=u.child(""));const l=new mi(new Ge(u),0);let m=new In(Bt);return this.gs.forEachWhile(w=>{const C=w.key.path;return!!r.isPrefixOf(C)&&(C.length===s&&(m=m.add(w._s)),!0)},l),ae.resolve(this.Is(m))}Is(e){const t=[];return e.forEach(r=>{const s=this.ys(r);null!==s&&t.push(s)}),t}removeMutationBatch(e,t){ut(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return ae.forEach(t.mutations,s=>{const u=new mi(s.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new mi(t,0),s=this.gs.firstAfterOrEqual(r);return ae.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return ae.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class H1{constructor(e){this.Es=e,this.docs=new or(Ge.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),u=s?s.size:0,l=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ae.resolve(r?r.document.mutableCopy():Pn.newInvalidDocument(t))}getEntries(e,t){let r=Ps();return t.forEach(s=>{const u=this.docs.get(s);r=r.insert(s,u?u.document.mutableCopy():Pn.newInvalidDocument(s))}),ae.resolve(r)}getAllFromCollection(e,t,r){let s=Ps();const u=new Ge(t.child("")),l=this.docs.getIteratorFrom(u);for(;l.hasNext();){const{key:m,value:{document:w}}=l.getNext();if(!t.isPrefixOf(m.path))break;m.path.length>t.length+1||XT(xx(w),r)<=0||(s=s.insert(w.key,w.mutableCopy()))}return ae.resolve(s)}getAllFromCollectionGroup(e,t,r,s){et()}As(e,t){return ae.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new G1(this)}getSize(e){return ae.resolve(this.size)}}class G1 extends pN{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this.Yn.addEntry(e,s)):this.Yn.removeEntry(r)}),ae.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class q1{constructor(e){this.persistence=e,this.Rs=new Wd(t=>dp(t),v0),this.lastRemoteSnapshotVersion=gt.min(),this.highestTargetId=0,this.bs=0,this.Ps=new xS,this.targetCount=0,this.vs=wp.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,s)=>t(s)),ae.resolve()}getLastRemoteSnapshotVersion(e){return ae.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ae.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),ae.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),ae.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new wp(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,ae.resolve()}updateTargetData(e,t){return this.Dn(t),ae.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,ae.resolve()}removeTargets(e,t,r){let s=0;const u=[];return this.Rs.forEach((l,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.Rs.delete(l),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),s++)}),ae.waitFor(u).next(()=>s)}getTargetCount(e){return ae.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return ae.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),ae.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const s=this.persistence.referenceDelegate,u=[];return s&&t.forEach(l=>{u.push(s.markPotentiallyOrphaned(e,l))}),ae.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),ae.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return ae.resolve(r)}containsKey(e,t){return ae.resolve(this.Ps.containsKey(t))}}class wN{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new ao(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new q1(this),this.indexManager=new x1,this.remoteDocumentCache=new H1(r=>this.referenceDelegate.xs(r)),this.yt=new ZR(t),this.Ns=new B1(this.yt)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new j1,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new $1(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){Oe("MemoryPersistence","Starting transaction:",e);const s=new z1(this.Ss.next());return this.referenceDelegate.ks(),r(s).next(u=>this.referenceDelegate.Os(s).next(()=>u)).toPromise().then(u=>(s.raiseOnCommittedEvent(),u))}Ms(e,t){return ae.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class z1 extends Nx{constructor(e){super(),this.currentSequenceNumber=e}}class pD{constructor(e){this.persistence=e,this.Fs=new xS,this.$s=null}static Bs(e){return new pD(e)}get Ls(){if(this.$s)return this.$s;throw et()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),ae.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),ae.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),ae.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(s=>this.Ls.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(u=>this.Ls.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ae.forEach(this.Ls,r=>{const s=Ge.fromPath(r);return this.qs(e,s).next(u=>{u||t.removeEntry(s,gt.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.qs(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}qs(e,t){return ae.or([()=>ae.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class W1{constructor(e){this.yt=e}$(e,t,r,s){const u=new zI("createOrUpgrade",t);var m;r<1&&s>=1&&(e.createObjectStore("owner"),(m=e).createObjectStore("mutationQueues",{keyPath:"userId"}),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",HR,{unique:!0}),m.createObjectStore("documentMutations"),EN(e),function(m){m.createObjectStore("remoteDocuments")}(e));let l=ae.resolve();return r<3&&s>=3&&(0!==r&&(function(m){m.deleteObjectStore("targetDocuments"),m.deleteObjectStore("targets"),m.deleteObjectStore("targetGlobal")}(e),EN(e)),l=l.next(()=>function(m){const w=m.store("targetGlobal"),C={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:gt.min().toTimestamp(),targetCount:0};return w.put("targetGlobalKey",C)}(u))),r<4&&s>=4&&(0!==r&&(l=l.next(()=>function(m,w){return w.store("mutations").W().next(C=>{m.deleteObjectStore("mutations"),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",HR,{unique:!0});const A=w.store("mutations"),N=C.map($=>A.put($));return ae.waitFor(N)})}(e,u))),l=l.next(()=>{!function(m){m.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&s>=5&&(l=l.next(()=>this.Us(u))),r<6&&s>=6&&(l=l.next(()=>(function(m){m.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(u)))),r<7&&s>=7&&(l=l.next(()=>this.Gs(u))),r<8&&s>=8&&(l=l.next(()=>this.Qs(e,u))),r<9&&s>=9&&(l=l.next(()=>{!function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&s>=10&&(l=l.next(()=>this.js(u))),r<11&&s>=11&&(l=l.next(()=>{(function(m){m.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(m){m.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&s>=12&&(l=l.next(()=>{!function(m){const w=m.createObjectStore("documentOverlays",{keyPath:y1});w.createIndex("collectionPathOverlayIndex",v1,{unique:!1}),w.createIndex("collectionGroupOverlayIndex",_1,{unique:!1})}(e)})),r<13&&s>=13&&(l=l.next(()=>function(m){const w=m.createObjectStore("remoteDocumentsV14",{keyPath:o1});w.createIndex("documentKeyIndex",a1),w.createIndex("collectionGroupIndex",u1)}(e)).next(()=>this.Ws(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&s>=14&&(l=l.next(()=>this.zs(e,u))),r<15&&s>=15&&(l=l.next(()=>function(m){m.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),m.createObjectStore("indexState",{keyPath:f1}).createIndex("sequenceNumberIndex",p1,{unique:!1}),m.createObjectStore("indexEntries",{keyPath:g1}).createIndex("documentKeyIndex",m1,{unique:!1})}(e))),l}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,s)=>{t+=dD(s)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Us(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(s=>ae.forEach(s,u=>{const l=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",l).next(m=>ae.forEach(m,w=>{ut(w.userId===u.userId);const C=yp(this.yt,w);return cN(e,u.userId,C).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const u=[];return r.Z((l,m)=>{const w=new tn(l),C=[0,cs(w)];u.push(t.get(C).next(A=>A?ae.resolve():t.put({targetId:0,path:cs(w),sequenceNumber:s.highestListenSequenceNumber})))}).next(()=>ae.waitFor(u))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:h1});const r=t.store("collectionParents"),s=new MS,u=l=>{if(s.add(l)){const m=l.lastSegment(),w=l.popLast();return r.put({collectionId:m,parent:cs(w)})}};return t.store("remoteDocuments").Z({X:!0},(l,m)=>{const w=new tn(l);return u(w.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([l,m,w],C)=>{const A=Bu(m);return u(A.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,s)=>{const u=M0(s),l=YR(this.yt,u);return t.put(l)})}Ws(e,t){const r=t.store("remoteDocuments"),s=[];return r.Z((u,l)=>{const m=t.store("remoteDocumentsV14"),w=(C=l,C.document?new Ge(tn.fromString(C.document.name).popFirst(5)):C.noDocument?Ge.fromSegments(C.noDocument.path):C.unknownDocument?Ge.fromSegments(C.unknownDocument.path):et()).path.toArray();var C;const A={prefixPath:w.slice(0,w.length-2),collectionGroup:w[w.length-2],documentId:w[w.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};s.push(m.put(A))}).next(()=>ae.waitFor(s))}zs(e,t){const r=t.store("mutations"),s=gN(this.yt),u=new wN(pD.Bs,this.yt.ie);return r.W().next(l=>{const m=new Map;return l.forEach(w=>{var C;let A=null!==(C=m.get(w.userId))&&void 0!==C?C:Ht();yp(this.yt,w).keys().forEach(N=>A=A.add(N)),m.set(w.userId,A)}),ae.forEach(m,(w,C)=>{const A=new Qe(C),N=aD.re(this.yt,A),$=u.getIndexManager(A),Y=hD.re(A,this.yt,$,u.referenceDelegate);return new _N(s,Y,N,$).recalculateAndSaveOverlaysForDocumentKeys(new _S(t,ao.at),w).next()})})}}function EN(n){n.createObjectStore("targetDocuments",{keyPath:l1}).createIndex("documentTargetsIndex",d1,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",c1,{unique:!0}),n.createObjectStore("targetGlobal")}const RS="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class NS{constructor(e,t,r,s,u,l,m,w,C,A,N=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=u,this.window=l,this.document=m,this.Js=C,this.Ys=A,this.Xs=N,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=$=>Promise.resolve(),!NS.C())throw new Me(ue.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new F1(this,s),this.ii=t+"main",this.yt=new ZR(w),this.ri=new Ra(this.ii,this.Xs,new W1(this.yt)),this.Cs=new N1(this.referenceDelegate,this.yt),this.remoteDocumentCache=gN(this.yt),this.Ns=new D1,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===A&&vr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Me(ue.FAILED_PRECONDITION,RS);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new ao(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,ge.Z)(function*(s){if(t.started)return e(s)});return function(s){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,ge.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,ge.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>gD(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(jd(e))return Oe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Oe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return k0(e).get("owner").next(t=>ae.resolve(this.mi(t)))}gi(e){return gD(e).delete(this.clientId)}yi(){var e=this;return(0,ge.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const s=gi(r,"clientMetadata");return s.W().next(u=>{const l=e.Ii(u,18e5),m=u.filter(w=>-1===l.indexOf(w));return ae.forEach(m,w=>s.delete(w.clientId)).next(()=>m)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?ae.resolve(!0):k0(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Me(ue.FAILED_PRECONDITION,RS);return!1}}return!(!this.networkEnabled||!this.inForeground)||gD(e).W().next(r=>void 0===this.Ii(r,5e3).find(s=>{if(this.clientId!==s.clientId){const l=!this.inForeground&&s.inForeground,m=this.networkEnabled===s.networkEnabled;if(!this.networkEnabled&&s.networkEnabled||l&&m)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Oe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ge.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new _S(t,ao.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>gD(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return hD.re(e,this.yt,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new R1(e,this.yt.ie.databaseId)}getDocumentOverlayCache(e){return aD.re(this.yt,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){Oe("IndexedDbPersistence","Starting transaction:",e);const s="readonly"===t?"readonly":"readwrite",u=15===(l=this.Xs)?E1:14===l?WR:13===l?zR:12===l?w1:11===l?qR:void et();var l;let m;return this.ri.runTransaction(e,s,u,w=>(m=new _S(w,this.Ss?this.Ss.next():ao.at),"readwrite-primary"===t?this.fi(m).next(C=>!!C||this.di(m)).next(C=>{if(!C)throw vr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Me(ue.FAILED_PRECONDITION,Rx);return r(m)}).next(C=>this.wi(m).next(()=>C)):this.Vi(m).next(()=>r(m)))).then(w=>(m.raiseOnCommittedEvent(),w))}Vi(e){return k0(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Me(ue.FAILED_PRECONDITION,RS)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return k0(e).put("owner",t)}static C(){return Ra.C()}_i(e){const t=k0(e);return t.get("owner").next(r=>this.mi(r)?(Oe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ae.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(vr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,en.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return Oe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return vr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){vr("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function k0(n){return gi(n,"owner")}function gD(n){return gi(n,"clientMetadata")}function OS(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class PS{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=s}static Ci(e,t){let r=Ht(),s=Ht();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:s=s.add(u.doc.key)}return new PS(e,t.fromCache,r,s)}}class IN{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,s){return this.ki(e,t).next(u=>u||this.Oi(e,t,s,r)).next(u=>u||this.Mi(e,t))}ki(e,t){if(iR(t))return ae.resolve(null);let r=us(t);return this.indexManager.getIndexType(e,r).next(s=>0===s?null:(null!==t.limit&&1===s&&(t=XI(t,null,"F"),r=us(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const l=Ht(...u);return this.Ni.getDocuments(e,l).next(m=>this.indexManager.getMinOffset(e,r).next(w=>{const C=this.Fi(t,m);return this.$i(t,C,l,w.readTime)?this.ki(e,XI(t,null,"F")):this.Bi(e,C,t,w)}))})))}Oi(e,t,r,s){return iR(t)||s.isEqual(gt.min())?this.Mi(e,t):this.Ni.getDocuments(e,r).next(u=>{const l=this.Fi(t,u);return this.$i(t,l,r,s)?this.Mi(e,t):(En()<=bu.in.DEBUG&&Oe("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),hS(t)),this.Bi(e,l,t,Mx(s,-1)))})}Fi(e,t){let r=new In(aR(e));return t.forEach((s,u)=>{fS(e,u)&&(r=r.add(u))}),r}$i(e,t,r,s){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(s)>0)}Mi(e,t){return En()<=bu.in.DEBUG&&Oe("QueryEngine","Using full collection scan to execute query:",hS(t)),this.Ni.getDocumentsMatchingQuery(e,t,oo.min())}Bi(e,t,r,s){return this.Ni.getDocumentsMatchingQuery(e,r,s).next(u=>(t.forEach(l=>{u=u.insert(l.key,l)}),u))}}class Z1{constructor(e,t,r,s){this.persistence=e,this.Li=t,this.yt=s,this.qi=new or(Bt),this.Ui=new Wd(u=>dp(u),v0),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new _N(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.qi))}}function DN(n,e,t,r){return new Z1(n,e,t,r)}function CN(n,e){return kS.apply(this,arguments)}function kS(){return kS=(0,ge.Z)(function*(n,e){const t=qe(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next(u=>(s=u,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const l=[],m=[];let w=Ht();for(const C of s){l.push(C.batchId);for(const A of C.mutations)w=w.add(A.key)}for(const C of u){m.push(C.batchId);for(const A of C.mutations)w=w.add(A.key)}return t.localDocuments.getDocuments(r,w).next(C=>({ji:C,removedBatchIds:l,addedBatchIds:m}))})})}),kS.apply(this,arguments)}function K1(n,e){const t=qe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),u=t.Gi.newChangeBuffer({trackRemovals:!0});return function(l,m,w,C){const A=w.batch,N=A.keys();let $=ae.resolve();return N.forEach(Y=>{$=$.next(()=>C.getEntry(m,Y)).next(ne=>{const xe=w.docVersions.get(Y);ut(null!==xe),ne.version.compareTo(xe)<0&&(A.applyToRemoteDocument(ne,w),ne.isValidDocument()&&(ne.setReadTime(w.commitVersion),C.addEntry(ne)))})}),$.next(()=>l.mutationQueue.removeMutationBatch(m,A))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let m=Ht();for(let w=0;w<l.mutationResults.length;++w)l.mutationResults[w].transformResults.length>0&&(m=m.add(l.batch.mutations[w].key));return m}(e))).next(()=>t.localDocuments.getDocuments(r,s))})}function bN(n){const e=qe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function Y1(n,e){const t=qe(n),r=e.snapshotVersion;let s=t.qi;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const l=t.Gi.newChangeBuffer({trackRemovals:!0});s=t.qi;const m=[];e.targetChanges.forEach((A,N)=>{const $=s.get(N);if(!$)return;m.push(t.Cs.removeMatchingKeys(u,A.removedDocuments,N).next(()=>t.Cs.addMatchingKeys(u,A.addedDocuments,N)));let Y=$.withSequenceNumber(u.currentSequenceNumber);var ne,xe,Ve;e.targetMismatches.has(N)?Y=Y.withResumeToken(Yr.EMPTY_BYTE_STRING,gt.min()).withLastLimboFreeSnapshotVersion(gt.min()):A.resumeToken.approximateByteSize()>0&&(Y=Y.withResumeToken(A.resumeToken,r)),s=s.insert(N,Y),xe=Y,Ve=A,(0===(ne=$).resumeToken.approximateByteSize()||xe.snapshotVersion.toMicroseconds()-ne.snapshotVersion.toMicroseconds()>=3e8||Ve.addedDocuments.size+Ve.modifiedDocuments.size+Ve.removedDocuments.size>0)&&m.push(t.Cs.updateTargetData(u,Y))});let w=Ps(),C=Ht();if(e.documentUpdates.forEach(A=>{e.resolvedLimboDocuments.has(A)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,A))}),m.push(TN(u,l,e.documentUpdates).next(A=>{w=A.Wi,C=A.zi})),!r.isEqual(gt.min())){const A=t.Cs.getLastRemoteSnapshotVersion(u).next(N=>t.Cs.setTargetsMetadata(u,u.currentSequenceNumber,r));m.push(A)}return ae.waitFor(m).next(()=>l.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,w,C)).next(()=>w)}).then(u=>(t.qi=s,u))}function TN(n,e,t){let r=Ht(),s=Ht();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let l=Ps();return t.forEach((m,w)=>{const C=u.get(m);w.isFoundDocument()!==C.isFoundDocument()&&(s=s.add(m)),w.isNoDocument()&&w.version.isEqual(gt.min())?(e.removeEntry(m,w.readTime),l=l.insert(m,w)):!C.isValidDocument()||w.version.compareTo(C.version)>0||0===w.version.compareTo(C.version)&&C.hasPendingWrites?(e.addEntry(w),l=l.insert(m,w)):Oe("LocalStore","Ignoring outdated watch update for ",m,". Current version:",C.version," Watch version:",w.version)}),{Wi:l,zi:s}})}function Q1(n,e){const t=qe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function oy(n,e){const t=qe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.Cs.getTargetData(r,e).next(u=>u?(s=u,ae.resolve(s)):t.Cs.allocateTargetId(r).next(l=>(s=new Zd(e,l,0,r.currentSequenceNumber),t.Cs.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.qi.get(r.targetId);return(null===s||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.qi=t.qi.insert(r.targetId,r),t.Ui.set(e,r.targetId)),r})}function ay(n,e,t){return FS.apply(this,arguments)}function FS(){return FS=(0,ge.Z)(function*(n,e,t){const r=qe(n),s=r.qi.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,l=>r.persistence.referenceDelegate.removeTarget(l,s)))}catch(l){if(!jd(l))throw l;Oe("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.qi=r.qi.remove(e),r.Ui.delete(s.target)}),FS.apply(this,arguments)}function mD(n,e,t){const r=qe(n);let s=gt.min(),u=Ht();return r.persistence.runTransaction("Execute query","readonly",l=>function(m,w,C){const A=qe(m),N=A.Ui.get(C);return void 0!==N?ae.resolve(A.qi.get(N)):A.Cs.getTargetData(w,C)}(r,l,us(e)).next(m=>{if(m)return s=m.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(l,m.targetId).next(w=>{u=w})}).next(()=>r.Li.getDocumentsMatchingQuery(l,e,t?s:gt.min(),t?u:Ht())).next(m=>(MN(r,oR(e),m),{documents:m,Hi:u})))}function SN(n,e){const t=qe(n),r=qe(t.Cs),s=t.qi.get(e);return s?Promise.resolve(s.target):t.persistence.runTransaction("Get target data","readonly",u=>r.ne(u,e).next(l=>l?l.target:null))}function AN(n,e){const t=qe(n),r=t.Ki.get(e)||gt.min();return t.persistence.runTransaction("Get new document changes","readonly",s=>t.Gi.getAllFromCollectionGroup(s,e,Mx(r,-1),Number.MAX_SAFE_INTEGER)).then(s=>(MN(t,e,s),s))}function MN(n,e,t){let r=n.Ki.get(e)||gt.min();t.forEach((s,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Ki.set(e,r)}function LS(){return LS=(0,ge.Z)(function*(n,e,t,r){const s=qe(n);let u=Ht(),l=Ps();for(const C of t){const A=e.Ji(C.metadata.name);C.document&&(u=u.add(A));const N=e.Yi(C);N.setReadTime(e.Xi(C.metadata.readTime)),l=l.insert(A,N)}const m=s.Gi.newChangeBuffer({trackRemovals:!0}),w=yield oy(s,(C=r,us(Ym(tn.fromString(`__bundle__/docs/${C}`)))));var C;return s.persistence.runTransaction("Apply bundle documents","readwrite",C=>TN(C,m,l).next(A=>(m.apply(C),A)).next(A=>s.Cs.removeMatchingKeysForTargetId(C,w.targetId).next(()=>s.Cs.addMatchingKeys(C,u,w.targetId)).next(()=>s.localDocuments.getLocalViewOfDocuments(C,A.Wi,A.zi)).next(()=>A.Wi)))}),LS.apply(this,arguments)}function X1(n,e){return VS.apply(this,arguments)}function VS(){return VS=(0,ge.Z)(function*(n,e,t=Ht()){const r=yield oy(n,us(DS(e.bundledQuery))),s=qe(n);return s.persistence.runTransaction("Save named query","readwrite",u=>{const l=_r(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return s.Ns.saveNamedQuery(u,e);const m=r.withResumeToken(Yr.EMPTY_BYTE_STRING,l);return s.qi=s.qi.insert(m.targetId,m),s.Cs.updateTargetData(u,m).next(()=>s.Cs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>s.Cs.addMatchingKeys(u,t,r.targetId)).next(()=>s.Ns.saveNamedQuery(u,e))})}),VS.apply(this,arguments)}function xN(n,e){return`firestore_clients_${n}_${e}`}function RN(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function US(n,e){return`firestore_targets_${n}_${e}`}class yD{constructor(e,t,r,s){this.user=e,this.batchId=t,this.state=r,this.error=s}static Zi(e,t,r){const s=JSON.parse(r);let u,l="object"==typeof s&&-1!==["pending","acknowledged","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return l&&s.error&&(l="string"==typeof s.error.message&&"string"==typeof s.error.code,l&&(u=new Me(s.error.code,s.error.message))),l?new yD(e,t,s.state,u):(vr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class F0{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let s,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(s=new Me(r.error.code,r.error.message))),u?new F0(e,r.state,s):(vr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class vD{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let s="object"==typeof r&&r.activeTargetIds instanceof Array,u=rD();for(let l=0;s&&l<r.activeTargetIds.length;++l)s=Fx(r.activeTargetIds[l]),u=u.add(r.activeTargetIds[l]);return s?new vD(e,u):(vr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class BS{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new BS(t.clientId,t.onlineState):(vr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class jS{constructor(){this.activeTargetIds=rD()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class $S{constructor(e,t,r,s,u){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new or(Bt),this.started=!1,this.cr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.ar=xN(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new jS),this.lr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ge.Z)(function*(){const t=yield e.syncEngine.vi();for(const s of t){if(s===e.sr)continue;const u=e.getItem(xN(e.persistenceKey,s));if(u){const l=vD.Zi(s,u);l&&(e.ur=e.ur.insert(l.clientId,l))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const s=e.yr(r);s&&e.pr(s)}for(const s of e.cr)e.rr(s);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,s)=>{s.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(US(this.persistenceKey,e));if(r){const s=F0.Zi(e,r);s&&(t=s.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(US(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(s=>{this.Er(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Oe("SharedClientState","READ",e,t),t}setItem(e,t){Oe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Oe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Oe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void vr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,ge.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const s=t.vr(r.key);return t.Vr(s,null)}{const s=t.Sr(r.key,r.newValue);if(s)return t.Vr(s.clientId,s)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const s=t.Dr(r.key,r.newValue);if(s)return t.Cr(s)}}else if(t._r.test(r.key)){if(null!==r.newValue){const s=t.Nr(r.key,r.newValue);if(s)return t.kr(s)}}else if(r.key===t.wr){if(null!==r.newValue){const s=t.yr(r.newValue);if(s)return t.pr(s)}}else if(r.key===t.hr){const s=function(u){let l=ao.at;if(null!=u)try{const m=JSON.parse(u);ut("number"==typeof m),l=m}catch(m){vr("SharedClientState","Failed to read sequence number from WebStorage",m)}return l}(r.newValue);s!==ao.at&&t.sequenceNumberHandler(s)}else if(r.key===t.mr){const s=t.Or(r.newValue);yield Promise.all(s.map(u=>t.syncEngine.Mr(u)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const s=new yD(this.currentUser,e,t,r),u=RN(this.persistenceKey,this.currentUser,e);this.setItem(u,s.tr())}Er(e){const t=RN(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const s=US(this.persistenceKey,e),u=new F0(e,t,r);this.setItem(s,u.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return vD.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),s=Number(r[1]);return yD.Zi(new Qe(void 0!==r[2]?r[2]:null),s,t)}Nr(e,t){const r=this._r.exec(e),s=Number(r[1]);return F0.Zi(s,t)}yr(e){return BS.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,ge.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);Oe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),s=this.Ir(this.ur),u=this.Ir(r),l=[],m=[];return u.forEach(w=>{s.has(w)||l.push(w)}),s.forEach(w=>{u.has(w)||m.push(w)}),this.syncEngine.Br(l,m).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=rD();return e.forEach((r,s)=>{t=t.unionWith(s.activeTargetIds)}),t}}class NN{constructor(){this.Lr=new jS,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.qr[e]||"not-current"}updateQueryState(e,t,r){this.qr[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new jS,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class ek{Ur(e){}shutdown(){}}class ON{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}Ur(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Oe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){Oe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const tk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class nk{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class rk extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,r,s,u){const l=this.ho(e,t);Oe("RestConnection","Sending: ",l,r);const m={};return this.lo(m,s,u),this.fo(e,l,m,r).then(w=>(Oe("RestConnection","Received: ",w),w),w=>{throw ip("RestConnection",`${e} failed with error: `,w,"url: ",l,"request:",r),w})}_o(e,t,r,s,u,l){return this.ao(e,t,r,s,u)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Te,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,u)=>e[u]=s),r&&r.headers.forEach((s,u)=>e[u]=s)}ho(e,t){return`${this.oo}/v1/${t}:${tk[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,s){return new Promise((u,l)=>{const m=new He;m.setWithCredentials(!0),m.listenOnce(k.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case x.NO_ERROR:const C=m.getResponseJson();Oe("Connection","XHR received:",JSON.stringify(C)),u(C);break;case x.TIMEOUT:Oe("Connection",'RPC "'+e+'" timed out'),l(new Me(ue.DEADLINE_EXCEEDED,"Request time out"));break;case x.HTTP_ERROR:const A=m.getStatus();if(Oe("Connection",'RPC "'+e+'" failed with status:',A,"response text:",m.getResponseText()),A>0){let N=m.getResponseJson();Array.isArray(N)&&(N=N[0]);const $=N?.error;if($&&$.status&&$.message){const Y=function(ne){const xe=ne.toLowerCase().replace(/_/g,"-");return Object.values(ue).indexOf(xe)>=0?xe:ue.UNKNOWN}($.status);l(new Me(Y,$.message))}else l(new Me(ue.UNKNOWN,"Server responded with status "+m.getStatus()))}else l(new Me(ue.UNAVAILABLE,"Connection failed."));break;default:et()}}finally{Oe("Connection",'RPC "'+e+'" completed.')}});const w=JSON.stringify(s);m.send(t,"POST",w,r,15)})}wo(e,t,r){const s=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=D(),l=T(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(m.xmlHttpFactory=new me({})),this.lo(m.initMessageHeaders,t,r),m.encodeInitMessageHeaders=!0;const w=s.join("");Oe("Connection","Creating WebChannel: "+w,m);const C=u.createWebChannel(w,m);let A=!1,N=!1;const $=new nk({Hr:ne=>{N?Oe("Connection","Not sending because WebChannel is closed:",ne):(A||(Oe("Connection","Opening WebChannel transport."),C.open(),A=!0),Oe("Connection","WebChannel sending:",ne),C.send(ne))},Jr:()=>C.close()}),Y=(ne,xe,Ve)=>{ne.listen(xe,ft=>{try{Ve(ft)}catch(jt){setTimeout(()=>{throw jt},0)}})};return Y(C,ke.EventType.OPEN,()=>{N||Oe("Connection","WebChannel transport opened.")}),Y(C,ke.EventType.CLOSE,()=>{N||(N=!0,Oe("Connection","WebChannel transport closed"),$.io())}),Y(C,ke.EventType.ERROR,ne=>{N||(N=!0,ip("Connection","WebChannel transport errored:",ne),$.io(new Me(ue.UNAVAILABLE,"The operation could not be completed")))}),Y(C,ke.EventType.MESSAGE,ne=>{var xe;if(!N){const Ve=ne.data[0];ut(!!Ve);const ft=Ve,jt=ft.error||(null===(xe=ft[0])||void 0===xe?void 0:xe.error);if(jt){Oe("Connection","WebChannel received error:",jt);const Ot=jt.status;let Pt=function(qt){const Qr=Or[qt];if(void 0!==Qr)return IR(Qr)}(Ot),Lt=jt.message;void 0===Pt&&(Pt=ue.INTERNAL,Lt="Unknown error status: "+Ot+" with message "+jt.message),N=!0,$.io(new Me(Pt,Lt)),C.close()}else Oe("Connection","WebChannel received:",Ve),$.ro(Ve)}}),Y(l,G.STAT_EVENT,ne=>{ne.stat===X.PROXY?Oe("Connection","Detected buffering proxy"):ne.stat===X.NOPROXY&&Oe("Connection","Detected no buffering proxy")}),setTimeout(()=>{$.so()},0),$}}function PN(){return typeof window<"u"?window:null}function _D(){return typeof document<"u"?document:null}function L0(n){return new ZP(n,!0)}class HS{constructor(e,t,r=1e3,s=1.5,u=6e4){this.Hs=e,this.timerId=t,this.mo=r,this.yo=s,this.po=u,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),s=Math.max(0,t-r);s>0&&Oe("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,s,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class kN{constructor(e,t,r,s,u,l,m,w){this.Hs=e,this.vo=r,this.Vo=s,this.connection=u,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=m,this.listener=w,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new HS(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,ge.Z)(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,ge.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}qo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var r=this;return(0,ge.Z)(function*(){r.Lo(),r.qo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():t&&t.code===ue.RESOURCE_EXHAUSTED?(vr(t.toString()),vr("Using maximum backoff delay to prevent overloading the backend."),r.xo.Ao()):t&&t.code===ue.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Uo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}Uo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.So===t&&this.Go(r,s)},r=>{e(()=>{const s=new Me(ue.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(s)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(s=>{r(()=>this.Qo(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}Oo(){var e=this;this.state=5,this.xo.Ro((0,ge.Z)(function*(){e.state=0,e.start()}))}Qo(e){return Oe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(Oe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class ik extends kN{constructor(e,t,r,s,u,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,l),this.yt=u}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function QP(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(w=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===w?1:"REMOVE"===w?2:"CURRENT"===w?3:"RESET"===w?4:et(),s=e.targetChange.targetIds||[],u=function(w,C){return w.wt?(ut(void 0===C||"string"==typeof C),Yr.fromBase64String(C||"")):(ut(void 0===C||C instanceof Uint8Array),Yr.fromUint8Array(C||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,m=l&&function(w){const C=void 0===w.code?ue.UNKNOWN:IR(w.code);return new Me(C,w.message||"")}(l);t=new SR(r,s,u,m||null)}else if("documentChange"in e){const r=e.documentChange,s=Uu(n,r.document.name),u=_r(r.document.updateTime),l=r.document.createTime?_r(r.document.createTime):gt.min(),m=new Oi({mapValue:{fields:r.document.fields}}),w=Pn.newFoundDocument(s,u,l,m);t=new iD(r.targetIds||[],r.removedTargetIds||[],w.key,w)}else if("documentDelete"in e){const r=e.documentDelete,s=Uu(n,r.document),u=r.readTime?_r(r.readTime):gt.min(),l=Pn.newNoDocument(s,u);t=new iD([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,s=Uu(n,r.document);t=new iD([],r.removedTargetIds||[],s,null)}else{if(!("filter"in e))return et();{const r=e.filter,u=new UP(r.count||0);t=new TR(r.targetId,u)}}var w;return t}(this.yt,e),r=function(s){if(!("targetChange"in s))return gt.min();const u=s.targetChange;return u.targetIds&&u.targetIds.length?gt.min():u.readTime?_r(u.readTime):gt.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=S0(this.yt),t.addTarget=function(s,u){let l;const m=u.target;return l=YI(m)?{documents:LR(s,m)}:{query:vS(s,m)},l.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?l.resumeToken=RR(s,u.resumeToken):u.snapshotVersion.compareTo(gt.min())>0&&(l.readTime=ty(s,u.snapshotVersion.toTimestamp())),l}(this.yt,e);const r=function XP(n,e){const t=function(r,s){switch(s){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return et()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=S0(this.yt),t.removeTarget=e,this.Bo(t)}}class sk extends kN{constructor(e,t,r,s,u,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,l),this.yt=u,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}Uo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(ut(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function JP(n,e){return n&&n.length>0?(ut(void 0!==e),n.map(t=>function(r,s){let u=_r(r.updateTime?r.updateTime:s);return u.isEqual(gt.min())&&(u=_r(s)),new FP(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=_r(e.commitTime);return this.listener.Zo(r,t)}return ut(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=S0(this.yt),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>A0(this.yt,r))};this.Bo(t)}}class ok extends class{}{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.yt=s,this.nu=!1}su(){if(this.nu)throw new Me(ue.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,u])=>this.connection.ao(e,t,r,s,u)).catch(s=>{throw"FirebaseError"===s.name?(s.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Me(ue.UNKNOWN,s.toString())})}_o(e,t,r,s){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,l])=>this.connection._o(e,t,r,u,l,s)).catch(u=>{throw"FirebaseError"===u.name?(u.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Me(ue.UNKNOWN,u.toString())})}terminate(){this.nu=!0}}class uk{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(vr(t),this.ou=!1):Oe("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class ck{constructor(e,t,r,s,u){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=u,this.mu.Ur(m=>{r.enqueueAndForget((0,ge.Z)(function*(){var w;ol(l)&&(Oe("RemoteStore","Restarting streams for network reachability change."),yield(w=(0,ge.Z)(function*(C){const A=qe(C);A._u.add(4),yield uy(A),A.gu.set("Unknown"),A._u.delete(4),yield V0(A)}),function(C){return w.apply(this,arguments)})(l))}))}),this.gu=new uk(r,s)}}function V0(n){return qS.apply(this,arguments)}function qS(){return qS=(0,ge.Z)(function*(n){if(ol(n))for(const e of n.wu)yield e(!0)}),qS.apply(this,arguments)}function uy(n){return zS.apply(this,arguments)}function zS(){return zS=(0,ge.Z)(function*(n){for(const e of n.wu)yield e(!1)}),zS.apply(this,arguments)}function wD(n,e){const t=qe(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),KS(t)?ZS(t):ly(t).ko()&&WS(t,e))}function U0(n,e){const t=qe(n),r=ly(t);t.du.delete(e),r.ko()&&FN(t,e),0===t.du.size&&(r.ko()?r.Fo():ol(t)&&t.gu.set("Unknown"))}function WS(n,e){n.yu.Ot(e.targetId),ly(n).zo(e)}function FN(n,e){n.yu.Ot(e),ly(n).Ho(e)}function ZS(n){n.yu=new GP({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ne:e=>n.du.get(e)||null}),ly(n).start(),n.gu.uu()}function KS(n){return ol(n)&&!ly(n).No()&&n.du.size>0}function ol(n){return 0===qe(n)._u.size}function LN(n){n.yu=void 0}function lk(n){return YS.apply(this,arguments)}function YS(){return YS=(0,ge.Z)(function*(n){n.du.forEach((e,t)=>{WS(n,e)})}),YS.apply(this,arguments)}function dk(n,e){return QS.apply(this,arguments)}function QS(){return QS=(0,ge.Z)(function*(n,e){LN(n),KS(n)?(n.gu.hu(e),ZS(n)):n.gu.set("Unknown")}),QS.apply(this,arguments)}function hk(n,e,t){return JS.apply(this,arguments)}function JS(){return JS=(0,ge.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof SR&&2===e.state&&e.cause)try{yield(r=(0,ge.Z)(function*(s,u){const l=u.cause;for(const m of u.targetIds)s.du.has(m)&&(yield s.remoteSyncer.rejectListen(m,l),s.du.delete(m),s.yu.removeTarget(m))}),function(s,u){return r.apply(this,arguments)})(n,e)}catch(r){Oe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield ED(n,r)}else if(e instanceof iD?n.yu.Kt(e):e instanceof TR?n.yu.Jt(e):n.yu.jt(e),!t.isEqual(gt.min()))try{const r=yield bN(n.localStore);t.compareTo(r)>=0&&(yield function(s,u){const l=s.yu.Zt(u);return l.targetChanges.forEach((m,w)=>{if(m.resumeToken.approximateByteSize()>0){const C=s.du.get(w);C&&s.du.set(w,C.withResumeToken(m.resumeToken,u))}}),l.targetMismatches.forEach(m=>{const w=s.du.get(m);if(!w)return;s.du.set(m,w.withResumeToken(Yr.EMPTY_BYTE_STRING,w.snapshotVersion)),FN(s,m);const C=new Zd(w.target,m,1,w.sequenceNumber);WS(s,C)}),s.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){Oe("RemoteStore","Failed to raise snapshot:",r),yield ED(n,r)}var r}),JS.apply(this,arguments)}function ED(n,e,t){return XS.apply(this,arguments)}function XS(){return XS=(0,ge.Z)(function*(n,e,t){if(!jd(e))throw e;n._u.add(1),yield uy(n),n.gu.set("Offline"),t||(t=()=>bN(n.localStore)),n.asyncQueue.enqueueRetryable((0,ge.Z)(function*(){Oe("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield V0(n)}))}),XS.apply(this,arguments)}function VN(n,e){return e().catch(t=>ED(n,t,e))}function cy(n){return eA.apply(this,arguments)}function eA(){return eA=(0,ge.Z)(function*(n){const e=qe(n),t=Jd(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;fk(e);)try{const s=yield Q1(e.localStore,r);if(null===s){0===e.fu.length&&t.Fo();break}r=s.batchId,pk(e,s)}catch(s){yield ED(e,s)}UN(e)&&BN(e)}),eA.apply(this,arguments)}function fk(n){return ol(n)&&n.fu.length<10}function pk(n,e){n.fu.push(e);const t=Jd(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function UN(n){return ol(n)&&!Jd(n).No()&&n.fu.length>0}function BN(n){Jd(n).start()}function gk(n){return tA.apply(this,arguments)}function tA(){return tA=(0,ge.Z)(function*(n){Jd(n).eu()}),tA.apply(this,arguments)}function mk(n){return nA.apply(this,arguments)}function nA(){return nA=(0,ge.Z)(function*(n){const e=Jd(n);for(const t of n.fu)e.Xo(t.mutations)}),nA.apply(this,arguments)}function yk(n,e,t){return rA.apply(this,arguments)}function rA(){return rA=(0,ge.Z)(function*(n,e,t){const r=n.fu.shift(),s=ES.from(r,e,t);yield VN(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),yield cy(n)}),rA.apply(this,arguments)}function vk(n,e){return iA.apply(this,arguments)}function iA(){return iA=(0,ge.Z)(function*(n,e){var t;e&&Jd(n).Yo&&(yield(t=(0,ge.Z)(function*(r,s){if(ER(u=s.code)&&u!==ue.ABORTED){const l=r.fu.shift();Jd(r).Mo(),yield VN(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,s)),yield cy(r)}var u}),function(r,s){return t.apply(this,arguments)})(n,e)),UN(n)&&BN(n)}),iA.apply(this,arguments)}function jN(n,e){return sA.apply(this,arguments)}function sA(){return sA=(0,ge.Z)(function*(n,e){const t=qe(n);t.asyncQueue.verifyOperationInProgress(),Oe("RemoteStore","RemoteStore received new credentials");const r=ol(t);t._u.add(3),yield uy(t),r&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield V0(t)}),sA.apply(this,arguments)}function oA(n,e){return aA.apply(this,arguments)}function aA(){return aA=(0,ge.Z)(function*(n,e){const t=qe(n);e?(t._u.delete(2),yield V0(t)):e||(t._u.add(2),yield uy(t),t.gu.set("Unknown"))}),aA.apply(this,arguments)}function ly(n){return n.pu||(n.pu=function(e,t,r){const s=qe(e);return s.su(),new ik(t,s.connection,s.authCredentials,s.appCheckCredentials,s.yt,r)}(n.datastore,n.asyncQueue,{Yr:lk.bind(null,n),Zr:dk.bind(null,n),Wo:hk.bind(null,n)}),n.wu.push(function(){var e=(0,ge.Z)(function*(t){t?(n.pu.Mo(),KS(n)?ZS(n):n.gu.set("Unknown")):(yield n.pu.stop(),LN(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function Jd(n){return n.Iu||(n.Iu=function(e,t,r){const s=qe(e);return s.su(),new sk(t,s.connection,s.authCredentials,s.appCheckCredentials,s.yt,r)}(n.datastore,n.asyncQueue,{Yr:gk.bind(null,n),Zr:vk.bind(null,n),tu:mk.bind(null,n),Zo:yk.bind(null,n)}),n.wu.push(function(){var e=(0,ge.Z)(function*(t){t?(n.Iu.Mo(),yield cy(n)):(yield n.Iu.stop(),n.fu.length>0&&(Oe("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class uA{constructor(e,t,r,s,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=u,this.deferred=new Kr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,s,u){const l=Date.now()+r,m=new uA(e,t,l,s,u);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Me(ue.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function dy(n,e){if(vr("AsyncQueue",`${e}: ${n}`),jd(n))return new Me(ue.UNAVAILABLE,`${e}: ${n}`);throw n}class hy{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ge.comparator(t.key,r.key):(t,r)=>Ge.comparator(t.key,r.key),this.keyedMap=I0(),this.sortedSet=new or(this.comparator)}static emptySet(e){return new hy(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof hy)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,u=r.getNext().key;if(!s.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new hy;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class $N{constructor(){this.Tu=new or(Ge.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(t):1===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):et():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class fy{constructor(e,t,r,s,u,l,m,w,C){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=u,this.fromCache=l,this.syncStateChanged=m,this.excludesMetadataChanges=w,this.hasCachedResults=C}static fromInitialDocuments(e,t,r,s,u){const l=[];return t.forEach(m=>{l.push({type:0,doc:m})}),new fy(e,t,hy.emptySet(t),l,r,s,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&_0(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}class _k{constructor(){this.Au=void 0,this.listeners=[]}}class wk{constructor(){this.queries=new Wd(e=>sR(e),_0),this.onlineState="Unknown",this.Ru=new Set}}function cA(n,e){return lA.apply(this,arguments)}function lA(){return lA=(0,ge.Z)(function*(n,e){const t=qe(n),r=e.query;let s=!1,u=t.queries.get(r);if(u||(s=!0,u=new _k),s)try{u.Au=yield t.onListen(r)}catch(l){const m=dy(l,`Initialization of query '${hS(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,u),u.listeners.push(e),e.bu(t.onlineState),u.Au&&e.Pu(u.Au)&&fA(t)}),lA.apply(this,arguments)}function dA(n,e){return hA.apply(this,arguments)}function hA(){return hA=(0,ge.Z)(function*(n,e){const t=qe(n),r=e.query;let s=!1;const u=t.queries.get(r);if(u){const l=u.listeners.indexOf(e);l>=0&&(u.listeners.splice(l,1),s=0===u.listeners.length)}if(s)return t.queries.delete(r),t.onUnlisten(r)}),hA.apply(this,arguments)}function Ek(n,e){const t=qe(n);let r=!1;for(const s of e){const l=t.queries.get(s.query);if(l){for(const m of l.listeners)m.Pu(s)&&(r=!0);l.Au=s}}r&&fA(t)}function Ik(n,e,t){const r=qe(n),s=r.queries.get(e);if(s)for(const u of s.listeners)u.onError(t);r.queries.delete(e)}function fA(n){n.Ru.forEach(e=>{e.next()})}class pA{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)3!==s.type&&r.push(s);e=new fy(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||(!this.options.Nu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=fy.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class Dk{constructor(e,t){this.ku=e,this.byteLength=t}Ou(){return"metadata"in this.ku}}class HN{constructor(e){this.yt=e}Ji(e){return Uu(this.yt,e)}Yi(e){return e.metadata.exists?FR(this.yt,e.document,!1):Pn.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return _r(e)}}class Ck{constructor(e,t,r){this.Mu=e,this.localStore=t,this.yt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=GN(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;const r=tn.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new HN(this.yt);for(const s of e)if(s.metadata.queries){const u=r.Ji(s.metadata.name);for(const l of s.metadata.queries){const m=(t.get(l)||Ht()).add(u);t.set(l,m)}}return t}complete(){var e=this;return(0,ge.Z)(function*(){const t=yield function J1(n,e,t,r){return LS.apply(this,arguments)}(e.localStore,new HN(e.yt),e.documents,e.Mu.id),r=e.$u(e.documents);for(const s of e.queries)yield X1(e.localStore,s,r.get(s.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function GN(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class qN{constructor(e){this.key=e}}class zN{constructor(e){this.key=e}}class WN{constructor(e,t){this.query=e,this.qu=t,this.Uu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=Ht(),this.mutatedKeys=Ht(),this.Gu=aR(e),this.Qu=new hy(this.Gu)}get ju(){return this.qu}Wu(e,t){const r=t?t.zu:new $N,s=t?t.Qu:this.Qu;let u=t?t.mutatedKeys:this.mutatedKeys,l=s,m=!1;const w="F"===this.query.limitType&&s.size===this.query.limit?s.last():null,C="L"===this.query.limitType&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((A,N)=>{const $=s.get(A),Y=fS(this.query,N)?N:null,ne=!!$&&this.mutatedKeys.has($.key),xe=!!Y&&(Y.hasLocalMutations||this.mutatedKeys.has(Y.key)&&Y.hasCommittedMutations);let Ve=!1;$&&Y?$.data.isEqual(Y.data)?ne!==xe&&(r.track({type:3,doc:Y}),Ve=!0):this.Hu($,Y)||(r.track({type:2,doc:Y}),Ve=!0,(w&&this.Gu(Y,w)>0||C&&this.Gu(Y,C)<0)&&(m=!0)):!$&&Y?(r.track({type:0,doc:Y}),Ve=!0):$&&!Y&&(r.track({type:1,doc:$}),Ve=!0,(w||C)&&(m=!0)),Ve&&(Y?(l=l.add(Y),u=xe?u.add(A):u.delete(A)):(l=l.delete(A),u=u.delete(A)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const A="F"===this.query.limitType?l.last():l.first();l=l.delete(A.key),u=u.delete(A.key),r.track({type:1,doc:A})}return{Qu:l,zu:r,$i:m,mutatedKeys:u}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const s=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const u=e.zu.Eu();u.sort((C,A)=>function(N,$){const Y=ne=>{switch(ne){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return et()}};return Y(N)-Y($)}(C.type,A.type)||this.Gu(C.doc,A.doc)),this.Ju(r);const l=t?this.Yu():[],m=0===this.Ku.size&&this.current?1:0,w=m!==this.Uu;return this.Uu=m,0!==u.length||w?{snapshot:new fy(this.query,e.Qu,s,u,e.mutatedKeys,0===m,w,!1,!!r&&r.resumeToken.approximateByteSize()>0),Xu:l}:{Xu:l}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new $N,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.qu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.qu=this.qu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.qu=this.qu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Ht(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new zN(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new qN(r))}),t}tc(e){this.qu=e.Hi,this.Ku=Ht();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return fy.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.Uu,this.hasCachedResults)}}class bk{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class Tk{constructor(e){this.key=e,this.nc=!1}}class Sk{constructor(e,t,r,s,u,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=u,this.maxConcurrentLimboResolutions=l,this.sc={},this.ic=new Wd(m=>sR(m),_0),this.rc=new Map,this.oc=new Set,this.uc=new or(Ge.comparator),this.cc=new Map,this.ac=new xS,this.hc={},this.lc=new Map,this.fc=wp.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function Ak(n,e){return gA.apply(this,arguments)}function gA(){return gA=(0,ge.Z)(function*(n,e){const t=VA(n);let r,s;const u=t.ic.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),s=u.view.ec();else{const l=yield oy(t.localStore,us(e));t.isPrimaryClient&&wD(t.remoteStore,l);const m=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,s=yield mA(t,e,r,"current"===m,l.resumeToken)}return s}),gA.apply(this,arguments)}function mA(n,e,t,r,s){return yA.apply(this,arguments)}function yA(){return yA=(0,ge.Z)(function*(n,e,t,r,s){n._c=(N,$,Y)=>{return(ne=(0,ge.Z)(function*(xe,Ve,ft,jt){let Ot=Ve.view.Wu(ft);Ot.$i&&(Ot=yield mD(xe.localStore,Ve.query,!1).then(({documents:qt})=>Ve.view.Wu(qt,Ot)));const Pt=jt&&jt.targetChanges.get(Ve.targetId),Lt=Ve.view.applyChanges(Ot,xe.isPrimaryClient,Pt);return SA(xe,Ve.targetId,Lt.Xu),Lt.snapshot}),function(xe,Ve,ft,jt){return ne.apply(this,arguments)})(n,N,$,Y);var ne};const u=yield mD(n.localStore,e,!0),l=new WN(e,u.Hi),m=l.Wu(u.documents),w=b0.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,s),C=l.applyChanges(m,n.isPrimaryClient,w);SA(n,t,C.Xu);const A=new bk(e,t,l);return n.ic.set(e,A),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),C.snapshot}),yA.apply(this,arguments)}function Mk(n,e){return vA.apply(this,arguments)}function vA(){return vA=(0,ge.Z)(function*(n,e){const t=qe(n),r=t.ic.get(e),s=t.rc.get(r.targetId);if(s.length>1)return t.rc.set(r.targetId,s.filter(u=>!_0(u,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield ay(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),U0(t.remoteStore,r.targetId),py(t,r.targetId)}).catch(Bd))):(py(t,r.targetId),yield ay(t.localStore,r.targetId,!0))}),vA.apply(this,arguments)}function _A(){return _A=(0,ge.Z)(function*(n,e,t){const r=UA(n);try{const s=yield function(u,l){const m=qe(u),w=$n.now(),C=l.reduce(($,Y)=>$.add(Y.key),Ht());let A,N;return m.persistence.runTransaction("Locally write mutations","readwrite",$=>{let Y=Ps(),ne=Ht();return m.Gi.getEntries($,C).next(xe=>{Y=xe,Y.forEach((Ve,ft)=>{ft.isValidDocument()||(ne=ne.add(Ve))})}).next(()=>m.localDocuments.getOverlayedDocuments($,Y)).next(xe=>{A=xe;const Ve=[];for(const ft of l){const jt=VP(ft,A.get(ft.key).overlayedDocument);null!=jt&&Ve.push(new sl(ft.key,jt,eR(jt.value.mapValue),Hn.exists(!0)))}return m.mutationQueue.addMutationBatch($,w,Ve,l)}).next(xe=>{N=xe;const Ve=xe.applyToLocalDocumentSet(A,ne);return m.documentOverlayCache.saveOverlays($,xe.batchId,Ve)})}).then(()=>({batchId:N.batchId,changes:CR(A)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(u,l,m){let w=u.hc[u.currentUser.toKey()];w||(w=new or(Bt)),w=w.insert(l,m),u.hc[u.currentUser.toKey()]=w}(r,s.batchId,t),yield al(r,s.changes),yield cy(r.remoteStore)}catch(s){const u=dy(s,"Failed to persist write");t.reject(u)}}),_A.apply(this,arguments)}function ZN(n,e){return wA.apply(this,arguments)}function wA(){return wA=(0,ge.Z)(function*(n,e){const t=qe(n);try{const r=yield Y1(t.localStore,e);e.targetChanges.forEach((s,u)=>{const l=t.cc.get(u);l&&(ut(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?l.nc=!0:s.modifiedDocuments.size>0?ut(l.nc):s.removedDocuments.size>0&&(ut(l.nc),l.nc=!1))}),yield al(t,r,e)}catch(r){yield Bd(r)}}),wA.apply(this,arguments)}function KN(n,e,t){const r=qe(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const s=[];r.ic.forEach((u,l)=>{const m=l.view.bu(e);m.snapshot&&s.push(m.snapshot)}),function(u,l){const m=qe(u);m.onlineState=l;let w=!1;m.queries.forEach((C,A)=>{for(const N of A.listeners)N.bu(l)&&(w=!0)}),w&&fA(m)}(r.eventManager,e),s.length&&r.sc.Wo(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Rk(n,e,t){return EA.apply(this,arguments)}function EA(){return EA=(0,ge.Z)(function*(n,e,t){const r=qe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.cc.get(e),u=s&&s.key;if(u){let l=new or(Ge.comparator);l=l.insert(u,Pn.newNoDocument(u,gt.min()));const m=Ht().add(u),w=new C0(gt.min(),new Map,new In(Bt),l,m);yield ZN(r,w),r.uc=r.uc.remove(u),r.cc.delete(e),AA(r)}else yield ay(r.localStore,e,!1).then(()=>py(r,e,t)).catch(Bd)}),EA.apply(this,arguments)}function Nk(n,e){return IA.apply(this,arguments)}function IA(){return IA=(0,ge.Z)(function*(n,e){const t=qe(n),r=e.batch.batchId;try{const s=yield K1(t.localStore,e);TA(t,r,null),bA(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield al(t,s)}catch(s){yield Bd(s)}}),IA.apply(this,arguments)}function Ok(n,e,t){return DA.apply(this,arguments)}function DA(){return DA=(0,ge.Z)(function*(n,e,t){const r=qe(n);try{const s=yield function(u,l){const m=qe(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",w=>{let C;return m.mutationQueue.lookupMutationBatch(w,l).next(A=>(ut(null!==A),C=A.keys(),m.mutationQueue.removeMutationBatch(w,A))).next(()=>m.mutationQueue.performConsistencyCheck(w)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(w,C,l)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(w,C)).next(()=>m.localDocuments.getDocuments(w,C))})}(r.localStore,e);TA(r,e,t),bA(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield al(r,s)}catch(s){yield Bd(s)}}),DA.apply(this,arguments)}function CA(){return CA=(0,ge.Z)(function*(n,e){const t=qe(n);ol(t.remoteStore)||Oe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const l=qe(u);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>l.mutationQueue.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(-1===r)return void e.resolve();const s=t.lc.get(r)||[];s.push(e),t.lc.set(r,s)}catch(r){const s=dy(r,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}),CA.apply(this,arguments)}function bA(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function TA(n,e,t){const r=qe(n);let s=r.hc[r.currentUser.toKey()];if(s){const u=s.get(e);u&&(t?u.reject(t):u.resolve(),s=s.remove(e)),r.hc[r.currentUser.toKey()]=s}}function py(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.rc.get(e))n.ic.delete(r),t&&n.sc.wc(r,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(r=>{n.ac.containsKey(r)||YN(n,r)})}function YN(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);null!==t&&(U0(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),AA(n))}function SA(n,e,t){for(const r of t)r instanceof qN?(n.ac.addReference(r.key,e),kk(n,r)):r instanceof zN?(Oe("SyncEngine","Document no longer in limbo: "+r.key),n.ac.removeReference(r.key,e),n.ac.containsKey(r.key)||YN(n,r.key)):et()}function kk(n,e){const t=e.key,r=t.path.canonicalString();n.uc.get(t)||n.oc.has(r)||(Oe("SyncEngine","New document in limbo: "+t),n.oc.add(r),AA(n))}function AA(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new Ge(tn.fromString(e)),r=n.fc.next();n.cc.set(r,new Tk(t)),n.uc=n.uc.insert(t,r),wD(n.remoteStore,new Zd(us(Ym(t.path)),r,2,ao.at))}}function al(n,e,t){return MA.apply(this,arguments)}function MA(){return MA=(0,ge.Z)(function*(n,e,t){const r=qe(n),s=[],u=[],l=[];var m;r.ic.isEmpty()||(r.ic.forEach((m,w)=>{l.push(r._c(w,e,t).then(C=>{if((C||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(w.targetId,C?.fromCache?"not-current":"current"),C){s.push(C);const A=PS.Ci(w.targetId,C);u.push(A)}}))}),yield Promise.all(l),r.sc.Wo(s),yield(m=(0,ge.Z)(function*(w,C){const A=qe(w);try{yield A.persistence.runTransaction("notifyLocalViewChanges","readwrite",N=>ae.forEach(C,$=>ae.forEach($.Si,Y=>A.persistence.referenceDelegate.addReference(N,$.targetId,Y)).next(()=>ae.forEach($.Di,Y=>A.persistence.referenceDelegate.removeReference(N,$.targetId,Y)))))}catch(N){if(!jd(N))throw N;Oe("LocalStore","Failed to update sequence numbers: "+N)}for(const N of C){const $=N.targetId;if(!N.fromCache){const Y=A.qi.get($),xe=Y.withLastLimboFreeSnapshotVersion(Y.snapshotVersion);A.qi=A.qi.insert($,xe)}}}),function(w,C){return m.apply(this,arguments)})(r.localStore,u))}),MA.apply(this,arguments)}function Fk(n,e){return xA.apply(this,arguments)}function xA(){return xA=(0,ge.Z)(function*(n,e){const t=qe(n);if(!t.currentUser.isEqual(e)){Oe("SyncEngine","User change. New user:",e.toKey());const r=yield CN(t.localStore,e);t.currentUser=e,(s=t).lc.forEach(l=>{l.forEach(m=>{m.reject(new Me(ue.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.lc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield al(t,r.ji)}var s}),xA.apply(this,arguments)}function Lk(n,e){const t=qe(n),r=t.cc.get(e);if(r&&r.nc)return Ht().add(r.key);{let s=Ht();const u=t.rc.get(e);if(!u)return s;for(const l of u){const m=t.ic.get(l);s=s.unionWith(m.view.ju)}return s}}function Vk(n,e){return RA.apply(this,arguments)}function RA(){return RA=(0,ge.Z)(function*(n,e){const t=qe(n),r=yield mD(t.localStore,e.query,!0),s=e.view.tc(r);return t.isPrimaryClient&&SA(t,e.targetId,s.Xu),s}),RA.apply(this,arguments)}function Uk(n,e){return NA.apply(this,arguments)}function NA(){return NA=(0,ge.Z)(function*(n,e){const t=qe(n);return AN(t.localStore,e).then(r=>al(t,r))}),NA.apply(this,arguments)}function Bk(n,e,t,r){return OA.apply(this,arguments)}function OA(){return OA=(0,ge.Z)(function*(n,e,t,r){const s=qe(n),u=yield function(l,m){const w=qe(l),C=qe(w.mutationQueue);return w.persistence.runTransaction("Lookup mutation documents","readonly",A=>C.Tn(A,m).next(N=>N?w.localDocuments.getDocuments(A,N):ae.resolve(null)))}(s.localStore,e);var m;null!==u?("pending"===t?yield cy(s.remoteStore):"acknowledged"===t||"rejected"===t?(TA(s,e,r||null),bA(s,e),m=e,qe(qe(s.localStore).mutationQueue).An(m)):et(),yield al(s,u)):Oe("SyncEngine","Cannot apply mutation batch with id: "+e)}),OA.apply(this,arguments)}function PA(){return PA=(0,ge.Z)(function*(n,e){const t=qe(n);if(VA(t),UA(t),!0===e&&!0!==t.dc){const r=t.sharedClientState.getAllActiveQueryTargets(),s=yield QN(t,r.toArray());t.dc=!0,yield oA(t.remoteStore,!0);for(const u of s)wD(t.remoteStore,u)}else if(!1===e&&!1!==t.dc){const r=[];let s=Promise.resolve();t.rc.forEach((u,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):s=s.then(()=>(py(t,l),ay(t.localStore,l,!0))),U0(t.remoteStore,l)}),yield s,yield QN(t,r),function(u){const l=qe(u);l.cc.forEach((m,w)=>{U0(l.remoteStore,w)}),l.ac.fs(),l.cc=new Map,l.uc=new or(Ge.comparator)}(t),t.dc=!1,yield oA(t.remoteStore,!1)}}),PA.apply(this,arguments)}function QN(n,e,t){return kA.apply(this,arguments)}function kA(){return kA=(0,ge.Z)(function*(n,e,t){const r=qe(n),s=[],u=[];for(const l of e){let m;const w=r.rc.get(l);if(w&&0!==w.length){m=yield oy(r.localStore,us(w[0]));for(const C of w){const A=r.ic.get(C),N=yield Vk(r,A);N.snapshot&&u.push(N.snapshot)}}else{const C=yield SN(r.localStore,l);m=yield oy(r.localStore,C),yield mA(r,JN(C),l,!1,m.resumeToken)}s.push(m)}return r.sc.Wo(u),s}),kA.apply(this,arguments)}function JN(n){return rR(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function $k(n){const e=qe(n);return qe(qe(e.localStore).persistence).vi()}function Hk(n,e,t,r){return FA.apply(this,arguments)}function FA(){return FA=(0,ge.Z)(function*(n,e,t,r){const s=qe(n);if(s.dc)return void Oe("SyncEngine","Ignoring unexpected query state notification.");const u=s.rc.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const l=yield AN(s.localStore,oR(u[0])),m=C0.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Yr.EMPTY_BYTE_STRING);yield al(s,l,m);break}case"rejected":yield ay(s.localStore,e,!0),py(s,e,r);break;default:et()}}),FA.apply(this,arguments)}function Gk(n,e,t){return LA.apply(this,arguments)}function LA(){return LA=(0,ge.Z)(function*(n,e,t){const r=VA(n);if(r.dc){for(const s of e){if(r.rc.has(s)){Oe("SyncEngine","Adding an already active target "+s);continue}const u=yield SN(r.localStore,s),l=yield oy(r.localStore,u);yield mA(r,JN(u),l.targetId,!1,l.resumeToken),wD(r.remoteStore,l)}for(const s of t)r.rc.has(s)&&(yield ay(r.localStore,s,!1).then(()=>{U0(r.remoteStore,s),py(r,s)}).catch(Bd))}}),LA.apply(this,arguments)}function VA(n){const e=qe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=ZN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Lk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Rk.bind(null,e),e.sc.Wo=Ek.bind(null,e.eventManager),e.sc.wc=Ik.bind(null,e.eventManager),e}function UA(n){const e=qe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Nk.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Ok.bind(null,e),e}class XN{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ge.Z)(function*(){t.yt=L0(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return DN(this.persistence,new IN,e.initialUser,this.yt)}yc(e){return new wN(pD.Bs,this.yt)}gc(e){return new NN}terminate(){var e=this;return(0,ge.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class eO extends XN{constructor(e,t,r){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ge.Z)(function*(){yield t().call(r,e),yield r.Ac.initialize(r,e),yield UA(r.Ac.syncEngine),yield cy(r.Ac.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return DN(this.persistence,new IN,e.initialUser,this.yt)}Tc(e,t){return new P1(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const r=new vP(t,this.persistence);return new yP(e.asyncQueue,r)}yc(e){const t=OS(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?ks.withCacheSize(this.cacheSizeBytes):ks.DEFAULT;return new NS(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,PN(),_D(),this.yt,this.sharedClientState,!!this.forceOwnership)}gc(e){return new NN}}class zk extends eO{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ge.Z)(function*(){yield t().call(r,e);const s=r.Ac.syncEngine;r.sharedClientState instanceof $S&&(r.sharedClientState.syncEngine={Fr:Bk.bind(null,s),$r:Hk.bind(null,s),Br:Gk.bind(null,s),vi:$k.bind(null,s),Mr:Uk.bind(null,s)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var u=(0,ge.Z)(function*(l){yield function jk(n,e){return PA.apply(this,arguments)}(r.Ac.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return u.apply(this,arguments)}}())})()}gc(e){const t=PN();if(!$S.C(t))throw new Me(ue.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=OS(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new $S(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class BA{initialize(e,t){var r=this;return(0,ge.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=s=>KN(r.syncEngine,s,1),r.remoteStore.remoteSyncer.handleCredentialChange=Fk.bind(null,r.syncEngine),yield oA(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new wk}createDatastore(e){const t=L0(e.databaseInfo.databaseId),r=new rk(e.databaseInfo);return new ok(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,s=e.asyncQueue,u=m=>KN(this.syncEngine,m,0),l=ON.C()?new ON:new ek,new ck(t,r,s,u,l);var t,r,s,u,l}createSyncEngine(e,t){return function(r,s,u,l,m,w,C){const A=new Sk(r,s,u,l,m,w);return C&&(A.dc=!0),A}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ge.Z)(function*(t){const r=qe(t);Oe("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield uy(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function jA(n,e,t){if(!t)throw new Me(ue.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function tO(n,e,t,r){if(!0===e&&!0===r)throw new Me(ue.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function nO(n){if(!Ge.isDocumentKey(n))throw new Me(ue.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function rO(n){if(Ge.isDocumentKey(n))throw new Me(ue.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function ID(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":et()}function Jt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Me(ue.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=ID(n);throw new Me(ue.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function iO(n,e){if(e<=0)throw new Me(ue.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}const sO=new Map;class oO{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Me(ue.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Me(ue.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,tO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class B0{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new oO({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Me(ue.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Me(ue.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new oO(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new sP;switch(t.type){case"gapi":return new cP(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Me(ue.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=sO.get(e);t&&(Oe("ComponentProvider","Removing Datastore"),sO.delete(e),t.terminate())}(this),Promise.resolve()}}class kn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ju(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new kn(this.firestore,e,this._key)}}class Pi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Pi(this.firestore,e,this._query)}}class ju extends Pi{constructor(e,t,r){super(e,t,Ym(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new kn(this.firestore,null,new Ge(e))}withConverter(e){return new ju(this.firestore,e,this._path)}}function uO(n,e,...t){if(n=(0,en.m9)(n),jA("collection","path",e),n instanceof B0){const r=tn.fromString(e,...t);return rO(r),new ju(n,null,r)}{if(!(n instanceof kn||n instanceof ju))throw new Me(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(tn.fromString(e,...t));return rO(r),new ju(n.firestore,null,r)}}function DD(n,e,...t){if(n=(0,en.m9)(n),1===arguments.length&&(e=Sx.R()),jA("doc","path",e),n instanceof B0){const r=tn.fromString(e,...t);return nO(r),new kn(n,null,new Ge(r))}{if(!(n instanceof kn||n instanceof ju))throw new Me(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(tn.fromString(e,...t));return nO(r),new kn(n.firestore,n instanceof ju?n.converter:null,new Ge(r))}}function cO(n,e){return n=(0,en.m9)(n),e=(0,en.m9)(e),(n instanceof kn||n instanceof ju)&&(e instanceof kn||e instanceof ju)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function $A(n,e){return n=(0,en.m9)(n),e=(0,en.m9)(e),n instanceof Pi&&e instanceof Pi&&n.firestore===e.firestore&&_0(n._query,e._query)&&n.converter===e.converter}function lO(n,e=10240){let t=0;return{read:()=>(0,ge.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ge.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class CD{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):vr("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Zk{constructor(e,t){this.Pc=e,this.yt=t,this.metadata=new Kr,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.ku)}`))},r=>this.metadata.reject(r))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,ge.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,ge.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,ge.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const r=e.vc.decode(t),s=Number(r);isNaN(s)&&e.Dc(`length string (${r}) is not valid number`);const u=yield e.Cc(s);return new Dk(JSON.parse(u),t.length+s)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,ge.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Cc(e){var t=this;return(0,ge.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const r=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,ge.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class Qk{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ge.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Me(ue.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(s=(0,ge.Z)(function*(u,l){const m=qe(u),w=S0(m.yt)+"/documents",C={documents:l.map(Y=>T0(m.yt,Y))},A=yield m._o("BatchGetDocuments",w,C,l.length),N=new Map;A.forEach(Y=>{const ne=function YP(n,e){return"found"in e?function(t,r){ut(!!r.found);const s=Uu(t,r.found.name),u=_r(r.found.updateTime),l=r.found.createTime?_r(r.found.createTime):gt.min(),m=new Oi({mapValue:{fields:r.found.fields}});return Pn.newFoundDocument(s,u,l,m)}(n,e):"missing"in e?function(t,r){ut(!!r.missing),ut(!!r.readTime);const s=Uu(t,r.missing),u=_r(r.readTime);return Pn.newNoDocument(s,u)}(n,e):et()}(m.yt,Y);N.set(ne.key.toString(),ne)});const $=[];return l.forEach(Y=>{const ne=N.get(Y.toString());ut(!!ne),$.push(ne)}),$}),function(u,l){return s.apply(this,arguments)})(t.datastore,e);var s;return r.forEach(s=>t.recordVersion(s)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new ey(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ge.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,s)=>{const u=Ge.fromPath(s);e.mutations.push(new pS(u,e.precondition(u)))}),yield(r=(0,ge.Z)(function*(s,u){const l=qe(s),m=S0(l.yt)+"/documents",w={writes:u.map(C=>A0(l.yt,C))};yield l.ao("Commit",m,w)}),function(s,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw et();t=gt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Me(ue.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(gt.min())?Hn.exists(!1):Hn.updateTime(t):Hn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(gt.min()))throw new Me(ue.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Hn.updateTime(t)}return Hn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Jk{constructor(e,t,r,s,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=s,this.deferred=u,this.kc=r.maxAttempts,this.xo=new HS(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.xo.Ro((0,ge.Z)(function*(){const t=new Qk(e.datastore),r=e.Mc(t);r&&r.then(s=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(s)}).catch(u=>{e.Fc(u)}))}).catch(s=>{e.Fc(s)})}))}Mc(e){try{const t=this.updateFunction(e);return!h0(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!ER(t)}return!1}}class Xk{constructor(e,t,r,s){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=Qe.UNAUTHENTICATED,this.clientId=Sx.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,ge.Z)(function*(m){Oe("FirestoreClient","Received user=",m.uid),yield u.authCredentialListener(m),u.user=m});return function(m){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(Oe("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,ge.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Me(ue.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Kr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ge.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const s=dy(r,"Failed to shutdown persistence");t.reject(s)}})),t.promise}}function dO(n,e){return HA.apply(this,arguments)}function HA(){return HA=(0,ge.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Oe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var s=(0,ge.Z)(function*(u){r.isEqual(u)||(yield CN(e.localStore,u),r=u)});return function(u){return s.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),HA.apply(this,arguments)}function hO(n,e){return GA.apply(this,arguments)}function GA(){return GA=(0,ge.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield qA(n);Oe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(s=>jN(e.remoteStore,s)),n.setAppCheckTokenChangeListener((s,u)=>jN(e.remoteStore,u)),n.onlineComponents=e}),GA.apply(this,arguments)}function qA(n){return zA.apply(this,arguments)}function zA(){return zA=(0,ge.Z)(function*(n){return n.offlineComponents||(Oe("FirestoreClient","Using default OfflineComponentProvider"),yield dO(n,new XN)),n.offlineComponents}),zA.apply(this,arguments)}function bD(n){return WA.apply(this,arguments)}function WA(){return WA=(0,ge.Z)(function*(n){return n.onlineComponents||(Oe("FirestoreClient","Using default OnlineComponentProvider"),yield hO(n,new BA)),n.onlineComponents}),WA.apply(this,arguments)}function fO(n){return qA(n).then(e=>e.persistence)}function TD(n){return qA(n).then(e=>e.localStore)}function ZA(n){return bD(n).then(e=>e.remoteStore)}function KA(n){return bD(n).then(e=>e.syncEngine)}function gy(n){return YA.apply(this,arguments)}function YA(){return YA=(0,ge.Z)(function*(n){const e=yield bD(n),t=e.eventManager;return t.onListen=Ak.bind(null,e.syncEngine),t.onUnlisten=Mk.bind(null,e.syncEngine),t}),YA.apply(this,arguments)}function gO(n,e,t={}){const r=new Kr;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function(s,u,l,m,w){const C=new CD({next:N=>{u.enqueueAndForget(()=>dA(s,A));const $=N.docs.has(l);!$&&N.fromCache?w.reject(new Me(ue.UNAVAILABLE,"Failed to get document because the client is offline.")):$&&N.fromCache&&m&&"server"===m.source?w.reject(new Me(ue.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):w.resolve(N)},error:N=>w.reject(N)}),A=new pA(Ym(l.path),C,{includeMetadataChanges:!0,Nu:!0});return cA(s,A)}(yield gy(n),n.asyncQueue,e,t,r)})),r.promise}function mO(n,e,t={}){const r=new Kr;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function(s,u,l,m,w){const C=new CD({next:N=>{u.enqueueAndForget(()=>dA(s,A)),N.fromCache&&"server"===m.source?w.reject(new Me(ue.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):w.resolve(N)},error:N=>w.reject(N)}),A=new pA(l,C,{includeMetadataChanges:!0,Nu:!0});return cA(s,A)}(yield gy(n),n.asyncQueue,e,t,r)})),r.promise}class aF{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.qc=!1,this.Uc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new HS(this,"async_queue_retry"),this.Wc=()=>{const t=_D();t&&Oe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=_D();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.qc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.qc){this.qc=!0,this.Qc=e||!1;const t=_D();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.qc)return new Promise(()=>{});const t=new Kr;return this.Hc(()=>this.qc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,ge.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(t){if(!jd(t))throw t;Oe("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(r=>{throw this.Kc=r,this.Gc=!1,vr("INTERNAL UNHANDLED ERROR: ",function(u){let l=u.message||"";return u.stack&&(l=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),l}(r)),r}).then(r=>(this.Gc=!1,r))));return this.Bc=t,t}enqueueAfterDelay(e,t,r){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const s=uA.createAndSchedule(this,e,t,r,u=>this.Yc(u));return this.Uc.push(s),s}zc(){this.Kc&&et()}verifyOperationInProgress(){}Xc(){var e=this;return(0,ge.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.Uc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.Uc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Uc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}function QA(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const s of["next","error","complete"])if(s in r&&"function"==typeof r[s])return!0;return!1}(n)}class uF{constructor(){this._progressObserver={},this._taskCompletionResolver=new Kr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Fn extends B0{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new aF,this._persistenceKey=s?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||yO(this),this._firestoreClient.terminate()}}function wr(n){return n._firestoreClient||yO(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function yO(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new _P(n._databaseId,u,n._persistenceKey,(m=t).host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,m.useFetchStreams));var u,m;n._firestoreClient=new Xk(n._authCredentials,n._appCheckCredentials,n._queue,r)}function vO(n,e,t){const r=new Kr;return n.asyncQueue.enqueue((0,ge.Z)(function*(){try{yield dO(n,t),yield hO(n,e),r.resolve()}catch(s){const u=s;if(!("FirebaseError"===(l=u).name?l.code===ue.FAILED_PRECONDITION||l.code===ue.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code))throw u;ip("Error enabling offline persistence. Falling back to persistence disabled: "+u),r.reject(u)}var l})).then(()=>r.promise)}function _O(n){if(n._initialized||n._terminated)throw new Me(ue.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class $u{constructor(e){this._byteString=e}static fromBase64String(e){try{return new $u(Yr.fromBase64String(e))}catch(t){throw new Me(ue.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new $u(Yr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class ul{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Me(ue.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ir(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Ip{constructor(e){this._methodName=e}}class SD{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Me(ue.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Me(ue.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Bt(this._lat,e._lat)||Bt(this._long,e._long)}}const vF=/^__.*__$/;class _F{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new sl(e,this.data,this.fieldMask,t,this.fieldTransforms):new Xm(e,this.data,t,this.fieldTransforms)}}class wO{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new sl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function EO(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw et()}}class AD{constructor(e,t,r,s,u,l){this.settings=e,this.databaseId=t,this.yt=r,this.ignoreUndefinedProperties=s,void 0===u&&this.na(),this.fieldTransforms=u||[],this.fieldMask=l||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new AD(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.yt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.ia({path:r,oa:!1});return s.ua(e),s}ca(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.ia({path:r,oa:!1});return s.na(),s}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return RD(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(EO(this.sa)&&vF.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class wF{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.yt=r||L0(e)}da(e,t,r,s=!1){return new AD({sa:e,methodName:t,fa:r,path:ir.emptyPath(),oa:!1,la:s},this.databaseId,this.yt,this.ignoreUndefinedProperties)}}function Dp(n){const e=n._freezeSettings(),t=L0(n._databaseId);return new wF(n._databaseId,!!e.ignoreUndefinedProperties,t)}function MD(n,e,t,r,s,u={}){const l=n.da(u.merge||u.mergeFields?2:0,e,t,s);tM("Data must be an object, but it was:",l,r);const m=CO(r,l);let w,C;if(u.merge)w=new Os(l.fieldMask),C=l.fieldTransforms;else if(u.mergeFields){const A=[];for(const N of u.mergeFields){const $=nM(e,N,t);if(!l.contains($))throw new Me(ue.INVALID_ARGUMENT,`Field '${$}' is specified in your field mask but missing from your input data.`);TO(A,$)||A.push($)}w=new Os(A),C=l.fieldTransforms.filter(N=>w.covers(N.field))}else w=null,C=l.fieldTransforms;return new _F(new Oi(m),w,C)}class j0 extends Ip{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof j0}}function IO(n,e,t){return new AD({sa:3,fa:e.settings.fa,methodName:n._methodName,oa:t},e.databaseId,e.yt,e.ignoreUndefinedProperties)}class JA extends Ip{_toFieldTransform(e){return new w0(e.path,new Qm)}isEqual(e){return e instanceof JA}}class EF extends Ip{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=IO(this,e,!0),r=this._a.map(u=>Cp(u,t)),s=new fp(r);return new w0(e.path,s)}isEqual(e){return this===e}}class IF extends Ip{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=IO(this,e,!0),r=this._a.map(u=>Cp(u,t)),s=new pp(r);return new w0(e.path,s)}isEqual(e){return this===e}}class DF extends Ip{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new Jm(e.yt,lR(e.yt,this.wa));return new w0(e.path,t)}isEqual(e){return this===e}}function XA(n,e,t,r){const s=n.da(1,e,t);tM("Data must be an object, but it was:",s,r);const u=[],l=Oi.empty();ap(r,(w,C)=>{const A=xD(e,w,t);C=(0,en.m9)(C);const N=s.ca(A);if(C instanceof j0)u.push(A);else{const $=Cp(C,N);null!=$&&(u.push(A),l.set(A,$))}});const m=new Os(u);return new wO(l,m,s.fieldTransforms)}function eM(n,e,t,r,s,u){const l=n.da(1,e,t),m=[nM(e,r,t)],w=[s];if(u.length%2!=0)throw new Me(ue.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let $=0;$<u.length;$+=2)m.push(nM(e,u[$])),w.push(u[$+1]);const C=[],A=Oi.empty();for(let $=m.length-1;$>=0;--$)if(!TO(C,m[$])){const Y=m[$];let ne=w[$];ne=(0,en.m9)(ne);const xe=l.ca(Y);if(ne instanceof j0)C.push(Y);else{const Ve=Cp(ne,xe);null!=Ve&&(C.push(Y),A.set(Y,Ve))}}const N=new Os(C);return new wO(A,N,l.fieldTransforms)}function DO(n,e,t,r=!1){return Cp(t,n.da(r?4:3,e))}function Cp(n,e){if(bO(n=(0,en.m9)(n)))return tM("Unsupported field value:",e,n),CO(n,e);if(n instanceof Ip)return function(t,r){if(!EO(r.sa))throw r.ha(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ha(`${t._methodName}() is not currently supported inside arrays`);const s=t._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,r){const s=[];let u=0;for(const l of t){let m=Cp(l,r.aa(u));null==m&&(m={nullValue:"NULL_VALUE"}),s.push(m),u++}return{arrayValue:{values:s}}}(n,e)}return function(t,r){if(null===(t=(0,en.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return lR(r.yt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const s=$n.fromDate(t);return{timestampValue:ty(r.yt,s)}}if(t instanceof $n){const s=new $n(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:ty(r.yt,s)}}if(t instanceof SD)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof $u)return{bytesValue:RR(r.yt,t._byteString)};if(t instanceof kn){const s=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(s))throw r.ha(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:gS(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ha(`Unsupported field value: ${ID(t)}`)}(n,e)}function CO(n,e){const t={};return kx(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ap(n,(r,s)=>{const u=Cp(s,e.ra(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function bO(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof $n||n instanceof SD||n instanceof $u||n instanceof kn||n instanceof Ip)}function tM(n,e,t){if(!bO(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=ID(t);throw e.ha("an object"===r?n+" a custom object":n+" "+r)}var r}function nM(n,e,t){if((e=(0,en.m9)(e))instanceof ul)return e._internalPath;if("string"==typeof e)return xD(n,e);throw RD("Field path arguments must be of type string or ",n,!1,void 0,t)}const CF=new RegExp("[~\\*/\\[\\]]");function xD(n,e,t){if(e.search(CF)>=0)throw RD(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ul(...e.split("."))._internalPath}catch{throw RD(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function RD(n,e,t,r,s){const u=r&&!r.isEmpty(),l=void 0!==s;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let w="";return(u||l)&&(w+=" (found",u&&(w+=` in field ${r}`),l&&(w+=` in document ${s}`),w+=")"),new Me(ue.INVALID_ARGUMENT,m+n+w)}function TO(n,e){return n.some(t=>t.isEqual(e))}class $0{constructor(e,t,r,s,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new kn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new bF(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ND("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class bF extends $0{data(){return super.data()}}function ND(n,e){return"string"==typeof e?xD(n,e):e instanceof ul?e._internalPath:e._delegate._internalPath}function SO(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Me(ue.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class rM{}class H0 extends rM{}function Xd(n,e,...t){let r=[];e instanceof rM&&r.push(e),r=r.concat(t),function(s){const u=s.filter(m=>m instanceof my).length,l=s.filter(m=>m instanceof G0).length;if(u>1||u>0&&l>0)throw new Me(ue.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)n=s._apply(n);return n}class G0 extends H0{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new G0(e,t,r)}_apply(e){const t=this._parse(e);return RO(e._query,t),new Pi(e.firestore,e.converter,dS(e._query,t))}_parse(e){const t=Dp(e.firestore);return function(s,u,l,m,w,C,A){let N;if(w.isKeyField()){if("array-contains"===C||"array-contains-any"===C)throw new Me(ue.INVALID_ARGUMENT,`Invalid Query. You can't perform '${C}' queries on documentId().`);if("in"===C||"not-in"===C){xO(A,C);const $=[];for(const Y of A)$.push(MO(m,s,Y));N={arrayValue:{values:$}}}else N=MO(m,s,A)}else"in"!==C&&"not-in"!==C&&"array-contains-any"!==C||xO(A,C),N=DO(l,"where",A,"in"===C||"not-in"===C);return Qt.create(w,C,N)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class my extends rM{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new my(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:gn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,s){let u=r;const l=s.getFlattenedFilters();for(const m of l)RO(u,m),u=dS(u,m)}(e._query,t),new Pi(e.firestore,e.converter,dS(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class iM extends H0{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new iM(e,t)}_apply(e){const t=function(r,s,u){if(null!==r.startAt)throw new Me(ue.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Me(ue.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new Zm(s,u);return function(m,w){if(null===cS(m)){const C=JI(m);null!==C&&NO(0,C,w.field)}}(r,l),l}(e._query,this._field,this._direction);return new Pi(e.firestore,e.converter,function(r,s){const u=r.explicitOrderBy.concat([s]);return new il(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class OD extends H0{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new OD(e,t,r)}_apply(e){return new Pi(e.firestore,e.converter,XI(e._query,this._limit,this._limitType))}}class PD extends H0{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new PD(e,t,r)}_apply(e){const t=AO(e,this.type,this._docOrFields,this._inclusive);return new Pi(e.firestore,e.converter,(s=t,new il((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,s,r.endAt)));var r,s}}class kD extends H0{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new kD(e,t,r)}_apply(e){const t=AO(e,this.type,this._docOrFields,this._inclusive);return new Pi(e.firestore,e.converter,(s=t,new il((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,s)));var r,s}}function AO(n,e,t,r){if(t[0]=(0,en.m9)(t[0]),t[0]instanceof $0)return function(s,u,l,m,w){if(!m)throw new Me(ue.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const C=[];for(const A of hp(s))if(A.field.isKeyField())C.push(lp(u,m.key));else{const N=m.data.field(A.field);if(nS(N))throw new Me(ue.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+A.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===N){const $=A.field.canonicalString();throw new Me(ue.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${$}' (used as the orderBy) does not exist.`)}C.push(N)}return new zd(C,w)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const s=Dp(n.firestore);return function(u,l,m,w,C,A){const N=u.explicitOrderBy;if(C.length>N.length)throw new Me(ue.INVALID_ARGUMENT,`Too many arguments provided to ${w}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const $=[];for(let Y=0;Y<C.length;Y++){const ne=C[Y];if(N[Y].field.isKeyField()){if("string"!=typeof ne)throw new Me(ue.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${w}(), but got a ${typeof ne}`);if(!lS(u)&&-1!==ne.indexOf("/"))throw new Me(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${w}() must be a plain document ID, but '${ne}' contains a slash.`);const xe=u.path.child(tn.fromString(ne));if(!Ge.isDocumentKey(xe))throw new Me(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${w}() must result in a valid document path, but '${xe}' is not because it contains an odd number of segments.`);const Ve=new Ge(xe);$.push(lp(l,Ve))}else{const xe=DO(m,w,ne);$.push(xe)}}return new zd($,A)}(n._query,n.firestore._databaseId,s,e,t,r)}}function MO(n,e,t){if("string"==typeof(t=(0,en.m9)(t))){if(""===t)throw new Me(ue.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!lS(e)&&-1!==t.indexOf("/"))throw new Me(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(tn.fromString(t));if(!Ge.isDocumentKey(r))throw new Me(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return lp(n,new Ge(r))}if(t instanceof kn)return lp(n,t._key);throw new Me(ue.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ID(t)}.`)}function xO(n,e){if(!Array.isArray(n)||0===n.length)throw new Me(ue.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Me(ue.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function RO(n,e){if(e.isInequality()){const r=JI(n),s=e.field;if(null!==r&&!r.isEqual(s))throw new Me(ue.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${s.toString()}'`);const u=cS(n);null!==u&&NO(0,s,u)}const t=function(r,s){for(const u of r)for(const l of u.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Me(ue.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function NO(n,e,t){if(!t.isEqual(e))throw new Me(ue.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class sM{convertValue(e,t="none"){switch(cp(e)){case 0:return null;case 1:return e.booleanValue;case 2:return sr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(up(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw et()}}convertObject(e,t){const r={};return ap(e.fields,(s,u)=>{r[s]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new SD(sr(e.latitude),sr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Lx(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(p0(e));default:return null}}convertTimestamp(e){const t=Hd(e);return new $n(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=tn.fromString(e);ut(jR(r));const s=new $d(r.get(1),r.get(3)),u=new Ge(r.popFirst(5));return s.isEqual(t)||vr(`Document ${u} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function FD(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class PF extends sM{constructor(e){super(),this.firestore=e}convertBytes(e){return new $u(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new kn(this.firestore,null,t)}}class bp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class cl extends $0{constructor(e,t,r,s,u,l){super(e,t,r,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new q0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(ND("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class q0 extends cl{data(e={}){return super.data(e)}}class eh{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new bp(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new q0(this._firestore,this._userDataWriter,r.key,r,new bp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Me(ue.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new q0(r._firestore,r._userDataWriter,l.doc.key,l.doc,new bp(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>s||3!==l.type).map(l=>{const m=new q0(r._firestore,r._userDataWriter,l.doc.key,l.doc,new bp(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let w=-1,C=-1;return 0!==l.type&&(w=u.indexOf(l.doc.key),u=u.delete(l.doc.key)),1!==l.type&&(u=u.add(l.doc),C=u.indexOf(l.doc.key)),{type:kF(l.type),doc:m,oldIndex:w,newIndex:C}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function kF(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return et()}}function PO(n,e){return n instanceof cl&&e instanceof cl?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof eh&&e instanceof eh&&n._firestore===e._firestore&&$A(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class th extends sM{constructor(e){super(),this.firestore=e}convertBytes(e){return new $u(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new kn(this.firestore,null,t)}}function kO(n,e,t){n=Jt(n,kn);const r=Jt(n.firestore,Fn),s=FD(n.converter,e,t);return yy(r,[MD(Dp(r),"setDoc",n._key,s,null!==n.converter,t).toMutation(n._key,Hn.none())])}function FO(n,e,t,...r){n=Jt(n,kn);const s=Jt(n.firestore,Fn),u=Dp(s);let l;return l="string"==typeof(e=(0,en.m9)(e))||e instanceof ul?eM(u,"updateDoc",n._key,e,t,r):XA(u,"updateDoc",n._key,e),yy(s,[l.toMutation(n._key,Hn.exists(!0))])}function LO(n,...e){var t,r,s;n=(0,en.m9)(n);let u={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||QA(e[l])||(u=e[l],l++);const m={includeMetadataChanges:u.includeMetadataChanges};if(QA(e[l])){const N=e[l];e[l]=null===(t=N.next)||void 0===t?void 0:t.bind(N),e[l+1]=null===(r=N.error)||void 0===r?void 0:r.bind(N),e[l+2]=null===(s=N.complete)||void 0===s?void 0:s.bind(N)}let w,C,A;if(n instanceof kn)C=Jt(n.firestore,Fn),A=Ym(n._key.path),w={next:N=>{e[l]&&e[l](oM(C,n,N))},error:e[l+1],complete:e[l+2]};else{const N=Jt(n,Pi);C=Jt(N.firestore,Fn),A=N._query;const $=new th(C);w={next:Y=>{e[l]&&e[l](new eh(C,$,N,Y))},error:e[l+1],complete:e[l+2]},SO(n._query)}return function(N,$,Y,ne){const xe=new CD(ne),Ve=new pA($,xe,Y);return N.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return cA(yield gy(N),Ve)})),()=>{xe.bc(),N.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return dA(yield gy(N),Ve)}))}}(wr(C),A,m,w)}function yy(n,e){return function(t,r){const s=new Kr;return t.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function xk(n,e,t){return _A.apply(this,arguments)}(yield KA(t),r,s)})),s.promise}(wr(n),e)}function oM(n,e,t){const r=t.docs.get(e._key),s=new th(n);return new cl(n,s,e._key,r,new bp(t.hasPendingWrites,t.fromCache),e.converter)}const qF={maxAttempts:5};class VO{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Dp(e)}set(e,t,r){this._verifyNotCommitted();const s=nh(e,this._firestore),u=FD(s.converter,t,r),l=MD(this._dataReader,"WriteBatch.set",s._key,u,null!==s.converter,r);return this._mutations.push(l.toMutation(s._key,Hn.none())),this}update(e,t,r,...s){this._verifyNotCommitted();const u=nh(e,this._firestore);let l;return l="string"==typeof(t=(0,en.m9)(t))||t instanceof ul?eM(this._dataReader,"WriteBatch.update",u._key,t,r,s):XA(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(l.toMutation(u._key,Hn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=nh(e,this._firestore);return this._mutations=this._mutations.concat(new ey(t._key,Hn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Me(ue.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function nh(n,e){if((n=(0,en.m9)(n)).firestore!==e)throw new Me(ue.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class zF extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Dp(e)}get(e){const t=nh(e,this._firestore),r=new PF(this._firestore);return this._transaction.lookup([t._key]).then(s=>{if(!s||1!==s.length)return et();const u=s[0];if(u.isFoundDocument())return new $0(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new $0(this._firestore,r,t._key,null,t.converter);throw et()})}set(e,t,r){const s=nh(e,this._firestore),u=FD(s.converter,t,r),l=MD(this._dataReader,"Transaction.set",s._key,u,null!==s.converter,r);return this._transaction.set(s._key,l),this}update(e,t,r,...s){const u=nh(e,this._firestore);let l;return l="string"==typeof(t=(0,en.m9)(t))||t instanceof ul?eM(this._dataReader,"Transaction.update",u._key,t,r,s):XA(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,l),this}delete(e){const t=nh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=nh(e,this._firestore),r=new th(this._firestore);return super.get(e).then(s=>new cl(this._firestore,r,t._key,s._document,new bp(!1,!1),t.converter))}}function aM(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Me("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function BO(){if(typeof Uint8Array>"u")throw new Me("unimplemented","Uint8Arrays are not available in this environment.")}function jO(){if(!function wP(){return typeof atob<"u"}())throw new Me("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Te=Cu.SDK_VERSION,(0,Cu._registerComponent)(new dg.wA("firestore",(t,{instanceIdentifier:r,options:s})=>{const u=t.getProvider("app").getImmediate(),l=new Fn(new aP(t.getProvider("auth-internal")),new lP(t.getProvider("app-check-internal")),function(m,w){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new Me(ue.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new $d(m.options.projectId,w)}(u,r),u);return s=Object.assign({useFetchStreams:e},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),(0,Cu.registerVersion)(Xe,"3.8.1",n),(0,Cu.registerVersion)(Xe,"3.8.1","esm2017")}();class z0{constructor(e){this._delegate=e}static fromBase64String(e){return jO(),new z0($u.fromBase64String(e))}static fromUint8Array(e){return BO(),new z0($u.fromUint8Array(e))}toBase64(){return jO(),this._delegate.toBase64()}toUint8Array(){return BO(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function uM(n){return function tL(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class nL{enableIndexedDbPersistence(e,t){return function lF(n,e){_O(n=Jt(n,Fn));const t=wr(n),r=n._freezeSettings(),s=new BA;return vO(t,s,new eO(s,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function dF(n){_O(n=Jt(n,Fn));const e=wr(n),t=n._freezeSettings(),r=new BA;return vO(e,r,new zk(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function hF(n){if(n._initialized&&!n._terminated)throw new Me(ue.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Kr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ge.Z)(function*(){try{yield(t=(0,ge.Z)(function*(r){if(!Ra.C())return Promise.resolve();const s=r+"main";yield Ra.delete(s)}),function(r){return t.apply(this,arguments)})(OS(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class $O{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof $d||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&ip("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function aO(n,e,t,r={}){var s;const u=(n=Jt(n,B0))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&ip("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let l,m;if("string"==typeof r.mockUserToken)l=r.mockUserToken,m=Qe.MOCK_USER;else{l=(0,en.Sg)(r.mockUserToken,null===(s=n._app)||void 0===s?void 0:s.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new Me(ue.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Qe(w)}n._authCredentials=new oP(new bx(l,m))}}(this._delegate,e,t,r)}enableNetwork(){return function pF(n){return function eF(n){return n.asyncQueue.enqueue((0,ge.Z)(function*(){const e=yield fO(n),t=yield ZA(n);return e.setNetworkEnabled(!0),function(r){const s=qe(r);return s._u.delete(0),V0(s)}(t)}))}(wr(n=Jt(n,Fn)))}(this._delegate)}disableNetwork(){return function gF(n){return function tF(n){return n.asyncQueue.enqueue((0,ge.Z)(function*(){const e=yield fO(n),t=yield ZA(n);return e.setNetworkEnabled(!1),(r=(0,ge.Z)(function*(s){const u=qe(s);u._u.add(0),yield uy(u),u.gu.set("Offline")}),function(s){return r.apply(this,arguments)})(t);var r}))}(wr(n=Jt(n,Fn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,tO("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function fF(n){return function(e){const t=new Kr;return e.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function Pk(n,e){return CA.apply(this,arguments)}(yield KA(e),t)})),t.promise}(wr(n=Jt(n,Fn)))}(this._delegate)}onSnapshotsInSync(e){return function GF(n,e){return function iF(n,e){const t=new CD(e);return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return r=yield gy(n),s=t,qe(r).Ru.add(s),void s.next();var r,s})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return r=yield gy(n),s=t,void qe(r).Ru.delete(s);var r,s}))}}(wr(n=Jt(n,Fn)),QA(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Me("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new vy(this,uO(this._delegate,e))}catch(t){throw ls(t,"collection()","Firestore.collection()")}}doc(e){try{return new Bo(this,DD(this._delegate,e))}catch(t){throw ls(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ds(this,function Wk(n,e){if(n=Jt(n,B0),jA("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Me(ue.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Pi(n,null,(t=e,new il(tn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw ls(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function WF(n,e,t){n=Jt(n,Fn);const r=Object.assign(Object.assign({},qF),t);return function(s){if(s.maxAttempts<1)throw new Me(ue.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,u,l){const m=new Kr;return s.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){const w=yield function pO(n){return bD(n).then(e=>e.datastore)}(s);new Jk(s.asyncQueue,w,l,u,m).run()})),m.promise}(wr(n),s=>e(new zF(n,s)),r)}(this._delegate,t=>e(new HO(this,t)))}batch(){return wr(this._delegate),new GO(new VO(this._delegate,e=>yy(this._delegate,e)))}loadBundle(e){return function mF(n,e){const t=wr(n=Jt(n,Fn)),r=new uF;return function sF(n,e,t,r){const s=function(u,l){let m;return m="string"==typeof u?(new TextEncoder).encode(u):u,w=function(w,C){if(w instanceof Uint8Array)return lO(w,C);if(w instanceof ArrayBuffer)return lO(new Uint8Array(w),C);if(w instanceof ReadableStream)return w.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new Zk(w,l);var w}(t,L0(e));n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){!function qk(n,e,t){const r=qe(n);var s;(s=(0,ge.Z)(function*(u,l,m){try{const w=yield l.getMetadata();if(yield function($,Y){const ne=qe($),xe=_r(Y.createTime);return ne.persistence.runTransaction("hasNewerBundle","readonly",Ve=>ne.Ns.getBundleMetadata(Ve,Y.id)).then(Ve=>!!Ve&&Ve.createTime.compareTo(xe)>=0)}(u.localStore,w))return yield l.close(),m._completeWith({taskState:"Success",documentsLoaded:($=w).totalDocuments,bytesLoaded:$.totalBytes,totalDocuments:$.totalDocuments,totalBytes:$.totalBytes}),Promise.resolve(new Set);m._updateProgress(GN(w));const C=new Ck(w,u.localStore,l.yt);let A=yield l.mc();for(;A;){const $=yield C.Fu(A);$&&m._updateProgress($),A=yield l.mc()}const N=yield C.complete();return yield al(u,N.Lu,void 0),yield function($,Y){const ne=qe($);return ne.persistence.runTransaction("Save bundle","readwrite",xe=>ne.Ns.saveBundleMetadata(xe,Y))}(u.localStore,w),m._completeWith(N.progress),Promise.resolve(N.Bu)}catch(w){return ip("SyncEngine",`Loading bundle failed with ${w}`),m._failWith(w),Promise.resolve(new Set)}var $}),function(u,l,m){return s.apply(this,arguments)})(r,e,t).then(s=>{r.sharedClientState.notifyBundleLoaded(s)})}(yield KA(n),s,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function yF(n,e){return function oF(n,e){return n.asyncQueue.enqueue((0,ge.Z)(function*(){return function(t,r){const s=qe(t);return s.persistence.runTransaction("Get named query","readonly",u=>s.Ns.getNamedQuery(u,r))}(yield TD(n),e)}))}(wr(n=Jt(n,Fn)),e).then(t=>t?new Pi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new ds(this,t):null)}}class LD extends sM{constructor(e){super(),this.firestore=e}convertBytes(e){return new z0(new $u(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Bo.forKey(t,this.firestore,null)}}class HO{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new LD(e)}get(e){const t=Sp(e);return this._delegate.get(t).then(r=>new W0(this._firestore,new cl(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const s=Sp(e);return r?(aM("Transaction.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const u=Sp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...s),this}delete(e){const t=Sp(e);return this._delegate.delete(t),this}}class GO{constructor(e){this._delegate=e}set(e,t,r){const s=Sp(e);return r?(aM("WriteBatch.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const u=Sp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...s),this}delete(e){const t=Sp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Tp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new q0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Z0(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Tp.INSTANCES;let s=r.get(e);s||(s=new WeakMap,r.set(e,s));let u=s.get(t);return u||(u=new Tp(e,new LD(e),t),s.set(t,u)),u}}Tp.INSTANCES=new WeakMap;class Bo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new LD(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Me("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Bo(t,new kn(t._delegate,r,new Ge(e)))}static forKey(e,t,r){return new Bo(t,new kn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new vy(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new vy(this.firestore,uO(this._delegate,e))}catch(t){throw ls(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,en.m9)(e))instanceof kn&&cO(this._delegate,e)}set(e,t){t=aM("DocumentReference.set",t);try{return t?kO(this._delegate,e,t):kO(this._delegate,e)}catch(r){throw ls(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?FO(this._delegate,e):FO(this._delegate,e,t,...r)}catch(s){throw ls(s,"updateDoc()","DocumentReference.update()")}}delete(){return function $F(n){return yy(Jt(n.firestore,Fn),[new ey(n._key,Hn.none())])}(this._delegate)}onSnapshot(...e){const t=qO(e),r=zO(e,s=>new W0(this.firestore,new cl(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)));return LO(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function LF(n){n=Jt(n,kn);const e=Jt(n.firestore,Fn),t=wr(e),r=new th(e);return function nF(n,e){const t=new Kr;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return(r=(0,ge.Z)(function*(s,u,l){try{const m=yield function(w,C){const A=qe(w);return A.persistence.runTransaction("read document","readonly",N=>A.localDocuments.getDocument(N,C))}(s,u);m.isFoundDocument()?l.resolve(m):m.isNoDocument()?l.resolve(null):l.reject(new Me(ue.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const w=dy(m,`Failed to get document '${u} from cache`);l.reject(w)}}),function(s,u,l){return r.apply(this,arguments)})(yield TD(n),e,t);var r})),t.promise}(t,n._key).then(s=>new cl(e,r,n._key,s,new bp(null!==s&&s.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function VF(n){n=Jt(n,kn);const e=Jt(n.firestore,Fn);return gO(wr(e),n._key,{source:"server"}).then(t=>oM(e,n,t))}(this._delegate):function FF(n){n=Jt(n,kn);const e=Jt(n.firestore,Fn);return gO(wr(e),n._key).then(t=>oM(e,n,t))}(this._delegate),t.then(r=>new W0(this.firestore,new cl(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Bo(this.firestore,this._delegate.withConverter(e?Tp.getInstance(this.firestore,e):null))}}function ls(n,e,t){return n.message=n.message.replace(e,t),n}function qO(n){for(const e of n)if("object"==typeof e&&!uM(e))return e;return{}}function zO(n,e){var t,r;let s;return s=uM(n[0])?n[0]:uM(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{s.next&&s.next(e(u))},error:null===(t=s.error)||void 0===t?void 0:t.bind(s),complete:null===(r=s.complete)||void 0===r?void 0:r.bind(s)}}class W0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Bo(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return PO(this._delegate,e._delegate)}}class Z0 extends W0{data(e){const t=this._delegate.data(e);return function iP(n,e){n||et()}(void 0!==t),t}}class ds{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new LD(e)}where(e,t,r){try{return new ds(this.firestore,Xd(this._delegate,function TF(n,e,t){const r=e,s=ND("where",n);return G0._create(s,r,t)}(e,t,r)))}catch(s){throw ls(s,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new ds(this.firestore,Xd(this._delegate,function SF(n,e="asc"){const t=e,r=ND("orderBy",n);return iM._create(r,t)}(e,t)))}catch(r){throw ls(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ds(this.firestore,Xd(this._delegate,function AF(n){return iO("limit",n),OD._create("limit",n,"F")}(e)))}catch(t){throw ls(t,"limit()","Query.limit()")}}limitToLast(e){try{return new ds(this.firestore,Xd(this._delegate,function MF(n){return iO("limitToLast",n),OD._create("limitToLast",n,"L")}(e)))}catch(t){throw ls(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ds(this.firestore,Xd(this._delegate,function xF(...n){return PD._create("startAt",n,!0)}(...e)))}catch(t){throw ls(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ds(this.firestore,Xd(this._delegate,function RF(...n){return PD._create("startAfter",n,!1)}(...e)))}catch(t){throw ls(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ds(this.firestore,Xd(this._delegate,function NF(...n){return kD._create("endBefore",n,!1)}(...e)))}catch(t){throw ls(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ds(this.firestore,Xd(this._delegate,function OF(...n){return kD._create("endAt",n,!0)}(...e)))}catch(t){throw ls(t,"endAt()","Query.endAt()")}}isEqual(e){return $A(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function BF(n){n=Jt(n,Pi);const e=Jt(n.firestore,Fn),t=wr(e),r=new th(e);return function rF(n,e){const t=new Kr;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return(r=(0,ge.Z)(function*(s,u,l){try{const m=yield mD(s,u,!0),w=new WN(u,m.Hi),C=w.Wu(m.documents),A=w.applyChanges(C,!1);l.resolve(A.snapshot)}catch(m){const w=dy(m,`Failed to execute query '${u} against cache`);l.reject(w)}}),function(s,u,l){return r.apply(this,arguments)})(yield TD(n),e,t);var r})),t.promise}(t,n._query).then(s=>new eh(e,r,n,s))}(this._delegate):"server"===e?.source?function jF(n){n=Jt(n,Pi);const e=Jt(n.firestore,Fn),t=wr(e),r=new th(e);return mO(t,n._query,{source:"server"}).then(s=>new eh(e,r,n,s))}(this._delegate):function UF(n){n=Jt(n,Pi);const e=Jt(n.firestore,Fn),t=wr(e),r=new th(e);return SO(n._query),mO(t,n._query).then(s=>new eh(e,r,n,s))}(this._delegate),t.then(r=>new cM(this.firestore,new eh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=qO(e),r=zO(e,s=>new cM(this.firestore,new eh(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)));return LO(this._delegate,t,r)}withConverter(e){return new ds(this.firestore,this._delegate.withConverter(e?Tp.getInstance(this.firestore,e):null))}}class iL{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Z0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class cM{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ds(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Z0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new iL(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Z0(this._firestore,r))})}isEqual(e){return PO(this._delegate,e._delegate)}}class vy extends ds{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Bo(this.firestore,e):null}doc(e){try{return new Bo(this.firestore,void 0===e?DD(this._delegate):DD(this._delegate,e))}catch(t){throw ls(t,"doc()","CollectionReference.doc()")}}add(e){return function HF(n,e){const t=Jt(n.firestore,Fn),r=DD(n),s=FD(n.converter,e);return yy(t,[MD(Dp(n.firestore),"addDoc",r._key,s,null!==n.converter,{}).toMutation(r._key,Hn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Bo(this.firestore,t))}isEqual(e){return cO(this._delegate,e._delegate)}withConverter(e){return new vy(this.firestore,this._delegate.withConverter(e?Tp.getInstance(this.firestore,e):null))}}function Sp(n){return Jt(n,kn)}class lM{constructor(...e){this._delegate=new ul(...e)}static documentId(){return new lM(ir.keyField().canonicalString())}isEqual(e){return(e=(0,en.m9)(e))instanceof ul&&this._delegate._internalPath.isEqual(e._internalPath)}}class Ap{constructor(e){this._delegate=e}static serverTimestamp(){const e=function KF(){return new JA("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Ap(e)}static delete(){const e=function ZF(){return new j0("deleteField")}();return e._methodName="FieldValue.delete",new Ap(e)}static arrayUnion(...e){const t=function YF(...n){return new EF("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Ap(t)}static arrayRemove(...e){const t=function QF(...n){return new IF("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Ap(t)}static increment(e){const t=function JF(n){return new DF("increment",n)}(e);return t._methodName="FieldValue.increment",new Ap(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const sL={Firestore:$O,GeoPoint:SD,Timestamp:$n,Blob:z0,Transaction:HO,WriteBatch:GO,DocumentReference:Bo,DocumentSnapshot:W0,Query:ds,QueryDocumentSnapshot:Z0,QuerySnapshot:cM,CollectionReference:vy,FieldPath:lM,FieldValue:Ap,setLogLevel:function rL(n){!function Kn(n){_t.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function WO(n,e){return function uL(n,e=pT.z){return new ci.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function dM(n,e){return WO(n,e).pipe((0,I.U)(t=>({payload:t,type:"query"})))}function VD(n,e){return dM(n,e).pipe(Ih(void 0),pm(),(0,I.U)(([t,r])=>{const s=r.payload.docChanges(),u=s.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,m)=>{const w=s.find(A=>A.doc.ref.isEqual(l.ref)),C=t?.payload.docs.find(A=>A.ref.isEqual(l.ref));w&&JSON.stringify(w.doc.metadata)===JSON.stringify(l.metadata)||!w&&C&&JSON.stringify(C.metadata)===JSON.stringify(l.metadata)||u.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:l}})}),u}))}function ZO(n,e,t){return VD(n,t).pipe(jl((r,s)=>function lL(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function dL(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return hM(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return hM(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return hM(n,e.oldIndex,1)}return n}(n,r))}),n}(r,s.map(u=>u.payload),e),[]),function dI(n,e=Ds.y){return n=n??p_,(0,xr.e)((t,r)=>{let s,u=!0;t.subscribe((0,Q.x)(r,l=>{const m=e(l);(u||!n(s,m))&&(u=!1,s=m,r.next(l))}))})}(),(0,I.U)(r=>r.map(s=>({type:s.type,payload:s}))))}function hM(n,e,t,...r){const s=n.slice();return s.splice(e,t,...r),s}function KO(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function aL(n){(function oL(n,e){n.INTERNAL.registerComponent(new dg.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),s=t.getProvider("firestore").getImmediate();return e(r,s)},"PUBLIC").setServiceProps(Object.assign({},sL)))})(n,(e,t)=>new $O(e,t,new nL)),n.registerVersion("@firebase/firestore-compat","0.3.1")}(g_.Z);class YO{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=VD(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,I.U)(r=>r.filter(s=>e.indexOf(s.type)>-1)))),t.pipe(Ih(void 0),pm(),Ti(([r,s])=>s.length>0||!r),(0,I.U)(([r,s])=>s),nr.iC)}auditTrail(e){return this.stateChanges(e).pipe(jl((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=KO(e);return ZO(this.query,t,this.afs.schedulers.outsideAngular).pipe(nr.iC)}valueChanges(e={}){return dM(this.query,this.afs.schedulers.outsideAngular).pipe((0,I.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),nr.iC)}get(e){return(0,Ut.D)(this.query.get(e)).pipe(nr.iC)}add(e){return this.ref.add(e)}doc(e){return new QO(this.ref.doc(e),this.afs)}}class QO{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:s,query:u}=eP(r,t);return new YO(s,u,this.afs)}snapshotChanges(){return function cL(n,e){return WO(n,e).pipe(Ih(void 0),pm(),(0,I.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(nr.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,I.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Ut.D)(this.ref.get(e)).pipe(nr.iC)}}class hL{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?VD(this.query,this.afs.schedulers.outsideAngular).pipe((0,I.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Ti(t=>t.length>0),nr.iC):VD(this.query,this.afs.schedulers.outsideAngular).pipe(nr.iC)}auditTrail(e){return this.stateChanges(e).pipe(jl((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=KO(e);return ZO(this.query,t,this.afs.schedulers.outsideAngular).pipe(nr.iC)}valueChanges(e={}){return dM(this.query,this.afs.schedulers.outsideAngular).pipe((0,I.U)(r=>r.payload.docs.map(s=>e.idField?Object.assign({[e.idField]:s.id},s.data()):s.data())),nr.iC)}get(e){return(0,Ut.D)(this.query.get(e)).pipe(nr.iC)}}const JO=new d.OlP("angularfire2.enableFirestorePersistence"),XO=new d.OlP("angularfire2.firestore.persistenceSettings"),fL=new d.OlP("angularfire2.firestore.settings"),pL=new d.OlP("angularfire2.firestore.use-emulator");function eP(n,e=(t=>t)){return{query:e(n),ref:n}}let tP=(()=>{class n{constructor(t,r,s,u,l,m,w,C,A,N,$,Y,ne,xe,Ve,ft,jt){this.schedulers=w;const Ot=(0,zi.on)(t,m,r),Pt=A;N&&xv(Ot,m,$,ne,xe,Ve,Y,ft),[this.firestore,this.persistenceEnabled$]=(0,zi.cc)(`${Ot.name}.firestore`,"AngularFirestore",Ot.name,()=>{const Lt=m.runOutsideAngular(()=>Ot.firestore());if(u&&Lt.settings(u),Pt&&Lt.useEmulator(...Pt),s&&!Ku(l)){const qt=()=>{try{return(0,Ut.D)(Lt.enablePersistence(C||void 0).then(()=>!0,()=>!1))}catch(Qr){return typeof console<"u"&&console.warn(Qr),We(!1)}};return[Lt,m.runOutsideAngular(qt)]}return[Lt,We(!1)]},[u,Pt,s])}collection(t,r){let s;s="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:l}=eP(s,r),m=this.schedulers.ngZone.run(()=>u);return new YO(m,l,this)}collectionGroup(t,r){const s=r||(l=>l),u=this.firestore.collectionGroup(t);return new hL(s(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const s=this.schedulers.ngZone.run(()=>r);return new QO(s,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(zi.Dh),d.LFG(zi.xv,8),d.LFG(JO,8),d.LFG(fL,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(nr.HU),d.LFG(XO,8),d.LFG(pL,8),d.LFG(wd,8),d.LFG(Ng,8),d.LFG(Og,8),d.LFG(Sv,8),d.LFG(Av,8),d.LFG(Pg,8),d.LFG(Mv,8),d.LFG(Mg,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),gL=(()=>{class n{constructor(){Rg.Z.registerVersion("angularfire",nr.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:JO,useValue:!0},{provide:XO,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[tP]}),n})();class _y{constructor(e){this.fs=e}addUser(e,t,r,s){return this.fs.doc("users/"+e).set(Object.assign({},t,r,s))}}function mL(n,e){1&n&&(d.TgZ(0,"div",23),d._uU(1,"Name is required"),d.qZA())}function yL(n,e){1&n&&(d.TgZ(0,"div",23),d._uU(1,"email is required"),d.qZA())}function vL(n,e){1&n&&(d.TgZ(0,"div",23),d._uU(1,"format incorrecte"),d.qZA())}function _L(n,e){1&n&&(d.TgZ(0,"div",23),d._uU(1,"password is required"),d.qZA())}function wL(n,e){1&n&&(d.TgZ(0,"div",23),d._uU(1,"format incorrecte +6 characteres"),d.qZA())}function EL(n,e){1&n&&(d.TgZ(0,"div",23),d._uU(1,"Confirmez votre mot de passe "),d.qZA())}function IL(n,e){1&n&&(d.TgZ(0,"div",23),d._uU(1,"mot de passe erron\xe9"),d.qZA())}function DL(n,e){1&n&&(d.TgZ(0,"div",23),d._uU(1,"Address is required"),d.qZA())}function CL(n,e){if(1&n&&(d.TgZ(0,"div",23),d._uU(1),d.qZA()),2&n){const t=d.oxw();d.xp6(1),d.Oqu(t.errorMessage)}}_y.\u0275fac=function(e){return new(e||_y)(d.LFG(tP))},_y.\u0275prov=d.Yz7({token:_y,factory:_y.\u0275fac,providedIn:"root"});class K0{constructor(e,t,r){this.authService=e,this.us=t,this.router=r,this.errorMessage=""}ngOnInit(){}signUp(e){let t=e.value;this.authService.signUp(t.email,t.password).then(r=>{this.errorMessage="",this.us.addUser(r.user?.uid,t.name,t.adress,t.telephone),this.router.navigate(["/products"])}).catch(r=>{this.errorMessage=r.message})}}K0.\u0275fac=function(e){return new(e||K0)(d.Y36(Au),d.Y36(_y),d.Y36(Ai))},K0.\u0275cmp=d.Xpm({type:K0,selectors:[["app-inscription"]],decls:49,vars:10,consts:[[1,"text-center"],[3,"ngSubmit"],["userForm","ngForm"],[1,"form-group"],["for","nameInput"],["ngModel","","name","name","type","text","id","nameInput","required","",1,"form-control"],["name","ngModel"],["class","alert alert-danger",4,"ngIf"],["for","emailInput"],["type","email","id","emailInput","ngModel","","name","email","required","","email","",1,"form-control"],["email","ngModel"],["for","passwordInput"],["type","password","id","passwordInput","ngModel","","name","password","required","","minlength","6",1,"form-control"],["password","ngModel"],["type","password","ngModel","","name","confirmPassword","required","",1,"form-control"],["confirmPassword","ngModel"],["for","phoneInput"],["type","text","id","phoneInput","ngModel","","name","telephone","required","",1,"form-control"],["for","addressInput"],["type","text","id","addressInput","ngModel","","name","adresse","required","",1,"form-control"],["address","ngModel"],[2,"text-align","center"],[1,"btn","btn-primary",3,"disabled"],[1,"alert","alert-danger"]],template:function(e,t){if(1&e){const r=d.EpF();d.TgZ(0,"div"),d._UZ(1,"br"),d.TgZ(2,"h2",0),d._uU(3," Cr\xe9er votre compte"),d.qZA(),d.TgZ(4,"form",1,2),d.NdJ("ngSubmit",function(){d.CHM(r);const u=d.MAs(5);return d.KtG(t.signUp(u))}),d.TgZ(6,"div",3)(7,"label",4),d._uU(8,"Nom"),d.qZA(),d._UZ(9,"input",5,6),d.YNc(11,mL,2,0,"div",7),d.qZA(),d.TgZ(12,"div",3)(13,"label",8),d._uU(14,"Adresse email"),d.qZA(),d._UZ(15,"input",9,10),d.YNc(17,yL,2,0,"div",7),d.YNc(18,vL,2,0,"div",7),d.qZA(),d.TgZ(19,"div",3)(20,"label",11),d._uU(21,"password"),d.qZA(),d._UZ(22,"input",12,13),d.YNc(24,_L,2,0,"div",7),d.YNc(25,wL,2,0,"div",7),d.qZA(),d.TgZ(26,"div",3)(27,"label",11),d._uU(28,"Confirmer password"),d.qZA(),d._UZ(29,"input",14,15),d.YNc(31,EL,2,0,"div",7),d.YNc(32,IL,2,0,"div",7),d.qZA(),d.TgZ(33,"div",3)(34,"label",16),d._uU(35,"T\xe9l\xe9phone"),d.qZA(),d._UZ(36,"input",17),d.qZA(),d.TgZ(37,"div",3)(38,"label",18),d._uU(39,"Adresse"),d.qZA(),d._UZ(40,"input",19,20),d.YNc(42,DL,2,0,"div",7),d.qZA(),d._UZ(43,"br"),d.TgZ(44,"div",21)(45,"button",22),d._uU(46,"Valider"),d.qZA()()(),d._UZ(47,"br"),d.YNc(48,CL,2,1,"div",7),d.qZA()}if(2&e){const r=d.MAs(5),s=d.MAs(10),u=d.MAs(16),l=d.MAs(23),m=d.MAs(30),w=d.MAs(41);d.xp6(11),d.Q6J("ngIf",s.invalid&&s.touched),d.xp6(6),d.Q6J("ngIf",u.touched&&(null==u.errors?null:u.errors.required)),d.xp6(1),d.Q6J("ngIf",u.touched&&(null==u.errors?null:u.errors.email)),d.xp6(6),d.Q6J("ngIf",l.touched&&(null==l.errors?null:l.errors.required)),d.xp6(1),d.Q6J("ngIf",l.touched&&(null==l.errors?null:l.errors.minlength)),d.xp6(6),d.Q6J("ngIf",m.invalid&&m.touched),d.xp6(1),d.Q6J("ngIf",m.value!=l.value&&m.touched),d.xp6(10),d.Q6J("ngIf",w.invalid&&w.touched),d.xp6(3),d.Q6J("disabled",r.invalid||m.value!=l.value),d.xp6(3),d.Q6J("ngIf",t.errorMessage)}},dependencies:[rn,zv,wa,Ri,Bg,Ad,im,rm,hn,ro]});class wy{}function bL(n,e){1&n&&(d.TgZ(0,"div",13),d._uU(1,"email is required"),d.qZA())}function TL(n,e){1&n&&(d.TgZ(0,"div",13),d._uU(1,"format incorrecte"),d.qZA())}function SL(n,e){1&n&&(d.TgZ(0,"div",13),d._uU(1,"password is required"),d.qZA())}function AL(n,e){1&n&&(d.TgZ(0,"div",13),d._uU(1,"format incorrecte +6 characteres"),d.qZA())}wy.\u0275fac=function(e){return new(e||wy)},wy.\u0275mod=d.oAB({type:wy}),wy.\u0275inj=d.cJS({imports:[Ur,Kc]});class Y0{constructor(e){this.authService=e}ngOnInit(){throw new Error("Method not implemented.")}login(e){let t=e.value;this.authService.login(t.email,t.password).then(r=>console.log(r)).catch(r=>console.log(r))}}Y0.\u0275fac=function(e){return new(e||Y0)(d.Y36(Au))},Y0.\u0275cmp=d.Xpm({type:Y0,selectors:[["app-login"]],decls:25,vars:5,consts:[[1,"text-center"],[3,"ngSubmit"],["userForm","ngForm"],[1,"form-group"],["for","emailInput"],["type","email","id","emailInput","placeholder","Email","ngModel","","name","email","required","","email","",1,"form-control"],["email","ngModel"],["class","alert alert-danger",4,"ngIf"],["for","passwordInput"],["type","password","id","passwordInput","placeholder","Password","ngModel","","name","password","required","","minlength","6",1,"form-control"],["password","ngModel"],[2,"text-align","center"],[1,"btn","btn-primary",3,"disabled"],[1,"alert","alert-danger"]],template:function(e,t){if(1&e){const r=d.EpF();d.TgZ(0,"div"),d._UZ(1,"br"),d.TgZ(2,"h2",0),d._uU(3,"S'authentifier"),d.qZA(),d.TgZ(4,"form",1,2),d.NdJ("ngSubmit",function(){d.CHM(r);const u=d.MAs(5);return d.KtG(t.login(u))}),d.TgZ(6,"div",3)(7,"label",4),d._uU(8,"Adresse email"),d.qZA(),d._UZ(9,"input",5,6),d.YNc(11,bL,2,0,"div",7),d.YNc(12,TL,2,0,"div",7),d.qZA(),d.TgZ(13,"div",3)(14,"label",8),d._uU(15,"password"),d.qZA(),d._UZ(16,"input",9,10),d.YNc(18,SL,2,0,"div",7),d.YNc(19,AL,2,0,"div",7),d.qZA(),d._UZ(20,"br"),d.TgZ(21,"div",11)(22,"button",12),d._uU(23,"Valider"),d.qZA()()(),d._UZ(24,"br"),d.qZA()}if(2&e){const r=d.MAs(5),s=d.MAs(10),u=d.MAs(17);d.xp6(11),d.Q6J("ngIf",s.touched&&(null==s.errors?null:s.errors.required)),d.xp6(1),d.Q6J("ngIf",s.touched&&(null==s.errors?null:s.errors.email)),d.xp6(6),d.Q6J("ngIf",u.touched&&(null==u.errors?null:u.errors.required)),d.xp6(1),d.Q6J("ngIf",u.touched&&(null==u.errors?null:u.errors.minlength)),d.xp6(3),d.Q6J("disabled",r.invalid)}},dependencies:[rn,zv,wa,Ri,Bg,Ad,im,rm,hn,ro]});const ML=[{path:"products",component:Pf},{path:"details/:id",component:Nu},{path:"cart",component:kf},{path:"SignUp",component:K0},{path:"SignIn",component:Y0},{path:"**",redirectTo:"products",pathMatch:"full"}];class Ey{}Ey.\u0275fac=function(e){return new(e||Ey)},Ey.\u0275mod=d.oAB({type:Ey,bootstrap:[bf]}),Ey.\u0275inj=d.cJS({imports:[mc,kw.forRoot(ML),wy,Kc,om,zi.hO.initializeApp({apiKey:"AIzaSyBoLJF4OzhsMcwN9UA7L5luopTgyJ3Zc48",authDomain:"ecommerce-b2256.firebaseapp.com",projectId:"ecommerce-b2256",storageBucket:"ecommerce-b2256.appspot.com",messagingSenderId:"572668641097",appId:"1:572668641097:web:bc6955a7b4924a5e19e498",measurementId:"G-QCS1GQKY65"}),gL,aE]}),$i().bootstrapModule(Ey).catch(n=>console.error(n))},9751:(st,we,P)=>{P.d(we,{y:()=>le});var d=P(2961),J=P(727),O=P(8822),se=P(9635),oe=P(2416),re=P(576),fe=P(2806);let le=(()=>{class W{constructor(Ie){Ie&&(this._subscribe=Ie)}lift(Ie){const $e=new W;return $e.source=this,$e.operator=Ie,$e}subscribe(Ie,$e,nt){const de=function j(W){return W&&W instanceof d.Lv||function B(W){return W&&(0,re.m)(W.next)&&(0,re.m)(W.error)&&(0,re.m)(W.complete)}(W)&&(0,J.Nn)(W)}(Ie)?Ie:new d.Hp(Ie,$e,nt);return(0,fe.x)(()=>{const{operator:De,source:Ee}=this;de.add(De?De.call(de,Ee):Ee?this._subscribe(de):this._trySubscribe(de))}),de}_trySubscribe(Ie){try{return this._subscribe(Ie)}catch($e){Ie.error($e)}}forEach(Ie,$e){return new($e=ce($e))((nt,de)=>{const De=new d.Hp({next:Ee=>{try{Ie(Ee)}catch(Pe){de(Pe),De.unsubscribe()}},error:de,complete:nt});this.subscribe(De)})}_subscribe(Ie){var $e;return null===($e=this.source)||void 0===$e?void 0:$e.subscribe(Ie)}[O.L](){return this}pipe(...Ie){return(0,se.U)(Ie)(this)}toPromise(Ie){return new(Ie=ce(Ie))(($e,nt)=>{let de;this.subscribe(De=>de=De,De=>nt(De),()=>$e(de))})}}return W.create=Ue=>new W(Ue),W})();function ce(W){var Ue;return null!==(Ue=W??oe.v.Promise)&&void 0!==Ue?Ue:Promise}},7579:(st,we,P)=>{P.d(we,{x:()=>fe});var d=P(9751),J=P(727);const se=(0,P(3888).d)(ce=>function(){ce(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var oe=P(8737),re=P(2806);let fe=(()=>{class ce extends d.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(j){const W=new le(this,this);return W.operator=j,W}_throwIfClosed(){if(this.closed)throw new se}next(j){(0,re.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const W of this.currentObservers)W.next(j)}})}error(j){(0,re.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=j;const{observers:W}=this;for(;W.length;)W.shift().error(j)}})}complete(){(0,re.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:j}=this;for(;j.length;)j.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var j;return(null===(j=this.observers)||void 0===j?void 0:j.length)>0}_trySubscribe(j){return this._throwIfClosed(),super._trySubscribe(j)}_subscribe(j){return this._throwIfClosed(),this._checkFinalizedStatuses(j),this._innerSubscribe(j)}_innerSubscribe(j){const{hasError:W,isStopped:Ue,observers:Ie}=this;return W||Ue?J.Lc:(this.currentObservers=null,Ie.push(j),new J.w0(()=>{this.currentObservers=null,(0,oe.P)(Ie,j)}))}_checkFinalizedStatuses(j){const{hasError:W,thrownError:Ue,isStopped:Ie}=this;W?j.error(Ue):Ie&&j.complete()}asObservable(){const j=new d.y;return j.source=this,j}}return ce.create=(B,j)=>new le(B,j),ce})();class le extends fe{constructor(B,j){super(),this.destination=B,this.source=j}next(B){var j,W;null===(W=null===(j=this.destination)||void 0===j?void 0:j.next)||void 0===W||W.call(j,B)}error(B){var j,W;null===(W=null===(j=this.destination)||void 0===j?void 0:j.error)||void 0===W||W.call(j,B)}complete(){var B,j;null===(j=null===(B=this.destination)||void 0===B?void 0:B.complete)||void 0===j||j.call(B)}_subscribe(B){var j,W;return null!==(W=null===(j=this.source)||void 0===j?void 0:j.subscribe(B))&&void 0!==W?W:J.Lc}}},2961:(st,we,P)=>{P.d(we,{Hp:()=>nt,Lv:()=>W});var d=P(576),J=P(727),O=P(2416),se=P(7849);function oe(){}const re=ce("C",void 0,void 0);function ce(Se,ve,Ae){return{kind:Se,value:ve,error:Ae}}var B=P(3410),j=P(2806);class W extends J.w0{constructor(ve){super(),this.isStopped=!1,ve?(this.destination=ve,(0,J.Nn)(ve)&&ve.add(this)):this.destination=Pe}static create(ve,Ae,Fe){return new nt(ve,Ae,Fe)}next(ve){this.isStopped?Ee(function le(Se){return ce("N",Se,void 0)}(ve),this):this._next(ve)}error(ve){this.isStopped?Ee(function fe(Se){return ce("E",void 0,Se)}(ve),this):(this.isStopped=!0,this._error(ve))}complete(){this.isStopped?Ee(re,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(ve){this.destination.next(ve)}_error(ve){try{this.destination.error(ve)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ue=Function.prototype.bind;function Ie(Se,ve){return Ue.call(Se,ve)}class $e{constructor(ve){this.partialObserver=ve}next(ve){const{partialObserver:Ae}=this;if(Ae.next)try{Ae.next(ve)}catch(Fe){de(Fe)}}error(ve){const{partialObserver:Ae}=this;if(Ae.error)try{Ae.error(ve)}catch(Fe){de(Fe)}else de(ve)}complete(){const{partialObserver:ve}=this;if(ve.complete)try{ve.complete()}catch(Ae){de(Ae)}}}class nt extends W{constructor(ve,Ae,Fe){let Re;if(super(),(0,d.m)(ve)||!ve)Re={next:ve??void 0,error:Ae??void 0,complete:Fe??void 0};else{let V;this&&O.v.useDeprecatedNextContext?(V=Object.create(ve),V.unsubscribe=()=>this.unsubscribe(),Re={next:ve.next&&Ie(ve.next,V),error:ve.error&&Ie(ve.error,V),complete:ve.complete&&Ie(ve.complete,V)}):Re=ve}this.destination=new $e(Re)}}function de(Se){O.v.useDeprecatedSynchronousErrorHandling?(0,j.O)(Se):(0,se.h)(Se)}function Ee(Se,ve){const{onStoppedNotification:Ae}=O.v;Ae&&B.z.setTimeout(()=>Ae(Se,ve))}const Pe={closed:!0,next:oe,error:function De(Se){throw Se},complete:oe}},727:(st,we,P)=>{P.d(we,{Lc:()=>re,w0:()=>oe,Nn:()=>fe});var d=P(576);const O=(0,P(3888).d)(ce=>function(j){ce(this),this.message=j?`${j.length} errors occurred during unsubscription:\n${j.map((W,Ue)=>`${Ue+1}) ${W.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=j});var se=P(8737);class oe{constructor(B){this.initialTeardown=B,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let B;if(!this.closed){this.closed=!0;const{_parentage:j}=this;if(j)if(this._parentage=null,Array.isArray(j))for(const Ie of j)Ie.remove(this);else j.remove(this);const{initialTeardown:W}=this;if((0,d.m)(W))try{W()}catch(Ie){B=Ie instanceof O?Ie.errors:[Ie]}const{_finalizers:Ue}=this;if(Ue){this._finalizers=null;for(const Ie of Ue)try{le(Ie)}catch($e){B=B??[],$e instanceof O?B=[...B,...$e.errors]:B.push($e)}}if(B)throw new O(B)}}add(B){var j;if(B&&B!==this)if(this.closed)le(B);else{if(B instanceof oe){if(B.closed||B._hasParent(this))return;B._addParent(this)}(this._finalizers=null!==(j=this._finalizers)&&void 0!==j?j:[]).push(B)}}_hasParent(B){const{_parentage:j}=this;return j===B||Array.isArray(j)&&j.includes(B)}_addParent(B){const{_parentage:j}=this;this._parentage=Array.isArray(j)?(j.push(B),j):j?[j,B]:B}_removeParent(B){const{_parentage:j}=this;j===B?this._parentage=null:Array.isArray(j)&&(0,se.P)(j,B)}remove(B){const{_finalizers:j}=this;j&&(0,se.P)(j,B),B instanceof oe&&B._removeParent(this)}}oe.EMPTY=(()=>{const ce=new oe;return ce.closed=!0,ce})();const re=oe.EMPTY;function fe(ce){return ce instanceof oe||ce&&"closed"in ce&&(0,d.m)(ce.remove)&&(0,d.m)(ce.add)&&(0,d.m)(ce.unsubscribe)}function le(ce){(0,d.m)(ce)?ce():ce.unsubscribe()}},2416:(st,we,P)=>{P.d(we,{v:()=>d});const d={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(st,we,P)=>{P.d(we,{E:()=>J});const J=new(P(9751).y)(oe=>oe.complete())},8996:(st,we,P)=>{P.d(we,{D:()=>ve});var d=P(8421),J=P(5363),O=P(9468),re=P(9751),le=P(2202),ce=P(576),B=P(9672);function W(Ae,Fe){if(!Ae)throw new Error("Iterable cannot be null");return new re.y(Re=>{(0,B.f)(Re,Fe,()=>{const V=Ae[Symbol.asyncIterator]();(0,B.f)(Re,Fe,()=>{V.next().then(ye=>{ye.done?Re.complete():Re.next(ye.value)})},0,!0)})})}var Ue=P(3670),Ie=P(8239),$e=P(1144),nt=P(6495),de=P(2206),De=P(4532),Ee=P(3260);function ve(Ae,Fe){return Fe?function Se(Ae,Fe){if(null!=Ae){if((0,Ue.c)(Ae))return function se(Ae,Fe){return(0,d.Xf)(Ae).pipe((0,O.R)(Fe),(0,J.Q)(Fe))}(Ae,Fe);if((0,$e.z)(Ae))return function fe(Ae,Fe){return new re.y(Re=>{let V=0;return Fe.schedule(function(){V===Ae.length?Re.complete():(Re.next(Ae[V++]),Re.closed||this.schedule())})})}(Ae,Fe);if((0,Ie.t)(Ae))return function oe(Ae,Fe){return(0,d.Xf)(Ae).pipe((0,O.R)(Fe),(0,J.Q)(Fe))}(Ae,Fe);if((0,de.D)(Ae))return W(Ae,Fe);if((0,nt.T)(Ae))return function j(Ae,Fe){return new re.y(Re=>{let V;return(0,B.f)(Re,Fe,()=>{V=Ae[le.h](),(0,B.f)(Re,Fe,()=>{let ye,q;try{({value:ye,done:q}=V.next())}catch(K){return void Re.error(K)}q?Re.complete():Re.next(ye)},0,!0)}),()=>(0,ce.m)(V?.return)&&V.return()})}(Ae,Fe);if((0,Ee.L)(Ae))return function Pe(Ae,Fe){return W((0,Ee.Q)(Ae),Fe)}(Ae,Fe)}throw(0,De.z)(Ae)}(Ae,Fe):(0,d.Xf)(Ae)}},8421:(st,we,P)=>{P.d(we,{Xf:()=>Ue});var d=P(655),J=P(1144),O=P(8239),se=P(9751),oe=P(3670),re=P(2206),fe=P(4532),le=P(6495),ce=P(3260),B=P(576),j=P(7849),W=P(8822);function Ue(Se){if(Se instanceof se.y)return Se;if(null!=Se){if((0,oe.c)(Se))return function Ie(Se){return new se.y(ve=>{const Ae=Se[W.L]();if((0,B.m)(Ae.subscribe))return Ae.subscribe(ve);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Se);if((0,J.z)(Se))return function $e(Se){return new se.y(ve=>{for(let Ae=0;Ae<Se.length&&!ve.closed;Ae++)ve.next(Se[Ae]);ve.complete()})}(Se);if((0,O.t)(Se))return function nt(Se){return new se.y(ve=>{Se.then(Ae=>{ve.closed||(ve.next(Ae),ve.complete())},Ae=>ve.error(Ae)).then(null,j.h)})}(Se);if((0,re.D)(Se))return De(Se);if((0,le.T)(Se))return function de(Se){return new se.y(ve=>{for(const Ae of Se)if(ve.next(Ae),ve.closed)return;ve.complete()})}(Se);if((0,ce.L)(Se))return function Ee(Se){return De((0,ce.Q)(Se))}(Se)}throw(0,fe.z)(Se)}function De(Se){return new se.y(ve=>{(function Pe(Se,ve){var Ae,Fe,Re,V;return(0,d.mG)(this,void 0,void 0,function*(){try{for(Ae=(0,d.KL)(Se);!(Fe=yield Ae.next()).done;)if(ve.next(Fe.value),ve.closed)return}catch(ye){Re={error:ye}}finally{try{Fe&&!Fe.done&&(V=Ae.return)&&(yield V.call(Ae))}finally{if(Re)throw Re.error}}ve.complete()})})(Se,ve).catch(Ae=>ve.error(Ae))})}},6451:(st,we,P)=>{P.d(we,{T:()=>re});var d=P(8189),J=P(8421),O=P(515),se=P(7669),oe=P(8996);function re(...fe){const le=(0,se.yG)(fe),ce=(0,se._6)(fe,1/0),B=fe;return B.length?1===B.length?(0,J.Xf)(B[0]):(0,d.J)(ce)((0,oe.D)(B,le)):O.E}},5403:(st,we,P)=>{P.d(we,{x:()=>J});var d=P(2961);function J(se,oe,re,fe,le){return new O(se,oe,re,fe,le)}class O extends d.Lv{constructor(oe,re,fe,le,ce,B){super(oe),this.onFinalize=ce,this.shouldUnsubscribe=B,this._next=re?function(j){try{re(j)}catch(W){oe.error(W)}}:super._next,this._error=le?function(j){try{le(j)}catch(W){oe.error(W)}finally{this.unsubscribe()}}:super._error,this._complete=fe?function(){try{fe()}catch(j){oe.error(j)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var oe;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:re}=this;super.unsubscribe(),!re&&(null===(oe=this.onFinalize)||void 0===oe||oe.call(this))}}}},4004:(st,we,P)=>{P.d(we,{U:()=>O});var d=P(4482),J=P(5403);function O(se,oe){return(0,d.e)((re,fe)=>{let le=0;re.subscribe((0,J.x)(fe,ce=>{fe.next(se.call(oe,ce,le++))}))})}},8189:(st,we,P)=>{P.d(we,{J:()=>O});var d=P(5577),J=P(4671);function O(se=1/0){return(0,d.z)(J.y,se)}},5577:(st,we,P)=>{P.d(we,{z:()=>le});var d=P(4004),J=P(8421),O=P(4482),se=P(9672),oe=P(5403),fe=P(576);function le(ce,B,j=1/0){return(0,fe.m)(B)?le((W,Ue)=>(0,d.U)((Ie,$e)=>B(W,Ie,Ue,$e))((0,J.Xf)(ce(W,Ue))),j):("number"==typeof B&&(j=B),(0,O.e)((W,Ue)=>function re(ce,B,j,W,Ue,Ie,$e,nt){const de=[];let De=0,Ee=0,Pe=!1;const Se=()=>{Pe&&!de.length&&!De&&B.complete()},ve=Fe=>De<W?Ae(Fe):de.push(Fe),Ae=Fe=>{Ie&&B.next(Fe),De++;let Re=!1;(0,J.Xf)(j(Fe,Ee++)).subscribe((0,oe.x)(B,V=>{Ue?.(V),Ie?ve(V):B.next(V)},()=>{Re=!0},void 0,()=>{if(Re)try{for(De--;de.length&&De<W;){const V=de.shift();$e?(0,se.f)(B,$e,()=>Ae(V)):Ae(V)}Se()}catch(V){B.error(V)}}))};return ce.subscribe((0,oe.x)(B,ve,()=>{Pe=!0,Se()})),()=>{nt?.()}}(W,Ue,ce,j)))}},5363:(st,we,P)=>{P.d(we,{Q:()=>se});var d=P(9672),J=P(4482),O=P(5403);function se(oe,re=0){return(0,J.e)((fe,le)=>{fe.subscribe((0,O.x)(le,ce=>(0,d.f)(le,oe,()=>le.next(ce),re),()=>(0,d.f)(le,oe,()=>le.complete(),re),ce=>(0,d.f)(le,oe,()=>le.error(ce),re)))})}},3099:(st,we,P)=>{P.d(we,{B:()=>oe});var d=P(8421),J=P(7579),O=P(2961),se=P(4482);function oe(fe={}){const{connector:le=(()=>new J.x),resetOnError:ce=!0,resetOnComplete:B=!0,resetOnRefCountZero:j=!0}=fe;return W=>{let Ue,Ie,$e,nt=0,de=!1,De=!1;const Ee=()=>{Ie?.unsubscribe(),Ie=void 0},Pe=()=>{Ee(),Ue=$e=void 0,de=De=!1},Se=()=>{const ve=Ue;Pe(),ve?.unsubscribe()};return(0,se.e)((ve,Ae)=>{nt++,!De&&!de&&Ee();const Fe=$e=$e??le();Ae.add(()=>{nt--,0===nt&&!De&&!de&&(Ie=re(Se,j))}),Fe.subscribe(Ae),!Ue&&nt>0&&(Ue=new O.Hp({next:Re=>Fe.next(Re),error:Re=>{De=!0,Ee(),Ie=re(Pe,ce,Re),Fe.error(Re)},complete:()=>{de=!0,Ee(),Ie=re(Pe,B),Fe.complete()}}),(0,d.Xf)(ve).subscribe(Ue))})(W)}}function re(fe,le,...ce){if(!0===le)return void fe();if(!1===le)return;const B=new O.Hp({next:()=>{B.unsubscribe(),fe()}});return le(...ce).subscribe(B)}},9468:(st,we,P)=>{P.d(we,{R:()=>J});var d=P(4482);function J(O,se=0){return(0,d.e)((oe,re)=>{re.add(O.schedule(()=>oe.subscribe(re),se))})}},8505:(st,we,P)=>{P.d(we,{b:()=>oe});var d=P(576),J=P(4482),O=P(5403),se=P(4671);function oe(re,fe,le){const ce=(0,d.m)(re)||fe||le?{next:re,error:fe,complete:le}:re;return ce?(0,J.e)((B,j)=>{var W;null===(W=ce.subscribe)||void 0===W||W.call(ce);let Ue=!0;B.subscribe((0,O.x)(j,Ie=>{var $e;null===($e=ce.next)||void 0===$e||$e.call(ce,Ie),j.next(Ie)},()=>{var Ie;Ue=!1,null===(Ie=ce.complete)||void 0===Ie||Ie.call(ce),j.complete()},Ie=>{var $e;Ue=!1,null===($e=ce.error)||void 0===$e||$e.call(ce,Ie),j.error(Ie)},()=>{var Ie,$e;Ue&&(null===(Ie=ce.unsubscribe)||void 0===Ie||Ie.call(ce)),null===($e=ce.finalize)||void 0===$e||$e.call(ce)}))}):se.y}},4408:(st,we,P)=>{P.d(we,{o:()=>oe});var d=P(727);class J extends d.w0{constructor(fe,le){super()}schedule(fe,le=0){return this}}const O={setInterval(re,fe,...le){const{delegate:ce}=O;return ce?.setInterval?ce.setInterval(re,fe,...le):setInterval(re,fe,...le)},clearInterval(re){const{delegate:fe}=O;return(fe?.clearInterval||clearInterval)(re)},delegate:void 0};var se=P(8737);class oe extends J{constructor(fe,le){super(fe,le),this.scheduler=fe,this.work=le,this.pending=!1}schedule(fe,le=0){var ce;if(this.closed)return this;this.state=fe;const B=this.id,j=this.scheduler;return null!=B&&(this.id=this.recycleAsyncId(j,B,le)),this.pending=!0,this.delay=le,this.id=null!==(ce=this.id)&&void 0!==ce?ce:this.requestAsyncId(j,this.id,le),this}requestAsyncId(fe,le,ce=0){return O.setInterval(fe.flush.bind(fe,this),ce)}recycleAsyncId(fe,le,ce=0){if(null!=ce&&this.delay===ce&&!1===this.pending)return le;null!=le&&O.clearInterval(le)}execute(fe,le){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ce=this._execute(fe,le);if(ce)return ce;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(fe,le){let B,ce=!1;try{this.work(fe)}catch(j){ce=!0,B=j||new Error("Scheduled action threw falsy error")}if(ce)return this.unsubscribe(),B}unsubscribe(){if(!this.closed){const{id:fe,scheduler:le}=this,{actions:ce}=le;this.work=this.state=this.scheduler=null,this.pending=!1,(0,se.P)(ce,this),null!=fe&&(this.id=this.recycleAsyncId(le,fe,null)),this.delay=null,super.unsubscribe()}}}},7565:(st,we,P)=>{P.d(we,{v:()=>O});var d=P(6063);class J{constructor(oe,re=J.now){this.schedulerActionCtor=oe,this.now=re}schedule(oe,re=0,fe){return new this.schedulerActionCtor(this,oe).schedule(fe,re)}}J.now=d.l.now;class O extends J{constructor(oe,re=J.now){super(oe,re),this.actions=[],this._active=!1}flush(oe){const{actions:re}=this;if(this._active)return void re.push(oe);let fe;this._active=!0;do{if(fe=oe.execute(oe.state,oe.delay))break}while(oe=re.shift());if(this._active=!1,fe){for(;oe=re.shift();)oe.unsubscribe();throw fe}}}},4986:(st,we,P)=>{P.d(we,{z:()=>O});var d=P(4408);const O=new(P(7565).v)(d.o)},6063:(st,we,P)=>{P.d(we,{l:()=>d});const d={now:()=>(d.delegate||Date).now(),delegate:void 0}},3410:(st,we,P)=>{P.d(we,{z:()=>d});const d={setTimeout(J,O,...se){const{delegate:oe}=d;return oe?.setTimeout?oe.setTimeout(J,O,...se):setTimeout(J,O,...se)},clearTimeout(J){const{delegate:O}=d;return(O?.clearTimeout||clearTimeout)(J)},delegate:void 0}},2202:(st,we,P)=>{P.d(we,{h:()=>J});const J=function d(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(st,we,P)=>{P.d(we,{L:()=>d});const d="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(st,we,P)=>{P.d(we,{_6:()=>re,jO:()=>se,yG:()=>oe});var d=P(576);function O(fe){return fe[fe.length-1]}function se(fe){return(0,d.m)(O(fe))?fe.pop():void 0}function oe(fe){return function J(fe){return fe&&(0,d.m)(fe.schedule)}(O(fe))?fe.pop():void 0}function re(fe,le){return"number"==typeof O(fe)?fe.pop():le}},8737:(st,we,P)=>{function d(J,O){if(J){const se=J.indexOf(O);0<=se&&J.splice(se,1)}}P.d(we,{P:()=>d})},3888:(st,we,P)=>{function d(J){const se=J(oe=>{Error.call(oe),oe.stack=(new Error).stack});return se.prototype=Object.create(Error.prototype),se.prototype.constructor=se,se}P.d(we,{d:()=>d})},2806:(st,we,P)=>{P.d(we,{O:()=>se,x:()=>O});var d=P(2416);let J=null;function O(oe){if(d.v.useDeprecatedSynchronousErrorHandling){const re=!J;if(re&&(J={errorThrown:!1,error:null}),oe(),re){const{errorThrown:fe,error:le}=J;if(J=null,fe)throw le}}else oe()}function se(oe){d.v.useDeprecatedSynchronousErrorHandling&&J&&(J.errorThrown=!0,J.error=oe)}},9672:(st,we,P)=>{function d(J,O,se,oe=0,re=!1){const fe=O.schedule(function(){se(),re?J.add(this.schedule(null,oe)):this.unsubscribe()},oe);if(J.add(fe),!re)return fe}P.d(we,{f:()=>d})},4671:(st,we,P)=>{function d(J){return J}P.d(we,{y:()=>d})},1144:(st,we,P)=>{P.d(we,{z:()=>d});const d=J=>J&&"number"==typeof J.length&&"function"!=typeof J},2206:(st,we,P)=>{P.d(we,{D:()=>J});var d=P(576);function J(O){return Symbol.asyncIterator&&(0,d.m)(O?.[Symbol.asyncIterator])}},576:(st,we,P)=>{function d(J){return"function"==typeof J}P.d(we,{m:()=>d})},3670:(st,we,P)=>{P.d(we,{c:()=>O});var d=P(8822),J=P(576);function O(se){return(0,J.m)(se[d.L])}},6495:(st,we,P)=>{P.d(we,{T:()=>O});var d=P(2202),J=P(576);function O(se){return(0,J.m)(se?.[d.h])}},8239:(st,we,P)=>{P.d(we,{t:()=>J});var d=P(576);function J(O){return(0,d.m)(O?.then)}},3260:(st,we,P)=>{P.d(we,{L:()=>se,Q:()=>O});var d=P(655),J=P(576);function O(oe){return(0,d.FC)(this,arguments,function*(){const fe=oe.getReader();try{for(;;){const{value:le,done:ce}=yield(0,d.qq)(fe.read());if(ce)return yield(0,d.qq)(void 0);yield yield(0,d.qq)(le)}}finally{fe.releaseLock()}})}function se(oe){return(0,J.m)(oe?.getReader)}},4482:(st,we,P)=>{P.d(we,{A:()=>J,e:()=>O});var d=P(576);function J(se){return(0,d.m)(se?.lift)}function O(se){return oe=>{if(J(oe))return oe.lift(function(re){try{return se(re,this)}catch(fe){this.error(fe)}});throw new TypeError("Unable to lift unknown Observable type")}}},9635:(st,we,P)=>{P.d(we,{U:()=>O,z:()=>J});var d=P(4671);function J(...se){return O(se)}function O(se){return 0===se.length?d.y:1===se.length?se[0]:function(re){return se.reduce((fe,le)=>le(fe),re)}}},7849:(st,we,P)=>{P.d(we,{h:()=>O});var d=P(2416),J=P(3410);function O(se){J.z.setTimeout(()=>{const{onUnhandledError:oe}=d.v;if(!oe)throw se;oe(se)})}},4532:(st,we,P)=>{function d(J){return new TypeError(`You provided ${null!==J&&"object"==typeof J?"an invalid object":`'${J}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}P.d(we,{z:()=>d})},655:(st,we,P)=>{function se(q,K){var ie={};for(var te in q)Object.prototype.hasOwnProperty.call(q,te)&&K.indexOf(te)<0&&(ie[te]=q[te]);if(null!=q&&"function"==typeof Object.getOwnPropertySymbols){var Le=0;for(te=Object.getOwnPropertySymbols(q);Le<te.length;Le++)K.indexOf(te[Le])<0&&Object.prototype.propertyIsEnumerable.call(q,te[Le])&&(ie[te[Le]]=q[te[Le]])}return ie}function le(q,K,ie,te){return new(ie||(ie=Promise))(function(Ne,ot){function Yt(kt){try{Mt(te.next(kt))}catch(ct){ot(ct)}}function an(kt){try{Mt(te.throw(kt))}catch(ct){ot(ct)}}function Mt(kt){kt.done?Ne(kt.value):function Le(Ne){return Ne instanceof ie?Ne:new ie(function(ot){ot(Ne)})}(kt.value).then(Yt,an)}Mt((te=te.apply(q,K||[])).next())})}function de(q){return this instanceof de?(this.v=q,this):new de(q)}function De(q,K,ie){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Le,te=ie.apply(q,K||[]),Ne=[];return Le={},ot("next"),ot("throw"),ot("return"),Le[Symbol.asyncIterator]=function(){return this},Le;function ot(Kt){te[Kt]&&(Le[Kt]=function(ar){return new Promise(function(Er,dt){Ne.push([Kt,ar,Er,dt])>1||Yt(Kt,ar)})})}function Yt(Kt,ar){try{!function an(Kt){Kt.value instanceof de?Promise.resolve(Kt.value.v).then(Mt,kt):ct(Ne[0][2],Kt)}(te[Kt](ar))}catch(Er){ct(Ne[0][3],Er)}}function Mt(Kt){Yt("next",Kt)}function kt(Kt){Yt("throw",Kt)}function ct(Kt,ar){Kt(ar),Ne.shift(),Ne.length&&Yt(Ne[0][0],Ne[0][1])}}function Pe(q){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ie,K=q[Symbol.asyncIterator];return K?K.call(q):(q=function W(q){var K="function"==typeof Symbol&&Symbol.iterator,ie=K&&q[K],te=0;if(ie)return ie.call(q);if(q&&"number"==typeof q.length)return{next:function(){return q&&te>=q.length&&(q=void 0),{value:q&&q[te++],done:!q}}};throw new TypeError(K?"Object is not iterable.":"Symbol.iterator is not defined.")}(q),ie={},te("next"),te("throw"),te("return"),ie[Symbol.asyncIterator]=function(){return this},ie);function te(Ne){ie[Ne]=q[Ne]&&function(ot){return new Promise(function(Yt,an){!function Le(Ne,ot,Yt,an){Promise.resolve(an).then(function(Mt){Ne({value:Mt,done:Yt})},ot)}(Yt,an,(ot=q[Ne](ot)).done,ot.value)})}}}P.d(we,{FC:()=>De,KL:()=>Pe,_T:()=>se,mG:()=>le,qq:()=>de})},4650:(st,we,P)=>{P.d(we,{$8M:()=>Ol,$Z:()=>SC,AFp:()=>Am,AaK:()=>le,CHM:()=>Ju,CRH:()=>Wr,CZH:()=>Sm,CqO:()=>xv,D6c:()=>HT,EJc:()=>Rm,EpF:()=>Av,F4k:()=>Mv,FYo:()=>pw,FiY:()=>Ds,GfV:()=>mw,Gpc:()=>j,JOm:()=>Gr,KtG:()=>Dl,LFG:()=>Be,LSH:()=>Jp,Lbi:()=>F_,Lck:()=>s_,MAs:()=>iE,MGl:()=>kg,MMx:()=>u_,MR2:()=>HD,NdJ:()=>wd,OlP:()=>on,Oqu:()=>Zc,P3R:()=>aw,PXZ:()=>tl,Q6J:()=>sE,QGY:()=>Pg,QP$:()=>On,Qsj:()=>XD,R0b:()=>Wi,RDi:()=>Js,Rgc:()=>Of,SBq:()=>zh,Sil:()=>AT,Suo:()=>pI,TTD:()=>Ko,TgZ:()=>bv,X6Q:()=>FT,XFs:()=>lt,Xpm:()=>Ho,Xts:()=>jy,Y36:()=>fd,YKP:()=>i_,YNc:()=>JC,Yjl:()=>qo,Yz7:()=>dt,Z0I:()=>Ir,ZZ4:()=>so,_Bn:()=>lm,_UZ:()=>Rg,_Vd:()=>ld,_c5:()=>$I,_uU:()=>Wc,aQg:()=>np,c2e:()=>CI,cJS:()=>Jr,cg1:()=>Qg,dDg:()=>j_,dqk:()=>Ct,eFA:()=>W_,ekj:()=>DE,eoX:()=>Yf,f3M:()=>Ke,g9A:()=>Mm,h0i:()=>Sa,hGG:()=>Hm,hij:()=>Dd,iGM:()=>fI,ifc:()=>Gt,ip1:()=>Tm,jDz:()=>rI,kL8:()=>Eb,lG2:()=>Go,lqb:()=>Lc,lri:()=>B_,n5z:()=>gc,oAB:()=>_n,oxw:()=>to,q4F:()=>yw,qLn:()=>Wh,qOj:()=>wv,qZA:()=>Tv,rWj:()=>AI,s9C:()=>Nv,sBO:()=>RI,sIi:()=>nf,s_b:()=>fm,soG:()=>Gf,tb:()=>L_,tp0:()=>b,uIk:()=>Sg,vHH:()=>de,vpe:()=>Vo,wAp:()=>wt,xp6:()=>rv,z2F:()=>ku,zSh:()=>Hy,zs3:()=>Bc});var d=P(7579),J=P(727),O=P(9751),se=P(6451),oe=P(3099);function re(i){for(let o in i)if(i[o]===re)return o;throw Error("Could not find renamed property on target object.")}function fe(i,o){for(const a in o)o.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=o[a])}function le(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(le).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const o=i.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function ce(i,o){return null==i||""===i?null===o?"":o:null==o||""===o?i:i+" "+o}const B=re({__forward_ref__:re});function j(i){return i.__forward_ref__=j,i.toString=function(){return le(this())},i}function W(i){return Ue(i)?i():i}function Ue(i){return"function"==typeof i&&i.hasOwnProperty(B)&&i.__forward_ref__===j}function Ie(i){return i&&!!i.\u0275providers}const nt="https://g.co/ng/security#xss";class de extends Error{constructor(o,a){super(function De(i,o){return`NG0${Math.abs(i)}${o?": "+o.trim():""}`}(o,a)),this.code=o}}function Ee(i){return"string"==typeof i?i:null==i?"":String(i)}function Fe(i,o){throw new de(-201,!1)}function kt(i,o){null==i&&function ct(i,o,a,c){throw new Error(`ASSERTION ERROR: ${i}`+(null==c?"":` [Expected=> ${a} ${c} ${o} <=Actual]`))}(o,i,null,"!=")}function dt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Jr(i){return{providers:i.providers||[],imports:i.imports||[]}}function Pr(i){return Dr(i,Cr)||Dr(i,un)}function Ir(i){return null!==Pr(i)}function Dr(i,o){return i.hasOwnProperty(o)?i[o]:null}function yi(i){return i&&(i.hasOwnProperty(Fs)||i.hasOwnProperty(kr))?i[Fs]:null}const Cr=re({\u0275prov:re}),Fs=re({\u0275inj:re}),un=re({ngInjectableDef:re}),kr=re({ngInjectorDef:re});var lt=(()=>((lt=lt||{})[lt.Default=0]="Default",lt[lt.Host=1]="Host",lt[lt.Self=2]="Self",lt[lt.SkipSelf=4]="SkipSelf",lt[lt.Optional=8]="Optional",lt))();let Zi;function mn(i){const o=Zi;return Zi=i,o}function br(i,o,a){const c=Pr(i);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:a&lt.Optional?null:void 0!==o?o:void Fe(le(i))}const Ct=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Dn={},yn="__NG_DI_FLAG__",_i="ngTempTokenPath",jo=/\n/gm,Yi="__source";let zt;function cr(i){const o=zt;return zt=i,o}function ki(i,o=lt.Default){if(void 0===zt)throw new de(-203,!1);return null===zt?br(i,void 0,o):zt.get(i,o&lt.Optional?null:void 0,o)}function Be(i,o=lt.Default){return(function vi(){return Zi}()||ki)(W(i),o)}function Ke(i,o=lt.Default){return Be(i,vt(o))}function vt(i){return typeof i>"u"||"number"==typeof i?i:0|(i.optional&&8)|(i.host&&1)|(i.self&&2)|(i.skipSelf&&4)}function Et(i){const o=[];for(let a=0;a<i.length;a++){const c=W(i[a]);if(Array.isArray(c)){if(0===c.length)throw new de(900,!1);let h,p=lt.Default;for(let v=0;v<c.length;v++){const E=c[v],D=U(E);"number"==typeof D?-1===D?h=E.token:p|=D:h=E}o.push(Be(h,p))}else o.push(Be(c))}return o}function xt(i,o){return i[yn]=o,i.prototype[yn]=o,i}function U(i){return i[yn]}function pe(i){return{toString:i}.toString()}var ee=(()=>((ee=ee||{})[ee.OnPush=0]="OnPush",ee[ee.Default=1]="Default",ee))(),Gt=(()=>{return(i=Gt||(Gt={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",Gt;var i})();const vn={},pt=[],Gn=re({\u0275cmp:re}),Vt=re({\u0275dir:re}),Ln=re({\u0275pipe:re}),co=re({\u0275mod:re}),lr=re({\u0275fac:re}),$o=re({__NG_ELEMENT_ID__:re});let rh=0;function Ho(i){return pe(()=>{const a=!0===i.standalone,c={},h={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===ee.OnPush,directiveDefs:null,pipeDefs:null,standalone:a,dependencies:a&&i.dependencies||null,getStandaloneInjector:null,selectors:i.selectors||pt,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||Gt.Emulated,id:"c"+rh++,styles:i.styles||pt,_:null,setInput:null,schemas:i.schemas||null,tView:null,findHostDirectiveDefs:null,hostDirectives:null},p=i.dependencies,v=i.features;return h.inputs=Gu(i.inputs,c),h.outputs=Gu(i.outputs),v&&v.forEach(E=>E(h)),h.directiveDefs=p?()=>("function"==typeof p?p():p).map(Hu).filter(ll):null,h.pipeDefs=p?()=>("function"==typeof p?p():p).map(An).filter(ll):null,h})}function Hu(i){return Wt(i)||Vn(i)}function ll(i){return null!==i}function _n(i){return pe(()=>({type:i.type,bootstrap:i.bootstrap||pt,declarations:i.declarations||pt,imports:i.imports||pt,exports:i.exports||pt,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function Gu(i,o){if(null==i)return vn;const a={};for(const c in i)if(i.hasOwnProperty(c)){let h=i[c],p=h;Array.isArray(h)&&(p=h[1],h=h[0]),a[h]=c,o&&(o[h]=p)}return a}const Go=Ho;function qo(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function Wt(i){return i[Gn]||null}function Vn(i){return i[Vt]||null}function An(i){return i[Ln]||null}function On(i){const o=Wt(i)||Vn(i)||An(i);return null!==o&&o.standalone}function Yn(i,o){const a=i[co]||null;if(!a&&!0===o)throw new Error(`Type ${le(i)} does not have '\u0275mod' property.`);return a}function Lr(i){return Array.isArray(i)&&"object"==typeof i[1]}function Ei(i){return Array.isArray(i)&&!0===i[1]}function zo(i){return 0!=(4&i.flags)}function Ii(i){return i.componentOffset>-1}function qu(i){return 1==(1&i.flags)}function Vr(i){return null!==i.template}function Wo(i){return 0!=(256&i[2])}function js(i,o){return i.hasOwnProperty(lr)?i[lr]:null}class gs{constructor(o,a,c){this.previousValue=o,this.currentValue=a,this.firstChange=c}isFirstChange(){return this.firstChange}}function Ko(){return $s}function $s(i){return i.type.prototype.ngOnChanges&&(i.setInput=La),Fa}function Fa(){const i=Yo(this),o=i?.current;if(o){const a=i.previous;if(a===vn)i.previous=o;else for(let c in o)a[c]=o[c];i.current=null,this.ngOnChanges(o)}}function La(i,o,a,c){const h=this.declaredInputs[a],p=Yo(i)||function Va(i,o){return i[ms]=o}(i,{previous:vn,current:null}),v=p.current||(p.current={}),E=p.previous,D=E[h];v[h]=new gs(D&&D.currentValue,o,E===vn),i[c]=o}Ko.ngInherit=!0;const ms="__ngSimpleChanges__";function Yo(i){return i[ms]||null}function Rn(i){for(;Array.isArray(i);)i=i[0];return i}function Hs(i,o){return Rn(o[i])}function Jn(i,o){return Rn(o[i.index])}function yo(i,o){return i.data[o]}function qn(i,o){const a=o[i];return Lr(a)?a:a[0]}function Xo(i){return 64==(64&i[2])}function Ui(i,o){return null==o?null:i[o]}function ea(i){i[18]=0}function ta(i,o){i[5]+=o;let a=i,c=i[3];for(;null!==c&&(1===o&&1===a[5]||-1===o&&0===a[5]);)c[5]+=o,a=c,c=c[3]}const bt={lFrame:Iy(null),bindingsEnabled:!0};function Ha(){return bt.bindingsEnabled}function Ce(){return bt.lFrame.lView}function Zt(){return bt.lFrame.tView}function Ju(i){return bt.lFrame.contextLView=i,i[8]}function Dl(i){return bt.lFrame.contextLView=null,i}function Xn(){let i=vo();for(;null!==i&&64===i.type;)i=i.parent;return i}function vo(){return bt.lFrame.currentTNode}function ti(i,o){const a=bt.lFrame;a.currentTNode=i,a.isParent=o}function qa(){return bt.lFrame.isParent}function Ji(){return bt.lFrame.bindingIndex++}function nc(i,o){const a=bt.lFrame;a.bindingIndex=a.bindingRootIndex=i,bl(o)}function bl(i){bt.lFrame.currentDirectiveIndex=i}function Tl(){return bt.lFrame.currentQueryIndex}function rc(i){bt.lFrame.currentQueryIndex=i}function Sl(i){const o=i[1];return 2===o.type?o.declTNode:1===o.type?i[6]:null}function uh(i,o,a){if(a&lt.SkipSelf){let h=o,p=i;for(;!(h=h.parent,null!==h||a&lt.Host||(h=Sl(p),null===h||(p=p[15],10&h.type))););if(null===h)return!1;o=h,i=p}const c=bt.lFrame=ch();return c.currentTNode=o,c.lView=i,!0}function za(i){const o=ch(),a=i[1];bt.lFrame=o,o.currentTNode=a.firstChild,o.lView=i,o.tView=a,o.contextLView=i,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function ch(){const i=bt.lFrame,o=null===i?null:i.child;return null===o?Iy(i):o}function Iy(i){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=o),o}function Rp(){const i=bt.lFrame;return bt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const Wa=Rp;function Np(){const i=Rp();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Br(){return bt.lFrame.selectedIndex}function ra(i){bt.lFrame.selectedIndex=i}function ln(){const i=bt.lFrame;return yo(i.tView,i.selectedIndex)}function vs(i,o){for(let a=o.directiveStart,c=o.directiveEnd;a<c;a++){const p=i.data[a].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:E,ngAfterViewInit:D,ngAfterViewChecked:T,ngOnDestroy:x}=p;v&&(i.contentHooks||(i.contentHooks=[])).push(-a,v),E&&((i.contentHooks||(i.contentHooks=[])).push(a,E),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,E)),D&&(i.viewHooks||(i.viewHooks=[])).push(-a,D),T&&((i.viewHooks||(i.viewHooks=[])).push(a,T),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,T)),null!=x&&(i.destroyHooks||(i.destroyHooks=[])).push(a,x)}}function ri(i,o,a){oc(i,o,3,a)}function Za(i,o,a,c){(3&i[2])===a&&oc(i,o,a,c)}function Di(i,o){let a=i[2];(3&a)===o&&(a&=2047,a+=1,i[2]=a)}function oc(i,o,a,c){const p=c??-1,v=o.length-1;let E=0;for(let D=void 0!==c?65535&i[18]:0;D<v;D++)if("number"==typeof o[D+1]){if(E=o[D],null!=c&&E>=c)break}else o[D]<0&&(i[18]+=65536),(E<p||-1==p)&&(Al(i,a,o,D),i[18]=(4294901760&i[18])+D+2),D++}function Al(i,o,a,c){const h=a[c]<0,p=a[c+1],E=i[h?-a[c]:a[c]];if(h){if(i[2]>>11<i[18]>>16&&(3&i[2])===o){i[2]+=2048;try{p.call(E)}finally{}}}else try{p.call(E)}finally{}}class ia{constructor(o,a,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=c}}function pn(i,o,a){let c=0;for(;c<a.length;){const h=a[c];if("number"==typeof h){if(0!==h)break;c++;const p=a[c++],v=a[c++],E=a[c++];i.setAttribute(o,v,E,p)}else{const p=h,v=a[++c];Co(p)?i.setProperty(o,p,v):i.setAttribute(o,p,v),c++}}return c}function Do(i){return 3===i||4===i||6===i}function Co(i){return 64===i.charCodeAt(0)}function ws(i,o){if(null!==o&&0!==o.length)if(null===i||0===i.length)i=o.slice();else{let a=-1;for(let c=0;c<o.length;c++){const h=o[c];"number"==typeof h?a=h:0===a||Ka(i,a,h,null,-1===a||2===a?o[++c]:null)}}return i}function Ka(i,o,a,c,h){let p=0,v=i.length;if(-1===o)v=-1;else for(;p<i.length;){const E=i[p++];if("number"==typeof E){if(E===o){v=-1;break}if(E>o){v=p-1;break}}}for(;p<i.length;){const E=i[p];if("number"==typeof E)break;if(E===a){if(null===c)return void(null!==h&&(i[p+1]=h));if(c===i[p+1])return void(i[p+2]=h)}p++,null!==c&&p++,null!==h&&p++}-1!==v&&(i.splice(v,0,o),p=v+1),i.splice(p++,0,a),null!==c&&i.splice(p++,0,c),null!==h&&i.splice(p++,0,h)}function xl(i){return-1!==i}function Ya(i){return 32767&i}function bo(i,o){let a=function Qa(i){return i>>16}(i),c=o;for(;a>0;)c=c[15],a--;return c}let Xi=!0;function Ja(i){const o=Xi;return Xi=i,o}let eu=0;const Mr={};function To(i,o){const a=oa(i,o);if(-1!==a)return a;const c=o[1];c.firstCreatePass&&(i.injectorIndex=o.length,zs(c.data,i),zs(o,null),zs(c.blueprint,null));const h=tu(i,o),p=i.injectorIndex;if(xl(h)){const v=Ya(h),E=bo(h,o),D=E[1].data;for(let T=0;T<8;T++)o[p+T]=E[v+T]|D[v+T]}return o[p+8]=h,p}function zs(i,o){i.push(0,0,0,0,0,0,0,0,o)}function oa(i,o){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===o[i.injectorIndex+8]?-1:i.injectorIndex}function tu(i,o){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,c=null,h=o;for(;null!==h;){if(c=Nl(h),null===c)return-1;if(a++,h=h[15],-1!==c.injectorIndex)return c.injectorIndex|a<<16}return-1}function dc(i,o,a){!function lc(i,o,a){let c;"string"==typeof a?c=a.charCodeAt(0)||0:a.hasOwnProperty($o)&&(c=a[$o]),null==c&&(c=a[$o]=eu++);const h=255&c;o.data[i+(h>>5)]|=1<<h}(i,o,a)}function es(i,o,a){if(a&lt.Optional||void 0!==i)return i;Fe()}function hc(i,o,a,c){if(a&lt.Optional&&void 0===c&&(c=null),0==(a&(lt.Self|lt.Host))){const h=i[9],p=mn(void 0);try{return h?h.get(o,c,a&lt.Optional):br(o,c,a&lt.Optional)}finally{mn(p)}}return es(c,0,a)}function hh(i,o,a,c=lt.Default,h){if(null!==i){if(1024&o[2]){const v=function ph(i,o,a,c,h){let p=i,v=o;for(;null!==p&&null!==v&&1024&v[2]&&!(256&v[2]);){const E=Ci(p,v,a,c|lt.Self,Mr);if(E!==Mr)return E;let D=p.parent;if(!D){const T=v[21];if(T){const x=T.get(a,Mr,c);if(x!==Mr)return x}D=Nl(v),v=v[15]}p=D}return h}(i,o,a,c,Mr);if(v!==Mr)return v}const p=Ci(i,o,a,c,Mr);if(p!==Mr)return p}return hc(o,a,c,h)}function Ci(i,o,a,c,h){const p=function pc(i){if("string"==typeof i)return i.charCodeAt(0)||0;const o=i.hasOwnProperty($o)?i[$o]:void 0;return"number"==typeof o?o>=0?255&o:fh:o}(a);if("function"==typeof p){if(!uh(o,i,c))return c&lt.Host?es(h,0,c):hc(o,a,c,h);try{const v=p(c);if(null!=v||c&lt.Optional)return v;Fe()}finally{Wa()}}else if("number"==typeof p){let v=null,E=oa(i,o),D=-1,T=c&lt.Host?o[16][6]:null;for((-1===E||c&lt.SkipSelf)&&(D=-1===E?tu(i,o):o[E+8],-1!==D&&$i(c,!1)?(v=o[1],E=Ya(D),o=bo(D,o)):E=-1);-1!==E;){const x=o[1];if(nu(p,E,x.data)){const k=fc(E,o,a,v,c,T);if(k!==Mr)return k}D=o[E+8],-1!==D&&$i(c,o[1].data[E+8]===T)&&nu(p,E,o)?(v=x,E=Ya(D),o=bo(D,o)):E=-1}}return h}function fc(i,o,a,c,h,p){const v=o[1],E=v.data[i+8],x=aa(E,v,a,null==c?Ii(E)&&Xi:c!=v&&0!=(3&E.type),h&lt.Host&&p===E);return null!==x?bi(o,v,x,E):Mr}function aa(i,o,a,c,h){const p=i.providerIndexes,v=o.data,E=1048575&p,D=i.directiveStart,x=p>>20,G=h?E+x:i.directiveEnd;for(let X=c?E:E+x;X<G;X++){const me=v[X];if(X<D&&a===me||X>=D&&me.type===a)return X}if(h){const X=v[D];if(X&&Vr(X)&&X.type===a)return D}return null}function bi(i,o,a,c){let h=i[a];const p=o.data;if(function ii(i){return i instanceof ia}(h)){const v=h;v.resolving&&function Se(i,o){const a=o?`. Dependency path: ${o.join(" > ")} > ${i}`:"";throw new de(-200,`Circular dependency in DI detected for ${i}${a}`)}(function Pe(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():Ee(i)}(p[a]));const E=Ja(v.canSeeViewProviders);v.resolving=!0;const D=v.injectImpl?mn(v.injectImpl):null;uh(i,c,lt.Default);try{h=i[a]=v.factory(void 0,p,i,c),o.firstCreatePass&&a>=c.directiveStart&&function dh(i,o,a){const{ngOnChanges:c,ngOnInit:h,ngDoCheck:p}=o.type.prototype;if(c){const v=$s(o);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,v),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,v)}h&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,h),p&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,p),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,p))}(a,p[a],o)}finally{null!==D&&mn(D),Ja(E),v.resolving=!1,Wa()}}return h}function nu(i,o,a){return!!(a[o+(i>>5)]&1<<i)}function $i(i,o){return!(i&lt.Self||i&lt.Host&&o)}class si{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,c){return hh(this._tNode,this._lView,o,vt(c),a)}}function fh(){return new si(Xn(),Ce())}function gc(i){return pe(()=>{const o=i.prototype.constructor,a=o[lr]||mc(o),c=Object.prototype;let h=Object.getPrototypeOf(i.prototype).constructor;for(;h&&h!==c;){const p=h[lr]||mc(h);if(p&&p!==a)return p;h=Object.getPrototypeOf(h)}return p=>new p})}function mc(i){return Ue(i)?()=>{const o=mc(W(i));return o&&o()}:js(i)}function Nl(i){const o=i[1],a=o.type;return 2===a?o.declTNode:1===a?i[6]:null}function Ol(i){return function Rl(i,o){if("class"===o)return i.classes;if("style"===o)return i.styles;const a=i.attrs;if(a){const c=a.length;let h=0;for(;h<c;){const p=a[h];if(Do(p))break;if(0===p)h+=2;else if("number"==typeof p)for(h++;h<c&&"string"==typeof a[h];)h++;else{if(p===o)return a[h+1];h+=2}}}return null}(Xn(),i)}const So="__parameters__";function ru(i,o,a){return pe(()=>{const c=function gh(i){return function(...a){if(i){const c=i(...a);for(const h in c)this[h]=c[h]}}}(o);function h(...p){if(this instanceof h)return c.apply(this,p),this;const v=new h(...p);return E.annotation=v,E;function E(D,T,x){const k=D.hasOwnProperty(So)?D[So]:Object.defineProperty(D,So,{value:[]})[So];for(;k.length<=x;)k.push(null);return(k[x]=k[x]||[]).push(v),D}}return a&&(h.prototype=Object.create(a.prototype)),h.prototype.ngMetadataName=i,h.annotationCls=h,h})}class on{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=dt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Hi(i,o){i.forEach(a=>Array.isArray(a)?Hi(a,o):o(a))}function su(i,o,a){o>=i.length?i.push(a):i.splice(o,0,a)}function la(i,o){return o>=i.length-1?i.pop():i.splice(o,1)[0]}function Ut(i,o,a){let c=We(i,o);return c>=0?i[1|c]=a:(c=~c,function Ul(i,o,a,c){let h=i.length;if(h==o)i.push(a,c);else if(1===h)i.push(c,i[0]),i[0]=a;else{for(h--,i.push(i[h-1],i[h]);h>o;)i[h]=i[h-2],h--;i[o]=a,i[o+1]=c}}(i,c,o,a)),c}function Gi(i,o){const a=We(i,o);if(a>=0)return i[1|a]}function We(i,o){return function ai(i,o,a){let c=0,h=i.length>>a;for(;h!==c;){const p=c+(h-c>>1),v=i[p<<a];if(o===v)return p<<a;v>o?h=p:c=p+1}return~(h<<a)}(i,o,1)}const Ds=xt(ru("Optional"),8),b=xt(ru("SkipSelf"),4);var Gr=(()=>((Gr=Gr||{})[Gr.Important=1]="Important",Gr[Gr.DashCase=2]="DashCase",Gr))();const li=new Map;let Lp=0;const zl="__ngContext__";function Rr(i,o){Lr(o)?(i[zl]=o[20],function Vp(i){li.set(i[20],i)}(o)):i[zl]=o}function Tc(i,o){return undefined(i,o)}function Ss(i){const o=i[3];return Ei(o)?o[3]:o}function Ro(i){return Wl(i[13])}function Sh(i){return Wl(i[4])}function Wl(i){for(;null!==i&&!Ei(i);)i=i[4];return i}function Ys(i,o,a,c,h){if(null!=c){let p,v=!1;Ei(c)?p=c:Lr(c)&&(v=!0,c=c[0]);const E=Rn(c);0===i&&null!==a?null==h?du(o,a,E):pa(o,a,E,h||null,!0):1===i&&null!==a?pa(o,a,E,h||null,!0):2===i?function Qs(i,o,a){const c=Oc(i,o);c&&function fu(i,o,a,c){i.removeChild(o,a,c)}(i,c,o,a)}(o,E,v):3===i&&o.destroyNode(E),null!=p&&function Ph(i,o,a,c,h){const p=a[7];p!==Rn(a)&&Ys(o,i,c,p,h);for(let E=10;E<a.length;E++){const D=a[E];gu(D[1],D,i,o,c,p)}}(o,i,p,a,h)}}function Ac(i,o,a){return i.createElement(o,a)}function Mc(i,o){const a=i[9],c=a.indexOf(o),h=o[3];512&o[2]&&(o[2]&=-513,ta(h,-1)),a.splice(c,1)}function xc(i,o){if(i.length<=10)return;const a=10+o,c=i[a];if(c){const h=c[17];null!==h&&h!==i&&Mc(h,c),o>0&&(i[a-1][4]=c[4]);const p=la(i,10+o);!function xy(i,o){gu(i,o,o[11],2,null,null),o[0]=null,o[6]=null}(c[1],c);const v=p[19];null!==v&&v.detachView(p[1]),c[3]=null,c[4]=null,c[2]&=-65}return c}function Rc(i,o){if(!(128&o[2])){const a=o[11];a.destroyNode&&gu(i,o,a,3,null,null),function xh(i){let o=i[13];if(!o)return Rh(i[1],i);for(;o;){let a=null;if(Lr(o))a=o[13];else{const c=o[10];c&&(a=c)}if(!a){for(;o&&!o[4]&&o!==i;)Lr(o)&&Rh(o[1],o),o=o[3];null===o&&(o=i),Lr(o)&&Rh(o[1],o),a=o&&o[4]}o=a}}(o)}}function Rh(i,o){if(!(128&o[2])){o[2]&=-65,o[2]|=128,function Nh(i,o){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let c=0;c<a.length;c+=2){const h=o[a[c]];if(!(h instanceof ia)){const p=a[c+1];if(Array.isArray(p))for(let v=0;v<p.length;v+=2){const E=h[p[v]],D=p[v+1];try{D.call(E)}finally{}}else try{p.call(h)}finally{}}}}(i,o),function No(i,o){const a=i.cleanup,c=o[7];let h=-1;if(null!==a)for(let p=0;p<a.length-1;p+=2)if("string"==typeof a[p]){const v=a[p+3];v>=0?c[h=v]():c[h=-v].unsubscribe(),p+=2}else{const v=c[h=a[p+1]];a[p].call(v)}if(null!==c){for(let p=h+1;p<c.length;p++)(0,c[p])();o[7]=null}}(i,o),1===o[1].type&&o[11].destroy();const a=o[17];if(null!==a&&Ei(o[3])){a!==o[3]&&Mc(a,o);const c=o[19];null!==c&&c.detachView(i)}!function gr(i){li.delete(i[20])}(o)}}function Oy(i,o,a){return function Gp(i,o,a){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return a[0];{const{componentOffset:h}=c;if(h>-1){const{encapsulation:p}=i.data[c.directiveStart+h];if(p===Gt.None||p===Gt.Emulated)return null}return Jn(c,a)}}(i,o.parent,a)}function pa(i,o,a,c,h){i.insertBefore(o,a,c,h)}function du(i,o,a){i.appendChild(o,a)}function hu(i,o,a,c,h){null!==c?pa(i,o,a,c,h):du(i,o,a)}function Oc(i,o){return i.parentNode(o)}let Vh,yu,Yl=function Oo(i,o,a){return 40&i.type?Jn(i,a):null};function Jl(i,o,a,c){const h=Oy(i,c,o),p=o[11],E=function Oh(i,o,a){return Yl(i,o,a)}(c.parent||o[6],c,o);if(null!=h)if(Array.isArray(a))for(let D=0;D<a.length;D++)hu(p,h,a[D],E,!1);else hu(p,h,a,E,!1)}function Po(i,o){if(null!==o){const a=o.type;if(3&a)return Jn(o,i);if(4&a)return qr(-1,i[o.index]);if(8&a){const c=o.child;if(null!==c)return Po(i,c);{const h=i[o.index];return Ei(h)?qr(-1,h):Rn(h)}}if(32&a)return Tc(o,i)()||Rn(i[o.index]);{const c=pu(i,o);return null!==c?Array.isArray(c)?c[0]:Po(Ss(i[16]),c):Po(i,o.next)}}return null}function pu(i,o){return null!==o?i[16][6].projection[o.projection]:null}function qr(i,o){const a=10+i+1;if(a<o.length){const c=o[a],h=c[1].firstChild;if(null!==h)return Po(c,h)}return o[7]}function Xl(i,o,a,c,h,p,v){for(;null!=a;){const E=c[a.index],D=a.type;if(v&&0===o&&(E&&Rr(Rn(E),c),a.flags|=2),32!=(32&a.flags))if(8&D)Xl(i,o,a.child,c,h,p,!1),Ys(o,i,h,E,p);else if(32&D){const T=Tc(a,c);let x;for(;x=T();)Ys(o,i,h,x,p);Ys(o,i,h,E,p)}else 16&D?qi(i,o,c,a,h,p):Ys(o,i,h,E,p);a=v?a.projectionNext:a.next}}function gu(i,o,a,c,h,p){Xl(a,c,i.firstChild,o,h,p,!1)}function qi(i,o,a,c,h,p){const v=a[16],D=v[6].projection[c.projection];if(Array.isArray(D))for(let T=0;T<D.length;T++)Ys(o,i,h,D[T],p);else Xl(i,o,D,v[3],h,p,!0)}function As(i,o,a){""===a?i.removeAttribute(o,"class"):i.setAttribute(o,"class",a)}function kh(i,o,a){const{mergedAttrs:c,classes:h,styles:p}=a;null!==c&&pn(i,o,c),null!==h&&As(i,o,h),null!==p&&function td(i,o,a){i.setAttribute(o,"style",a)}(i,o,p)}function Js(i){Vh=i}function ky(i){return function rd(){if(void 0===yu&&(yu=null,Ct.trustedTypes))try{yu=Ct.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return yu}()?.createScriptURL(i)||i}class Zp{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${nt})`}}function _(i){return i instanceof Zp?i.changingThisBreaksApplicationSecurity:i}function S(i,o){const a=function R(i){return i instanceof Zp&&i.getTypeName()||null}(i);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see ${nt})`)}return a===o}const Yp=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var tr=(()=>((tr=tr||{})[tr.NONE=0]="NONE",tr[tr.HTML=1]="HTML",tr[tr.STYLE=2]="STYLE",tr[tr.SCRIPT=3]="SCRIPT",tr[tr.URL=4]="URL",tr[tr.RESOURCE_URL=5]="RESOURCE_URL",tr))();function Jp(i){const o=ma();return o?o.sanitize(tr.URL,i)||"":S(i,"URL")?_(i):function Xs(i){return(i=String(i)).match(Yp)?i:"unsafe:"+i}(Ee(i))}function ad(i){const o=ma();if(o)return ky(o.sanitize(tr.RESOURCE_URL,i)||"");if(S(i,"ResourceURL"))return ky(_(i));throw new de(904,!1)}function aw(i,o,a){return function Xp(i,o){return"src"===o&&("embed"===i||"frame"===i||"iframe"===i||"media"===i||"script"===i)||"href"===o&&("base"===i||"link"===i)?ad:Jp}(o,a)(i)}function ma(){const i=Ce();return i&&i[12]}const jy=new on("ENVIRONMENT_INITIALIZER"),uw=new on("INJECTOR",-1),ud=new on("INJECTOR_DEF_TYPES");class cd{get(o,a=Dn){if(a===Dn){const c=new Error(`NullInjectorError: No provider for ${le(o)}!`);throw c.name="NullInjectorError",c}return a}}function HD(i){return{\u0275providers:i}}function GD(...i){return{\u0275providers:cw(0,i),\u0275fromNgModule:!0}}function cw(i,...o){const a=[],c=new Set;let h;return Hi(o,p=>{const v=p;$y(v,a,[],c)&&(h||(h=[]),h.push(v))}),void 0!==h&&lw(h,a),a}function lw(i,o){for(let a=0;a<i.length;a++){const{providers:h}=i[a];dw(h,p=>{o.push(p)})}}function $y(i,o,a,c){if(!(i=W(i)))return!1;let h=null,p=yi(i);const v=!p&&Wt(i);if(p||v){if(v&&!v.standalone)return!1;h=i}else{const D=i.ngModule;if(p=yi(D),!p)return!1;h=D}const E=c.has(h);if(v){if(E)return!1;if(c.add(h),v.dependencies){const D="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const T of D)$y(T,o,a,c)}}else{if(!p)return!1;{if(null!=p.imports&&!E){let T;c.add(h);try{Hi(p.imports,x=>{$y(x,o,a,c)&&(T||(T=[]),T.push(x))})}finally{}void 0!==T&&lw(T,o)}if(!E){const T=js(h)||(()=>new h);o.push({provide:h,useFactory:T,deps:pt},{provide:ud,useValue:h,multi:!0},{provide:jy,useValue:()=>Be(h),multi:!0})}const D=p.providers;null==D||E||dw(D,x=>{o.push(x)})}}return h!==i&&void 0!==i.providers}function dw(i,o){for(let a of i)Ie(a)&&(a=a.\u0275providers),Array.isArray(a)?dw(a,o):o(a)}const qD=re({provide:String,useValue:re});function $h(i){return null!==i&&"object"==typeof i&&qD in i}function Fc(i){return"function"==typeof i}const Hy=new on("Set Injector scope."),eg={},WD={};let Gy;function tg(){return void 0===Gy&&(Gy=new cd),Gy}class Lc{}class hw extends Lc{constructor(o,a,c,h){super(),this.parent=a,this.source=c,this.scopes=h,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Wy(o,v=>this.processProvider(v)),this.records.set(uw,Iu(void 0,this)),h.has("environment")&&this.records.set(Lc,Iu(void 0,this));const p=this.records.get(Hy);null!=p&&"string"==typeof p.value&&this.scopes.add(p.value),this.injectorDefTypes=new Set(this.get(ud.multi,pt,lt.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const a=cr(this),c=mn(void 0);try{return o()}finally{cr(a),mn(c)}}get(o,a=Dn,c=lt.Default){this.assertNotDestroyed(),c=vt(c);const h=cr(this),p=mn(void 0);try{if(!(c&lt.SkipSelf)){let E=this.records.get(o);if(void 0===E){const D=function YD(i){return"function"==typeof i||"object"==typeof i&&i instanceof on}(o)&&Pr(o);E=D&&this.injectableDefInScope(D)?Iu(ng(o),eg):null,this.records.set(o,E)}if(null!=E)return this.hydrate(o,E)}return(c&lt.Self?tg():this.parent).get(o,a=c&lt.Optional&&a===Dn?null:a)}catch(v){if("NullInjectorError"===v.name){if((v[_i]=v[_i]||[]).unshift(le(o)),h)throw v;return function L(i,o,a,c){const h=i[_i];throw o[Yi]&&h.unshift(o[Yi]),i.message=function z(i,o,a,c=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.slice(2):i;let h=le(o);if(Array.isArray(o))h=o.map(le).join(" -> ");else if("object"==typeof o){let p=[];for(let v in o)if(o.hasOwnProperty(v)){let E=o[v];p.push(v+":"+("string"==typeof E?JSON.stringify(E):le(E)))}h=`{${p.join(", ")}}`}return`${a}${c?"("+c+")":""}[${h}]: ${i.replace(jo,"\n  ")}`}("\n"+i.message,h,a,c),i.ngTokenPath=h,i[_i]=null,i}(v,o,"R3InjectorError",this.source)}throw v}finally{mn(p),cr(h)}}resolveInjectorInitializers(){const o=cr(this),a=mn(void 0);try{const c=this.get(jy.multi,pt,lt.Self);for(const h of c)h()}finally{cr(o),mn(a)}}toString(){const o=[],a=this.records;for(const c of a.keys())o.push(le(c));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new de(205,!1)}processProvider(o){let a=Fc(o=W(o))?o:W(o&&o.provide);const c=function qy(i){return $h(i)?Iu(void 0,i.useValue):Iu(zy(i),eg)}(o);if(Fc(o)||!0!==o.multi)this.records.get(a);else{let h=this.records.get(a);h||(h=Iu(void 0,eg,!0),h.factory=()=>Et(h.multi),this.records.set(a,h)),a=o,h.multi.push(o)}this.records.set(a,c)}hydrate(o,a){return a.value===eg&&(a.value=WD,a.value=a.factory()),"object"==typeof a.value&&a.value&&function KD(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(o){if(!o.providedIn)return!1;const a=W(o.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}}function ng(i){const o=Pr(i),a=null!==o?o.factory:js(i);if(null!==a)return a;if(i instanceof on)throw new de(204,!1);if(i instanceof Function)return function ZD(i){const o=i.length;if(o>0)throw function Ao(i,o){const a=[];for(let c=0;c<i;c++)a.push(o);return a}(o,"?"),new de(204,!1);const a=function uo(i){const o=i&&(i[Cr]||i[un]);if(o){const a=function hs(i){if(i.hasOwnProperty("name"))return i.name;const o=(""+i).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),o}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new de(204,!1)}function zy(i,o,a){let c;if(Fc(i)){const h=W(i);return js(h)||ng(h)}if($h(i))c=()=>W(i.useValue);else if(function kc(i){return!(!i||!i.useFactory)}(i))c=()=>i.useFactory(...Et(i.deps||[]));else if(function Hh(i){return!(!i||!i.useExisting)}(i))c=()=>Be(W(i.useExisting));else{const h=W(i&&(i.useClass||i.provide));if(!function rg(i){return!!i.deps}(i))return js(h)||ng(h);c=()=>new h(...Et(i.deps))}return c}function Iu(i,o,a=!1){return{factory:i,value:o,multi:a?[]:void 0}}function Wy(i,o){for(const a of i)Array.isArray(a)?Wy(a,o):a&&Ie(a)?Wy(a.\u0275providers,o):o(a)}class QD{}class Gh{}class ig{resolveComponentFactory(o){throw function fw(i){const o=Error(`No component factory found for ${le(i)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=i,o}(o)}}let ld=(()=>{class i{}return i.NULL=new ig,i})();function qh(){return Vc(Xn(),Ce())}function Vc(i,o){return new zh(Jn(i,o))}let zh=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=qh,i})();function JD(i){return i instanceof zh?i.nativeElement:i}class pw{}let XD=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function eC(){const i=Ce(),a=qn(Xn().index,i);return(Lr(a)?a:i)[11]}(),i})(),gw=(()=>{class i{}return i.\u0275prov=dt({token:i,providedIn:"root",factory:()=>null}),i})();class mw{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const yw=new mw("15.0.4"),Yy={};function Jy(i){return i.ngOriginalError}class Wh{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o);this._console.error("ERROR",o),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&Jy(o);for(;a&&Jy(a);)a=Jy(a);return a||null}}function ya(i){return i instanceof Function?i():i}function Cw(i,o,a){let c=i.length;for(;;){const h=i.indexOf(o,a);if(-1===h)return h;if(0===h||i.charCodeAt(h-1)<=32){const p=o.length;if(h+p===c||i.charCodeAt(h+p)<=32)return h}a=h+1}}const ev="ng-template";function hd(i,o,a){let c=0;for(;c<i.length;){let h=i[c++];if(a&&"class"===h){if(h=i[c],-1!==Cw(h.toLowerCase(),o,0))return!0}else if(1===h){for(;c<i.length&&"string"==typeof(h=i[c++]);)if(h.toLowerCase()===o)return!0;return!1}}return!1}function sg(i){return 4===i.type&&i.value!==ev}function sC(i,o,a){return o===(4!==i.type||a?i.value:ev)}function bw(i,o,a){let c=4;const h=i.attrs||[],p=function oC(i){for(let o=0;o<i.length;o++)if(Do(i[o]))return o;return i.length}(h);let v=!1;for(let E=0;E<o.length;E++){const D=o[E];if("number"!=typeof D){if(!v)if(4&c){if(c=2|1&c,""!==D&&!sC(i,D,a)||""===D&&1===o.length){if(Rs(c))return!1;v=!0}}else{const T=8&c?D:o[++E];if(8&c&&null!==i.attrs){if(!hd(i.attrs,T,a)){if(Rs(c))return!1;v=!0}continue}const k=tv(8&c?"class":D,h,sg(i),a);if(-1===k){if(Rs(c))return!1;v=!0;continue}if(""!==T){let G;G=k>p?"":h[k+1].toLowerCase();const X=8&c?G:null;if(X&&-1!==Cw(X,T,0)||2&c&&T!==G){if(Rs(c))return!1;v=!0}}}}else{if(!v&&!Rs(c)&&!Rs(D))return!1;if(v&&Rs(D))continue;v=!1,c=D|1&c}}return Rs(c)||v}function Rs(i){return 0==(1&i)}function tv(i,o,a,c){if(null===o)return-1;let h=0;if(c||!a){let p=!1;for(;h<o.length;){const v=o[h];if(v===i)return h;if(3===v||6===v)p=!0;else{if(1===v||2===v){let E=o[++h];for(;"string"==typeof E;)E=o[++h];continue}if(4===v)break;if(0===v){h+=4;continue}}h+=p?1:2}return-1}return function aC(i,o){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const c=i[a];if("number"==typeof c)return-1;if(c===o)return a;a++}return-1}(o,i)}function nv(i,o,a=!1){for(let c=0;c<o.length;c++)if(bw(i,o[c],a))return!0;return!1}function Sw(i,o){return i?":not("+o.trim()+")":o}function cC(i){let o=i[0],a=1,c=2,h="",p=!1;for(;a<i.length;){let v=i[a];if("string"==typeof v)if(2&c){const E=i[++a];h+="["+v+(E.length>0?'="'+E+'"':"")+"]"}else 8&c?h+="."+v:4&c&&(h+=" "+v);else""!==h&&!Rs(v)&&(o+=Sw(p,h),h=""),c=v,p=p||!Rs(c);a++}return""!==h&&(o+=Sw(p,h)),o}const Ft={};function rv(i){Aw(Zt(),Ce(),Br()+i,!1)}function Aw(i,o,a,c){if(!c)if(3==(3&o[2])){const p=i.preOrderCheckHooks;null!==p&&ri(o,p,a)}else{const p=i.preOrderHooks;null!==p&&Za(o,p,0,a)}ra(a)}function yC(i,o=null,a=null,c){const h=vC(i,o,a,c);return h.resolveInjectorInitializers(),h}function vC(i,o=null,a=null,c,h=new Set){const p=[a||pt,GD(i)];return c=c||("object"==typeof i?void 0:le(i)),new hw(p,o||tg(),c||null,h)}let Bc=(()=>{class i{static create(a,c){if(Array.isArray(a))return yC({name:""},c,a,"");{const h=a.name??"";return yC({name:h},a.parent,a.providers,h)}}}return i.THROW_IF_NOT_FOUND=Dn,i.NULL=new cd,i.\u0275prov=dt({token:i,providedIn:"any",factory:()=>Be(uw)}),i.__NG_ELEMENT_ID__=-1,i})();function fd(i,o=lt.Default){const a=Ce();return null===a?Be(i,o):hh(Xn(),a,W(i),o)}function SC(){throw new Error("invalid")}function Yh(i,o){const a=i.contentQueries;if(null!==a)for(let c=0;c<a.length;c+=2){const h=a[c],p=a[c+1];if(-1!==p){const v=i.data[p];rc(h),v.contentQueries(2,o[p],p)}}}function cg(i,o,a,c,h,p,v,E,D,T,x){const k=o.blueprint.slice();return k[0]=h,k[2]=76|c,(null!==x||i&&1024&i[2])&&(k[2]|=1024),ea(k),k[3]=k[15]=i,k[8]=a,k[10]=v||i&&i[10],k[11]=E||i&&i[11],k[12]=D||i&&i[12]||null,k[9]=T||i&&i[9]||null,k[6]=p,k[20]=function Hl(){return Lp++}(),k[21]=x,k[16]=2==o.type?i[16]:k,k}function $c(i,o,a,c,h){let p=i.data[o];if(null===p)p=function lg(i,o,a,c,h){const p=vo(),v=qa(),D=i.data[o]=function RC(i,o,a,c,h,p){return{type:a,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?p:p&&p.parent,a,o,c,h);return null===i.firstChild&&(i.firstChild=D),null!==p&&(v?null==p.child&&null!==D.parent&&(p.child=D):null===p.next&&(p.next=D)),D}(i,o,a,c,h),function xp(){return bt.lFrame.inI18n}()&&(p.flags|=32);else if(64&p.type){p.type=a,p.value=c,p.attrs=h;const v=function Ga(){const i=bt.lFrame,o=i.currentTNode;return i.isParent?o:o.parent}();p.injectorIndex=null===v?-1:v.injectorIndex}return ti(p,!0),p}function Hc(i,o,a,c){if(0===a)return-1;const h=o.length;for(let p=0;p<a;p++)o.push(c),i.blueprint.push(c),i.data.push(null);return h}function nr(i,o,a){za(o);try{const c=i.viewQuery;null!==c&&fv(1,c,a);const h=i.template;null!==h&&cv(i,o,h,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&Yh(i,o),i.staticViewQueries&&fv(2,i.viewQuery,a);const p=i.components;null!==p&&function xC(i,o){for(let a=0;a<o.length;a++)hv(i,o[a])}(o,p)}catch(c){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),c}finally{o[2]&=-5,Np()}}function zi(i,o,a,c){const h=o[2];if(128!=(128&h)){za(o);try{ea(o),function ec(i){return bt.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&cv(i,o,a,2,c);const v=3==(3&h);if(v){const T=i.preOrderCheckHooks;null!==T&&ri(o,T,null)}else{const T=i.preOrderHooks;null!==T&&Za(o,T,0,null),Di(o,0)}if(function Mi(i){for(let o=Ro(i);null!==o;o=Sh(o)){if(!o[2])continue;const a=o[9];for(let c=0;c<a.length;c++){const h=a[c],p=h[3];0==(512&h[2])&&ta(p,1),h[2]|=512}}}(o),function jC(i){for(let o=Ro(i);null!==o;o=Sh(o))for(let a=10;a<o.length;a++){const c=o[a],h=c[1];Xo(c)&&zi(h,c,h.template,c[8])}}(o),null!==i.contentQueries&&Yh(i,o),v){const T=i.contentCheckHooks;null!==T&&ri(o,T)}else{const T=i.contentHooks;null!==T&&Za(o,T,1),Di(o,1)}!function AC(i,o){const a=i.hostBindingOpCodes;if(null!==a)try{for(let c=0;c<a.length;c++){const h=a[c];if(h<0)ra(~h);else{const p=h,v=a[++c],E=a[++c];nc(v,p),E(2,o[p])}}}finally{ra(-1)}}(i,o);const E=i.components;null!==E&&function MC(i,o){for(let a=0;a<o.length;a++)gg(i,o[a])}(o,E);const D=i.viewQuery;if(null!==D&&fv(2,D,c),v){const T=i.viewCheckHooks;null!==T&&ri(o,T)}else{const T=i.viewHooks;null!==T&&Za(o,T,2),Di(o,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),o[2]&=-41,512&o[2]&&(o[2]&=-513,ta(o[3],-1))}finally{Np()}}}function cv(i,o,a,c,h){const p=Br(),v=2&c;try{ra(-1),v&&o.length>22&&Aw(i,o,22,!1),a(c,h)}finally{ra(p)}}function pd(i,o,a){if(zo(o)){const h=o.directiveEnd;for(let p=o.directiveStart;p<h;p++){const v=i.data[p];v.contentQueries&&v.contentQueries(1,a[p],p)}}}function lv(i,o,a){!Ha()||(function bu(i,o,a,c){const h=a.directiveStart,p=a.directiveEnd;Ii(a)&&function VC(i,o,a){const c=Jn(o,i),h=Vw(a),p=i[10],v=gd(i,cg(i,h,null,a.onPush?32:16,c,o,p,p.createRenderer(c,a),null,null,null));i[o.index]=v}(o,a,i.data[h+a.componentOffset]),i.firstCreatePass||To(a,o),Rr(c,o);const v=a.initialInputs;for(let E=h;E<p;E++){const D=i.data[E],T=bi(o,i,E,a);Rr(T,o),null!==v&&UC(0,E-h,T,D,0,v),Vr(D)&&(qn(a.index,o)[8]=bi(o,i,E,a))}}(i,o,a,Jn(a,o)),64==(64&a.flags)&&hg(i,o,a))}function Lw(i,o,a=Jn){const c=o.localNames;if(null!==c){let h=o.index+1;for(let p=0;p<c.length;p+=2){const v=c[p+1],E=-1===v?a(o,i):i[v];i[h++]=E}}}function Vw(i){const o=i.tView;return null===o||o.incompleteFirstPass?i.tView=Qh(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):o}function Qh(i,o,a,c,h,p,v,E,D,T){const x=22+c,k=x+h,G=function bM(i,o){const a=[];for(let c=0;c<o;c++)a.push(c<i?null:Ft);return a}(x,k),X="function"==typeof T?T():T;return G[1]={type:i,blueprint:G,template:a,queries:null,viewQuery:E,declTNode:o,data:G.slice().fill(null,x),bindingStartIndex:x,expandoStartIndex:k,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:D,consts:X,incompleteFirstPass:!1}}function Uw(i,o,a,c){const h=$w(o);null===a?h.push(c):(h.push(a),i.firstCreatePass&&md(i).push(c,h.length-1))}function NC(i,o,a,c){for(let h in i)if(i.hasOwnProperty(h)){a=null===a?{}:a;const p=i[h];null===c?OC(a,o,h,p):c.hasOwnProperty(h)&&OC(a,o,c[h],p)}return a}function OC(i,o,a,c){i.hasOwnProperty(a)?i[a].push(o,c):i[a]=[o,c]}function Ns(i,o,a,c,h,p,v,E){const D=Jn(o,a);let x,T=o.inputs;!E&&null!=T&&(x=T[c])?(_g(i,a,x,c,h),Ii(o)&&PC(a,o.index)):3&o.type&&(c=function AM(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(c),h=null!=v?v(h,o.value||"",c):h,p.setProperty(D,c,h))}function PC(i,o){const a=qn(o,i);16&a[2]||(a[2]|=32)}function ge(i,o,a,c){let h=!1;if(Ha()){const p=null===c?null:{"":-1},v=function kC(i,o){const a=i.directiveRegistry;let c=null,h=null;if(a)for(let p=0;p<a.length;p++){const v=a[p];if(nv(o,v.selectors,!1))if(c||(c=[]),Vr(v))if(null!==v.findHostDirectiveDefs){const E=[];h=h||new Map,v.findHostDirectiveDefs(v,E,h),c.unshift(...E,v),yr(i,o,E.length)}else c.unshift(v),yr(i,o,0);else h=h||new Map,v.findHostDirectiveDefs?.(v,c,h),c.push(v)}return null===c?null:[c,h]}(i,a);let E,D;null===v?E=D=null:[E,D]=v,null!==E&&(h=!0,Cu(i,o,a,E,p,D)),p&&function FC(i,o,a){if(o){const c=i.localNames=[];for(let h=0;h<o.length;h+=2){const p=a[o[h+1]];if(null==p)throw new de(-301,!1);c.push(o[h],p)}}}(a,c,p)}return a.mergedAttrs=ws(a.mergedAttrs,a.attrs),h}function Cu(i,o,a,c,h,p){for(let T=0;T<c.length;T++)dc(To(a,o),i,c[T].type);!function dv(i,o,a){i.flags|=1,i.directiveStart=o,i.directiveEnd=o+a,i.providerIndexes=o}(a,i.data.length,c.length);for(let T=0;T<c.length;T++){const x=c[T];x.providersResolver&&x.providersResolver(x)}let v=!1,E=!1,D=Hc(i,o,c.length,null);for(let T=0;T<c.length;T++){const x=c[T];a.mergedAttrs=ws(a.mergedAttrs,x.hostAttrs),LC(i,a,o,D,x),fg(D,x,h),null!==x.contentQueries&&(a.flags|=4),(null!==x.hostBindings||null!==x.hostAttrs||0!==x.hostVars)&&(a.flags|=64);const k=x.type.prototype;!v&&(k.ngOnChanges||k.ngOnInit||k.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),v=!0),!E&&(k.ngOnChanges||k.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),E=!0),D++}!function SM(i,o,a){const h=o.directiveEnd,p=i.data,v=o.attrs,E=[];let D=null,T=null;for(let x=o.directiveStart;x<h;x++){const k=p[x],G=a?a.get(k):null,me=G?G.outputs:null;D=NC(k.inputs,x,D,G?G.inputs:null),T=NC(k.outputs,x,T,me);const ke=null===D||null===v||sg(o)?null:BC(D,x,v);E.push(ke)}null!==D&&(D.hasOwnProperty("class")&&(o.flags|=8),D.hasOwnProperty("style")&&(o.flags|=16)),o.initialInputs=E,o.inputs=D,o.outputs=T}(i,a,p)}function hg(i,o,a){const c=a.directiveStart,h=a.directiveEnd,p=a.index,v=function na(){return bt.lFrame.currentDirectiveIndex}();try{ra(p);for(let E=c;E<h;E++){const D=i.data[E],T=o[E];bl(E),(null!==D.hostBindings||0!==D.hostVars||null!==D.hostAttrs)&&Bw(D,T)}}finally{ra(-1),bl(v)}}function Bw(i,o){null!==i.hostBindings&&i.hostBindings(1,o)}function yr(i,o,a){o.componentOffset=a,(i.components||(i.components=[])).push(o.index)}function fg(i,o,a){if(a){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)a[o.exportAs[c]]=i;Vr(o)&&(a[""]=i)}}function LC(i,o,a,c,h){i.data[c]=h;const p=h.factory||(h.factory=js(h.type)),v=new ia(p,Vr(h),fd);i.blueprint[c]=v,a[c]=v,function dg(i,o,a,c,h){const p=h.hostBindings;if(p){let v=i.hostBindingOpCodes;null===v&&(v=i.hostBindingOpCodes=[]);const E=~o.index;(function en(i){let o=i.length;for(;o>0;){const a=i[--o];if("number"==typeof a&&a<0)return a}return 0})(v)!=E&&v.push(E),v.push(a,c,p)}}(i,o,c,Hc(i,a,h.hostVars,Ft),h)}function Fo(i,o,a,c,h,p){const v=Jn(i,o);!function pg(i,o,a,c,h,p,v){if(null==p)i.removeAttribute(o,h,a);else{const E=null==v?Ee(p):v(p,c||"",h);i.setAttribute(o,h,E,a)}}(o[11],v,p,i.value,a,c,h)}function UC(i,o,a,c,h,p){const v=p[o];if(null!==v){const E=c.setInput;for(let D=0;D<v.length;){const T=v[D++],x=v[D++],k=v[D++];null!==E?c.setInput(a,k,T,x):a[x]=k}}}function BC(i,o,a){let c=null,h=0;for(;h<a.length;){const p=a[h];if(0!==p)if(5!==p){if("number"==typeof p)break;if(i.hasOwnProperty(p)){null===c&&(c=[]);const v=i[p];for(let E=0;E<v.length;E+=2)if(v[E]===o){c.push(p,v[E+1],a[h+1]);break}}h+=2}else h+=2;else h+=4}return c}function jw(i,o,a,c){return[i,!0,!1,o,null,0,c,a,null,null]}function gg(i,o){const a=qn(o,i);if(Xo(a)){const c=a[1];48&a[2]?zi(c,a,c.template,a[8]):a[5]>0&&mg(a)}}function mg(i){for(let c=Ro(i);null!==c;c=Sh(c))for(let h=10;h<c.length;h++){const p=c[h];if(Xo(p))if(512&p[2]){const v=p[1];zi(v,p,v.template,p[8])}else p[5]>0&&mg(p)}const a=i[1].components;if(null!==a)for(let c=0;c<a.length;c++){const h=qn(a[c],i);Xo(h)&&h[5]>0&&mg(h)}}function hv(i,o){const a=qn(o,i),c=a[1];(function yg(i,o){for(let a=o.length;a<i.blueprint.length;a++)o.push(i.blueprint[a])})(c,a),nr(c,a,a[8])}function gd(i,o){return i[13]?i[14][4]=o:i[13]=o,i[14]=o,o}function Jh(i){for(;i;){i[2]|=32;const o=Ss(i);if(Wo(i)&&!o)return i;i=o}return null}function vg(i,o,a,c=!0){const h=o[10];h.begin&&h.begin();try{zi(i,o,i.template,a)}catch(v){throw c&&Xh(o,v),v}finally{h.end&&h.end()}}function fv(i,o,a){rc(0),o(i,a)}function $w(i){return i[7]||(i[7]=[])}function md(i){return i.cleanup||(i.cleanup=[])}function Xh(i,o){const a=i[9],c=a?a.get(Wh,null):null;c&&c.handleError(o)}function _g(i,o,a,c,h){for(let p=0;p<a.length;){const v=a[p++],E=a[p++],D=o[v],T=i.data[v];null!==T.setInput?T.setInput(D,h,c,E):D[E]=h}}function wg(i,o,a){let c=a?i.styles:null,h=a?i.classes:null,p=0;if(null!==o)for(let v=0;v<o.length;v++){const E=o[v];"number"==typeof E?p=E:1==p?h=ce(h,E):2==p&&(c=ce(c,E+": "+o[++v]+";"))}a?i.styles=c:i.stylesWithoutHost=c,a?i.classes=h:i.classesWithoutHost=h}function Eg(i,o,a,c,h=!1){for(;null!==a;){const p=o[a.index];if(null!==p&&c.push(Rn(p)),Ei(p))for(let E=10;E<p.length;E++){const D=p[E],T=D[1].firstChild;null!==T&&Eg(D[1],D,T,c)}const v=a.type;if(8&v)Eg(i,o,a.child,c);else if(32&v){const E=Tc(a,o);let D;for(;D=E();)c.push(D)}else if(16&v){const E=pu(o,a);if(Array.isArray(E))c.push(...E);else{const D=Ss(o[16]);Eg(D[1],D,E,c,!0)}}a=h?a.projectionNext:a.next}return c}class ef{constructor(o,a){this._lView=o,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,a=o[1];return Eg(a,o,a.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(Ei(o)){const a=o[8],c=a?a.indexOf(this):-1;c>-1&&(xc(o,c),la(a,c))}this._attachedToViewContainer=!1}Rc(this._lView[1],this._lView)}onDestroy(o){Uw(this._lView[1],this._lView,null,o)}markForCheck(){Jh(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){vg(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new de(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Mh(i,o){gu(i,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new de(902,!1);this._appRef=o}}class Hw extends ef{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;vg(o[1],o,o[8],!1)}checkNoChanges(){}get context(){return null}}class Ig extends ld{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=Wt(o);return new _a(a,this.ngModule)}}function gv(i){const o=[];for(let a in i)i.hasOwnProperty(a)&&o.push({propName:i[a],templateName:a});return o}class Gw{constructor(o,a){this.injector=o,this.parentInjector=a}get(o,a,c){c=vt(c);const h=this.injector.get(o,Yy,c);return h!==Yy||a===Yy?h:this.parentInjector.get(o,a,c)}}class _a extends Gh{constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=function og(i){return i.map(cC).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return gv(this.componentDef.inputs)}get outputs(){return gv(this.componentDef.outputs)}create(o,a,c,h){let p=(h=h||this.ngModule)instanceof Lc?h:h?.injector;p&&null!==this.componentDef.getStandaloneInjector&&(p=this.componentDef.getStandaloneInjector(p)||p);const v=p?new Gw(o,p):o,E=v.get(pw,null);if(null===E)throw new de(407,!1);const D=v.get(gw,null),T=E.createRenderer(null,this.componentDef),x=this.componentDef.selectors[0][0]||"div",k=c?function TM(i,o,a){return i.selectRootElement(o,a===Gt.ShadowDom)}(T,c,this.componentDef.encapsulation):Ac(T,x,function mv(i){const o=i.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(x)),G=this.componentDef.onPush?288:272,X=Qh(0,null,null,1,0,null,null,null,null,null),me=cg(null,X,null,G,null,null,E,T,D,v,null);let ke,He;za(me);try{const Xe=this.componentDef;let Qe,Te=null;Xe.findHostDirectiveDefs?(Qe=[],Te=new Map,Xe.findHostDirectiveDefs(Xe,Qe,Te),Qe.push(Xe)):Qe=[Xe];const _t=function yv(i,o){const a=i[1];return i[22]=o,$c(a,22,2,"#host",null)}(me,k),En=function HC(i,o,a,c,h,p,v,E){const D=h[1];!function vv(i,o,a,c){for(const h of i)o.mergedAttrs=ws(o.mergedAttrs,h.hostAttrs);null!==o.mergedAttrs&&(wg(o,o.mergedAttrs,!0),null!==a&&kh(c,a,o))}(c,i,o,v);const T=p.createRenderer(o,a),x=cg(h,Vw(a),null,a.onPush?32:16,h[i.index],i,p,T,E||null,null,null);return D.firstCreatePass&&yr(D,i,c.length-1),gd(h,x),h[i.index]=x}(_t,k,Xe,Qe,me,E,T);He=yo(X,22),k&&function Ww(i,o,a,c){if(c)pn(i,a,["ng-version",yw.full]);else{const{attrs:h,classes:p}=function lC(i){const o=[],a=[];let c=1,h=2;for(;c<i.length;){let p=i[c];if("string"==typeof p)2===h?""!==p&&o.push(p,i[++c]):8===h&&a.push(p);else{if(!Rs(h))break;h=p}c++}return{attrs:o,classes:a}}(o.selectors[0]);h&&pn(i,a,h),p&&p.length>0&&As(i,a,p.join(" "))}}(T,Xe,k,c),void 0!==a&&function _v(i,o,a){const c=i.projection=[];for(let h=0;h<o.length;h++){const p=a[h];c.push(null!=p?Array.from(p):null)}}(He,this.ngContentSelectors,a),ke=function zw(i,o,a,c,h,p){const v=Xn(),E=h[1],D=Jn(v,h);Cu(E,h,v,a,null,c);for(let x=0;x<a.length;x++)Rr(bi(h,E,v.directiveStart+x,v),h);hg(E,h,v),D&&Rr(D,h);const T=bi(h,E,v.directiveStart+v.componentOffset,v);if(i[8]=h[8]=T,null!==p)for(const x of p)x(T,o);return pd(E,v,i),T}(En,Xe,Qe,Te,me,[GC]),nr(X,me,null)}finally{Np()}return new $C(this.componentType,ke,Vc(He,me),me,He)}}class $C extends QD{constructor(o,a,c,h,p){super(),this.location=c,this._rootLView=h,this._tNode=p,this.instance=a,this.hostView=this.changeDetectorRef=new Hw(h),this.componentType=o}setInput(o,a){const c=this._tNode.inputs;let h;if(null!==c&&(h=c[o])){const p=this._rootLView;_g(p[1],p,h,o,a),PC(p,this._tNode.index)}}get injector(){return new si(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function GC(){const i=Xn();vs(Ce()[1],i)}function wv(i){let o=function Zw(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const c=[i];for(;o;){let h;if(Vr(i))h=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new de(903,!1);h=o.\u0275dir}if(h){if(a){c.push(h);const v=i;v.inputs=tf(i.inputs),v.declaredInputs=tf(i.declaredInputs),v.outputs=tf(i.outputs);const E=h.hostBindings;E&&Kw(i,E);const D=h.viewQuery,T=h.contentQueries;if(D&&Ev(i,D),T&&Iv(i,T),fe(i.inputs,h.inputs),fe(i.declaredInputs,h.declaredInputs),fe(i.outputs,h.outputs),Vr(h)&&h.data.animation){const x=i.data;x.animation=(x.animation||[]).concat(h.data.animation)}}const p=h.features;if(p)for(let v=0;v<p.length;v++){const E=p[v];E&&E.ngInherit&&E(i),E===wv&&(a=!1)}}o=Object.getPrototypeOf(o)}!function Dg(i){let o=0,a=null;for(let c=i.length-1;c>=0;c--){const h=i[c];h.hostVars=o+=h.hostVars,h.hostAttrs=ws(h.hostAttrs,a=ws(a,h.hostAttrs))}}(c)}function tf(i){return i===vn?{}:i===pt?[]:i}function Ev(i,o){const a=i.viewQuery;i.viewQuery=a?(c,h)=>{o(c,h),a(c,h)}:o}function Iv(i,o){const a=i.contentQueries;i.contentQueries=a?(c,h,p)=>{o(c,h,p),a(c,h,p)}:o}function Kw(i,o){const a=i.hostBindings;i.hostBindings=a?(c,h)=>{o(c,h),a(c,h)}:o}let Cg=null;function Gc(){if(!Cg){const i=Ct.Symbol;if(i&&i.iterator)Cg=i.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<o.length;++a){const c=o[a];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(Cg=c)}}}return Cg}function nf(i){return!!Tg(i)&&(Array.isArray(i)||!(i instanceof Map)&&Gc()in i)}function Tg(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function hi(i,o,a){return!Object.is(i[o],a)&&(i[o]=a,!0)}function Sg(i,o,a,c){const h=Ce();return hi(h,Ji(),o)&&(Zt(),Fo(ln(),h,i,o,a,c)),Sg}function af(i,o,a,c){return hi(i,Ji(),a)?o+Ee(a)+c:Ft}function JC(i,o,a,c,h,p,v,E){const D=Ce(),T=Zt(),x=i+22,k=T.firstCreatePass?function QC(i,o,a,c,h,p,v,E,D){const T=o.consts,x=$c(o,i,4,v||null,Ui(T,E));ge(o,a,x,Ui(T,D)),vs(o,x);const k=x.tViews=Qh(2,x,c,h,p,o.directiveRegistry,o.pipeRegistry,null,o.schemas,T);return null!==o.queries&&(o.queries.template(o,x),k.queries=o.queries.embeddedTView(x)),x}(x,T,D,o,a,c,h,p,v):T.data[x];ti(k,!1);const G=D[11].createComment("");Jl(T,D,G,k),Rr(G,D),gd(D,D[x]=jw(G,D,G,k)),qu(k)&&lv(T,D,k),null!=v&&Lw(D,k,E)}function iE(i){return function ys(i,o){return i[o]}(function Xu(){return bt.lFrame.contextLView}(),22+i)}function sE(i,o,a){const c=Ce();return hi(c,Ji(),o)&&Ns(Zt(),ln(),c,i,o,c[11],a,!1),sE}function oE(i,o,a,c,h){const v=h?"class":"style";_g(i,a,o.inputs[v],v,c)}function bv(i,o,a,c){const h=Ce(),p=Zt(),v=22+i,E=h[11],D=h[v]=Ac(E,o,function Op(){return bt.lFrame.currentNamespace}()),T=p.firstCreatePass?function kM(i,o,a,c,h,p,v){const E=o.consts,T=$c(o,i,2,h,Ui(E,p));return ge(o,a,T,Ui(E,v)),null!==T.attrs&&wg(T,T.attrs,!1),null!==T.mergedAttrs&&wg(T,T.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,T),T}(v,p,h,0,o,a,c):p.data[v];return ti(T,!0),kh(E,D,T),32!=(32&T.flags)&&Jl(p,h,D,T),0===function $a(){return bt.lFrame.elementDepthCount}()&&Rr(D,h),function Qu(){bt.lFrame.elementDepthCount++}(),qu(T)&&(lv(p,h,T),pd(p,T,h)),null!==c&&Lw(h,T),bv}function Tv(){let i=Xn();qa()?function _o(){bt.lFrame.isParent=!1}():(i=i.parent,ti(i,!1));const o=i;!function El(){bt.lFrame.elementDepthCount--}();const a=Zt();return a.firstCreatePass&&(vs(a,i),zo(i)&&a.queries.elementEnd(i)),null!=o.classesWithoutHost&&function uc(i){return 0!=(8&i.flags)}(o)&&oE(a,o,Ce(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function Ml(i){return 0!=(16&i.flags)}(o)&&oE(a,o,Ce(),o.stylesWithoutHost,!1),Tv}function Rg(i,o,a,c){return bv(i,o,a,c),Tv(),Rg}function Av(){return Ce()}function Pg(i){return!!i&&"function"==typeof i.then}function Mv(i){return!!i&&"function"==typeof i.subscribe}const xv=Mv;function wd(i,o,a,c){const h=Ce(),p=Zt(),v=Xn();return function uE(i,o,a,c,h,p,v){const E=qu(c),T=i.firstCreatePass&&md(i),x=o[8],k=$w(o);let G=!0;if(3&c.type||v){const ke=Jn(c,o),He=v?v(ke):ke,Xe=k.length,Qe=v?_t=>v(Rn(_t[c.index])):c.index;let Te=null;if(!v&&E&&(Te=function Au(i,o,a,c){const h=i.cleanup;if(null!=h)for(let p=0;p<h.length-1;p+=2){const v=h[p];if(v===a&&h[p+1]===c){const E=o[7],D=h[p+2];return E.length>D?E[D]:null}"string"==typeof v&&(p+=2)}return null}(i,o,h,c.index)),null!==Te)(Te.__ngLastListenerFn__||Te).__ngNextListenerFn__=p,Te.__ngLastListenerFn__=p,G=!1;else{p=Mu(c,o,x,p,!1);const _t=a.listen(He,h,p);k.push(p,_t),T&&T.push(h,Qe,Xe,Xe+1)}}else p=Mu(c,o,x,p,!1);const X=c.outputs;let me;if(G&&null!==X&&(me=X[h])){const ke=me.length;if(ke)for(let He=0;He<ke;He+=2){const En=o[me[He]][me[He+1]].subscribe(p),Kn=k.length;k.push(p,En),T&&T.push(h,c.index,Kn,-(Kn+1))}}}(p,h,h[11],v,i,o,c),wd}function Rv(i,o,a,c){try{return!1!==a(c)}catch(h){return Xh(i,h),!1}}function Mu(i,o,a,c,h){return function p(v){if(v===Function)return c;Jh(i.componentOffset>-1?qn(i.index,o):o);let D=Rv(o,0,c,v),T=p.__ngNextListenerFn__;for(;T;)D=Rv(o,0,T,v)&&D,T=T.__ngNextListenerFn__;return h&&!1===D&&(v.preventDefault(),v.returnValue=!1),D}}function to(i=1){return function Dy(i){return(bt.lFrame.contextLView=function ic(i,o){for(;i>0;)o=o[15],i--;return o}(i,bt.lFrame.contextLView))[8]}(i)}function Nv(i,o,a){return kg(i,"",o,"",a),Nv}function kg(i,o,a,c,h){const p=Ce(),v=af(p,o,a,c);return v!==Ft&&Ns(Zt(),ln(),p,i,v,p[11],h,!1),kg}function df(i,o){return i<<17|o<<2}function Da(i){return i>>17&32767}function Fg(i){return 2|i}function xu(i){return(131068&i)>>2}function Lg(i,o){return-131069&i|o<<2}function Ed(i){return 1|i}function yE(i,o,a,c,h){const p=i[a+1],v=null===o;let E=c?Da(p):xu(p),D=!1;for(;0!==E&&(!1===D||v);){const x=i[E+1];vE(i[E],o)&&(D=!0,i[E+1]=c?Ed(x):Fg(x)),E=c?Da(x):xu(x)}D&&(i[a+1]=c?Fg(p):Ed(p))}function vE(i,o){return null===i||null==o||(Array.isArray(i)?i[1]:i)===o||!(!Array.isArray(i)||"string"!=typeof o)&&We(i,o)>=0}function DE(i,o){return function no(i,o,a,c){const h=Ce(),p=Zt(),v=function ni(i){const o=bt.lFrame,a=o.bindingIndex;return o.bindingIndex=o.bindingIndex+i,a}(2);p.firstUpdatePass&&function ab(i,o,a,c){const h=i.data;if(null===h[a+1]){const p=h[Br()],v=function CE(i,o){return o>=i.expandoStartIndex}(i,a);(function ff(i,o){return 0!=(i.flags&(o?8:16))})(p,c)&&null===o&&!v&&(o=!1),o=function FM(i,o,a,c){const h=function Gs(i){const o=bt.lFrame.currentDirectiveIndex;return-1===o?null:i[o]}(i);let p=c?o.residualClasses:o.residualStyles;if(null===h)0===(c?o.classBindings:o.styleBindings)&&(a=jg(a=bE(null,i,o,a,c),o.attrs,c),p=null);else{const v=o.directiveStylingLast;if(-1===v||i[v]!==h)if(a=bE(h,i,o,a,c),null===p){let D=function LM(i,o,a){const c=a?o.classBindings:o.styleBindings;if(0!==xu(c))return i[Da(c)]}(i,o,c);void 0!==D&&Array.isArray(D)&&(D=bE(null,i,o,D[1],c),D=jg(D,o.attrs,c),function VM(i,o,a,c){i[Da(a?o.classBindings:o.styleBindings)]=c}(i,o,c,D))}else p=function UM(i,o,a){let c;const h=o.directiveEnd;for(let p=1+o.directiveStylingLast;p<h;p++)c=jg(c,i[p].hostAttrs,a);return jg(c,o.attrs,a)}(i,o,c)}return void 0!==p&&(c?o.residualClasses=p:o.residualStyles=p),a}(h,p,o,c),function gE(i,o,a,c,h,p){let v=p?o.classBindings:o.styleBindings,E=Da(v),D=xu(v);i[c]=a;let x,T=!1;if(Array.isArray(a)){const k=a;x=k[1],(null===x||We(k,x)>0)&&(T=!0)}else x=a;if(h)if(0!==D){const G=Da(i[E+1]);i[c+1]=df(G,E),0!==G&&(i[G+1]=Lg(i[G+1],c)),i[E+1]=function fE(i,o){return 131071&i|o<<17}(i[E+1],c)}else i[c+1]=df(E,0),0!==E&&(i[E+1]=Lg(i[E+1],c)),E=c;else i[c+1]=df(D,0),0===E?E=c:i[D+1]=Lg(i[D+1],c),D=c;T&&(i[c+1]=Fg(i[c+1])),yE(i,x,c,!0),yE(i,x,c,!1),function mE(i,o,a,c,h){const p=h?i.residualClasses:i.residualStyles;null!=p&&"string"==typeof o&&We(p,o)>=0&&(a[c+1]=Ed(a[c+1]))}(o,x,i,c,p),v=df(E,D),p?o.classBindings=v:o.styleBindings=v}(h,p,o,a,v,c)}}(p,i,v,c),o!==Ft&&hi(h,v,o)&&function TE(i,o,a,c,h,p,v,E){if(!(3&o.type))return;const D=i.data,T=D[E+1],x=function pE(i){return 1==(1&i)}(T)?SE(D,o,a,h,xu(T),v):void 0;Id(x)||(Id(p)||function hE(i){return 2==(2&i)}(T)&&(p=SE(D,null,a,h,E,v)),function ko(i,o,a,c,h){if(o)h?i.addClass(a,c):i.removeClass(a,c);else{let p=-1===c.indexOf("-")?void 0:Gr.DashCase;null==h?i.removeStyle(a,c,p):("string"==typeof h&&h.endsWith("!important")&&(h=h.slice(0,-10),p|=Gr.Important),i.setStyle(a,c,h,p))}}(c,v,Hs(Br(),a),h,p))}(p,p.data[Br()],h,h[11],i,h[v+1]=function hf(i,o){return null==i||("string"==typeof o?i+=o:"object"==typeof i&&(i=le(_(i)))),i}(o,a),c,v)}(i,o,null,!0),DE}function bE(i,o,a,c,h){let p=null;const v=a.directiveEnd;let E=a.directiveStylingLast;for(-1===E?E=a.directiveStart:E++;E<v&&(p=o[E],c=jg(c,p.hostAttrs,h),p!==i);)E++;return null!==i&&(a.directiveStylingLast=E),c}function jg(i,o,a){const c=a?1:2;let h=-1;if(null!==o)for(let p=0;p<o.length;p++){const v=o[p];"number"==typeof v?h=v:h===c&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),Ut(i,v,!!a||o[++p]))}return void 0===i?null:i}function SE(i,o,a,c,h,p){const v=null===o;let E;for(;h>0;){const D=i[h],T=Array.isArray(D),x=T?D[1]:D,k=null===x;let G=a[h+1];G===Ft&&(G=k?pt:void 0);let X=k?Gi(G,c):x===c?G:void 0;if(T&&!Id(X)&&(X=Gi(D,c)),Id(X)&&(E=X,v))return E;const me=i[h+1];h=v?Da(me):xu(me)}if(null!==o){let D=p?o.residualClasses:o.residualStyles;null!=D&&(E=Gi(D,c))}return E}function Id(i){return void 0!==i}function Wc(i,o=""){const a=Ce(),c=Zt(),h=i+22,p=c.firstCreatePass?$c(c,h,1,o,null):c.data[h],v=a[h]=function Zl(i,o){return i.createText(o)}(a[11],o);Jl(c,a,v,p),ti(p,!1)}function Zc(i){return Dd("",i,""),Zc}function Dd(i,o,a){const c=Ce(),h=af(c,i,o,a);return h!==Ft&&function va(i,o,a){const c=Hs(o,i);!function Ah(i,o,a){i.setValue(o,a)}(i[11],c,a)}(c,Br(),h),Dd}const Cd=void 0;var yf=["en",[["a","p"],["AM","PM"],Cd],[["AM","PM"],Cd,Cd],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Cd,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Cd,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Cd,"{1} 'at' {0}",Cd],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function vb(i){const a=Math.floor(Math.abs(i)),c=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===c?1:5}];let ro={};function Qg(i){const o=function HM(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=FE(o);if(a)return a;const c=o.split("-")[0];if(a=FE(c),a)return a;if("en"===c)return yf;throw new de(701,!1)}function Eb(i){return Qg(i)[wt.PluralCase]}function FE(i){return i in ro||(ro[i]=Ct.ng&&Ct.ng.common&&Ct.ng.common.locales&&Ct.ng.common.locales[i]),ro[i]}var wt=(()=>((wt=wt||{})[wt.LocaleId=0]="LocaleId",wt[wt.DayPeriodsFormat=1]="DayPeriodsFormat",wt[wt.DayPeriodsStandalone=2]="DayPeriodsStandalone",wt[wt.DaysFormat=3]="DaysFormat",wt[wt.DaysStandalone=4]="DaysStandalone",wt[wt.MonthsFormat=5]="MonthsFormat",wt[wt.MonthsStandalone=6]="MonthsStandalone",wt[wt.Eras=7]="Eras",wt[wt.FirstDayOfWeek=8]="FirstDayOfWeek",wt[wt.WeekendRange=9]="WeekendRange",wt[wt.DateFormat=10]="DateFormat",wt[wt.TimeFormat=11]="TimeFormat",wt[wt.DateTimeFormat=12]="DateTimeFormat",wt[wt.NumberSymbols=13]="NumberSymbols",wt[wt.NumberFormats=14]="NumberFormats",wt[wt.CurrencyCode=15]="CurrencyCode",wt[wt.CurrencySymbol=16]="CurrencySymbol",wt[wt.CurrencyName=17]="CurrencyName",wt[wt.Currencies=18]="Currencies",wt[wt.Directionality=19]="Directionality",wt[wt.PluralCase=20]="PluralCase",wt[wt.ExtraData=21]="ExtraData",wt))();const bd="en-US";let VE=bd;function t_(i,o,a,c,h){if(i=W(i),Array.isArray(i))for(let p=0;p<i.length;p++)t_(i[p],o,a,c,h);else{const p=Zt(),v=Ce();let E=Fc(i)?i:W(i.provide),D=zy(i);const T=Xn(),x=1048575&T.providerIndexes,k=T.directiveStart,G=T.providerIndexes>>20;if(Fc(i)||!i.multi){const X=new ia(D,h,fd),me=cm(E,o,h?x:x+G,k);-1===me?(dc(To(T,v),p,E),um(p,i,o.length),o.push(E),T.directiveStart++,T.directiveEnd++,h&&(T.providerIndexes+=1048576),a.push(X),v.push(X)):(a[me]=X,v[me]=X)}else{const X=cm(E,o,x+G,k),me=cm(E,o,x,x+G),ke=X>=0&&a[X],He=me>=0&&a[me];if(h&&!He||!h&&!ke){dc(To(T,v),p,E);const Xe=function r_(i,o,a,c,h){const p=new ia(i,a,fd);return p.multi=[],p.index=o,p.componentProviders=0,n_(p,h,c&&!a),p}(h?Sf:Zb,a.length,h,c,D);!h&&He&&(a[me].providerFactory=Xe),um(p,i,o.length,0),o.push(E),T.directiveStart++,T.directiveEnd++,h&&(T.providerIndexes+=1048576),a.push(Xe),v.push(Xe)}else um(p,i,X>-1?X:me,n_(a[h?me:X],D,!h&&c));!h&&c&&He&&a[me].componentProviders++}}}function um(i,o,a,c){const h=Fc(o),p=function zD(i){return!!i.useClass}(o);if(h||p){const D=(p?W(o.useClass):o).prototype.ngOnDestroy;if(D){const T=i.destroyHooks||(i.destroyHooks=[]);if(!h&&o.multi){const x=T.indexOf(a);-1===x?T.push(a,[c,D]):T[x+1].push(c,D)}else T.push(a,D)}}}function n_(i,o,a){return a&&i.componentProviders++,i.multi.push(o)-1}function cm(i,o,a,c){for(let h=a;h<c;h++)if(o[h]===i)return h;return-1}function Zb(i,o,a,c){return Bn(this.multi,[])}function Sf(i,o,a,c){const h=this.multi;let p;if(this.providerFactory){const v=this.providerFactory.componentProviders,E=bi(a,a[1],this.providerFactory.index,c);p=E.slice(0,v),Bn(h,p);for(let D=v;D<E.length;D++)p.push(E[D])}else p=[],Bn(h,p);return p}function Bn(i,o){for(let a=0;a<i.length;a++)o.push((0,i[a])());return o}function lm(i,o=[]){return a=>{a.providersResolver=(c,h)=>function Wb(i,o,a){const c=Zt();if(c.firstCreatePass){const h=Vr(i);t_(a,c.data,c.blueprint,h,!0),t_(o,c.data,c.blueprint,h,!1)}}(c,h?h(i):i,o)}}class Sa{}class i_{}function s_(i,o){return new o_(i,o??null)}class o_ extends Sa{constructor(o,a){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Ig(this);const c=Yn(o);this._bootstrapComponents=ya(c.bootstrap),this._r3Injector=vC(o,a,[{provide:Sa,useValue:this},{provide:ld,useValue:this.componentFactoryResolver}],le(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class a_ extends i_{constructor(o){super(),this.moduleType=o}create(o){return new o_(this.moduleType,o)}}class Yb extends Sa{constructor(o,a,c){super(),this.componentFactoryResolver=new Ig(this),this.instance=null;const h=new hw([...o,{provide:Sa,useValue:this},{provide:ld,useValue:this.componentFactoryResolver}],a||tg(),c,new Set(["environment"]));this.injector=h,h.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function u_(i,o,a=null){return new Yb(i,o,a).injector}let Af=(()=>{class i{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a.id)){const c=cw(0,a.type),h=c.length>0?u_([c],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a.id,h)}return this.cachedInjectors.get(a.id)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}}return i.\u0275prov=dt({token:i,providedIn:"environment",factory:()=>new i(Be(Lc))}),i})();function rI(i){i.getStandaloneInjector=o=>o.get(Af).getOrCreateStandaloneInjector(i)}function h_(i){return o=>{setTimeout(i,void 0,o)}}const Vo=class Rf extends d.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,a,c){let h=o,p=a||(()=>null),v=c;if(o&&"object"==typeof o){const D=o;h=D.next?.bind(D),p=D.error?.bind(D),v=D.complete?.bind(D)}this.__isAsync&&(p=h_(p),h&&(h=h_(h)),v&&(v=h_(v)));const E=super.subscribe({next:h,error:p,complete:v});return o instanceof J.w0&&o.add(E),E}};function Nf(){return this._results[Gc()]()}class f_{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Gc(),c=f_.prototype;c[a]||(c[a]=Nf)}get changes(){return this._changes||(this._changes=new Vo)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){const c=this;c.dirty=!1;const h=function jr(i){return i.flat(Number.POSITIVE_INFINITY)}(o);(this._changesDetected=!function Vl(i,o,a){if(i.length!==o.length)return!1;for(let c=0;c<i.length;c++){let h=i[c],p=o[c];if(a&&(h=a(h),p=a(p)),p!==h)return!1}return!0}(c._results,h,a))&&(c._results=h,c.length=h.length,c.last=h[this.length-1],c.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Of=(()=>{class i{}return i.__NG_ELEMENT_ID__=fT,i})();const hT=Of,Pf=class extends hT{constructor(o,a,c){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=c}createEmbeddedView(o,a){const c=this._declarationTContainer.tViews,h=cg(this._declarationLView,c,o,16,null,c.declTNode,null,null,null,null,a||null);h[17]=this._declarationLView[this._declarationTContainer.index];const v=this._declarationLView[19];return null!==v&&(h[19]=v.createEmbeddedView(c)),nr(c,h,o),new ef(h)}};function fT(){return Nu(Xn(),Ce())}function Nu(i,o){return 4&i.type?new Pf(o,i,Vc(i,o)):null}let fm=(()=>{class i{}return i.__NG_ELEMENT_ID__=kf,i})();function kf(){return gT(Xn(),Ce())}const pT=fm,pm=class extends pT{constructor(o,a,c){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=c}get element(){return Vc(this._hostTNode,this._hostLView)}get injector(){return new si(this._hostTNode,this._hostLView)}get parentInjector(){const o=tu(this._hostTNode,this._hostLView);if(xl(o)){const a=bo(o,this._hostLView),c=Ya(o);return new si(a[1].data[c+8],a)}return new si(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=dI(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,a,c){let h,p;"number"==typeof c?h=c:null!=c&&(h=c.index,p=c.injector);const v=o.createEmbeddedView(a||{},p);return this.insert(v,h),v}createComponent(o,a,c,h,p){const v=o&&!function ca(i){return"function"==typeof i}(o);let E;if(v)E=a;else{const k=a||{};E=k.index,c=k.injector,h=k.projectableNodes,p=k.environmentInjector||k.ngModuleRef}const D=v?o:new _a(Wt(o)),T=c||this.parentInjector;if(!p&&null==D.ngModule){const G=(v?T:this.parentInjector).get(Lc,null);G&&(p=G)}const x=D.create(T,h,void 0,p);return this.insert(x.hostView,E),x}insert(o,a){const c=o._lView,h=c[1];if(function Ba(i){return Ei(i[3])}(c)){const x=this.indexOf(o);if(-1!==x)this.detach(x);else{const k=c[3],G=new pm(k,k[6],k[3]);G.detach(G.indexOf(o))}}const p=this._adjustIndex(a),v=this._lContainer;!function Ry(i,o,a,c){const h=10+c,p=a.length;c>0&&(a[h-1][4]=o),c<p-10?(o[4]=a[h],su(a,10+c,o)):(a.push(o),o[4]=null),o[3]=a;const v=o[17];null!==v&&a!==v&&function Ny(i,o){const a=i[9];o[16]!==o[3][3][16]&&(i[2]=!0),null===a?i[9]=[o]:a.push(o)}(v,o);const E=o[19];null!==E&&E.insertView(i),o[2]|=64}(h,c,v,p);const E=qr(p,v),D=c[11],T=Oc(D,v[7]);return null!==T&&function Kl(i,o,a,c,h,p){c[0]=h,c[6]=o,gu(i,c,a,1,h,p)}(h,v[6],D,c,T,E),o.attachToViewContainerRef(),su(p_(v),p,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=dI(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),c=xc(this._lContainer,a);c&&(la(p_(this._lContainer),a),Rc(c[1],c))}detach(o){const a=this._adjustIndex(o,-1),c=xc(this._lContainer,a);return c&&null!=la(p_(this._lContainer),a)?new ef(c):null}_adjustIndex(o,a=0){return o??this.length+a}};function dI(i){return i[8]}function p_(i){return i[8]||(i[8]=[])}function gT(i,o){let a;const c=o[i.index];if(Ei(c))a=c;else{let h;if(8&i.type)h=Rn(c);else{const p=o[11];h=p.createComment("");const v=Jn(i,o);pa(p,Oc(p,v),h,function qp(i,o){return i.nextSibling(o)}(p,v),!1)}o[i.index]=a=jw(c,o,h,i),gd(o,a)}return new pm(a,i,o)}class g_{constructor(o){this.queryList=o,this.matches=null}clone(){return new g_(this.queryList)}setDirty(){this.queryList.setDirty()}}class m_{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const c=null!==o.contentQueries?o.contentQueries[0]:a.length,h=[];for(let p=0;p<c;p++){const v=a.getByIndex(p);h.push(this.queries[v.indexInDeclarationView].clone())}return new m_(h)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==y_(o,a).matches&&this.queries[a].setDirty()}}class Uo{constructor(o,a,c=null){this.predicate=o,this.flags=a,this.read=c}}class it{constructor(o=[]){this.queries=o}elementStart(o,a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let c=0;c<this.length;c++){const h=null!==a?a.length:0,p=this.getByIndex(c).embeddedTView(o,h);p&&(p.indexInDeclarationView=c,null!==a?a.push(p):a=[p])}return null!==a?new it(a):null}template(o,a){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class Ff{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new Ff(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==a;)c=c.parent;return a===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const c=this.metadata.predicate;if(Array.isArray(c))for(let h=0;h<c.length;h++){const p=c[h];this.matchTNodeWithReadOption(o,a,Nt(a,p)),this.matchTNodeWithReadOption(o,a,aa(a,o,p,!1,!1))}else c===Of?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,aa(a,o,c,!1,!1))}matchTNodeWithReadOption(o,a,c){if(null!==c){const h=this.metadata.read;if(null!==h)if(h===zh||h===fm||h===Of&&4&a.type)this.addMatch(a.index,-2);else{const p=aa(a,o,h,!1,!1);null!==p&&this.addMatch(a.index,p)}else this.addMatch(a.index,c)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function Nt(i,o){const a=i.localNames;if(null!==a)for(let c=0;c<a.length;c+=2)if(a[c]===o)return a[c+1];return null}function mm(i,o,a,c){return-1===a?function gm(i,o){return 11&i.type?Vc(i,o):4&i.type?Nu(i,o):null}(o,i):-2===a?function Lf(i,o,a){return a===zh?Vc(o,i):a===Of?Nu(o,i):a===fm?gT(o,i):void 0}(i,o,c):bi(i,i[1],a,o)}function hI(i,o,a,c){const h=o[19].queries[c];if(null===h.matches){const p=i.data,v=a.matches,E=[];for(let D=0;D<v.length;D+=2){const T=v[D];E.push(T<0?null:mm(o,p[T],v[D+1],a.metadata.read))}h.matches=E}return h.matches}function Vf(i,o,a,c){const h=i.queries.getByIndex(a),p=h.matches;if(null!==p){const v=hI(i,o,h,a);for(let E=0;E<p.length;E+=2){const D=p[E];if(D>0)c.push(v[E/2]);else{const T=p[E+1],x=o[-D];for(let k=10;k<x.length;k++){const G=x[k];G[17]===G[3]&&Vf(G[1],G,T,c)}if(null!==x[9]){const k=x[9];for(let G=0;G<k.length;G++){const X=k[G];Vf(X[1],X,T,c)}}}}}return c}function fI(i){const o=Ce(),a=Zt(),c=Tl();rc(c+1);const h=y_(a,c);if(i.dirty&&function Jo(i){return 4==(4&i[2])}(o)===(2==(2&h.metadata.flags))){if(null===h.matches)i.reset([]);else{const p=h.crossesNgTemplate?Vf(a,o,c,[]):hI(a,o,h,c);i.reset(p,JD),i.notifyOnChanges()}return!0}return!1}function pI(i,o,a,c){const h=Zt();if(h.firstCreatePass){const p=Xn();(function Aa(i,o,a){null===i.queries&&(i.queries=new it),i.queries.track(new Ff(o,a))})(h,new Uo(o,a,c),p.index),function yT(i,o){const a=i.contentQueries||(i.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,o)}(h,i),2==(2&a)&&(h.staticContentQueries=!0)}!function Nr(i,o,a){const c=new f_(4==(4&a));Uw(i,o,c,c.destroy),null===o[19]&&(o[19]=new m_),o[19].queries.push(new g_(c))}(h,Ce(),a)}function Wr(){return function ym(i,o){return i[19].queries[o].queryList}(Ce(),Tl())}function y_(i,o){return i.queries.getByIndex(o)}function bm(...i){}const Tm=new on("Application Initializer");let Sm=(()=>{class i{constructor(a){this.appInits=a,this.resolve=bm,this.reject=bm,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,h)=>{this.resolve=c,this.reject=h})}runInitializers(){if(this.initialized)return;const a=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const p=this.appInits[h]();if(Pg(p))a.push(p);else if(xv(p)){const v=new Promise((E,D)=>{p.subscribe({complete:E,error:D})});a.push(v)}}Promise.all(a).then(()=>{c()}).catch(h=>{this.reject(h)}),0===a.length&&c(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(Be(Tm,8))},i.\u0275prov=dt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Am=new on("AppId",{providedIn:"root",factory:function k_(){return`${Pd()}${Pd()}${Pd()}`}});function Pd(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Mm=new on("Platform Initializer"),F_=new on("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),L_=new on("appBootstrapListener");let CI=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=dt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const Gf=new on("LocaleId",{providedIn:"root",factory:()=>Ke(Gf,lt.Optional|lt.SkipSelf)||function bI(){return typeof $localize<"u"&&$localize.locale||bd}()}),Rm=new on("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class ST{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}let AT=(()=>{class i{compileModuleSync(a){return new a_(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const c=this.compileModuleSync(a),p=ya(Yn(a).declarations).reduce((v,E)=>{const D=Wt(E);return D&&v.push(new _a(D)),v},[]);return new ST(c,p)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=dt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const TI=(()=>Promise.resolve(0))();function el(i){typeof Zone>"u"?TI.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class Wi{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Vo(!1),this.onMicrotaskEmpty=new Vo(!1),this.onStable=new Vo(!1),this.onError=new Vo(!1),typeof Zone>"u")throw new de(908,!1);Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!c&&a,h.shouldCoalesceRunChangeDetection=c,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function Om(){let i=Ct.requestAnimationFrame,o=Ct.cancelAnimationFrame;if(typeof Zone<"u"&&i&&o){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function U_(i){const o=()=>{!function zf(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Ct,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,Wf(i),i.isCheckStableRunning=!0,Pm(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),Wf(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,c,h,p,v,E)=>{try{return km(i),a.invokeTask(h,p,v,E)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||i.shouldCoalesceRunChangeDetection)&&o(),Zf(i)}},onInvoke:(a,c,h,p,v,E,D)=>{try{return km(i),a.invoke(h,p,v,E,D)}finally{i.shouldCoalesceRunChangeDetection&&o(),Zf(i)}},onHasTask:(a,c,h,p)=>{a.hasTask(h,p),c===h&&("microTask"==p.change?(i._hasPendingMicrotasks=p.microTask,Wf(i),Pm(i)):"macroTask"==p.change&&(i.hasPendingMacrotasks=p.macroTask))},onHandleError:(a,c,h,p)=>(a.handleError(h,p),i.runOutsideAngular(()=>i.onError.emit(p)),!1)})}(h)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Wi.isInAngularZone())throw new de(909,!1)}static assertNotInAngularZone(){if(Wi.isInAngularZone())throw new de(909,!1)}run(o,a,c){return this._inner.run(o,a,c)}runTask(o,a,c,h){const p=this._inner,v=p.scheduleEventTask("NgZoneEvent: "+h,o,SI,bm,bm);try{return p.runTask(v,a,c)}finally{p.cancelTask(v)}}runGuarded(o,a,c){return this._inner.runGuarded(o,a,c)}runOutsideAngular(o){return this._outer.run(o)}}const SI={};function Pm(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function Wf(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function km(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function Zf(i){i._nesting--,Pm(i)}class Kf{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Vo,this.onMicrotaskEmpty=new Vo,this.onStable=new Vo,this.onError=new Vo}run(o,a,c){return o.apply(a,c)}runGuarded(o,a,c){return o.apply(a,c)}runOutsideAngular(o){return o()}runTask(o,a,c,h){return o.apply(a,c)}}const B_=new on(""),AI=new on("");let Fm,j_=(()=>{class i{constructor(a,c,h){this._ngZone=a,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Fm||(function $_(i){Fm=i}(h),h.addToWindow(c)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Wi.assertNotInAngularZone(),el(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())el(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(a)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,c,h){let p=-1;c&&c>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==p),a(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:a,timeoutId:p,updateCb:h})}whenStable(a,c,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,c,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,c,h){return[]}}return i.\u0275fac=function(a){return new(a||i)(Be(Wi),Be(Yf),Be(AI))},i.\u0275prov=dt({token:i,factory:i.\u0275fac}),i})(),Yf=(()=>{class i{constructor(){this._applications=new Map}registerApplication(a,c){this._applications.set(a,c)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,c=!0){return Fm?.findTestabilityInTree(this,a,c)??null}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=dt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})(),Ma=null;const H_=new on("AllowMultipleToken"),G_=new on("PlatformDestroyListeners");class tl{constructor(o,a){this.name=o,this.token=a}}function W_(i,o,a=[]){const c=`Platform: ${o}`,h=new on(c);return(p=[])=>{let v=Fd();if(!v||v.injector.get(H_,!1)){const E=[...a,...p,{provide:h,useValue:!0}];i?i(E):function z_(i){if(Ma&&!Ma.get(H_,!1))throw new de(400,!1);Ma=i;const o=i.get(Jf);(function xI(i){const o=i.get(Mm,null);o&&o.forEach(a=>a())})(i)}(function Ou(i=[],o){return Bc.create({name:o,providers:[{provide:Hy,useValue:"platform"},{provide:G_,useValue:new Set([()=>Ma=null])},...i]})}(E,c))}return function PT(i){const o=Fd();if(!o)throw new de(401,!1);return o}()}}function Fd(){return Ma?.get(Jf)??null}let Jf=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,c){const h=function Sn(i,o){let a;return a="noop"===i?new Kf:("zone.js"===i?void 0:i)||new Wi(o),a}(c?.ngZone,function Z_(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!i||!i.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!i||!i.ngZoneRunCoalescing)||!1}}(c)),p=[{provide:Wi,useValue:h}];return h.run(()=>{const v=Bc.create({providers:p,parent:this.injector,name:a.moduleType.name}),E=a.create(v),D=E.injector.get(Wh,null);if(!D)throw new de(402,!1);return h.runOutsideAngular(()=>{const T=h.onError.subscribe({next:x=>{D.handleError(x)}});E.onDestroy(()=>{Lm(this._modules,E),T.unsubscribe()})}),function Xf(i,o,a){try{const c=a();return Pg(c)?c.catch(h=>{throw o.runOutsideAngular(()=>i.handleError(h)),h}):c}catch(c){throw o.runOutsideAngular(()=>i.handleError(c)),c}}(D,h,()=>{const T=E.injector.get(Sm);return T.runInitializers(),T.donePromise.then(()=>(function _f(i){kt(i,"Expected localeId to be defined"),"string"==typeof i&&(VE=i.toLowerCase().replace(/_/g,"-"))}(E.injector.get(Gf,bd)||bd),this._moduleDoBootstrap(E),E))})})}bootstrapModule(a,c=[]){const h=Ld({},c);return function MI(i,o,a){const c=new a_(a);return Promise.resolve(c)}(0,0,a).then(p=>this.bootstrapModuleFactory(p,h))}_moduleDoBootstrap(a){const c=a.injector.get(ku);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(h=>c.bootstrap(h));else{if(!a.instance.ngDoBootstrap)throw new de(403,!1);a.instance.ngDoBootstrap(c)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new de(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const a=this._injector.get(G_,null);a&&(a.forEach(c=>c()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(Be(Bc))},i.\u0275prov=dt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function Ld(i,o){return Array.isArray(o)?o.reduce(Ld,i):{...i,...o}}let ku=(()=>{class i{constructor(a,c,h){this._zone=a,this._injector=c,this._exceptionHandler=h,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const p=new O.y(E=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{E.next(this._stable),E.complete()})}),v=new O.y(E=>{let D;this._zone.runOutsideAngular(()=>{D=this._zone.onStable.subscribe(()=>{Wi.assertNotInAngularZone(),el(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,E.next(!0))})})});const T=this._zone.onUnstable.subscribe(()=>{Wi.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{E.next(!1)}))});return()=>{D.unsubscribe(),T.unsubscribe()}});this.isStable=(0,se.T)(p,v.pipe((0,oe.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(a,c){const h=a instanceof Gh;if(!this._injector.get(Sm).done)throw!h&&On(a),new de(405,false);let v;v=h?a:this._injector.get(ld).resolveComponentFactory(a),this.componentTypes.push(v.componentType);const E=function Qf(i){return i.isBoundToModule}(v)?void 0:this._injector.get(Sa),T=v.create(Bc.NULL,[],c||v.selector,E),x=T.location.nativeElement,k=T.injector.get(B_,null);return k?.registerApplication(x),T.onDestroy(()=>{this.detachView(T.hostView),Lm(this.components,T),k?.unregisterApplication(x)}),this._loadComponent(T),T}tick(){if(this._runningTick)throw new de(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const c=a;this._views.push(c),c.attachToAppRef(this)}detachView(a){const c=a;Lm(this._views,c),c.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a);const c=this._injector.get(L_,[]);c.push(...this._bootstrapListeners),c.forEach(h=>h(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>Lm(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new de(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return i.\u0275fac=function(a){return new(a||i)(Be(Wi),Be(Lc),Be(Wh))},i.\u0275prov=dt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Lm(i,o){const a=i.indexOf(o);a>-1&&i.splice(a,1)}function FT(){return!1}let RI=(()=>{class i{}return i.__NG_ELEMENT_ID__=NI,i})();function NI(i){return function OI(i,o,a){if(Ii(i)&&!a){const c=qn(i.index,o);return new ef(c,c)}return 47&i.type?new ef(o[16],o):null}(Xn(),Ce(),16==(16&i))}class FI{constructor(){}supports(o){return nf(o)}create(o){return new LI(o)}}const jn=(i,o)=>o;class LI{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||jn}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,c=this._removalsHead,h=0,p=null;for(;a||c;){const v=!c||a&&a.currentIndex<t0(c,h,p)?a:c,E=t0(v,h,p),D=v.currentIndex;if(v===c)h--,c=c._nextRemoved;else if(a=a._next,null==v.previousIndex)h++;else{p||(p=[]);const T=E-h,x=D-h;if(T!=x){for(let G=0;G<T;G++){const X=G<p.length?p[G]:p[G]=0,me=X+G;x<=me&&me<T&&(p[G]=X+1)}p[v.previousIndex]=x-T}}E!==D&&o(v,E,D)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!nf(o))throw new de(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let h,p,v,a=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let E=0;E<this.length;E++)p=o[E],v=this._trackByFn(E,p),null!==a&&Object.is(a.trackById,v)?(c&&(a=this._verifyReinsertion(a,p,v,E)),Object.is(a.item,p)||this._addIdentityChange(a,p)):(a=this._mismatch(a,p,v,E),c=!0),a=a._next}else h=0,function tE(i,o){if(Array.isArray(i))for(let a=0;a<i.length;a++)o(i[a]);else{const a=i[Gc()]();let c;for(;!(c=a.next()).done;)o(c.value)}}(o,E=>{v=this._trackByFn(h,E),null!==a&&Object.is(a.trackById,v)?(c&&(a=this._verifyReinsertion(a,E,v,h)),Object.is(a.item,E)||this._addIdentityChange(a,E)):(a=this._mismatch(a,E,v,h),c=!0),a=a._next,h++}),this.length=h;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,c,h){let p;return null===o?p=this._itTail:(p=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,p,h)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,h))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,p,h)):o=this._addAfter(new BT(a,c),p,h),o}_verifyReinsertion(o,a,c,h){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==p?o=this._reinsertAfter(p,o._prev,h):o.currentIndex!=h&&(o.currentIndex=h,this._addToMoves(o,h)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const h=o._prevRemoved,p=o._nextRemoved;return null===h?this._removalsHead=p:h._nextRemoved=p,null===p?this._removalsTail=h:p._prevRemoved=h,this._insertAfter(o,a,c),this._addToMoves(o,c),o}_moveAfter(o,a,c){return this._unlink(o),this._insertAfter(o,a,c),this._addToMoves(o,c),o}_addAfter(o,a,c){return this._insertAfter(o,a,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,c){const h=null===a?this._itHead:a._next;return o._next=h,o._prev=a,null===h?this._itTail=o:h._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new VI),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,c=o._next;return null===a?this._itHead=c:a._next=c,null===c?this._itTail=a:c._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new VI),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class BT{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class jT{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===a||a<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const a=o._prevDup,c=o._nextDup;return null===a?this._head=c:a._nextDup=c,null===c?this._tail=a:c._prevDup=a,null===this._head}}class VI{constructor(){this.map=new Map}put(o){const a=o.trackById;let c=this.map.get(a);c||(c=new jT,this.map.set(a,c)),c.add(o)}get(o,a){const h=this.map.get(o);return h?h.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function t0(i,o,a){const c=i.previousIndex;if(null===c)return c;let h=0;return a&&c<a.length&&(h=a[c]),c+o+h}class n0{constructor(){}supports(o){return o instanceof Map||Tg(o)}create(){return new UI}}class UI{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||Tg(o)))throw new de(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,h)=>{if(a&&a.key===h)this._maybeAddToChanges(a,c),this._appendAfter=a,a=a._next;else{const p=this._getOrCreateRecordForKey(h,c);a=this._insertBeforeOrAppend(a,p)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let c=a;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const c=o._prev;return a._next=o,a._prev=c,o._prev=a,c&&(c._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const h=this._records.get(o);this._maybeAddToChanges(h,a);const p=h._prev,v=h._next;return p&&(p._next=v),v&&(v._prev=p),h._next=null,h._prev=null,h}const c=new $m(o);return this._records.set(o,c),c.currentValue=a,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(c=>a(o[c],c))}}class $m{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function r0(){return new so([new FI])}let so=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(null!=c){const h=c.factories.slice();a=a.concat(h)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||r0()),deps:[[i,new b,new Ds]]}}find(a){const c=this.factories.find(h=>h.supports(a));if(null!=c)return c;throw new de(901,!1)}}return i.\u0275prov=dt({token:i,providedIn:"root",factory:r0}),i})();function s0(){return new np([new n0])}let np=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(c){const h=c.factories.slice();a=a.concat(h)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||s0()),deps:[[i,new b,new Ds]]}}find(a){const c=this.factories.find(h=>h.supports(a));if(c)return c;throw new de(901,!1)}}return i.\u0275prov=dt({token:i,providedIn:"root",factory:s0}),i})();const $I=W_(null,"core",[]);let Hm=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(Be(ku))},i.\u0275mod=_n({type:i}),i.\u0275inj=Jr({}),i})();function HT(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}},3942:(st,we,P)=>{P.d(we,{Z:()=>$e});var d=P(2090),J=P(4859),O=P(9681),se=P(1877);class oe{constructor(de,De){this._delegate=de,this.firebase=De,(0,O._addComponent)(de,new J.wA("app-compat",()=>this,"PUBLIC")),this.container=de.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(de){this._delegate.automaticDataCollectionEnabled=de}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(de=>{this._delegate.checkDestroyed(),de()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(de,De=O._DEFAULT_ENTRY_NAME){var Ee;this._delegate.checkDestroyed();const Pe=this._delegate.container.getProvider(de);return!Pe.isInitialized()&&"EXPLICIT"===(null===(Ee=Pe.getComponent())||void 0===Ee?void 0:Ee.instantiationMode)&&Pe.initialize(),Pe.getImmediate({identifier:De})}_removeServiceInstance(de,De=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(de).clearInstance(De)}_addComponent(de){(0,O._addComponent)(this._delegate,de)}_addOrOverwriteComponent(de){(0,O._addOrOverwriteComponent)(this._delegate,de)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const fe=new d.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),B=function ce(){const nt=function le(nt){const de={},De={__esModule:!0,initializeApp:function Se(Re,V={}){const ye=O.initializeApp(Re,V);if((0,d.r3)(de,ye.name))return de[ye.name];const q=new nt(ye,De);return de[ye.name]=q,q},app:Pe,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function Ae(Re){const V=Re.name,ye=V.replace("-compat","");if(O._registerComponent(Re)&&"PUBLIC"===Re.type){const q=(K=Pe())=>{if("function"!=typeof K[ye])throw fe.create("invalid-app-argument",{appName:V});return K[ye]()};void 0!==Re.serviceProps&&(0,d.ZB)(q,Re.serviceProps),De[ye]=q,nt.prototype[ye]=function(...K){return this._getService.bind(this,V).apply(this,Re.multipleInstances?K:[])}}return"PUBLIC"===Re.type?De[ye]:null},removeApp:function Ee(Re){delete de[Re]},useAsService:function Fe(Re,V){return"serverAuth"===V?null:V},modularAPIs:O}};function Pe(Re){if(!(0,d.r3)(de,Re=Re||O._DEFAULT_ENTRY_NAME))throw fe.create("no-app",{appName:Re});return de[Re]}return De.default=De,Object.defineProperty(De,"apps",{get:function ve(){return Object.keys(de).map(Re=>de[Re])}}),Pe.App=nt,De}(oe);return nt.INTERNAL=Object.assign(Object.assign({},nt.INTERNAL),{createFirebaseNamespace:ce,extendNamespace:function de(De){(0,d.ZB)(nt,De)},createSubscribe:d.ne,ErrorFactory:d.LL,deepExtend:d.ZB}),nt}(),j=new se.Yd("@firebase/app-compat");if((0,d.jU)()&&void 0!==self.firebase){j.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const nt=self.firebase.SDK_VERSION;nt&&nt.indexOf("LITE")>=0&&j.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const $e=B;!function Ie(nt){(0,O.registerVersion)("@firebase/app-compat","0.2.1",nt)}()},9681:(st,we,P)=>{P.r(we),P.d(we,{FirebaseError:()=>se.ZR,SDK_VERSION:()=>uo,_DEFAULT_ENTRY_NAME:()=>an,_addComponent:()=>Kt,_addOrOverwriteComponent:()=>ar,_apps:()=>kt,_clearComponents:()=>Jr,_components:()=>ct,_getProvider:()=>dt,_registerComponent:()=>Er,_removeServiceInstance:()=>fn,deleteApp:()=>Fs,getApp:()=>yi,getApps:()=>Cr,initializeApp:()=>hs,onLog:()=>lt,registerVersion:()=>kr,setLogLevel:()=>Zi});var d=P(5861),J=P(4859),O=P(1877),se=P(2090),oe=P(8766);class re{constructor(_e){this.container=_e}getPlatformInfoString(){return this.container.getProviders().map(Ke=>{if(function fe(Be){return"VERSION"===Be.getComponent()?.type}(Ke)){const vt=Ke.getImmediate();return`${vt.library}/${vt.version}`}return null}).filter(Ke=>Ke).join(" ")}}const le="@firebase/app",B=new O.Yd("@firebase/app"),an="[DEFAULT]",Mt={[le]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},kt=new Map,ct=new Map;function Kt(Be,_e){try{Be.container.addComponent(_e)}catch(Ke){B.debug(`Component ${_e.name} failed to register with FirebaseApp ${Be.name}`,Ke)}}function ar(Be,_e){Be.container.addOrOverwriteComponent(_e)}function Er(Be){const _e=Be.name;if(ct.has(_e))return B.debug(`There were multiple attempts to register component ${_e}.`),!1;ct.set(_e,Be);for(const Ke of kt.values())Kt(Ke,Be);return!0}function dt(Be,_e){const Ke=Be.container.getProvider("heartbeat").getImmediate({optional:!0});return Ke&&Ke.triggerHeartbeat(),Be.container.getProvider(_e)}function fn(Be,_e,Ke=an){dt(Be,_e).clearInstance(Ke)}function Jr(){ct.clear()}const Ir=new se.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Dr{constructor(_e,Ke,vt){this._isDeleted=!1,this._options=Object.assign({},_e),this._config=Object.assign({},Ke),this._name=Ke.name,this._automaticDataCollectionEnabled=Ke.automaticDataCollectionEnabled,this._container=vt,this.container.addComponent(new J.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(_e){this.checkDestroyed(),this._automaticDataCollectionEnabled=_e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(_e){this._isDeleted=_e}checkDestroyed(){if(this.isDeleted)throw Ir.create("app-deleted",{appName:this._name})}}const uo="9.16.0";function hs(Be,_e={}){let Ke=Be;"object"!=typeof _e&&(_e={name:_e});const vt=Object.assign({name:an,automaticDataCollectionEnabled:!1},_e),Et=vt.name;if("string"!=typeof Et||!Et)throw Ir.create("bad-app-name",{appName:String(Et)});if(Ke||(Ke=(0,se.aH)()),!Ke)throw Ir.create("no-options");const xt=kt.get(Et);if(xt){if((0,se.vZ)(Ke,xt.options)&&(0,se.vZ)(vt,xt.config))return xt;throw Ir.create("duplicate-app",{appName:Et})}const U=new J.H0(Et);for(const z of ct.values())U.addComponent(z);const L=new Dr(Ke,vt,U);return kt.set(Et,L),L}function yi(Be=an){const _e=kt.get(Be);if(!_e&&Be===an)return hs();if(!_e)throw Ir.create("no-app",{appName:Be});return _e}function Cr(){return Array.from(kt.values())}function Fs(Be){return un.apply(this,arguments)}function un(){return(un=(0,d.Z)(function*(Be){const _e=Be.name;kt.has(_e)&&(kt.delete(_e),yield Promise.all(Be.container.getProviders().map(Ke=>Ke.delete())),Be.isDeleted=!0)})).apply(this,arguments)}function kr(Be,_e,Ke){var vt;let Et=null!==(vt=Mt[Be])&&void 0!==vt?vt:Be;Ke&&(Et+=`-${Ke}`);const xt=Et.match(/\s|\//),U=_e.match(/\s|\//);if(xt||U){const L=[`Unable to register library "${Et}" with version "${_e}":`];return xt&&L.push(`library name "${Et}" contains illegal characters (whitespace or "/")`),xt&&U&&L.push("and"),U&&L.push(`version name "${_e}" contains illegal characters (whitespace or "/")`),void B.warn(L.join(" "))}Er(new J.wA(`${Et}-version`,()=>({library:Et,version:_e}),"VERSION"))}function lt(Be,_e){if(null!==Be&&"function"!=typeof Be)throw Ir.create("invalid-log-argument");(0,O.Am)(Be,_e)}function Zi(Be){(0,O.Ub)(Be)}const br="firebase-heartbeat-store";let fs=null;function Ct(){return fs||(fs=(0,oe.X3)("firebase-heartbeat-database",1,{upgrade:(Be,_e)=>{0===_e&&Be.createObjectStore(br)}}).catch(Be=>{throw Ir.create("idb-open",{originalErrorMessage:Be.message})})),fs}function mt(){return(mt=(0,d.Z)(function*(Be){try{return(yield Ct()).transaction(br).objectStore(br).get(yn(Be))}catch(_e){if(_e instanceof se.ZR)B.warn(_e.message);else{const Ke=Ir.create("idb-get",{originalErrorMessage:_e?.message});B.warn(Ke.message)}}})).apply(this,arguments)}function Ki(Be,_e){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,d.Z)(function*(Be,_e){try{const vt=(yield Ct()).transaction(br,"readwrite");return yield vt.objectStore(br).put(_e,yn(Be)),vt.done}catch(Ke){if(Ke instanceof se.ZR)B.warn(Ke.message);else{const vt=Ir.create("idb-set",{originalErrorMessage:Ke?.message});B.warn(vt.message)}}})).apply(this,arguments)}function yn(Be){return`${Be.name}!${Be.options.appId}`}class jo{constructor(_e){this.container=_e,this._heartbeatsCache=null;const Ke=this.container.getProvider("app").getImmediate();this._storage=new zt(Ke),this._heartbeatsCachePromise=this._storage.read().then(vt=>(this._heartbeatsCache=vt,vt))}triggerHeartbeat(){var _e=this;return(0,d.Z)(function*(){const vt=_e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Et=Xt();if(null===_e._heartbeatsCache&&(_e._heartbeatsCache=yield _e._heartbeatsCachePromise),_e._heartbeatsCache.lastSentHeartbeatDate!==Et&&!_e._heartbeatsCache.heartbeats.some(xt=>xt.date===Et))return _e._heartbeatsCache.heartbeats.push({date:Et,agent:vt}),_e._heartbeatsCache.heartbeats=_e._heartbeatsCache.heartbeats.filter(xt=>{const U=new Date(xt.date).valueOf();return Date.now()-U<=2592e6}),_e._storage.overwrite(_e._heartbeatsCache)})()}getHeartbeatsHeader(){var _e=this;return(0,d.Z)(function*(){if(null===_e._heartbeatsCache&&(yield _e._heartbeatsCachePromise),null===_e._heartbeatsCache||0===_e._heartbeatsCache.heartbeats.length)return"";const Ke=Xt(),{heartbeatsToSend:vt,unsentEntries:Et}=function Yi(Be,_e=1024){const Ke=[];let vt=Be.slice();for(const Et of Be){const xt=Ke.find(U=>U.agent===Et.agent);if(xt){if(xt.dates.push(Et.date),cr(Ke)>_e){xt.dates.pop();break}}else if(Ke.push({agent:Et.agent,dates:[Et.date]}),cr(Ke)>_e){Ke.pop();break}vt=vt.slice(1)}return{heartbeatsToSend:Ke,unsentEntries:vt}}(_e._heartbeatsCache.heartbeats),xt=(0,se.L)(JSON.stringify({version:2,heartbeats:vt}));return _e._heartbeatsCache.lastSentHeartbeatDate=Ke,Et.length>0?(_e._heartbeatsCache.heartbeats=Et,yield _e._storage.overwrite(_e._heartbeatsCache)):(_e._heartbeatsCache.heartbeats=[],_e._storage.overwrite(_e._heartbeatsCache)),xt})()}}function Xt(){return(new Date).toISOString().substring(0,10)}class zt{constructor(_e){this.app=_e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,d.Z)(function*(){return!!(0,se.hl)()&&(0,se.eu)().then(()=>!0).catch(()=>!1)})()}read(){var _e=this;return(0,d.Z)(function*(){return(yield _e._canUseIndexedDBPromise)&&(yield function ht(Be){return mt.apply(this,arguments)}(_e.app))||{heartbeats:[]}})()}overwrite(_e){var Ke=this;return(0,d.Z)(function*(){var vt;if(yield Ke._canUseIndexedDBPromise){const xt=yield Ke.read();return Ki(Ke.app,{lastSentHeartbeatDate:null!==(vt=_e.lastSentHeartbeatDate)&&void 0!==vt?vt:xt.lastSentHeartbeatDate,heartbeats:_e.heartbeats})}})()}add(_e){var Ke=this;return(0,d.Z)(function*(){var vt;if(yield Ke._canUseIndexedDBPromise){const xt=yield Ke.read();return Ki(Ke.app,{lastSentHeartbeatDate:null!==(vt=_e.lastSentHeartbeatDate)&&void 0!==vt?vt:xt.lastSentHeartbeatDate,heartbeats:[...xt.heartbeats,..._e.heartbeats]})}})()}}function cr(Be){return(0,se.L)(JSON.stringify({version:2,heartbeats:Be})).length}!function ki(Be){Er(new J.wA("platform-logger",_e=>new re(_e),"PRIVATE")),Er(new J.wA("heartbeat",_e=>new jo(_e),"PRIVATE")),kr(le,"0.9.1",Be),kr(le,"0.9.1","esm2017"),kr("fire-js","")}("")},4859:(st,we,P)=>{P.d(we,{H0:()=>le,wA:()=>O});var d=P(5861),J=P(2090);class O{constructor(B,j,W){this.name=B,this.instanceFactory=j,this.type=W,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(B){return this.instantiationMode=B,this}setMultipleInstances(B){return this.multipleInstances=B,this}setServiceProps(B){return this.serviceProps=B,this}setInstanceCreatedCallback(B){return this.onInstanceCreated=B,this}}const se="[DEFAULT]";class oe{constructor(B,j){this.name=B,this.container=j,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(B){const j=this.normalizeInstanceIdentifier(B);if(!this.instancesDeferred.has(j)){const W=new J.BH;if(this.instancesDeferred.set(j,W),this.isInitialized(j)||this.shouldAutoInitialize())try{const Ue=this.getOrInitializeService({instanceIdentifier:j});Ue&&W.resolve(Ue)}catch{}}return this.instancesDeferred.get(j).promise}getImmediate(B){var j;const W=this.normalizeInstanceIdentifier(B?.identifier),Ue=null!==(j=B?.optional)&&void 0!==j&&j;if(!this.isInitialized(W)&&!this.shouldAutoInitialize()){if(Ue)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:W})}catch(Ie){if(Ue)return null;throw Ie}}getComponent(){return this.component}setComponent(B){if(B.name!==this.name)throw Error(`Mismatching Component ${B.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=B,this.shouldAutoInitialize()){if(function fe(ce){return"EAGER"===ce.instantiationMode}(B))try{this.getOrInitializeService({instanceIdentifier:se})}catch{}for(const[j,W]of this.instancesDeferred.entries()){const Ue=this.normalizeInstanceIdentifier(j);try{const Ie=this.getOrInitializeService({instanceIdentifier:Ue});W.resolve(Ie)}catch{}}}}clearInstance(B=se){this.instancesDeferred.delete(B),this.instancesOptions.delete(B),this.instances.delete(B)}delete(){var B=this;return(0,d.Z)(function*(){const j=Array.from(B.instances.values());yield Promise.all([...j.filter(W=>"INTERNAL"in W).map(W=>W.INTERNAL.delete()),...j.filter(W=>"_delete"in W).map(W=>W._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(B=se){return this.instances.has(B)}getOptions(B=se){return this.instancesOptions.get(B)||{}}initialize(B={}){const{options:j={}}=B,W=this.normalizeInstanceIdentifier(B.instanceIdentifier);if(this.isInitialized(W))throw Error(`${this.name}(${W}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ue=this.getOrInitializeService({instanceIdentifier:W,options:j});for(const[Ie,$e]of this.instancesDeferred.entries())W===this.normalizeInstanceIdentifier(Ie)&&$e.resolve(Ue);return Ue}onInit(B,j){var W;const Ue=this.normalizeInstanceIdentifier(j),Ie=null!==(W=this.onInitCallbacks.get(Ue))&&void 0!==W?W:new Set;Ie.add(B),this.onInitCallbacks.set(Ue,Ie);const $e=this.instances.get(Ue);return $e&&B($e,Ue),()=>{Ie.delete(B)}}invokeOnInitCallbacks(B,j){const W=this.onInitCallbacks.get(j);if(W)for(const Ue of W)try{Ue(B,j)}catch{}}getOrInitializeService({instanceIdentifier:B,options:j={}}){let W=this.instances.get(B);if(!W&&this.component&&(W=this.component.instanceFactory(this.container,{instanceIdentifier:(ce=B,ce===se?void 0:ce),options:j}),this.instances.set(B,W),this.instancesOptions.set(B,j),this.invokeOnInitCallbacks(W,B),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,B,W)}catch{}var ce;return W||null}normalizeInstanceIdentifier(B=se){return this.component?this.component.multipleInstances?B:se:B}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class le{constructor(B){this.name=B,this.providers=new Map}addComponent(B){const j=this.getProvider(B.name);if(j.isComponentSet())throw new Error(`Component ${B.name} has already been registered with ${this.name}`);j.setComponent(B)}addOrOverwriteComponent(B){this.getProvider(B.name).isComponentSet()&&this.providers.delete(B.name),this.addComponent(B)}getProvider(B){if(this.providers.has(B))return this.providers.get(B);const j=new oe(B,this);return this.providers.set(B,j),j}getProviders(){return Array.from(this.providers.values())}}},1877:(st,we,P)=>{P.d(we,{Am:()=>ce,Ub:()=>le,Yd:()=>fe,in:()=>J});const d=[];var J=(()=>{return(B=J||(J={}))[B.DEBUG=0]="DEBUG",B[B.VERBOSE=1]="VERBOSE",B[B.INFO=2]="INFO",B[B.WARN=3]="WARN",B[B.ERROR=4]="ERROR",B[B.SILENT=5]="SILENT",J;var B})();const O={debug:J.DEBUG,verbose:J.VERBOSE,info:J.INFO,warn:J.WARN,error:J.ERROR,silent:J.SILENT},se=J.INFO,oe={[J.DEBUG]:"log",[J.VERBOSE]:"log",[J.INFO]:"info",[J.WARN]:"warn",[J.ERROR]:"error"},re=(B,j,...W)=>{if(j<B.logLevel)return;const Ue=(new Date).toISOString(),Ie=oe[j];if(!Ie)throw new Error(`Attempted to log a message with an invalid logType (value: ${j})`);console[Ie](`[${Ue}]  ${B.name}:`,...W)};class fe{constructor(j){this.name=j,this._logLevel=se,this._logHandler=re,this._userLogHandler=null,d.push(this)}get logLevel(){return this._logLevel}set logLevel(j){if(!(j in J))throw new TypeError(`Invalid value "${j}" assigned to \`logLevel\``);this._logLevel=j}setLogLevel(j){this._logLevel="string"==typeof j?O[j]:j}get logHandler(){return this._logHandler}set logHandler(j){if("function"!=typeof j)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=j}get userLogHandler(){return this._userLogHandler}set userLogHandler(j){this._userLogHandler=j}debug(...j){this._userLogHandler&&this._userLogHandler(this,J.DEBUG,...j),this._logHandler(this,J.DEBUG,...j)}log(...j){this._userLogHandler&&this._userLogHandler(this,J.VERBOSE,...j),this._logHandler(this,J.VERBOSE,...j)}info(...j){this._userLogHandler&&this._userLogHandler(this,J.INFO,...j),this._logHandler(this,J.INFO,...j)}warn(...j){this._userLogHandler&&this._userLogHandler(this,J.WARN,...j),this._logHandler(this,J.WARN,...j)}error(...j){this._userLogHandler&&this._userLogHandler(this,J.ERROR,...j),this._logHandler(this,J.ERROR,...j)}}function le(B){d.forEach(j=>{j.setLogLevel(B)})}function ce(B,j){for(const W of d){let Ue=null;j&&j.level&&(Ue=O[j.level]),W.userLogHandler=null===B?null:(Ie,$e,...nt)=>{const de=nt.map(De=>{if(null==De)return null;if("string"==typeof De)return De;if("number"==typeof De||"boolean"==typeof De)return De.toString();if(De instanceof Error)return De.message;try{return JSON.stringify(De)}catch{return null}}).filter(De=>De).join(" ");$e>=(Ue??Ie.logLevel)&&B({level:J[$e].toLowerCase(),message:de,args:nt,type:Ie.name})}}}},259:(st,we,P)=>{P.d(we,{C6:()=>d.getApps,Mq:()=>d.getApp});var d=P(9681);(0,d.registerVersion)("firebase","9.16.0","app")},9260:(st,we,P)=>{P.d(we,{Z:()=>d.Z});var d=P(3942);d.Z.registerVersion("firebase","9.16.0","app-compat")},750:(st,we,P)=>{P.r(we);var d=P(5861),J=P(3942),O=P(2090),se=P(9681),oe=P(1877),re=P(655),fe=P(4859);const $e=function Ue(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},nt=function Ie(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},de=new O.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ee=new oe.Yd("@firebase/auth");function Pe(y,...f){Ee.logLevel<=oe.in.ERROR&&Ee.error(`Auth (${se.SDK_VERSION}): ${y}`,...f)}function Se(y,...f){throw Re(y,...f)}function ve(y,...f){return Re(y,...f)}function Ae(y,f,g){const _=Object.assign(Object.assign({},nt()),{[f]:g});return new O.LL("auth","Firebase",_).create(f,{appName:y.name})}function Fe(y,f,g){if(!(f instanceof g))throw g.name!==f.constructor.name&&Se(y,"argument-error"),Ae(y,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Re(y,...f){if("string"!=typeof y){const g=f[0],_=[...f.slice(1)];return _[0]&&(_[0].appName=y.name),y._errorFactory.create(g,..._)}return de.create(y,...f)}function V(y,f,...g){if(!y)throw Re(f,...g)}function ye(y){const f="INTERNAL ASSERTION FAILED: "+y;throw Pe(f),new Error(f)}function q(y,f){y||ye(f)}const K=new Map;function ie(y){q(y instanceof Function,"Expected a class definition");let f=K.get(y);return f?(q(f instanceof y,"Instance stored in cache mismatched with class"),f):(f=new y,K.set(y,f),f)}function Ne(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function ot(){return"http:"===Yt()||"https:"===Yt()}function Yt(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class kt{constructor(f,g){this.shortDelay=f,this.longDelay=g,q(g>f,"Short delay should be less than long delay!"),this.isMobile=(0,O.uI)()||(0,O.b$)()}get(){return function an(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ot()||(0,O.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ct(y,f){q(y.emulator,"Emulator should always be set here");const{url:g}=y.emulator;return f?`${g}${f.startsWith("/")?f.slice(1):f}`:g}class Kt{static initialize(f,g,_){this.fetchImpl=f,g&&(this.headersImpl=g),_&&(this.responseImpl=_)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void ye("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void ye("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void ye("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ar={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Er=new kt(3e4,6e4);function dt(y,f){return y.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:y.tenantId}):f}function fn(y,f,g,_){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,d.Z)(function*(y,f,g,_,S={}){return Pr(y,S,(0,d.Z)(function*(){let R={},H={};_&&("GET"===f?H=_:R={body:JSON.stringify(_)});const he=(0,O.xO)(Object.assign({key:y.config.apiKey},H)).slice(1),je=yield y._getAdditionalHeaders();return je["Content-Type"]="application/json",y.languageCode&&(je["X-Firebase-Locale"]=y.languageCode),Kt.fetch()(hs(y,y.config.apiHost,g,he),Object.assign({method:f,headers:je,referrerPolicy:"no-referrer"},R))}))})).apply(this,arguments)}function Pr(y,f,g){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,d.Z)(function*(y,f,g){y._canInitEmulator=!1;const _=Object.assign(Object.assign({},ar),f);try{const S=new yi(y),R=yield Promise.race([g(),S.promise]);S.clearNetworkTimeout();const H=yield R.json();if("needConfirmation"in H)throw Cr(y,"account-exists-with-different-credential",H);if(R.ok&&!("errorMessage"in H))return H;{const he=R.ok?H.errorMessage:H.error.message,[je,Ze]=he.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===je)throw Cr(y,"credential-already-in-use",H);if("EMAIL_EXISTS"===je)throw Cr(y,"email-already-in-use",H);if("USER_DISABLED"===je)throw Cr(y,"user-disabled",H);const yt=_[je]||je.toLowerCase().replace(/[_\s]+/g,"-");if(Ze)throw Ae(y,yt,Ze);Se(y,yt)}}catch(S){if(S instanceof O.ZR)throw S;Se(y,"network-request-failed")}})).apply(this,arguments)}function Dr(y,f,g,_){return uo.apply(this,arguments)}function uo(){return(uo=(0,d.Z)(function*(y,f,g,_,S={}){const R=yield fn(y,f,g,_,S);return"mfaPendingCredential"in R&&Se(y,"multi-factor-auth-required",{_serverResponse:R}),R})).apply(this,arguments)}function hs(y,f,g,_){const S=`${f}${g}?${_}`;return y.config.emulator?ct(y.config,S):`${y.config.apiScheme}://${S}`}class yi{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((g,_)=>{this.timer=setTimeout(()=>_(ve(this.auth,"network-request-failed")),Er.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Cr(y,f,g){const _={appName:y.name};g.email&&(_.email=g.email),g.phoneNumber&&(_.phoneNumber=g.phoneNumber);const S=ve(y,f,_);return S.customData._tokenResponse=g,S}function un(){return(un=(0,d.Z)(function*(y,f){return fn(y,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function kr(y,f){return lt.apply(this,arguments)}function lt(){return(lt=(0,d.Z)(function*(y,f){return fn(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Zi(y,f){return vi.apply(this,arguments)}function vi(){return(vi=(0,d.Z)(function*(y,f){return fn(y,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function mn(y){if(y)try{const f=new Date(Number(y));if(!isNaN(f.getTime()))return f.toUTCString()}catch{}}function Ct(){return(Ct=(0,d.Z)(function*(y,f=!1){const g=(0,O.m9)(y),_=yield g.getIdToken(f),S=mt(_);V(S&&S.exp&&S.auth_time&&S.iat,g.auth,"internal-error");const R="object"==typeof S.firebase?S.firebase:void 0,H=R?.sign_in_provider;return{claims:S,token:_,authTime:mn(ht(S.auth_time)),issuedAtTime:mn(ht(S.iat)),expirationTime:mn(ht(S.exp)),signInProvider:H||null,signInSecondFactor:R?.sign_in_second_factor||null}})).apply(this,arguments)}function ht(y){return 1e3*Number(y)}function mt(y){const[f,g,_]=y.split(".");if(void 0===f||void 0===g||void 0===_)return Pe("JWT malformed, contained fewer than 3 sections"),null;try{const S=(0,O.tV)(g);return S?JSON.parse(S):(Pe("Failed to decode base64 JWT payload"),null)}catch(S){return Pe("Caught error parsing JWT payload as JSON",S?.toString()),null}}function Dn(y,f){return yn.apply(this,arguments)}function yn(){return(yn=(0,d.Z)(function*(y,f,g=!1){if(g)return f;try{return yield f}catch(_){throw _ instanceof O.ZR&&_i(_)&&y.auth.currentUser===y&&(yield y.auth.signOut()),_}})).apply(this,arguments)}function _i({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class ur{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var g;if(f){const _=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),_}{this.errorBackoff=3e4;const S=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,S)}}schedule(f=!1){var g=this;if(!this.isRunning)return;const _=this.getInterval(f);this.timerId=setTimeout((0,d.Z)(function*(){yield g.iteration()}),_)}iteration(){var f=this;return(0,d.Z)(function*(){try{yield f.user.getIdToken(!0)}catch(g){return void("auth/network-request-failed"===g?.code&&f.schedule(!0))}f.schedule()})()}}class jo{constructor(f,g){this.createdAt=f,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=mn(this.lastLoginAt),this.creationTime=mn(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Xt(y){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,d.Z)(function*(y){var f;const g=y.auth,_=yield y.getIdToken(),S=yield Dn(y,Zi(g,{idToken:_}));V(S?.users.length,g,"internal-error");const R=S.users[0];y._notifyReloadListener(R);const H=null!==(f=R.providerUserInfo)&&void 0!==f&&f.length?Be(R.providerUserInfo):[],he=ki(y.providerData,H),yt=!!y.isAnonymous&&!(y.email&&R.passwordHash||he?.length),at={uid:R.localId,displayName:R.displayName||null,photoURL:R.photoUrl||null,email:R.email||null,emailVerified:R.emailVerified||!1,phoneNumber:R.phoneNumber||null,tenantId:R.tenantId||null,providerData:he,metadata:new jo(R.createdAt,R.lastLoginAt),isAnonymous:yt};Object.assign(y,at)})).apply(this,arguments)}function cr(){return(cr=(0,d.Z)(function*(y){const f=(0,O.m9)(y);yield Xt(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function ki(y,f){return[...y.filter(_=>!f.some(S=>S.providerId===_.providerId)),...f]}function Be(y){return y.map(f=>{var{providerId:g}=f,_=(0,re._T)(f,["providerId"]);return{providerId:g,uid:_.rawId||"",displayName:_.displayName||null,email:_.email||null,phoneNumber:_.phoneNumber||null,photoURL:_.photoUrl||null}})}function Ke(){return(Ke=(0,d.Z)(function*(y,f){const g=yield Pr(y,{},(0,d.Z)(function*(){const _=(0,O.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:S,apiKey:R}=y.config,H=hs(y,S,"/v1/token",`key=${R}`),he=yield y._getAdditionalHeaders();return he["Content-Type"]="application/x-www-form-urlencoded",Kt.fetch()(H,{method:"POST",headers:he,body:_})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class vt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){V(f.idToken,"internal-error"),V(typeof f.idToken<"u","internal-error"),V(typeof f.refreshToken<"u","internal-error");const g="expiresIn"in f&&typeof f.expiresIn<"u"?Number(f.expiresIn):function Ki(y){const f=mt(y);return V(f,"internal-error"),V(typeof f.exp<"u","internal-error"),V(typeof f.iat<"u","internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,g)}getToken(f,g=!1){var _=this;return(0,d.Z)(function*(){return V(!_.accessToken||_.refreshToken,f,"user-token-expired"),g||!_.accessToken||_.isExpired?_.refreshToken?(yield _.refresh(f,_.refreshToken),_.accessToken):null:_.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,g){var _=this;return(0,d.Z)(function*(){const{accessToken:S,refreshToken:R,expiresIn:H}=yield function _e(y,f){return Ke.apply(this,arguments)}(f,g);_.updateTokensAndExpiration(S,R,Number(H))})()}updateTokensAndExpiration(f,g,_){this.refreshToken=g||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*_}static fromJSON(f,g){const{refreshToken:_,accessToken:S,expirationTime:R}=g,H=new vt;return _&&(V("string"==typeof _,"internal-error",{appName:f}),H.refreshToken=_),S&&(V("string"==typeof S,"internal-error",{appName:f}),H.accessToken=S),R&&(V("number"==typeof R,"internal-error",{appName:f}),H.expirationTime=R),H}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new vt,this.toJSON())}_performRefresh(){return ye("not implemented")}}function Et(y,f){V("string"==typeof y||typeof y>"u","internal-error",{appName:f})}class xt{constructor(f){var{uid:g,auth:_,stsTokenManager:S}=f,R=(0,re._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ur(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=_,this.stsTokenManager=S,this.accessToken=S.accessToken,this.displayName=R.displayName||null,this.email=R.email||null,this.emailVerified=R.emailVerified||!1,this.phoneNumber=R.phoneNumber||null,this.photoURL=R.photoURL||null,this.isAnonymous=R.isAnonymous||!1,this.tenantId=R.tenantId||null,this.providerData=R.providerData?[...R.providerData]:[],this.metadata=new jo(R.createdAt||void 0,R.lastLoginAt||void 0)}getIdToken(f){var g=this;return(0,d.Z)(function*(){const _=yield Dn(g,g.stsTokenManager.getToken(g.auth,f));return V(_,g.auth,"internal-error"),g.accessToken!==_&&(g.accessToken=_,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),_})()}getIdTokenResult(f){return function fs(y){return Ct.apply(this,arguments)}(this,f)}reload(){return function zt(y){return cr.apply(this,arguments)}(this)}_assign(f){this!==f&&(V(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(g=>Object.assign({},g)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){return new xt(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(f){V(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,g=!1){var _=this;return(0,d.Z)(function*(){let S=!1;f.idToken&&f.idToken!==_.stsTokenManager.accessToken&&(_.stsTokenManager.updateFromServerResponse(f),S=!0),g&&(yield Xt(_)),yield _.auth._persistUserIfCurrent(_),S&&_.auth._notifyListenersIfCurrent(_)})()}delete(){var f=this;return(0,d.Z)(function*(){const g=yield f.getIdToken();return yield Dn(f,function Fs(y,f){return un.apply(this,arguments)}(f.auth,{idToken:g})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,g){var _,S,R,H,he,je,Ze,yt;const at=null!==(_=g.displayName)&&void 0!==_?_:void 0,Un=null!==(S=g.email)&&void 0!==S?S:void 0,Si=null!==(R=g.phoneNumber)&&void 0!==R?R:void 0,vu=null!==(H=g.photoURL)&&void 0!==H?H:void 0,Yp=null!==(he=g.tenantId)&&void 0!==he?he:void 0,Xs=null!==(je=g._redirectEventId)&&void 0!==je?je:void 0,Ms=null!==(Ze=g.createdAt)&&void 0!==Ze?Ze:void 0,_u=null!==(yt=g.lastLoginAt)&&void 0!==yt?yt:void 0,{uid:wu,emailVerified:sd,isAnonymous:od,providerData:Bh,stsTokenManager:Qp}=g;V(wu&&Qp,f,"internal-error");const nw=vt.fromJSON(this.name,Qp);V("string"==typeof wu,f,"internal-error"),Et(at,f.name),Et(Un,f.name),V("boolean"==typeof sd,f,"internal-error"),V("boolean"==typeof od,f,"internal-error"),Et(Si,f.name),Et(vu,f.name),Et(Yp,f.name),Et(Xs,f.name),Et(Ms,f.name),Et(_u,f.name);const eo=new xt({uid:wu,auth:f,email:Un,emailVerified:sd,displayName:at,isAnonymous:od,photoURL:vu,phoneNumber:Si,tenantId:Yp,stsTokenManager:nw,createdAt:Ms,lastLoginAt:_u});return Bh&&Array.isArray(Bh)&&(eo.providerData=Bh.map(Eu=>Object.assign({},Eu))),Xs&&(eo._redirectEventId=Xs),eo}static _fromIdTokenResponse(f,g,_=!1){return(0,d.Z)(function*(){const S=new vt;S.updateFromServerResponse(g);const R=new xt({uid:g.localId,auth:f,stsTokenManager:S,isAnonymous:_});return yield Xt(R),R})()}}const L=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,d.Z)(function*(){return!0})()}_set(g,_){var S=this;return(0,d.Z)(function*(){S.storage[g]=_})()}_get(g){var _=this;return(0,d.Z)(function*(){const S=_.storage[g];return void 0===S?null:S})()}_remove(g){var _=this;return(0,d.Z)(function*(){delete _.storage[g]})()}_addListener(g,_){}_removeListener(g,_){}}return y.type="NONE",y})();function z(y,f,g){return`firebase:${y}:${f}:${g}`}class pe{constructor(f,g,_){this.persistence=f,this.auth=g,this.userKey=_;const{config:S,name:R}=this.auth;this.fullUserKey=z(this.userKey,S.apiKey,R),this.fullPersistenceKey=z("persistence",S.apiKey,R),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,d.Z)(function*(){const g=yield f.persistence._get(f.fullUserKey);return g?xt._fromJSON(f.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var g=this;return(0,d.Z)(function*(){if(g.persistence===f)return;const _=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=f,_?g.setCurrentUser(_):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,g,_="authUser"){return(0,d.Z)(function*(){if(!g.length)return new pe(ie(L),f,_);const S=(yield Promise.all(g.map(function(){var Ze=(0,d.Z)(function*(yt){if(yield yt._isAvailable())return yt});return function(yt){return Ze.apply(this,arguments)}}()))).filter(Ze=>Ze);let R=S[0]||ie(L);const H=z(_,f.config.apiKey,f.name);let he=null;for(const Ze of g)try{const yt=yield Ze._get(H);if(yt){const at=xt._fromJSON(f,yt);Ze!==R&&(he=at),R=Ze;break}}catch{}const je=S.filter(Ze=>Ze._shouldAllowMigration);return R._shouldAllowMigration&&je.length?(R=je[0],he&&(yield R._set(H,he.toJSON())),yield Promise.all(g.map(function(){var Ze=(0,d.Z)(function*(yt){if(yt!==R)try{yield yt._remove(H)}catch{}});return function(yt){return Ze.apply(this,arguments)}}())),new pe(R,f,_)):new pe(R,f,_)})()}}function ee(y){const f=y.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(vn(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(Je(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(Gn(f))return"Blackberry";if(Vt(f))return"Webos";if(Rt(f))return"Safari";if((f.includes("chrome/")||Gt(f))&&!f.includes("edge/"))return"Chrome";if(pt(f))return"Android";{const _=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===_?.length)return _[1]}return"Other"}function Je(y=(0,O.z$)()){return/firefox\//i.test(y)}function Rt(y=(0,O.z$)()){const f=y.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function Gt(y=(0,O.z$)()){return/crios\//i.test(y)}function vn(y=(0,O.z$)()){return/iemobile/i.test(y)}function pt(y=(0,O.z$)()){return/android/i.test(y)}function Gn(y=(0,O.z$)()){return/blackberry/i.test(y)}function Vt(y=(0,O.z$)()){return/webos/i.test(y)}function Ln(y=(0,O.z$)()){return/iphone|ipad|ipod/i.test(y)||/macintosh/i.test(y)&&/mobile/i.test(y)}function rh(y=(0,O.z$)()){return Ln(y)||pt(y)||Vt(y)||Gn(y)||/windows phone/i.test(y)||vn(y)}function Na(y,f=[]){let g;switch(y){case"Browser":g=ee((0,O.z$)());break;case"Worker":g=`${ee((0,O.z$)())}-${y}`;break;default:g=y}const _=f.length?f.join(","):"FirebaseCore-web";return`${g}/JsCore/${se.SDK_VERSION}/${_}`}class Hu{constructor(f){this.auth=f,this.queue=[]}pushCallback(f,g){const _=R=>new Promise((H,he)=>{try{H(f(R))}catch(je){he(je)}});_.onAbort=g,this.queue.push(_);const S=this.queue.length-1;return()=>{this.queue[S]=()=>Promise.resolve()}}runMiddleware(f){var g=this;return(0,d.Z)(function*(){if(g.auth.currentUser===f)return;const _=[];try{for(const S of g.queue)yield S(f),S.onAbort&&_.push(S.onAbort)}catch(S){_.reverse();for(const R of _)try{R()}catch{}throw g.auth._errorFactory.create("login-blocked",{originalMessage:S?.message})}})()}}class ll{constructor(f,g,_){this.app=f,this.heartbeatServiceProvider=g,this.config=_,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new dl(this),this.idTokenSubscription=new dl(this),this.beforeStateQueue=new Hu(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=de,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=_.sdkClientVersion}_initializeWithPersistence(f,g){var _=this;return g&&(this._popupRedirectResolver=ie(g)),this._initializationPromise=this.queue((0,d.Z)(function*(){var S,R;if(!_._deleted&&(_.persistenceManager=yield pe.create(_,f),!_._deleted)){if(null!==(S=_._popupRedirectResolver)&&void 0!==S&&S._shouldInitProactively)try{yield _._popupRedirectResolver._initialize(_)}catch{}yield _.initializeCurrentUser(g),_.lastNotifiedUid=(null===(R=_.currentUser)||void 0===R?void 0:R.uid)||null,!_._deleted&&(_._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,d.Z)(function*(){if(f._deleted)return;const g=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||g){if(f.currentUser&&g&&f.currentUser.uid===g.uid)return f._currentUser._assign(g),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(g,!0)}})()}initializeCurrentUser(f){var g=this;return(0,d.Z)(function*(){var _;const S=yield g.assertedPersistence.getCurrentUser();let R=S,H=!1;if(f&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const he=null===(_=g.redirectUser)||void 0===_?void 0:_._redirectEventId,je=R?._redirectEventId,Ze=yield g.tryRedirectSignIn(f);(!he||he===je)&&Ze?.user&&(R=Ze.user,H=!0)}if(!R)return g.directlySetCurrentUser(null);if(!R._redirectEventId){if(H)try{yield g.beforeStateQueue.runMiddleware(R)}catch(he){R=S,g._popupRedirectResolver._overrideRedirectResult(g,()=>Promise.reject(he))}return R?g.reloadAndSetCurrentUserOrClear(R):g.directlySetCurrentUser(null)}return V(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===R._redirectEventId?g.directlySetCurrentUser(R):g.reloadAndSetCurrentUserOrClear(R)})()}tryRedirectSignIn(f){var g=this;return(0,d.Z)(function*(){let _=null;try{_=yield g._popupRedirectResolver._completeRedirectFn(g,f,!0)}catch{yield g._setRedirectUser(null)}return _})()}reloadAndSetCurrentUserOrClear(f){var g=this;return(0,d.Z)(function*(){try{yield Xt(f)}catch(_){if("auth/network-request-failed"!==_?.code)return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function Mt(){if(typeof navigator>"u")return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var f=this;return(0,d.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var g=this;return(0,d.Z)(function*(){const _=f?(0,O.m9)(f):null;return _&&V(_.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(_&&_._clone(g))})()}_updateCurrentUser(f,g=!1){var _=this;return(0,d.Z)(function*(){if(!_._deleted)return f&&V(_.tenantId===f.tenantId,_,"tenant-id-mismatch"),g||(yield _.beforeStateQueue.runMiddleware(f)),_.queue((0,d.Z)(function*(){yield _.directlySetCurrentUser(f),_.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,d.Z)(function*(){return yield f.beforeStateQueue.runMiddleware(null),(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null,!0)})()}setPersistence(f){var g=this;return this.queue((0,d.Z)(function*(){yield g.assertedPersistence.setPersistence(ie(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new O.LL("auth","Firebase",f())}onAuthStateChanged(f,g,_){return this.registerStateListener(this.authStateSubscription,f,g,_)}beforeAuthStateChanged(f,g){return this.beforeStateQueue.pushCallback(f,g)}onIdTokenChanged(f,g,_){return this.registerStateListener(this.idTokenSubscription,f,g,_)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,g){var _=this;return(0,d.Z)(function*(){const S=yield _.getOrInitRedirectPersistenceManager(g);return null===f?S.removeCurrentUser():S.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var g=this;return(0,d.Z)(function*(){if(!g.redirectPersistenceManager){const _=f&&ie(f)||g._popupRedirectResolver;V(_,g,"argument-error"),g.redirectPersistenceManager=yield pe.create(g,[ie(_._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(f){var g=this;return(0,d.Z)(function*(){var _,S;return g._isInitialized&&(yield g.queue((0,d.Z)(function*(){}))),(null===(_=g._currentUser)||void 0===_?void 0:_._redirectEventId)===f?g._currentUser:(null===(S=g.redirectUser)||void 0===S?void 0:S._redirectEventId)===f?g.redirectUser:null})()}_persistUserIfCurrent(f){var g=this;return(0,d.Z)(function*(){if(f===g.currentUser)return g.queue((0,d.Z)(function*(){return g.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const _=null!==(g=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==_&&(this.lastNotifiedUid=_,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,g,_,S){if(this._deleted)return()=>{};const R="function"==typeof g?g:g.next.bind(g),H=this._isInitialized?Promise.resolve():this._initializationPromise;return V(H,this,"internal-error"),H.then(()=>R(this.currentUser)),"function"==typeof g?f.addObserver(g,_,S):f.addObserver(g)}directlySetCurrentUser(f){var g=this;return(0,d.Z)(function*(){g.currentUser&&g.currentUser!==f&&g._currentUser._stopProactiveRefresh(),f&&g.isProactiveRefreshEnabled&&f._startProactiveRefresh(),g.currentUser=f,f?yield g.assertedPersistence.setCurrentUser(f):yield g.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return V(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=Na(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,d.Z)(function*(){var g;const _={"X-Client-Version":f.clientVersion};f.app.options.appId&&(_["X-Firebase-gmpid"]=f.app.options.appId);const S=yield null===(g=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();return S&&(_["X-Firebase-Client"]=S),_})()}}function _n(y){return(0,O.m9)(y)}class dl{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,O.ne)(g=>this.observer=g)}get next(){return V(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Go(y){const f=y.indexOf(":");return f<0?"":y.substr(0,f+1)}function Wt(y){if(!y)return null;const f=Number(y);return isNaN(f)?null:f}class An{constructor(f,g){this.providerId=f,this.signInMethod=g}toJSON(){return ye("not implemented")}_getIdTokenResponse(f){return ye("not implemented")}_linkToIdToken(f,g){return ye("not implemented")}_getReauthenticationResolver(f){return ye("not implemented")}}function On(y,f){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,d.Z)(function*(y,f){return fn(y,"POST","/v1/accounts:resetPassword",dt(y,f))})).apply(this,arguments)}function Fi(y,f){return ze.apply(this,arguments)}function ze(){return(ze=(0,d.Z)(function*(y,f){return fn(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Tt(y,f){return cn.apply(this,arguments)}function cn(){return(cn=(0,d.Z)(function*(y,f){return fn(y,"POST","/v1/accounts:update",dt(y,f))})).apply(this,arguments)}function wi(){return(wi=(0,d.Z)(function*(y,f){return Dr(y,"POST","/v1/accounts:signInWithPassword",dt(y,f))})).apply(this,arguments)}function Mn(y,f){return Li.apply(this,arguments)}function Li(){return(Li=(0,d.Z)(function*(y,f){return fn(y,"POST","/v1/accounts:sendOobCode",dt(y,f))})).apply(this,arguments)}function rn(y,f){return lo.apply(this,arguments)}function lo(){return(lo=(0,d.Z)(function*(y,f){return Mn(y,f)})).apply(this,arguments)}function Ls(y,f){return St.apply(this,arguments)}function St(){return(St=(0,d.Z)(function*(y,f){return Mn(y,f)})).apply(this,arguments)}function Oa(y,f){return ho.apply(this,arguments)}function ho(){return(ho=(0,d.Z)(function*(y,f){return Mn(y,f)})).apply(this,arguments)}function ih(y,f){return Vi.apply(this,arguments)}function Vi(){return(Vi=(0,d.Z)(function*(y,f){return Mn(y,f)})).apply(this,arguments)}function Vs(){return(Vs=(0,d.Z)(function*(y,f){return Dr(y,"POST","/v1/accounts:signInWithEmailLink",dt(y,f))})).apply(this,arguments)}function Xr(){return(Xr=(0,d.Z)(function*(y,f){return Dr(y,"POST","/v1/accounts:signInWithEmailLink",dt(y,f))})).apply(this,arguments)}class ps extends An{constructor(f,g,_,S=null){super("password",_),this._email=f,this._password=g,this._tenantId=S}static _fromEmailAndPassword(f,g){return new ps(f,g,"password")}static _fromEmailAndCode(f,g,_=null){return new ps(f,g,"emailLink",_)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f;if(g?.email&&g?.password){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(f){var g=this;return(0,d.Z)(function*(){switch(g.signInMethod){case"password":return function Fr(y,f){return wi.apply(this,arguments)}(f,{returnSecureToken:!0,email:g._email,password:g._password});case"emailLink":return function Qn(y,f){return Vs.apply(this,arguments)}(f,{email:g._email,oobCode:g._password});default:Se(f,"internal-error")}})()}_linkToIdToken(f,g){var _=this;return(0,d.Z)(function*(){switch(_.signInMethod){case"password":return Fi(f,{idToken:g,returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function fo(y,f){return Xr.apply(this,arguments)}(f,{idToken:g,email:_._email,oobCode:_._password});default:Se(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function xn(y,f){return sn.apply(this,arguments)}function sn(){return(sn=(0,d.Z)(function*(y,f){return Dr(y,"POST","/v1/accounts:signInWithIdp",dt(y,f))})).apply(this,arguments)}class ei extends An{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const g=new ei(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(g.idToken=f.idToken),f.accessToken&&(g.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(g.nonce=f.nonce),f.pendingToken&&(g.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(g.accessToken=f.oauthToken,g.secret=f.oauthTokenSecret):Se("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:_,signInMethod:S}=g,R=(0,re._T)(g,["providerId","signInMethod"]);if(!_||!S)return null;const H=new ei(_,S);return H.idToken=R.idToken||void 0,H.accessToken=R.accessToken||void 0,H.secret=R.secret,H.nonce=R.nonce,H.pendingToken=R.pendingToken||null,H}_getIdTokenResponse(f){return xn(f,this.buildRequest())}_linkToIdToken(f,g){const _=this.buildRequest();return _.idToken=g,xn(f,_)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,xn(f,g)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),f.postBody=(0,O.xO)(g)}return f}}function hl(y,f){return po.apply(this,arguments)}function po(){return(po=(0,d.Z)(function*(y,f){return fn(y,"POST","/v1/accounts:sendVerificationCode",dt(y,f))})).apply(this,arguments)}function Tr(){return(Tr=(0,d.Z)(function*(y,f){return Dr(y,"POST","/v1/accounts:signInWithPhoneNumber",dt(y,f))})).apply(this,arguments)}function fl(){return(fl=(0,d.Z)(function*(y,f){const g=yield Dr(y,"POST","/v1/accounts:signInWithPhoneNumber",dt(y,f));if(g.temporaryProof)throw Cr(y,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const Lr={USER_NOT_FOUND:"user-not-found"};function zo(){return(zo=(0,d.Z)(function*(y,f){return Dr(y,"POST","/v1/accounts:signInWithPhoneNumber",dt(y,Object.assign(Object.assign({},f),{operation:"REAUTH"})),Lr)})).apply(this,arguments)}class Ii extends An{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,g){return new Ii({verificationId:f,verificationCode:g})}static _fromTokenResponse(f,g){return new Ii({phoneNumber:f,temporaryProof:g})}_getIdTokenResponse(f){return function Us(y,f){return Tr.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,g){return function dr(y,f){return fl.apply(this,arguments)}(f,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function Ei(y,f){return zo.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:g,verificationId:_,verificationCode:S}=this.params;return f&&g?{temporaryProof:f,phoneNumber:g}:{sessionInfo:_,code:S}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:g,verificationCode:_,phoneNumber:S,temporaryProof:R}=f;return _||g||S||R?new Ii({verificationId:g,verificationCode:_,phoneNumber:S,temporaryProof:R}):null}}class Wo{constructor(f){var g,_,S,R,H,he;const je=(0,O.zd)((0,O.pd)(f)),Ze=null!==(g=je.apiKey)&&void 0!==g?g:null,yt=null!==(_=je.oobCode)&&void 0!==_?_:null,at=function qu(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(S=je.mode)&&void 0!==S?S:null);V(Ze&&yt&&at,"argument-error"),this.apiKey=Ze,this.operation=at,this.code=yt,this.continueUrl=null!==(R=je.continueUrl)&&void 0!==R?R:null,this.languageCode=null!==(H=je.languageCode)&&void 0!==H?H:null,this.tenantId=null!==(he=je.tenantId)&&void 0!==he?he:null}static parseLink(f){const g=function Vr(y){const f=(0,O.zd)((0,O.pd)(y)).link,g=f?(0,O.zd)((0,O.pd)(f)).deep_link_id:null,_=(0,O.zd)((0,O.pd)(y)).deep_link_id;return(_?(0,O.zd)((0,O.pd)(_)).link:null)||_||g||f||y}(f);try{return new Wo(g)}catch{return null}}}let zu=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(g,_){return ps._fromEmailAndPassword(g,_)}static credentialWithLink(g,_){const S=Wo.parseLink(_);return V(S,"argument-error"),ps._fromEmailAndCode(g,S.code,S.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class Qi{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class Bs extends Qi{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class Zo extends Bs{static credentialFromJSON(f){const g="string"==typeof f?JSON.parse(f):f;return V("providerId"in g&&"signInMethod"in g,"argument-error"),ei._fromParams(g)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return V(f.idToken||f.accessToken,"argument-error"),ei._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return Zo.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return Zo.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:g,oauthAccessToken:_,oauthTokenSecret:S,pendingToken:R,nonce:H,providerId:he}=f;if(!_&&!S&&!g&&!R||!he)return null;try{return new Zo(he)._credential({idToken:g,accessToken:_,nonce:H,pendingToken:R})}catch{return null}}}let pl=(()=>{class y extends Bs{constructor(){super("facebook.com")}static credential(g){return ei._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch{return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),oh=(()=>{class y extends Bs{constructor(){super("google.com"),this.addScope("profile")}static credential(g,_){return ei._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:_})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:_,oauthAccessToken:S}=g;if(!_&&!S)return null;try{return y.credential(_,S)}catch{return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),Wu=(()=>{class y extends Bs{constructor(){super("github.com")}static credential(g){return ei._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch{return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class Pa extends An{constructor(f,g){super(f,f),this.pendingToken=g}_getIdTokenResponse(f){return xn(f,this.buildRequest())}_linkToIdToken(f,g){const _=this.buildRequest();return _.idToken=g,xn(f,_)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,xn(f,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:_,signInMethod:S,pendingToken:R}=g;return _&&S&&R&&_===S?new Pa(_,R):null}static _create(f,g){return new Pa(f,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Ur extends Qi{constructor(f){V(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return Ur.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return Ur.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const g=Pa.fromJSON(f);return V(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:g,providerId:_}=f;if(!g||!_)return null;try{return Pa._create(_,g)}catch{return null}}}let ml=(()=>{class y extends Bs{constructor(){super("twitter.com")}static credential(g,_){return ei._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:_})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:_,oauthTokenSecret:S}=g;if(!_||!S)return null;try{return y.credential(_,S)}catch{return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function Zu(y,f){return yl.apply(this,arguments)}function yl(){return(yl=(0,d.Z)(function*(y,f){return Dr(y,"POST","/v1/accounts:signUp",dt(y,f))})).apply(this,arguments)}class Sr{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,g,_,S=!1){return(0,d.Z)(function*(){const R=yield xt._fromIdTokenResponse(f,_,S),H=vl(_);return new Sr({user:R,providerId:H,_tokenResponse:_,operationType:g})})()}static _forOperation(f,g,_){return(0,d.Z)(function*(){yield f._updateTokensIfNecessary(_,!0);const S=vl(_);return new Sr({user:f,providerId:S,_tokenResponse:_,operationType:g})})()}}function vl(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function ah(){return(ah=(0,d.Z)(function*(y){var f;const g=_n(y);if(yield g._initializationPromise,null!==(f=g.currentUser)&&void 0!==f&&f.isAnonymous)return new Sr({user:g.currentUser,providerId:null,operationType:"signIn"});const _=yield Zu(g,{returnSecureToken:!0}),S=yield Sr._fromIdTokenResponse(g,"signIn",_,!0);return yield g._updateCurrentUser(S.user),S})).apply(this,arguments)}class _l extends O.ZR{constructor(f,g,_,S){var R;super(g.code,g.message),this.operationType=_,this.user=S,Object.setPrototypeOf(this,_l.prototype),this.customData={appName:f.name,tenantId:null!==(R=f.tenantId)&&void 0!==R?R:void 0,_serverResponse:g.customData._serverResponse,operationType:_}}static _fromErrorAndOperation(f,g,_,S){return new _l(f,g,_,S)}}function js(y,f,g,_){return("reauthenticate"===f?g._getReauthenticationResolver(y):g._getIdTokenResponse(y)).catch(R=>{throw"auth/multi-factor-auth-required"===R.code?_l._fromErrorAndOperation(y,R,f,_):R})}function gs(y){return new Set(y.map(({providerId:f})=>f).filter(f=>!!f))}function $s(){return($s=(0,d.Z)(function*(y,f){const g=(0,O.m9)(y);yield ms(!0,g,f);const{providerUserInfo:_}=yield kr(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[f]}),S=gs(_||[]);return g.providerData=g.providerData.filter(R=>S.has(R.providerId)),S.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function Fa(y,f){return La.apply(this,arguments)}function La(){return(La=(0,d.Z)(function*(y,f,g=!1){const _=yield Dn(y,f._linkToIdToken(y.auth,yield y.getIdToken()),g);return Sr._forOperation(y,"link",_)})).apply(this,arguments)}function ms(y,f,g){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,d.Z)(function*(y,f,g){yield Xt(f);const S=!1===y?"provider-already-linked":"no-such-provider";V(gs(f.providerData).has(g)===y,f.auth,S)})).apply(this,arguments)}function Va(y,f){return go.apply(this,arguments)}function go(){return(go=(0,d.Z)(function*(y,f,g=!1){const{auth:_}=y,S="reauthenticate";try{const R=yield Dn(y,js(_,S,f,y),g);V(R.idToken,_,"internal-error");const H=mt(R.idToken);V(H,_,"internal-error");const{sub:he}=H;return V(y.uid===he,_,"user-mismatch"),Sr._forOperation(y,S,R)}catch(R){throw"auth/user-not-found"===R?.code&&Se(_,"user-mismatch"),R}})).apply(this,arguments)}function Ua(y,f){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,d.Z)(function*(y,f,g=!1){const _="signIn",S=yield js(y,_,f),R=yield Sr._fromIdTokenResponse(y,_,S);return g||(yield y._updateCurrentUser(R.user)),R})).apply(this,arguments)}function Cn(y,f){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,d.Z)(function*(y,f){return Ua(_n(y),f)})).apply(this,arguments)}function Rn(y,f){return mo.apply(this,arguments)}function mo(){return(mo=(0,d.Z)(function*(y,f){const g=(0,O.m9)(y);return yield ms(!1,g,f.providerId),Fa(g,f)})).apply(this,arguments)}function Hs(y,f){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,d.Z)(function*(y,f){return Va((0,O.m9)(y),f)})).apply(this,arguments)}function wl(y,f){return yo.apply(this,arguments)}function yo(){return(yo=(0,d.Z)(function*(y,f){return Dr(y,"POST","/v1/accounts:signInWithCustomToken",dt(y,f))})).apply(this,arguments)}function qn(){return(qn=(0,d.Z)(function*(y,f){const g=_n(y),_=yield wl(g,{token:f,returnSecureToken:!0}),S=yield Sr._fromIdTokenResponse(g,"signIn",_);return yield g._updateCurrentUser(S.user),S})).apply(this,arguments)}class Jo{constructor(f,g){this.factorId=f,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(f,g){return"phoneInfo"in g?Xo._fromServerResponse(f,g):Se(f,"internal-error")}}class Xo extends Jo{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,g){return new Xo(g)}}function Ba(y,f,g){var _;V((null===(_=g.url)||void 0===_?void 0:_.length)>0,y,"invalid-continue-uri"),V(typeof g.dynamicLinkDomain>"u"||g.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),f.continueUrl=g.url,f.dynamicLinkDomain=g.dynamicLinkDomain,f.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(V(g.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),f.iOSBundleId=g.iOS.bundleId),g.android&&(V(g.android.packageName.length>0,y,"missing-android-pkg-name"),f.androidInstallApp=g.android.installApp,f.androidMinimumVersionCode=g.android.minimumVersion,f.androidPackageName=g.android.packageName)}function ea(){return(ea=(0,d.Z)(function*(y,f,g){const _=(0,O.m9)(y),S={requestType:"PASSWORD_RESET",email:f};g&&Ba(_,S,g),yield Ls(_,S)})).apply(this,arguments)}function bt(){return(bt=(0,d.Z)(function*(y,f,g){yield On((0,O.m9)(y),{oobCode:f,newPassword:g})})).apply(this,arguments)}function Yu(){return(Yu=(0,d.Z)(function*(y,f){yield Tt((0,O.m9)(y),{oobCode:f})})).apply(this,arguments)}function $a(y,f){return Qu.apply(this,arguments)}function Qu(){return(Qu=(0,d.Z)(function*(y,f){const g=(0,O.m9)(y),_=yield On(g,{oobCode:f}),S=_.requestType;switch(V(S,g,"internal-error"),S){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":V(_.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":V(_.mfaInfo,g,"internal-error");default:V(_.email,g,"internal-error")}let R=null;return _.mfaInfo&&(R=Jo._fromServerResponse(_n(g),_.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.newEmail:_.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.email:_.newEmail)||null,multiFactorInfo:R},operation:S}})).apply(this,arguments)}function Ha(){return(Ha=(0,d.Z)(function*(y,f){const{data:g}=yield $a((0,O.m9)(y),f);return g.email})).apply(this,arguments)}function Il(){return(Il=(0,d.Z)(function*(y,f,g){const _=_n(y),S=yield Zu(_,{returnSecureToken:!0,email:f,password:g}),R=yield Sr._fromIdTokenResponse(_,"signIn",S);return yield _._updateCurrentUser(R.user),R})).apply(this,arguments)}function Ju(){return(Ju=(0,d.Z)(function*(y,f,g){const _=(0,O.m9)(y),S={requestType:"EMAIL_SIGNIN",email:f};V(g.handleCodeInApp,_,"argument-error"),g&&Ba(_,S,g),yield Oa(_,S)})).apply(this,arguments)}function vo(){return(vo=(0,d.Z)(function*(y,f,g){const _=(0,O.m9)(y),S=zu.credentialWithLink(f,g||Ne());return V(S._tenantId===(_.tenantId||null),_,"tenant-id-mismatch"),Cn(_,S)})).apply(this,arguments)}function Ga(y,f){return ti.apply(this,arguments)}function ti(){return(ti=(0,d.Z)(function*(y,f){return fn(y,"POST","/v1/accounts:createAuthUri",dt(y,f))})).apply(this,arguments)}function _o(){return(_o=(0,d.Z)(function*(y,f){const _={identifier:f,continueUri:ot()?Ne():"http://localhost"},{signinMethods:S}=yield Ga((0,O.m9)(y),_);return S||[]})).apply(this,arguments)}function Cl(){return(Cl=(0,d.Z)(function*(y,f){const g=(0,O.m9)(y),S={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};f&&Ba(g.auth,S,f);const{email:R}=yield rn(g.auth,S);R!==y.email&&(yield y.reload())})).apply(this,arguments)}function wn(){return(wn=(0,d.Z)(function*(y,f,g){const _=(0,O.m9)(y),R={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:f};g&&Ba(_.auth,R,g);const{email:H}=yield ih(_.auth,R);H!==y.email&&(yield y.reload())})).apply(this,arguments)}function Bi(y,f){return ec.apply(this,arguments)}function ec(){return(ec=(0,d.Z)(function*(y,f){return fn(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function ni(){return(ni=(0,d.Z)(function*(y,{displayName:f,photoURL:g}){if(void 0===f&&void 0===g)return;const _=(0,O.m9)(y),R={idToken:yield _.getIdToken(),displayName:f,photoUrl:g,returnSecureToken:!0},H=yield Dn(_,Bi(_.auth,R));_.displayName=H.displayName||null,_.photoURL=H.photoUrl||null;const he=_.providerData.find(({providerId:je})=>"password"===je);he&&(he.displayName=_.displayName,he.photoURL=_.photoURL),yield _._updateTokensIfNecessary(H)})).apply(this,arguments)}function nc(y,f,g){return na.apply(this,arguments)}function na(){return(na=(0,d.Z)(function*(y,f,g){const{auth:_}=y,R={idToken:yield y.getIdToken(),returnSecureToken:!0};f&&(R.email=f),g&&(R.password=g);const H=yield Dn(y,Fi(_,R));yield y._updateTokensIfNecessary(H,!0)})).apply(this,arguments)}class Gs{constructor(f,g,_={}){this.isNewUser=f,this.providerId=g,this.profile=_}}class Tl extends Gs{constructor(f,g,_,S){super(f,g,_),this.username=S}}class rc extends Gs{constructor(f,g){super(f,"facebook.com",g)}}class Sl extends Tl{constructor(f,g){super(f,"github.com",g,"string"==typeof g?.login?g?.login:null)}}class uh extends Gs{constructor(f,g){super(f,"google.com",g)}}class za extends Tl{constructor(f,g,_){super(f,"twitter.com",g,_)}}function ch(y){const{user:f,_tokenResponse:g}=y;return f.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function bl(y){var f,g;if(!y)return null;const{providerId:_}=y,S=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},R=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!_&&y?.idToken){const H=null===(g=null===(f=mt(y.idToken))||void 0===f?void 0:f.firebase)||void 0===g?void 0:g.sign_in_provider;if(H)return new Gs(R,"anonymous"!==H&&"custom"!==H?H:null)}if(!_)return null;switch(_){case"facebook.com":return new rc(R,S);case"github.com":return new Sl(R,S);case"google.com":return new uh(R,S);case"twitter.com":return new za(R,S,y.screenName||null);case"custom":case"anonymous":return new Gs(R,null);default:return new Gs(R,_,S)}}(g)}class Eo{constructor(f,g,_){this.type=f,this.credential=g,this.auth=_}static _fromIdtoken(f,g){return new Eo("enroll",f,g)}static _fromMfaPendingCredential(f){return new Eo("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var g,_;if(f?.multiFactorSession){if(null!==(g=f.multiFactorSession)&&void 0!==g&&g.pendingCredential)return Eo._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null!==(_=f.multiFactorSession)&&void 0!==_&&_.idToken)return Eo._fromIdtoken(f.multiFactorSession.idToken)}return null}}class sc{constructor(f,g,_){this.session=f,this.hints=g,this.signInResolver=_}static _fromError(f,g){const _=_n(f),S=g.customData._serverResponse,R=(S.mfaInfo||[]).map(he=>Jo._fromServerResponse(_,he));V(S.mfaPendingCredential,_,"internal-error");const H=Eo._fromMfaPendingCredential(S.mfaPendingCredential);return new sc(H,R,function(){var he=(0,d.Z)(function*(je){const Ze=yield je._process(_,H);delete S.mfaInfo,delete S.mfaPendingCredential;const yt=Object.assign(Object.assign({},S),{idToken:Ze.idToken,refreshToken:Ze.refreshToken});switch(g.operationType){case"signIn":const at=yield Sr._fromIdTokenResponse(_,g.operationType,yt);return yield _._updateCurrentUser(at.user),at;case"reauthenticate":return V(g.user,_,"internal-error"),Sr._forOperation(g.user,g.operationType,yt);default:Se(_,"internal-error")}});return function(je){return he.apply(this,arguments)}}())}resolveSignIn(f){var g=this;return(0,d.Z)(function*(){return g.signInResolver(f)})()}}function lh(y,f){return fn(y,"POST","/v2/accounts/mfaEnrollment:start",dt(y,f))}class vs{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(_=>Jo._fromServerResponse(f.auth,_)))})}static _fromUser(f){return new vs(f)}getSession(){var f=this;return(0,d.Z)(function*(){return Eo._fromIdtoken(yield f.user.getIdToken(),f.user.auth)})()}enroll(f,g){var _=this;return(0,d.Z)(function*(){const S=f,R=yield _.getSession(),H=yield Dn(_.user,S._process(_.user.auth,R,g));return yield _.user._updateTokensIfNecessary(H),_.user.reload()})()}unenroll(f){var g=this;return(0,d.Z)(function*(){const _="string"==typeof f?f:f.uid,S=yield g.user.getIdToken(),R=yield Dn(g.user,function dh(y,f){return fn(y,"POST","/v2/accounts/mfaEnrollment:withdraw",dt(y,f))}(g.user.auth,{idToken:S,mfaEnrollmentId:_}));g.enrolledFactors=g.enrolledFactors.filter(({uid:H})=>H!==_),yield g.user._updateTokensIfNecessary(R);try{yield g.user.reload()}catch(H){if("auth/user-token-expired"!==H?.code)throw H}})()}}const ri=new WeakMap,Di="__sak";class oc{constructor(f,g){this.storageRetriever=f,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(Di,"1"),this.storage.removeItem(Di),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(f,g){return this.storage.setItem(f,JSON.stringify(g)),Promise.resolve()}_get(f){const g=this.storage.getItem(f);return Promise.resolve(g?JSON.parse(g):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const ac=(()=>{class y extends oc{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,_)=>this.onStorageEvent(g,_),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Al(){const y=(0,O.z$)();return Rt(y)||Ln(y)}()&&function Ho(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=rh(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const _ of Object.keys(this.listeners)){const S=this.storage.getItem(_),R=this.localCache[_];S!==R&&g(_,R,S)}}onStorageEvent(g,_=!1){if(!g.key)return void this.forAllChangedKeys((he,je,Ze)=>{this.notifyListeners(he,Ze)});const S=g.key;if(_?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const he=this.storage.getItem(S);if(g.newValue!==he)null!==g.newValue?this.storage.setItem(S,g.newValue):this.storage.removeItem(S);else if(this.localCache[S]===g.newValue&&!_)return}const R=()=>{const he=this.storage.getItem(S);!_&&this.localCache[S]===he||this.notifyListeners(S,he)},H=this.storage.getItem(S);!function $o(){return(0,O.w1)()&&10===document.documentMode}()||H===g.newValue||g.newValue===g.oldValue?R():setTimeout(R,10)}notifyListeners(g,_){this.localCache[g]=_;const S=this.listeners[g];if(S)for(const R of Array.from(S))R(_&&JSON.parse(_))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,_,S)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:_,newValue:S}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,_){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(_)}_removeListener(g,_){this.listeners[g]&&(this.listeners[g].delete(_),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,_){var S=()=>super._set,R=this;return(0,d.Z)(function*(){yield S().call(R,g,_),R.localCache[g]=JSON.stringify(_)})()}_get(g){var _=()=>super._get,S=this;return(0,d.Z)(function*(){const R=yield _().call(S,g);return S.localCache[g]=JSON.stringify(R),R})()}_remove(g){var _=()=>super._remove,S=this;return(0,d.Z)(function*(){yield _().call(S,g),delete S.localCache[g]})()}}return y.type="LOCAL",y})(),ji=(()=>{class y extends oc{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,_){}_removeListener(g,_){}}return y.type="SESSION",y})();let Ml=(()=>{class y{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const _=this.receivers.find(R=>R.isListeningto(g));if(_)return _;const S=new y(g);return this.receivers.push(S),S}isListeningto(g){return this.eventTarget===g}handleEvent(g){var _=this;return(0,d.Z)(function*(){const S=g,{eventId:R,eventType:H,data:he}=S.data,je=_.handlersMap[H];if(!je?.size)return;S.ports[0].postMessage({status:"ack",eventId:R,eventType:H});const Ze=Array.from(je).map(function(){var at=(0,d.Z)(function*(Un){return Un(S.origin,he)});return function(Un){return at.apply(this,arguments)}}()),yt=yield function uc(y){return Promise.all(y.map(function(){var f=(0,d.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(_){return{fulfilled:!1,reason:_}}});return function(g){return f.apply(this,arguments)}}()))}(Ze);S.ports[0].postMessage({status:"done",eventId:R,eventType:H,response:yt})})()}_subscribe(g,_){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(_)}_unsubscribe(g,_){this.handlersMap[g]&&_&&this.handlersMap[g].delete(_),(!_||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function _s(y="",f=10){let g="";for(let _=0;_<f;_++)g+=Math.floor(10*Math.random());return y+g}class cc{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,g,_=50){var S=this;return(0,d.Z)(function*(){const R=typeof MessageChannel<"u"?new MessageChannel:null;if(!R)throw new Error("connection_unavailable");let H,he;return new Promise((je,Ze)=>{const yt=_s("",20);R.port1.start();const at=setTimeout(()=>{Ze(new Error("unsupported_event"))},_);he={messageChannel:R,onMessage(Un){const Si=Un;if(Si.data.eventId===yt)switch(Si.data.status){case"ack":clearTimeout(at),H=setTimeout(()=>{Ze(new Error("timeout"))},3e3);break;case"done":clearTimeout(H),je(Si.data.response);break;default:clearTimeout(at),clearTimeout(H),Ze(new Error("invalid_response"))}}},S.handlers.add(he),R.port1.addEventListener("message",he.onMessage),S.target.postMessage({eventType:f,eventId:yt,data:g},[R.port2])}).finally(()=>{he&&S.removeMessageHandler(he)})})()}}function pn(){return window}function Co(){return typeof pn().WorkerGlobalScope<"u"&&"function"==typeof pn().importScripts}function Ka(){return(Ka=(0,d.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Qa="firebaseLocalStorageDb",Xi="firebaseLocalStorage",Ja="fbase_key";class Es{constructor(f){this.request=f}toPromise(){return new Promise((f,g)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function qs(y,f){return y.transaction([Xi],f?"readwrite":"readonly").objectStore(Xi)}function eu(){const y=indexedDB.open(Qa,1);return new Promise((f,g)=>{y.addEventListener("error",()=>{g(y.error)}),y.addEventListener("upgradeneeded",()=>{const _=y.result;try{_.createObjectStore(Xi,{keyPath:Ja})}catch(S){g(S)}}),y.addEventListener("success",(0,d.Z)(function*(){const _=y.result;_.objectStoreNames.contains(Xi)?f(_):(_.close(),yield function Xa(){const y=indexedDB.deleteDatabase(Qa);return new Es(y).toPromise()}(),f(yield eu()))}))})}function Mr(y,f,g){return lc.apply(this,arguments)}function lc(){return(lc=(0,d.Z)(function*(y,f,g){const _=qs(y,!0).put({[Ja]:f,value:g});return new Es(_).toPromise()})).apply(this,arguments)}function zs(){return(zs=(0,d.Z)(function*(y,f){const g=qs(y,!1).get(f),_=yield new Es(g).toPromise();return void 0===_?null:_.value})).apply(this,arguments)}function oa(y,f){const g=qs(y,!0).delete(f);return new Es(g).toPromise()}const es=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,d.Z)(function*(){return g.db||(g.db=yield eu()),g.db})()}_withRetries(g){var _=this;return(0,d.Z)(function*(){let S=0;for(;;)try{const R=yield _._openDb();return yield g(R)}catch(R){if(S++>3)throw R;_.db&&(_.db.close(),_.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,d.Z)(function*(){return Co()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,d.Z)(function*(){g.receiver=Ml._getInstance(function Ya(){return Co()?self:null}()),g.receiver._subscribe("keyChanged",function(){var _=(0,d.Z)(function*(S,R){return{keyProcessed:(yield g._poll()).includes(R.key)}});return function(S,R){return _.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var _=(0,d.Z)(function*(S,R){return["keyChanged"]});return function(S,R){return _.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,d.Z)(function*(){var _,S;if(g.activeServiceWorker=yield function ws(){return Ka.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new cc(g.activeServiceWorker);const R=yield g.sender._send("ping",{},800);!R||(null===(_=R[0])||void 0===_?void 0:_.fulfilled)&&(null===(S=R[0])||void 0===S?void 0:S.value.includes("keyChanged"))&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var _=this;return(0,d.Z)(function*(){if(_.sender&&_.activeServiceWorker&&function xl(){var y;return(null===(y=navigator?.serviceWorker)||void 0===y?void 0:y.controller)||null}()===_.activeServiceWorker)try{yield _.sender._send("keyChanged",{key:g},_.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,d.Z)(function*(){try{if(!indexedDB)return!1;const g=yield eu();return yield Mr(g,Di,"1"),yield oa(g,Di),!0}catch{}return!1})()}_withPendingWrite(g){var _=this;return(0,d.Z)(function*(){_.pendingWrites++;try{yield g()}finally{_.pendingWrites--}})()}_set(g,_){var S=this;return(0,d.Z)(function*(){return S._withPendingWrite((0,d.Z)(function*(){return yield S._withRetries(R=>Mr(R,g,_)),S.localCache[g]=_,S.notifyServiceWorker(g)}))})()}_get(g){var _=this;return(0,d.Z)(function*(){const S=yield _._withRetries(R=>function To(y,f){return zs.apply(this,arguments)}(R,g));return _.localCache[g]=S,S})()}_remove(g){var _=this;return(0,d.Z)(function*(){return _._withPendingWrite((0,d.Z)(function*(){return yield _._withRetries(S=>oa(S,g)),delete _.localCache[g],_.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,d.Z)(function*(){const _=yield g._withRetries(H=>{const he=qs(H,!1).getAll();return new Es(he).toPromise()});if(!_)return[];if(0!==g.pendingWrites)return[];const S=[],R=new Set;for(const{fbase_key:H,value:he}of _)R.add(H),JSON.stringify(g.localCache[H])!==JSON.stringify(he)&&(g.notifyListeners(H,he),S.push(H));for(const H of Object.keys(g.localCache))g.localCache[H]&&!R.has(H)&&(g.notifyListeners(H,null),S.push(H));return S})()}notifyListeners(g,_){this.localCache[g]=_;const S=this.listeners[g];if(S)for(const R of Array.from(S))R(_)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,d.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,_){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(_)}_removeListener(g,_){this.listeners[g]&&(this.listeners[g].delete(_),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function hc(y,f){return fn(y,"POST","/v2/accounts/mfaSignIn:start",dt(y,f))}function fc(){return(fc=(0,d.Z)(function*(y){return(yield fn(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function bi(y){return new Promise((f,g)=>{const _=document.createElement("script");_.setAttribute("src",y),_.onload=f,_.onerror=S=>{const R=ve("internal-error");R.customData=S,g(R)},_.type="text/javascript",_.charset="UTF-8",function aa(){var y,f;return null!==(f=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==f?f:document}().appendChild(_)})}function pc(y){return`__${y}${Math.floor(1e6*Math.random())}`}const si=1e12;class fh{constructor(f){this.auth=f,this.counter=si,this._widgets=new Map}render(f,g){const _=this.counter;return this._widgets.set(_,new gc(f,this.auth.name,g||{})),this.counter++,_}reset(f){var g;const _=f||si;null===(g=this._widgets.get(_))||void 0===g||g.delete(),this._widgets.delete(_)}getResponse(f){var g;return(null===(g=this._widgets.get(f||si))||void 0===g?void 0:g.getResponse())||""}execute(f){var g=this;return(0,d.Z)(function*(){var _;return null===(_=g._widgets.get(f||si))||void 0===_||_.execute(),""})()}}class gc{constructor(f,g,_){this.params=_,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const S="string"==typeof f?document.getElementById(f):f;V(S,"argument-error",{appName:g}),this.container=S,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function mc(y){const f=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let _=0;_<y;_++)f.push(g.charAt(Math.floor(Math.random()*g.length)));return f.join("")}(50);const{callback:f,"expired-callback":g}=this.params;if(f)try{f(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const ph=pc("rcb"),Nl=new kt(3e4,6e4);class Is{constructor(){var f;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(f=pn().grecaptcha)||void 0===f||!f.render)}load(f,g=""){return V(function So(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(g),f,"argument-error"),this.shouldResolveImmediately(g)?Promise.resolve(pn().grecaptcha):new Promise((_,S)=>{const R=pn().setTimeout(()=>{S(ve(f,"network-request-failed"))},Nl.get());pn()[ph]=()=>{pn().clearTimeout(R),delete pn()[ph];const he=pn().grecaptcha;if(!he)return void S(ve(f,"internal-error"));const je=he.render;he.render=(Ze,yt)=>{const at=je(Ze,yt);return this.counter++,at},this.hostLanguage=g,_(he)},bi(`https://www.google.com/recaptcha/api.js??${(0,O.xO)({onload:ph,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(R),S(ve(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){var g;return!(null===(g=pn().grecaptcha)||void 0===g||!g.render)&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class ua{load(f){return(0,d.Z)(function*(){return new fh(f)})()}clearedOneInstance(){}}const Pl="recaptcha",gh={theme:"light",type:"image"};class ru{constructor(f,g=Object.assign({},gh),_){this.parameters=g,this.type=Pl,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=_n(_),this.isInvisible="invisible"===this.parameters.size,V(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const S="string"==typeof f?document.getElementById(f):f;V(S,this.auth,"argument-error"),this.container=S,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new ua:new Is,this.validateStartingState()}verify(){var f=this;return(0,d.Z)(function*(){f.assertNotDestroyed();const g=yield f.render(),_=f.getAssertedRecaptcha();return _.getResponse(g)||new Promise(R=>{const H=he=>{!he||(f.tokenChangeListeners.delete(H),R(he))};f.tokenChangeListeners.add(H),f.isInvisible&&_.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){V(!this.parameters.sitekey,this.auth,"argument-error"),V(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),V(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return g=>{if(this.tokenChangeListeners.forEach(_=>_(g)),"function"==typeof f)f(g);else if("string"==typeof f){const _=pn()[f];"function"==typeof _&&_(g)}}}assertNotDestroyed(){V(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,d.Z)(function*(){if(yield f.init(),!f.widgetId){let g=f.container;if(!f.isInvisible){const _=document.createElement("div");g.appendChild(_),g=_}f.widgetId=f.getAssertedRecaptcha().render(g,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,d.Z)(function*(){V(ot()&&!Co(),f.auth,"internal-error"),yield function mh(){let y=null;return new Promise(f=>{"complete"!==document.readyState?(y=()=>f(),window.addEventListener("load",y)):f()}).catch(f=>{throw y&&window.removeEventListener("load",y),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const g=yield function Ci(y){return fc.apply(this,arguments)}(f.auth);V(g,f.auth,"internal-error"),f.parameters.sitekey=g})()}getAssertedRecaptcha(){return V(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class ts{constructor(f,g){this.verificationId=f,this.onConfirmation=g}confirm(f){const g=Ii._fromVerification(this.verificationId,f);return this.onConfirmation(g)}}function yc(){return(yc=(0,d.Z)(function*(y,f,g){const _=_n(y),S=yield Fl(_,f,(0,O.m9)(g));return new ts(S,R=>Cn(_,R))})).apply(this,arguments)}function vc(){return(vc=(0,d.Z)(function*(y,f,g){const _=(0,O.m9)(y);yield ms(!1,_,"phone");const S=yield Fl(_.auth,f,(0,O.m9)(g));return new ts(S,R=>Rn(_,R))})).apply(this,arguments)}function yh(){return(yh=(0,d.Z)(function*(y,f,g){const _=(0,O.m9)(y),S=yield Fl(_.auth,f,(0,O.m9)(g));return new ts(S,R=>Hs(_,R))})).apply(this,arguments)}function Fl(y,f,g){return Ll.apply(this,arguments)}function Ll(){return(Ll=(0,d.Z)(function*(y,f,g){var _;const S=yield g.verify();try{let R;if(V("string"==typeof S,y,"argument-error"),V(g.type===Pl,y,"argument-error"),R="string"==typeof f?{phoneNumber:f}:f,"session"in R){const H=R.session;if("phoneNumber"in R)return V("enroll"===H.type,y,"internal-error"),(yield lh(y,{idToken:H.credential,phoneEnrollmentInfo:{phoneNumber:R.phoneNumber,recaptchaToken:S}})).phoneSessionInfo.sessionInfo;{V("signin"===H.type,y,"internal-error");const he=(null===(_=R.multiFactorHint)||void 0===_?void 0:_.uid)||R.multiFactorUid;return V(he,y,"missing-multi-factor-info"),(yield hc(y,{mfaPendingCredential:H.credential,mfaEnrollmentId:he,phoneSignInInfo:{recaptchaToken:S}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:H}=yield hl(y,{phoneNumber:R.phoneNumber,recaptchaToken:S});return H}}finally{g._reset()}})).apply(this,arguments)}function vh(){return(vh=(0,d.Z)(function*(y,f){yield Fa((0,O.m9)(y),f)})).apply(this,arguments)}let wc=(()=>{class y{constructor(g){this.providerId=y.PROVIDER_ID,this.auth=_n(g)}verifyPhoneNumber(g,_){return Fl(this.auth,g,(0,O.m9)(_))}static credential(g,_){return Ii._fromVerification(g,_)}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:_,temporaryProof:S}=g;return _&&S?Ii._fromTokenResponse(_,S):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function dn(y,f){return f?ie(f):(V(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class iu extends An{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return xn(f,this._buildIdpRequest())}_linkToIdToken(f,g){return xn(f,this._buildIdpRequest(g))}_getReauthenticationResolver(f){return xn(f,this._buildIdpRequest())}_buildIdpRequest(f){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(g.idToken=f),g}}function ca(y){return Ua(y.auth,new iu(y),y.bypassAuthState)}function Vl(y){const{auth:f,user:g}=y;return V(g,f,"internal-error"),Va(g,new iu(y),y.bypassAuthState)}function jr(y){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,d.Z)(function*(y){const{auth:f,user:g}=y;return V(g,f,"internal-error"),Fa(g,new iu(y),y.bypassAuthState)})).apply(this,arguments)}class su{constructor(f,g,_,S,R=!1){this.auth=f,this.resolver=_,this.user=S,this.bypassAuthState=R,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var f=this;return new Promise(function(){var g=(0,d.Z)(function*(_,S){f.pendingPromise={resolve:_,reject:S};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(R){f.reject(R)}});return function(_,S){return g.apply(this,arguments)}}())}onAuthEvent(f){var g=this;return(0,d.Z)(function*(){const{urlResponse:_,sessionId:S,postBody:R,tenantId:H,error:he,type:je}=f;if(he)return void g.reject(he);const Ze={auth:g.auth,requestUri:_,sessionId:S,tenantId:H||void 0,postBody:R||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(je)(Ze))}catch(yt){g.reject(yt)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return ca;case"linkViaPopup":case"linkViaRedirect":return jr;case"reauthViaPopup":case"reauthViaRedirect":return Vl;default:Se(this.auth,"internal-error")}}resolve(f){q(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){q(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const la=new kt(2e3,1e4);function ou(){return(ou=(0,d.Z)(function*(y,f,g){const _=_n(y);Fe(y,f,Qi);const S=dn(_,g);return new Gi(_,"signInViaPopup",f,S).executeNotNull()})).apply(this,arguments)}function Ul(){return(Ul=(0,d.Z)(function*(y,f,g){const _=(0,O.m9)(y);Fe(_.auth,f,Qi);const S=dn(_.auth,g);return new Gi(_.auth,"reauthViaPopup",f,S,_).executeNotNull()})).apply(this,arguments)}function Ut(){return(Ut=(0,d.Z)(function*(y,f,g){const _=(0,O.m9)(y);Fe(_.auth,f,Qi);const S=dn(_.auth,g);return new Gi(_.auth,"linkViaPopup",f,S,_).executeNotNull()})).apply(this,arguments)}let Gi=(()=>{class y extends su{constructor(g,_,S,R,H){super(g,_,R,H),this.provider=S,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var g=this;return(0,d.Z)(function*(){const _=yield g.execute();return V(_,g.auth,"internal-error"),_})()}onExecution(){var g=this;return(0,d.Z)(function*(){q(1===g.filter.length,"Popup operations only handle one event");const _=_s();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],_),g.authWindow.associatedEvent=_,g.resolver._originValidation(g.auth).catch(S=>{g.reject(S)}),g.resolver._isIframeWebStorageSupported(g.auth,S=>{S||g.reject(ve(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(ve(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const g=()=>{var _,S;this.pollId=null!==(S=null===(_=this.authWindow)||void 0===_?void 0:_.window)&&void 0!==S&&S.closed?window.setTimeout(()=>{this.pollId=null,this.reject(ve(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(g,la.get())};g()}}return y.currentPopupAction=null,y})();const oi=new Map;class ai extends su{constructor(f,g,_=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,_),this.eventId=null}execute(){var f=()=>super.execute,g=this;return(0,d.Z)(function*(){let _=oi.get(g.auth._key());if(!_){try{const R=(yield function _h(y,f){return ui.apply(this,arguments)}(g.resolver,g.auth))?yield f().call(g):null;_=()=>Promise.resolve(R)}catch(S){_=()=>Promise.reject(S)}oi.set(g.auth._key(),_)}return g.bypassAuthState||oi.set(g.auth._key(),()=>Promise.resolve(null)),_()})()}onAuthEvent(f){var g=()=>super.onAuthEvent,_=this;return(0,d.Z)(function*(){if("signInViaRedirect"===f.type)return g().call(_,f);if("unknown"!==f.type){if(f.eventId){const S=yield _.auth._redirectUserForId(f.eventId);if(S)return _.user=S,g().call(_,f);_.resolve(null)}}else _.resolve(null)})()}onExecution(){return(0,d.Z)(function*(){})()}cleanUp(){}}function ui(){return(ui=(0,d.Z)(function*(y,f){const g=Mo(f),_=da(y);if(!(yield _._isAvailable()))return!1;const S="true"===(yield _._get(g));return yield _._remove(g),S})).apply(this,arguments)}function ci(y,f){return ns.apply(this,arguments)}function ns(){return(ns=(0,d.Z)(function*(y,f){return da(y)._set(Mo(f),"true")})).apply(this,arguments)}function Bl(y,f){oi.set(y._key(),f)}function da(y){return ie(y._redirectPersistence)}function Mo(y){return z("pendingRedirect",y.config.apiKey,y.name)}function I(){return(I=(0,d.Z)(function*(y,f,g){const _=_n(y);Fe(y,f,Qi),yield _._initializationPromise;const S=dn(_,g);return yield ci(S,_),S._openRedirect(_,f,"signInViaRedirect")})).apply(this,arguments)}function F(){return(F=(0,d.Z)(function*(y,f,g){const _=(0,O.m9)(y);Fe(_.auth,f,Qi),yield _.auth._initializationPromise;const S=dn(_.auth,g);yield ci(S,_.auth);const R=yield Dt(_);return S._openRedirect(_.auth,f,"reauthViaRedirect",R)})).apply(this,arguments)}function be(){return(be=(0,d.Z)(function*(y,f,g){const _=(0,O.m9)(y);Fe(_.auth,f,Qi),yield _.auth._initializationPromise;const S=dn(_.auth,g);yield ms(!1,_,f.providerId),yield ci(S,_.auth);const R=yield Dt(_);return S._openRedirect(_.auth,f,"linkViaRedirect",R)})).apply(this,arguments)}function rt(){return(rt=(0,d.Z)(function*(y,f){return yield _n(y)._initializationPromise,tt(y,f,!1)})).apply(this,arguments)}function tt(y,f){return It.apply(this,arguments)}function It(){return(It=(0,d.Z)(function*(y,f,g=!1){const _=_n(y),S=dn(_,f),H=yield new ai(_,S,g).execute();return H&&!g&&(delete H.user._redirectEventId,yield _._persistUserIfCurrent(H.user),yield _._setRedirectUser(null,f)),H})).apply(this,arguments)}function Dt(y){return hr.apply(this,arguments)}function hr(){return(hr=(0,d.Z)(function*(y){const f=_s(`${y.uid}:::`);return y._redirectEventId=f,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),f})).apply(this,arguments)}class xo{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let g=!1;return this.consumers.forEach(_=>{this.isEventForConsumer(f,_)&&(g=!0,this.sendToConsumer(f,_),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function fr(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Cs(y);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=f,g=!0)),g}sendToConsumer(f,g){var _;if(f.error&&!Cs(f)){const S=(null===(_=f.error.code)||void 0===_?void 0:_.split("auth/")[1])||"internal-error";g.onError(ve(this.auth,S))}else g.onAuthEvent(f)}isEventForConsumer(f,g){const _=null===g.eventId||!!f.eventId&&f.eventId===g.eventId;return g.filter.includes(f.type)&&_}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ic(f))}saveEventToCache(f){this.cachedEventUids.add(Ic(f)),this.lastProcessedEventTime=Date.now()}}function Ic(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(f=>f).join("-")}function Cs({type:y,error:f}){return"unknown"===y&&"auth/no-auth-event"===f?.code}function pr(y){return bs.apply(this,arguments)}function bs(){return(bs=(0,d.Z)(function*(y,f={}){return fn(y,"GET","/v1/projects",f)})).apply(this,arguments)}const xr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,wh=/^https?/;function zn(){return(zn=(0,d.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:f}=yield pr(y);for(const g of f)try{if(au(g))return}catch{}Se(y,"unauthorized-domain")})).apply(this,arguments)}function au(y){const f=Ne(),{protocol:g,hostname:_}=new URL(f);if(y.startsWith("chrome-extension://")){const H=new URL(y);return""===H.hostname&&""===_?"chrome-extension:"===g&&y.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===g&&H.hostname===_}if(!wh.test(g))return!1;if(xr.test(y))return _===y;const S=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+S+"|"+S+")$","i").test(_)}const Ih=new kt(3e4,6e4);function Ti(){const y=pn().___jsl;if(y?.H)for(const f of Object.keys(y.H))if(y.H[f].r=y.H[f].r||[],y.H[f].L=y.H[f].L||[],y.H[f].r=[...y.H[f].L],y.CP)for(let g=0;g<y.CP.length;g++)y.CP[g]=null}let Ws=null;function by(y){return Ws=Ws||function $r(y){return new Promise((f,g)=>{var _,S,R;function H(){Ti(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{Ti(),g(ve(y,"network-request-failed"))},timeout:Ih.get()})}if(null!==(S=null===(_=pn().gapi)||void 0===_?void 0:_.iframes)&&void 0!==S&&S.Iframe)f(gapi.iframes.getContext());else{if(null===(R=pn().gapi)||void 0===R||!R.load){const he=pc("iframefcb");return pn()[he]=()=>{gapi.load?H():g(ve(y,"network-request-failed"))},bi(`https://apis.google.com/js/api.js?onload=${he}`).catch(je=>g(je))}H()}}).catch(f=>{throw Ws=null,f})}(y),Ws}const ew=new kt(5e3,15e3),Hr={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},fa=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function tw(y){const f=y.config;V(f.authDomain,y,"auth-domain-config-required");const g=f.emulator?ct(f,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,_={apiKey:f.apiKey,appName:y.name,v:se.SDK_VERSION},S=fa.get(y.config.apiHost);S&&(_.eid=S);const R=y._getFrameworks();return R.length&&(_.fw=R.join(",")),`${g}?${(0,O.xO)(_).slice(1)}`}function Dc(){return Dc=(0,d.Z)(function*(y){const f=yield by(y),g=pn().gapi;return V(g,y,"internal-error"),f.open({where:document.body,url:tw(y),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Hr,dontclear:!0},_=>new Promise(function(){var S=(0,d.Z)(function*(R,H){yield _.restyle({setHideOnLeave:!1});const he=ve(y,"network-request-failed"),je=pn().setTimeout(()=>{H(he)},ew.get());function Ze(){pn().clearTimeout(je),R(_)}_.ping(Ze).then(Ze,()=>{H(he)})});return function(R,H){return S.apply(this,arguments)}}()))}),Dc.apply(this,arguments)}const Dh={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Gr{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function li(y,f,g,_,S,R){V(y.config.authDomain,y,"auth-domain-config-required"),V(y.config.apiKey,y,"invalid-api-key");const H={apiKey:y.config.apiKey,appName:y.name,authType:g,redirectUrl:_,v:se.SDK_VERSION,eventId:S};if(f instanceof Qi){f.setDefaultLanguage(y.languageCode),H.providerId=f.providerId||"",(0,O.xb)(f.getCustomParameters())||(H.customParameters=JSON.stringify(f.getCustomParameters()));for(const[je,Ze]of Object.entries(R||{}))H[je]=Ze}if(f instanceof Bs){const je=f.getScopes().filter(Ze=>""!==Ze);je.length>0&&(H.scopes=je.join(","))}y.tenantId&&(H.tid=y.tenantId);const he=H;for(const je of Object.keys(he))void 0===he[je]&&delete he[je];return`${function Lp({config:y}){return y.emulator?ct(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,O.xO)(he).slice(1)}`}const Hl="webStorageSupport",Up=class Vp{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ji,this._completeRedirectFn=tt,this._overrideRedirectResult=Bl}_openPopup(f,g,_,S){var R=this;return(0,d.Z)(function*(){var H;q(null===(H=R.eventManagers[f._key()])||void 0===H?void 0:H.manager,"_initialize() not called before _openPopup()");const he=li(f,g,_,Ne(),S);return function Ty(y,f,g,_=500,S=600){const R=Math.max((window.screen.availHeight-S)/2,0).toString(),H=Math.max((window.screen.availWidth-_)/2,0).toString();let he="";const je=Object.assign(Object.assign({},Dh),{width:_.toString(),height:S.toString(),top:R,left:H}),Ze=(0,O.z$)().toLowerCase();g&&(he=Gt(Ze)?"_blank":g),Je(Ze)&&(f=f||"http://localhost",je.scrollbars="yes");const yt=Object.entries(je).reduce((Un,[Si,vu])=>`${Un}${Si}=${vu},`,"");if(function lr(y=(0,O.z$)()){var f;return Ln(y)&&!(null===(f=window.navigator)||void 0===f||!f.standalone)}(Ze)&&"_self"!==he)return function uu(y,f){const g=document.createElement("a");g.href=y,g.target=f;const _=document.createEvent("MouseEvent");_.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(_)}(f||"",he),new Gr(null);const at=window.open(f||"",he,yt);V(at,y,"popup-blocked");try{at.focus()}catch{}return new Gr(at)}(f,he,_s())})()}_openRedirect(f,g,_,S){var R=this;return(0,d.Z)(function*(){return yield R._originValidation(f),function Do(y){pn().location.href=y}(li(f,g,_,Ne(),S)),new Promise(()=>{})})()}_initialize(f){const g=f._key();if(this.eventManagers[g]){const{manager:S,promise:R}=this.eventManagers[g];return S?Promise.resolve(S):(q(R,"If manager is not set, promise should be"),R)}const _=this.initAndGetManager(f);return this.eventManagers[g]={promise:_},_.catch(()=>{delete this.eventManagers[g]}),_}initAndGetManager(f){var g=this;return(0,d.Z)(function*(){const _=yield function jl(y){return Dc.apply(this,arguments)}(f),S=new xo(f);return _.register("authEvent",R=>(V(R?.authEvent,f,"invalid-auth-event"),{status:S.onEvent(R.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[f._key()]={manager:S},g.iframes[f._key()]=_,S})()}_isIframeWebStorageSupported(f,g){this.iframes[f._key()].send(Hl,{type:Hl},S=>{var R;const H=null===(R=S?.[0])||void 0===R?void 0:R[Hl];void 0!==H&&g(!!H),Se(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function Eh(y){return zn.apply(this,arguments)}(f)),this.originValidationPromises[g]}get _shouldInitProactively(){return rh()||Rt()||Ln()}};class gr{constructor(f){this.factorId=f}_process(f,g,_){switch(g.type){case"enroll":return this._finalizeEnroll(f,g.credential,_);case"signin":return this._finalizeSignIn(f,g.credential);default:return ye("unexpected MultiFactorSessionType")}}}class Ts extends gr{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new Ts(f)}_finalizeEnroll(f,g,_){return function Op(y,f){return fn(y,"POST","/v2/accounts/mfaEnrollment:finalize",dt(y,f))}(f,{idToken:g,displayName:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,g){return function hh(y,f){return fn(y,"POST","/v2/accounts/mfaSignIn:finalize",dt(y,f))}(f,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let mr=(()=>{class y{constructor(){}static assertion(g){return Ts._fromCredential(g)}}return y.FACTOR_ID="phone",y})();var Gl="@firebase/auth";class zl{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var g=this;return(0,d.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const g=this.auth.onIdTokenChanged(_=>{f(_?.stsTokenManager.accessToken||null)});this.internalListeners.set(f,g),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const g=this.internalListeners.get(f);!g||(this.internalListeners.delete(f),g(),this.updateProactiveRefresh())}assertAuthConfigured(){V(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function At(){return window}function Zs(){return(Zs=(0,d.Z)(function*(y,f,g){var _;const{BuildInfo:S}=At();q(f.sessionId,"AuthEvent did not contain a session ID");const R=yield $p(f.sessionId),H={};return Ln()?H.ibi=S.packageName:pt()?H.apn=S.packageName:Se(y,"operation-not-supported-in-this-environment"),S.displayName&&(H.appDisplayName=S.displayName),H.sessionId=R,li(y,g,f.type,void 0,null!==(_=f.eventId)&&void 0!==_?_:void 0,H)})).apply(this,arguments)}function Ks(){return(Ks=(0,d.Z)(function*(y){const{BuildInfo:f}=At(),g={};Ln()?g.iosBundleId=f.packageName:pt()?g.androidPackageName=f.packageName:Se(y,"operation-not-supported-in-this-environment"),yield pr(y,g)})).apply(this,arguments)}function Ss(){return(Ss=(0,d.Z)(function*(y,f,g){const{cordova:_}=At();let S=()=>{};try{yield new Promise((R,H)=>{let he=null;function je(){var at;R();const Un=null===(at=_.plugins.browsertab)||void 0===at?void 0:at.close;"function"==typeof Un&&Un(),"function"==typeof g?.close&&g.close()}function Ze(){he||(he=window.setTimeout(()=>{H(ve(y,"redirect-cancelled-by-user"))},2e3))}function yt(){"visible"===document?.visibilityState&&Ze()}f.addPassiveListener(je),document.addEventListener("resume",Ze,!1),pt()&&document.addEventListener("visibilitychange",yt,!1),S=()=>{f.removePassiveListener(je),document.removeEventListener("resume",Ze,!1),document.removeEventListener("visibilitychange",yt,!1),he&&window.clearTimeout(he)}})}finally{S()}})).apply(this,arguments)}function $p(y){return Ro.apply(this,arguments)}function Ro(){return(Ro=(0,d.Z)(function*(y){const f=Sh(y),g=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(g)).map(S=>S.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Sh(y){if(q(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(y);const f=new ArrayBuffer(y.length),g=new Uint8Array(f);for(let _=0;_<y.length;_++)g[_]=y.charCodeAt(_);return g}(0,O.Pz)("authIdTokenMaxAge"),function cu(y){(0,se._registerComponent)(new fe.wA("auth",(f,{options:g})=>{const _=f.getProvider("app").getImmediate(),S=f.getProvider("heartbeat"),{apiKey:R,authDomain:H}=_.options;return((he,je)=>{V(R&&!R.includes(":"),"invalid-api-key",{appName:he.name}),V(!H?.includes(":"),"argument-error",{appName:he.name});const Ze={apiKey:R,authDomain:H,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Na(y)},yt=new ll(he,je,Ze);return function Le(y,f){const g=f?.persistence||[],_=(Array.isArray(g)?g:[g]).map(ie);f?.errorMap&&y._updateErrorMap(f.errorMap),y._initializeWithPersistence(_,f?.popupRedirectResolver)}(yt,g),yt})(_,S)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,g,_)=>{f.getProvider("auth-internal").initialize()})),(0,se._registerComponent)(new fe.wA("auth-internal",f=>{const g=_n(f.getProvider("auth").getImmediate());return new zl(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,se.registerVersion)(Gl,"0.21.1",function Rr(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,se.registerVersion)(Gl,"0.21.1","esm2017")}("Browser");class Ys extends xo{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(f)),super.onEvent(f)}initialized(){var f=this;return(0,d.Z)(function*(){yield f.initPromise})()}}function Hp(y){return Ac.apply(this,arguments)}function Ac(){return(Ac=(0,d.Z)(function*(y){const f=yield Mh()._get(xh(y));return f&&(yield Mh()._remove(xh(y))),f})).apply(this,arguments)}function Kl(){const y=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<20;g++){const _=Math.floor(Math.random()*f.length);y.push(f.charAt(_))}return y.join("")}function Mh(){return ie(ac)}function xh(y){return z("authEvent",y.config.apiKey,y.name)}function Mc(y){if(!y?.includes("?"))return{};const[f,...g]=y.split("?");return(0,O.zd)(g.join("?"))}const Rh=class Rc{constructor(){this._redirectPersistence=ji,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=tt,this._overrideRedirectResult=Bl}_initialize(f){var g=this;return(0,d.Z)(function*(){const _=f._key();let S=g.eventManagers.get(_);return S||(S=new Ys(f),g.eventManagers.set(_,S),g.attachCallbackListeners(f,S)),S})()}_openPopup(f){Se(f,"operation-not-supported-in-this-environment")}_openRedirect(f,g,_,S){var R=this;return(0,d.Z)(function*(){!function Sc(y){var f,g,_,S,R,H,he,je,Ze,yt;const at=At();V("function"==typeof(null===(f=at?.universalLinks)||void 0===f?void 0:f.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),V(typeof(null===(g=at?.BuildInfo)||void 0===g?void 0:g.packageName)<"u",y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),V("function"==typeof(null===(R=null===(S=null===(_=at?.cordova)||void 0===_?void 0:_.plugins)||void 0===S?void 0:S.browsertab)||void 0===R?void 0:R.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),V("function"==typeof(null===(je=null===(he=null===(H=at?.cordova)||void 0===H?void 0:H.plugins)||void 0===he?void 0:he.browsertab)||void 0===je?void 0:je.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),V("function"==typeof(null===(yt=null===(Ze=at?.cordova)||void 0===Ze?void 0:Ze.InAppBrowser)||void 0===yt?void 0:yt.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const H=yield R._initialize(f);yield H.initialized(),H.resetRedirect(),function Pp(){oi.clear()}(),yield R._originValidation(f);const he=function Zl(y,f,g=null){return{type:f,eventId:g,urlResponse:null,sessionId:Kl(),postBody:null,tenantId:y.tenantId,error:ve(y,"no-auth-event")}}(f,_,S);yield function Ah(y,f){return Mh()._set(xh(y),f)}(f,he);const je=yield function jp(y,f,g){return Zs.apply(this,arguments)}(f,he,g),Ze=yield function Tc(y){const{cordova:f}=At();return new Promise(g=>{f.plugins.browsertab.isAvailable(_=>{let S=null;_?f.plugins.browsertab.openUrl(y):S=f.InAppBrowser.open(y,function co(y=(0,O.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),g(S)})})}(je);return function My(y,f,g){return Ss.apply(this,arguments)}(f,H,Ze)})()}_isIframeWebStorageSupported(f,g){throw new Error("Method not implemented.")}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function Ay(y){return Ks.apply(this,arguments)}(f)),this.originValidationPromises[g]}attachCallbackListeners(f,g){const{universalLinks:_,handleOpenURL:S,BuildInfo:R}=At(),H=setTimeout((0,d.Z)(function*(){yield Hp(f),g.onEvent(No())}),500),he=function(){var yt=(0,d.Z)(function*(at){clearTimeout(H);const Un=yield Hp(f);let Si=null;Un&&at?.url&&(Si=function xy(y,f){var g,_;const S=function Ny(y){const f=Mc(y),g=f.link?decodeURIComponent(f.link):void 0,_=Mc(g).link,S=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return Mc(S).link||S||_||g||y}(f);if(S.includes("/__/auth/callback")){const R=Mc(S),H=R.firebaseError?function Ry(y){try{return JSON.parse(y)}catch{return null}}(decodeURIComponent(R.firebaseError)):null,he=null===(_=null===(g=H?.code)||void 0===g?void 0:g.split("auth/"))||void 0===_?void 0:_[1],je=he?ve(he):null;return je?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:je,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:S,postBody:null}}return null}(Un,at.url)),g.onEvent(Si||No())});return function(Un){return yt.apply(this,arguments)}}();typeof _<"u"&&"function"==typeof _.subscribe&&_.subscribe(null,he);const je=S,Ze=`${R.packageName.toLowerCase()}://`;At().handleOpenURL=function(){var yt=(0,d.Z)(function*(at){if(at.toLowerCase().startsWith(Ze)&&he({url:at}),"function"==typeof je)try{je(at)}catch(Un){console.error(Un)}});return function(at){return yt.apply(this,arguments)}}()}};function No(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:ve("no-auth-event")}}function du(){var y;return(null===(y=self?.location)||void 0===y?void 0:y.protocol)||null}function fu(y=(0,O.z$)()){return!("file:"!==du()&&"ionic:"!==du()&&"capacitor:"!==du()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function Oo(){try{const y=self.localStorage,f=_s();if(y)return y.setItem(f,"1"),y.removeItem(f),!function Oh(y=(0,O.z$)()){return function Oc(){return(0,O.w1)()&&11===document?.documentMode}()||function qp(y=(0,O.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,O.hl)()}catch{return Yl()&&(0,O.hl)()}return!1}function Yl(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Pc(){return(function hu(){return"http:"===du()||"https:"===du()}()||(0,O.ru)()||fu())&&!function Nc(){return(0,O.b$)()||(0,O.UG)()}()&&Oo()&&!Yl()}function Ql(){return fu()&&typeof document<"u"}function Po(){return(Po=(0,d.Z)(function*(){return!!Ql()&&new Promise(y=>{const f=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(f),y(!0)})})})).apply(this,arguments)}const qr={LOCAL:"local",NONE:"none",SESSION:"session"},Qs=V,Xl="persistence";function ed(y){return qi.apply(this,arguments)}function qi(){return(qi=(0,d.Z)(function*(y){yield y._initializationPromise;const f=ko(),g=z(Xl,y.config.apiKey,y.name);f&&f.setItem(g,y._getPersistence())})).apply(this,arguments)}function ko(){var y;try{return(null===(y=function pu(){return typeof window<"u"?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch{return null}}const td=V;class As{constructor(){this.browserResolver=ie(Up),this.cordovaResolver=ie(Rh),this.underlyingResolver=null,this._redirectPersistence=ji,this._completeRedirectFn=tt,this._overrideRedirectResult=Bl}_initialize(f){var g=this;return(0,d.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,g,_,S){var R=this;return(0,d.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openPopup(f,g,_,S)})()}_openRedirect(f,g,_,S){var R=this;return(0,d.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openRedirect(f,g,_,S)})()}_isIframeWebStorageSupported(f,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,g)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return Ql()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return td(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,d.Z)(function*(){if(f.underlyingResolver)return;const g=yield function Jl(){return Po.apply(this,arguments)}();f.underlyingResolver=g?f.cordovaResolver:f.browserResolver})()}}function kh(y){return y.unwrap()}function Fh(y){return zp(y)}function zp(y){const{_tokenResponse:f}=y instanceof O.ZR?y.customData:y;if(!f)return null;if(!(y instanceof O.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return wc.credentialFromResult(y);const g=f.providerId;if(!g||"password"===g)return null;let _;switch(g){case"google.com":_=oh;break;case"facebook.com":_=pl;break;case"github.com":_=Wu;break;case"twitter.com":_=ml;break;default:const{oauthIdToken:S,oauthAccessToken:R,oauthTokenSecret:H,pendingToken:he,nonce:je}=f;return R||H||S||he?he?g.startsWith("saml.")?Pa._create(g,he):ei._fromParams({providerId:g,signInMethod:g,pendingToken:he,idToken:S,accessToken:R}):new Zo(g).credential({idToken:S,accessToken:R,rawNonce:je}):null}return y instanceof O.ZR?_.credentialFromError(y):_.credentialFromResult(y)}function di(y,f){return f.catch(g=>{throw g instanceof O.ZR&&function ga(y,f){var g;const _=null===(g=f.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===f?.code)f.resolver=new Vh(y,function er(y,f){var g;const _=(0,O.m9)(y),S=f;return V(f.customData.operationType,_,"argument-error"),V(null===(g=S.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,_,"argument-error"),sc._fromError(_,S)}(y,f));else if(_){const S=zp(f),R=f;S&&(R.credential=S,R.tenantId=_.tenantId||void 0,R.email=_.email||void 0,R.phoneNumber=_.phoneNumber||void 0)}}(y,g),g}).then(g=>{const S=g.user;return{operationType:g.operationType,credential:Fh(g),additionalUserInfo:ch(g),user:Js.getOrCreate(S)}})}function Wp(y,f){return Lh.apply(this,arguments)}function Lh(){return(Lh=(0,d.Z)(function*(y,f){const g=yield f;return{verificationId:g.verificationId,confirm:_=>di(y,g.confirm(_))}})).apply(this,arguments)}class Vh{constructor(f,g){this.resolver=g,this.auth=function nd(y){return y.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return di(kh(this.auth),this.resolver.resolveSignIn(f))}}class Js{constructor(f){this._delegate=f,this.multiFactor=function Za(y){const f=(0,O.m9)(y);return ri.has(f)||ri.set(f,vs._fromUser(f)),ri.get(f)}(f)}static getOrCreate(f){return Js.USER_MAP.has(f)||Js.USER_MAP.set(f,new Js(f)),Js.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var g=this;return(0,d.Z)(function*(){return di(g.auth,Rn(g._delegate,f))})()}linkWithPhoneNumber(f,g){var _=this;return(0,d.Z)(function*(){return Wp(_.auth,function kl(y,f,g){return vc.apply(this,arguments)}(_._delegate,f,g))})()}linkWithPopup(f){var g=this;return(0,d.Z)(function*(){return di(g.auth,function X0(y,f,g){return Ut.apply(this,arguments)}(g._delegate,f,As))})()}linkWithRedirect(f){var g=this;return(0,d.Z)(function*(){return yield ed(_n(g.auth)),function Z(y,f,g){return function Q(y,f,g){return be.apply(this,arguments)}(y,f,g)}(g._delegate,f,As)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var g=this;return(0,d.Z)(function*(){return di(g.auth,Hs(g._delegate,f))})()}reauthenticateWithPhoneNumber(f,g){return Wp(this.auth,function Cy(y,f,g){return yh.apply(this,arguments)}(this._delegate,f,g))}reauthenticateWithPopup(f){return di(this.auth,function J0(y,f,g){return Ul.apply(this,arguments)}(this._delegate,f,As))}reauthenticateWithRedirect(f){var g=this;return(0,d.Z)(function*(){return yield ed(_n(g.auth)),function b(y,f,g){return function M(y,f,g){return F.apply(this,arguments)}(y,f,g)}(g._delegate,f,As)})()}sendEmailVerification(f){return function Xu(y,f){return Cl.apply(this,arguments)}(this._delegate,f)}unlink(f){var g=this;return(0,d.Z)(function*(){return yield function Ko(y,f){return $s.apply(this,arguments)}(g._delegate,f),g})()}updateEmail(f){return function xp(y,f){return nc((0,O.m9)(y),f,null)}(this._delegate,f)}updatePassword(f){return function tc(y,f){return nc((0,O.m9)(y),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function _c(y,f){return vh.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function Ji(y,f){return ni.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,g){return function wo(y,f,g){return wn.apply(this,arguments)}(this._delegate,f,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Js.USER_MAP=new WeakMap;const mu=V;let yu=(()=>{class y{constructor(g,_){if(this.app=g,_.isInitialized())return this._delegate=_.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:S}=g.options;mu(S,"invalid-api-key",{appName:g.name}),mu(S,"invalid-api-key",{appName:g.name});const R=typeof window<"u"?As:void 0;this._delegate=_.initialize({options:{persistence:Py(S,g.name),popupRedirectResolver:R}}),this._delegate._updateErrorMap($e),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Js.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,_){!function Gu(y,f,g){const _=_n(y);V(_._canInitEmulator,_,"emulator-config-failed"),V(/^https?:\/\//.test(f),_,"invalid-emulator-scheme");const S=!!g?.disableWarnings,R=Go(f),{host:H,port:he}=function qo(y){const f=Go(y),g=/(\/\/)?([^?#/]+)/.exec(y.substr(f.length));if(!g)return{host:"",port:null};const _=g[2].split("@").pop()||"",S=/^(\[[^\]]+\])(:|$)/.exec(_);if(S){const R=S[1];return{host:R,port:Wt(_.substr(R.length+1))}}{const[R,H]=_.split(":");return{host:R,port:Wt(H)}}}(f);_.config.emulator={url:`${R}//${H}${null===he?"":`:${he}`}/`},_.settings.appVerificationDisabledForTesting=!0,_.emulatorConfig=Object.freeze({host:H,port:he,protocol:R.replace(":",""),options:Object.freeze({disableWarnings:S})}),S||function Vn(){function y(){const f=document.createElement("p"),g=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,g,_)}applyActionCode(g){return function ja(y,f){return Yu.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return $a(this._delegate,g)}confirmPasswordReset(g,_){return function ta(y,f,g){return bt.apply(this,arguments)}(this._delegate,g,_)}createUserWithEmailAndPassword(g,_){var S=this;return(0,d.Z)(function*(){return di(S._delegate,function Nn(y,f,g){return Il.apply(this,arguments)}(S._delegate,g,_))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function qa(y,f){return _o.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function Dl(y,f){return"EMAIL_SIGNIN"===Wo.parseLink(f)?.operation}(0,g)}getRedirectResult(){var g=this;return(0,d.Z)(function*(){mu(Pc(),g._delegate,"operation-not-supported-in-this-environment");const _=yield function Ye(y,f){return rt.apply(this,arguments)}(g._delegate,As);return _?di(g._delegate,Promise.resolve(_)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function Nh(y,f){_n(y)._logFramework(f)}(this._delegate,g)}onAuthStateChanged(g,_,S){const{next:R,error:H,complete:he}=rd(g,_,S);return this._delegate.onAuthStateChanged(R,H,he)}onIdTokenChanged(g,_,S){const{next:R,error:H,complete:he}=rd(g,_,S);return this._delegate.onIdTokenChanged(R,H,he)}sendSignInLinkToEmail(g,_){return function Zt(y,f,g){return Ju.apply(this,arguments)}(this._delegate,g,_)}sendPasswordResetEmail(g,_){return function Ui(y,f,g){return ea.apply(this,arguments)}(this._delegate,g,_||void 0)}setPersistence(g){var _=this;return(0,d.Z)(function*(){let S;switch(function gu(y,f){Qs(Object.values(qr).includes(f),y,"invalid-persistence-type"),(0,O.b$)()?Qs(f!==qr.SESSION,y,"unsupported-persistence-type"):(0,O.UG)()?Qs(f===qr.NONE,y,"unsupported-persistence-type"):Yl()?Qs(f===qr.NONE||f===qr.LOCAL&&(0,O.hl)(),y,"unsupported-persistence-type"):Qs(f===qr.NONE||Oo(),y,"unsupported-persistence-type")}(_._delegate,g),g){case qr.SESSION:S=ji;break;case qr.LOCAL:S=(yield ie(es)._isAvailable())?es:ac;break;case qr.NONE:S=L;break;default:return Se("argument-error",{appName:_._delegate.name})}return _._delegate.setPersistence(S)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return di(this._delegate,function Ku(y){return ah.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return di(this._delegate,Cn(this._delegate,g))}signInWithCustomToken(g){return di(this._delegate,function ys(y,f){return qn.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,_){return di(this._delegate,function Ce(y,f,g){return Cn((0,O.m9)(y),zu.credential(f,g))}(this._delegate,g,_))}signInWithEmailLink(g,_){return di(this._delegate,function Xn(y,f,g){return vo.apply(this,arguments)}(this._delegate,g,_))}signInWithPhoneNumber(g,_){return Wp(this._delegate,function on(y,f,g){return yc.apply(this,arguments)}(this._delegate,g,_))}signInWithPopup(g){var _=this;return(0,d.Z)(function*(){return mu(Pc(),_._delegate,"operation-not-supported-in-this-environment"),di(_._delegate,function Ao(y,f,g){return ou.apply(this,arguments)}(_._delegate,g,As))})()}signInWithRedirect(g){var _=this;return(0,d.Z)(function*(){return mu(Pc(),_._delegate,"operation-not-supported-in-this-environment"),yield ed(_._delegate),function Ec(y,f,g){return function Ds(y,f,g){return I.apply(this,arguments)}(y,f,g)}(_._delegate,g,As)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function El(y,f){return Ha.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=qr,y})();function rd(y,f,g){let _=y;"function"!=typeof y&&({next:_,error:f,complete:g}=y);const S=_;return{next:H=>S(H&&Js.getOrCreate(H)),error:f,complete:g}}function Py(y,f){const g=function Ph(y,f){const g=ko();if(!g)return[];const _=z(Xl,y,f);switch(g.getItem(_)){case qr.NONE:return[L];case qr.LOCAL:return[es,ji];case qr.SESSION:return[ji];default:return[]}}(y,f);if(typeof self<"u"&&!g.includes(es)&&g.push(es),typeof window<"u")for(const _ of[ac,ji])g.includes(_)||g.push(_);return g.includes(L)||g.push(L),g}class id{constructor(){this.providerId="phone",this._delegate=new wc(kh(J.Z.auth()))}static credential(f,g){return wc.credential(f,g)}verifyPhoneNumber(f,g){return this._delegate.verifyPhoneNumber(f,g)}unwrap(){return this._delegate}}id.PHONE_SIGN_IN_METHOD=wc.PHONE_SIGN_IN_METHOD,id.PROVIDER_ID=wc.PROVIDER_ID;const ky=V;class Zp{constructor(f,g,_=J.Z.app()){var S;ky(null===(S=_.options)||void 0===S?void 0:S.apiKey,"invalid-api-key",{appName:_.name}),this._delegate=new ru(f,g,_.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Uh(y){y.INTERNAL.registerComponent(new fe.wA("auth-compat",f=>{const g=f.getProvider("app-compat").getImmediate(),_=f.getProvider("auth");return new yu(g,_)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:zu,FacebookAuthProvider:pl,GithubAuthProvider:Wu,GoogleAuthProvider:oh,OAuthProvider:Zo,SAMLAuthProvider:Ur,PhoneAuthProvider:id,PhoneMultiFactorGenerator:mr,RecaptchaVerifier:Zp,TwitterAuthProvider:ml,Auth:yu,AuthCredential:An,Error:O.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.3.1")}(J.Z)},8766:(st,we,P)=>{P.d(we,{Lj:()=>Se,X3:()=>Pe});var d=P(5861);let O,se;const fe=new WeakMap,le=new WeakMap,ce=new WeakMap,B=new WeakMap,j=new WeakMap;let Ie={get(V,ye,q){if(V instanceof IDBTransaction){if("done"===ye)return le.get(V);if("objectStoreNames"===ye)return V.objectStoreNames||ce.get(V);if("store"===ye)return q.objectStoreNames[1]?void 0:q.objectStore(q.objectStoreNames[0])}return De(V[ye])},set:(V,ye,q)=>(V[ye]=q,!0),has:(V,ye)=>V instanceof IDBTransaction&&("done"===ye||"store"===ye)||ye in V};function de(V){return"function"==typeof V?function nt(V){return V!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function re(){return se||(se=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(V)?function(...ye){return V.apply(Ee(this),ye),De(fe.get(this))}:function(...ye){return De(V.apply(Ee(this),ye))}:function(ye,...q){const K=V.call(Ee(this),ye,...q);return ce.set(K,ye.sort?ye.sort():[ye]),De(K)}}(V):(V instanceof IDBTransaction&&function Ue(V){if(le.has(V))return;const ye=new Promise((q,K)=>{const ie=()=>{V.removeEventListener("complete",te),V.removeEventListener("error",Le),V.removeEventListener("abort",Le)},te=()=>{q(),ie()},Le=()=>{K(V.error||new DOMException("AbortError","AbortError")),ie()};V.addEventListener("complete",te),V.addEventListener("error",Le),V.addEventListener("abort",Le)});le.set(V,ye)}(V),((V,ye)=>ye.some(q=>V instanceof q))(V,function oe(){return O||(O=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(V,Ie):V)}function De(V){if(V instanceof IDBRequest)return function W(V){const ye=new Promise((q,K)=>{const ie=()=>{V.removeEventListener("success",te),V.removeEventListener("error",Le)},te=()=>{q(De(V.result)),ie()},Le=()=>{K(V.error),ie()};V.addEventListener("success",te),V.addEventListener("error",Le)});return ye.then(q=>{q instanceof IDBCursor&&fe.set(q,V)}).catch(()=>{}),j.set(ye,V),ye}(V);if(B.has(V))return B.get(V);const ye=de(V);return ye!==V&&(B.set(V,ye),j.set(ye,V)),ye}const Ee=V=>j.get(V);function Pe(V,ye,{blocked:q,upgrade:K,blocking:ie,terminated:te}={}){const Le=indexedDB.open(V,ye),Ne=De(Le);return K&&Le.addEventListener("upgradeneeded",ot=>{K(De(Le.result),ot.oldVersion,ot.newVersion,De(Le.transaction))}),q&&Le.addEventListener("blocked",()=>q()),Ne.then(ot=>{te&&ot.addEventListener("close",()=>te()),ie&&ot.addEventListener("versionchange",()=>ie())}).catch(()=>{}),Ne}function Se(V,{blocked:ye}={}){const q=indexedDB.deleteDatabase(V);return ye&&q.addEventListener("blocked",()=>ye()),De(q).then(()=>{})}const ve=["get","getKey","getAll","getAllKeys","count"],Ae=["put","add","delete","clear"],Fe=new Map;function Re(V,ye){if(!(V instanceof IDBDatabase)||ye in V||"string"!=typeof ye)return;if(Fe.get(ye))return Fe.get(ye);const q=ye.replace(/FromIndex$/,""),K=ye!==q,ie=Ae.includes(q);if(!(q in(K?IDBIndex:IDBObjectStore).prototype)||!ie&&!ve.includes(q))return;const te=function(){var Le=(0,d.Z)(function*(Ne,...ot){const Yt=this.transaction(Ne,ie?"readwrite":"readonly");let an=Yt.store;return K&&(an=an.index(ot.shift())),(yield Promise.all([an[q](...ot),ie&&Yt.done]))[0]});return function(ot){return Le.apply(this,arguments)}}();return Fe.set(ye,te),te}!function $e(V){Ie=V(Ie)}(V=>({...V,get:(ye,q,K)=>Re(ye,q)||V.get(ye,q,K),has:(ye,q)=>!!Re(ye,q)||V.has(ye,q)}))},5861:(st,we,P)=>{function d(O,se,oe,re,fe,le,ce){try{var B=O[le](ce),j=B.value}catch(W){return void oe(W)}B.done?se(j):Promise.resolve(j).then(re,fe)}function J(O){return function(){var se=this,oe=arguments;return new Promise(function(re,fe){var le=O.apply(se,oe);function ce(j){d(le,re,fe,ce,B,"next",j)}function B(j){d(le,re,fe,ce,B,"throw",j)}ce(void 0)})}}P.d(we,{Z:()=>J})}},st=>{st(st.s=6821)}]);